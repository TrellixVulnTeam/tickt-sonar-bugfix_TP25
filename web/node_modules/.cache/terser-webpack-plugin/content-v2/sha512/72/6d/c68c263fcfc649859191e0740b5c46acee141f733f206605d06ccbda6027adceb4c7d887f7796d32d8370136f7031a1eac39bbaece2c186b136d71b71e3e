{"code":"(this[\"webpackJsonptickt-web\"]=this[\"webpackJsonptickt-web\"]||[]).push([[30],{304:function(e,t,a){\"use strict\";t.a=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\"},312:function(e,t,a){\"use strict\";t.a=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\"},396:function(e,t,a){\"use strict\";t.a=a.p+\"static/media/not-found.c5fd5f1f.png\"},599:function(e,t,a){\"use strict\";a.r(t);var n=a(37),o=a(44),i=a(41),s=a(2),c=a.n(s),r=a(12),l=a(17),d=a(0),u=a(76),m=a(312),v=a(304),j=a(4),A=a(53),b=a(66),g=a(45),p=a(6),O=a(221),f=a(20),h=a(396),x=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\",I=a(93),N=a(25),U=a(19),w=a(262),y=a.n(w),k=a(48),T=a(1),C=\"\",B=[\"jpeg\",\"jpg\",\"png\",\"mp4\",\"wmv\",\"avi\"],D=function(e){var t,a,n,o,s,m,b,w,D,S=Object(d.useRef)(null),R=Object(d.useState)(null===(t=f.a.getItem(\"userInfo\"))||void 0===t?void 0:t._id),E=Object(l.a)(R,1)[0],_=Object(d.useState)(!1),Q=Object(l.a)(_,2),M=Q[0],Y=Q[1],F=Object(d.useState)(!1),z=Object(l.a)(F,2),L=z[0],q=z[1],H=Object(d.useState)(null),V=Object(l.a)(H,2),K=V[0],X=V[1],G=Object(d.useState)(\"\"),Z=Object(l.a)(G,2),P=Z[0],W=Z[1],J=Object(d.useState)([]),$=Object(l.a)(J,2),ee=$[0],te=$[1],ae=Object(d.useState)(!1),ne=Object(l.a)(ae,2),oe=ne[0],ie=ne[1],se=Object(d.useState)([]),ce=Object(l.a)(se,2),re=ce[0],le=ce[1],de=Object(d.useState)(!1),ue=Object(l.a)(de,2),me=ue[0],ve=ue[1],je=Object(d.useState)(1),Ae=Object(l.a)(je,2),be=Ae[0],ge=Ae[1],pe=Object(d.useState)({}),Oe=Object(l.a)(pe,2),fe=Oe[0],he=Oe[1],xe=Object(d.useState)(\"\"),Ie=Object(l.a)(xe,2);Ie[0],Ie[1];Object(d.useEffect)((function(){\"\"!==e.roomId&&(C=\"\",Object(g.f)(e.roomId,Ue),ge(1),he({}),le([]),X(null),Y(!1))}),[e.roomId]),console.log(\"props.roomData: \",e.roomData),Object(d.useEffect)((function(){Ne()}));var Ne=function(){if(null!==(null===S||void 0===S?void 0:S.current)){var e=S.current.scrollHeight-S.current.clientHeight;S.current.scrollTo(0,e)}},Ue=function(e){console.log(\"arrmsg: \",e),te(e)};Object(d.useEffect)((function(){var e={},t=[],a=1;ee.length&&(t=ee.filter((function(t,n){if(\"image\"===t.messageType||\"video\"===t.messageType)return e[\"\".concat(n)]=a++,t})),le(t),he(e))}),[ee]),console.log(\"itemsMedia: \",re,\"fsSlideListner\",fe);var we=function(t){var a=Object(i.a)(e.inBoxData),n=a.findIndex((function(t){return t.roomId===e.roomId}));a[n].lastMsg=t,a.splice(n,1),a.unshift(e.inBoxData[n]),e.setInBoxData(a),console.log(\"lastMsg: \",t),console.log(\"currentIndex: \",n),console.log(\"newInboxData: \",a)},ye=function(){var t=Object(r.a)(c.a.mark((function t(){var a,n,o,i,s,r,l,d,u,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!P||\"\"===P.trimLeft()){t.next=7;break}return W(\"\"),t.next=4,Object(g.l)(e.roomId,P);case 4:(u=t.sent)&&(null===(a=e.roomData)||void 0===a||null===(n=a.oppUserInfo)||void 0===n?void 0:n.deviceToken)&&(null===(o=e.roomData)||void 0===o||null===(i=o.oppUserInfo)||void 0===i?void 0:i.deviceType)&&(!(null===(s=e.roomData)||void 0===s||null===(r=s.oppUserInfo)||void 0===r?void 0:r.hasOwnProperty(\"isNotification\"))||(null===(l=e.roomData)||void 0===l||null===(d=l.oppUserInfo)||void 0===d?void 0:d.isNotification))&&(Be(u),m={timeStamp:k.b.getCurrentTimeStamp()},k.b.moE_SendEvent(U.a.CHAT,m),k.a.mixP_SendEvent(U.a.CHAT,m)),we(u);case 7:case\"end\":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ke=function(){var t=Object(r.a)(c.a.mark((function t(a,n){var o,i,s,r,l,d,u,m,v;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||\"\"===a){t.next=6;break}return t.next=3,Object(g.k)(e.roomId,a,n);case 3:(v=t.sent)&&(null===(o=e.roomData)||void 0===o||null===(i=o.oppUserInfo)||void 0===i?void 0:i.deviceToken)&&(null===(s=e.roomData)||void 0===s||null===(r=s.oppUserInfo)||void 0===r?void 0:r.deviceType)&&(!(null===(l=e.roomData)||void 0===l||null===(d=l.oppUserInfo)||void 0===d?void 0:d.hasOwnProperty(\"isNotification\"))||(null===(u=e.roomData)||void 0===u||null===(m=u.oppUserInfo)||void 0===m?void 0:m.isNotification))&&Be(v),we(v);case 6:W(\"\");case 7:case\"end\":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Te=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,o,i,s,r,l,d,u,m,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,Object(O.F)(t);case 3:(a=e.sent).success&&(v={jobDescription:(null===(n=a.data)||void 0===n?void 0:n.details)||\"\",jobId:(null===(o=a.data)||void 0===o?void 0:o.jobId)||\"\",jobName:(null===(i=a.data)||void 0===i?void 0:i.jobName)||\"\",amount:(null===(s=a.data)||void 0===s?void 0:s.amount)||\"\",locationName:(null===(r=a.data)||void 0===r?void 0:r.locationName)||\"\",fromDate:(null===(l=a.data)||void 0===l?void 0:l.fromDate)||\"\",toDate:(null===(d=a.data)||void 0===d?void 0:d.toDate)||\"\",duration:(null===(u=a.data)||void 0===u?void 0:u.duration)||\"\",status:(null===(m=a.data)||void 0===m?void 0:m.status)||\"\"},X(v),q(!1));case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(t,a){var n,o,i,s,c,r,l,d,u,m,v,j,A,b,g,p;switch(Number(t)){case 1:return{app_icon:\"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",title:\"Tickt App\",notificationText:\"\".concat(null===(n=f.a.getItem(\"userInfo\"))||void 0===n?void 0:n.userName,\" send you a message\"),senderName:\"\".concat(null===(o=f.a.getItem(\"userInfo\"))||void 0===o?void 0:o.userName),messageType:\"\".concat(null===a||void 0===a?void 0:a.messageType),messageText:\"\".concat(\"text\"===(null===a||void 0===a?void 0:a.messageType)?null===a||void 0===a?void 0:a.messageText:\"\"),room_id:null===a||void 0===a?void 0:a.messageRoomId,image:null===(i=f.a.getItem(\"userInfo\"))||void 0===i?void 0:i.user_image,notificationType:25,sound:\"default\"};case 2:return{body:null===a||void 0===a?void 0:a.messageText,messageText:null===a||void 0===a?void 0:a.messageText,sender:{first_name:null===(s=f.a.getItem(\"userInfo\"))||void 0===s?void 0:s.userName,device_token:f.a.getItem(\"fcmToken\"),user_id:null===(c=f.a.getItem(\"userInfo\"))||void 0===c?void 0:c._id,device_type:2},jobId:null===a||void 0===a||null===(r=a.messageRoomId)||void 0===r||null===(l=r.split(\"_\"))||void 0===l?void 0:l[0],badge:1,device_type:2,title:null===(d=f.a.getItem(\"userInfo\"))||void 0===d?void 0:d.userName,jobName:null===(u=e.roomData)||void 0===u?void 0:u.jobName,notification_type:50,sound:\"default\",messageId:null===a||void 0===a?void 0:a.messageId};case 3:return{notification:{body:null===a||void 0===a?void 0:a.messageText,title:null===(m=f.a.getItem(\"userInfo\"))||void 0===m?void 0:m.userName},data:{body:null===a||void 0===a?void 0:a.messageText,messageText:null===a||void 0===a?void 0:a.messageText,sender:{first_name:null===(v=f.a.getItem(\"userInfo\"))||void 0===v?void 0:v.userName,device_token:f.a.getItem(\"fcmToken\"),user_id:null===(j=f.a.getItem(\"userInfo\"))||void 0===j?void 0:j._id,device_type:2},jobId:null===a||void 0===a||null===(A=a.messageRoomId)||void 0===A||null===(b=A.split(\"_\"))||void 0===b?void 0:b[0],badge:1,device_type:2,title:null===(g=f.a.getItem(\"userInfo\"))||void 0===g?void 0:g.userName,jobName:null===(p=e.roomData)||void 0===p?void 0:p.jobName,notification_type:50,sound:\"default\",messageId:null===a||void 0===a?void 0:a.messageId}};default:return}},Be=function(){var t=Object(r.a)(c.a.mark((function t(a){var n,o,i,s,r,l,d,u,m,v,j,A,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j=Ce(null===(n=e.roomData)||void 0===n||null===(o=n.oppUserInfo)||void 0===o?void 0:o.deviceType,a),A=Object(p.a)(Object(p.a)(Object(p.a)({to:\"\".concat(null===(i=e.roomData)||void 0===i||null===(s=i.oppUserInfo)||void 0===s?void 0:s.deviceToken)},1==(null===(r=e.roomData)||void 0===r||null===(l=r.oppUserInfo)||void 0===l?void 0:l.deviceType)&&{data:j}),2==(null===(d=e.roomData)||void 0===d||null===(u=d.oppUserInfo)||void 0===u?void 0:u.deviceType)&&{notification:j}),3==(null===(m=e.roomData)||void 0===m||null===(v=m.oppUserInfo)||void 0===v?void 0:v.deviceType)&&{notification:null===j||void 0===j?void 0:j.notification,data:null===j||void 0===j?void 0:j.data}),b={\"Content-Type\":\"application/json\",Authorization:U.b.FcmHeaderAuthorizationKey},t.next=5,fetch(\"https://fcm.googleapis.com/fcm/send\",{method:\"POST\",headers:b,body:JSON.stringify(A)});case 5:200===t.sent.status?console.log(\"Chat push notification send to opposite user: success\"):console.log(\"Chat push notification send to opposite user: failure\");case 7:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),De=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,o,i,s,r,l,d,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=10,i=new FormData,s=t.target.files[0],r=null===s||void 0===s||null===(a=s.type)||void 0===a||null===(n=a.split(\"/\")[1])||void 0===n?void 0:n.toLowerCase(),l=(null===s||void 0===s?void 0:s.size)/1024/1024,[\"mp4\",\"wmv\",\"avi\"].includes(r)&&(o=20),!(B.indexOf(r)<0||l>o)){e.next=9;break}return Object(j.c)(!0,\"The file must be in proper format or size\"),e.abrupt(\"return\");case 9:return i.append(\"file\",s),ie(!0),d=[\"jpeg\",\"jpg\",\"png\"].includes(r)?1:[\"mp4\",\"wmv\",\"avi\"].includes(r)?2:null,e.next=14,Object(N.l)(i);case 14:(u=e.sent).success&&u.imgUrl&&(1===d?ke(u.imgUrl,\"image\"):2===d?ke(u.imgUrl,\"video\"):Object(j.c)(!0,\"There is some technical issue\"),ie(!1));case 16:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e,t){switch(0===t&&(C=\"\"),e.messageType){case\"text\":return function(e){var t=Object(A.c)(e.messageTimestamp,\"day\"),a=e.senderId===E?\"message\":\"message recive_msg\";return\"\"===C||C!==t?(C=t,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(\"div\",{className:\"date_time\",children:Object(T.jsx)(\"span\",{children:t})}),Object(T.jsx)(\"div\",{className:\"\".concat(a),children:Object(T.jsxs)(\"p\",{className:\"\".concat(e.senderId===E?\"mark\":\"\"),children:[e.messageText,Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})]})):Object(T.jsx)(\"div\",{className:\"\".concat(a),children:Object(T.jsxs)(\"p\",{className:\"\".concat(e.senderId===E?\"mark\":\"\"),children:[e.messageText,Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})}(e);case\"image\":return function(e,t){var a=Object(A.c)(e.messageTimestamp,\"day\"),n=e.senderId===E?\"message\":\"message recive_msg\";return\"\"===C||C!==a?(C=a,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(\"div\",{className:\"date_time\",children:Object(T.jsx)(\"span\",{children:a})}),Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media\",children:[Object(T.jsx)(\"img\",{src:e.mediaUrl||h.a,alt:\"media\",\"async-src\":e.mediaUrl||h.a,decoding:\"async\",loading:\"lazy\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=h.a)},onClick:function(){ve((function(e){return!e})),ge(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})]})):Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media\",children:[Object(T.jsx)(\"img\",{src:e.mediaUrl||h.a,alt:\"media\",\"async-src\":e.mediaUrl||h.a,decoding:\"async\",loading:\"lazy\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=h.a)},onClick:function(){ve((function(e){return!e})),ge(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})}(e,t);case\"video\":return function(e,t){var a=Object(A.c)(e.messageTimestamp,\"day\"),n=e.senderId===E?\"message\":\"message recive_msg\";return\"\"===C||C!==a?(C=a,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(\"div\",{className:\"date_time\",children:Object(T.jsx)(\"span\",{children:a})}),Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media media_video \",children:[Object(T.jsx)(\"video\",{src:e.mediaUrl||h.a,poster:x,onClick:function(){ve((function(e){return!e})),ge(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})]})):Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media media_video \",children:[Object(T.jsx)(\"video\",{src:e.mediaUrl||h.a,poster:x,onClick:function(){ve((function(e){return!e})),ge(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})}(e,t)}},Re=function(e){var t=[],a=[];return e.length&&e.forEach((function(e){\"video\"===e.messageType&&(t.push(e.mediaUrl),a.push(\"video\")),\"image\"===e.messageType&&(t.push(e.mediaUrl),a.push(\"image\"))})),{sources:t,types:a}}(re),Ee=Re.sources,_e=Re.types;return e.isNoRecords?Object(T.jsx)(\"div\",{className:\"detail_col\",children:Object(T.jsx)(\"div\",{className:\"flex_row\",children:Object(T.jsx)(\"div\",{})})}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(y.a,{toggler:me,slide:be,sources:Ee,types:_e,onClose:function(){ge(1)}},null===Ee||void 0===Ee?void 0:Ee.length),Object(T.jsx)(\"div\",{className:\"detail_col\",children:Object(T.jsxs)(\"div\",{className:\"flex_row\",children:[Object(T.jsxs)(\"div\",{className:\"chat_col \".concat(M?\"active\":\"\"),children:[Object(T.jsxs)(\"div\",{className:\"chat_user\",children:[Object(T.jsx)(\"figure\",{className:\"u_img\",children:Object(T.jsx)(\"img\",{src:(null===(a=e.roomData)||void 0===a||null===(n=a.oppUserInfo)||void 0===n?void 0:n.image)||u.a,alt:\"user-img\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=u.a)}})}),Object(T.jsx)(\"span\",{className:\"name\",onClick:function(){var t,a,n,o;2===f.a.getItem(\"userType\")?e.history.push(\"/tradie-info?tradeId=\".concat(null===(t=e.roomData)||void 0===t||null===(a=t.oppUserInfo)||void 0===a?void 0:a.userId,\"&hideInvite=true\")):e.history.push(\"/builder-info?builderId=\".concat(null===(n=e.roomData)||void 0===n||null===(o=n.oppUserInfo)||void 0===o?void 0:o.userId))},children:null===(o=e.roomData)||void 0===o||null===(s=o.oppUserInfo)||void 0===s?void 0:s.name}),!M&&Object(T.jsxs)(\"span\",{onClick:function(){var t;Y(!0),K||Te(null===(t=e.roomData)||void 0===t?void 0:t.jobId)},className:\"view_detail\",children:[\"View Job Details\",Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\",alt:\"view-more\"})]})]}),Object(T.jsxs)(\"div\",{className:\"message_wrapr\",ref:S,children:[ee.length>0&&ee.map((function(e,t){return Se(e,t)})),Object(T.jsx)(\"div\",{className:\"date_time\",children:(null===(m=e.roomData)||void 0===m||null===(b=m.oppUserInfo)||void 0===b?void 0:b.isBlock)&&Object(T.jsx)(\"i\",{style:{color:\"#929292\"},children:\"You can no longer chat with the user\"})})]}),!(null===(w=e.roomData)||void 0===w||null===(D=w.oppUserInfo)||void 0===D?void 0:D.isBlock)&&Object(T.jsx)(\"div\",{className:\"send_msg\",children:Object(T.jsxs)(\"div\",{className:\"text_field\",children:[Object(T.jsx)(\"label\",{className:\"upload_item\",htmlFor:\"upload_item\",children:Object(T.jsx)(\"span\",{className:\"detect_icon_ltr\",children:Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\",alt:\"media\"})})}),Object(T.jsx)(\"input\",{id:\"upload_item\",className:\"hide\",type:\"file\",accept:\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\",onChange:De,disabled:oe}),Object(T.jsx)(\"textarea\",{placeholder:\"Message..\",onKeyDown:function(e){\"Enter\"===e.key&&ye()},value:P,onChange:function(e){return W(e.target.value)}}),Object(T.jsx)(\"span\",{className:\"detect_icon\",children:Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\",alt:\"send\",onClick:ye})})]})})]}),M&&L?Object(T.jsx)(\"div\",{className:\"view_detail_col\",children:Object(T.jsx)(\"div\",{className:\"no_record\",children:Object(T.jsx)(\"figure\",{children:Object(T.jsx)(\"img\",{src:I.a,alt:\"loader\",width:\"130px\"})})})}):M?Object(T.jsxs)(\"div\",{className:\"view_detail_col\",children:[Object(T.jsxs)(\"div\",{className:\"f_spacebw relative\",children:[Object(T.jsx)(\"span\",{className:\"title line-2 pr-20\",children:null===K||void 0===K?void 0:K.jobName}),Object(T.jsx)(\"span\",{onClick:function(){Y((function(e){return!e}))},className:\"close\",children:Object(T.jsx)(\"img\",{src:v.a,alt:\"close\"})})]}),Object(T.jsx)(\"div\",{className:\"job_info\",children:Object(T.jsxs)(\"ul\",{children:[Object(T.jsx)(\"li\",{className:\"icon clock\",children:Object(A.h)(null===K||void 0===K?void 0:K.fromDate,null===K||void 0===K?void 0:K.toDate)}),Object(T.jsx)(\"li\",{className:\"icon dollar\",children:null===K||void 0===K?void 0:K.amount}),Object(T.jsx)(\"li\",{className:\"icon location line-1\",children:null===K||void 0===K?void 0:K.locationName}),Object(T.jsx)(\"li\",{className:\"icon calendar\",children:null===K||void 0===K?void 0:K.duration})]})}),Object(T.jsx)(\"p\",{className:\"commn_para\",children:null===K||void 0===K?void 0:K.jobDescription}),Object(T.jsx)(\"button\",{className:\"fill_btn full_btn btn-effect\",onClick:function(){if(1===f.a.getItem(\"userType\"))e.history.push(\"/job-details-page?jobId=\".concat(null===K||void 0===K?void 0:K.jobId,\"&redirect_from=jobs\"));else{var t=\"?jobId=\".concat(null===K||void 0===K?void 0:K.jobId,\"&status=\").concat(null===K||void 0===K?void 0:K.status,\"&edit=true&activeType=active\");e.history.push(\"/job-detail?\".concat(t))}},children:\"View Job details\"})]}):null]})})]})},S=\"\",R=!1,E=function(e){var t,a,n,o,s=Object(d.useState)(!0),p=Object(l.a)(s,2),O=p[0],f=p[1],h=Object(d.useState)((function(){return g.a.currentUser})),x=Object(l.a)(h,2),I=x[0],N=x[1],U=Object(d.useState)([]),w=Object(l.a)(U,2),y=w[0],k=w[1],C=Object(d.useState)([]),B=Object(l.a)(C,2),E=B[0],_=B[1],Q=Object(d.useState)(!1),M=Object(l.a)(Q,2),Y=M[0],F=M[1],z=Object(d.useState)({}),L=Object(l.a)(z,2),q=L[0],H=L[1],V=Object(d.useState)(\"\"),K=Object(l.a)(V,2),X=K[0],G=K[1],Z=Object(d.useState)(\"\"),P=Object(l.a)(Z,2),W=P[0],J=P[1],$=Object(d.useState)(!1),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(d.useState)(!0),oe=Object(l.a)(ne,2),ie=oe[0],se=oe[1],ce=Object(d.useState)(!1),re=Object(l.a)(ce,2),le=re[0],de=re[1],ue=(null===(t=e.history)||void 0===t||null===(a=t.location)||void 0===a?void 0:a.state)?null===(n=e.history)||void 0===n||null===(o=n.location)||void 0===o?void 0:o.state:{tradieId:\"\",builderId:\"\",jobName:\"\",jobId:\"\"},me=ue.tradieId,ve=ue.builderId,je=ue.jobName,Ae=ue.jobId;console.log(\"tradieId, builderId, jobName, jobId: \",me,ve,je,Ae),Object(d.useEffect)((function(){return console.log(\"roomId:: from didmout\",S),Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(j.a)(!0),!(me&&ve&&je&&Ae)){e.next=6;break}return e.next=4,be();case 4:e.next=7;break;case 6:R=!0;case 7:return e.next=9,Object(g.e)(ge);case 9:case\"end\":return e.stop()}}),e)})))(),function(){Object(g.n)(S),S=\"\"}}),[]);var be=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=\"\".concat(Ae,\"_\").concat(me,\"_\").concat(ve),S=t,e.next=4,Object(g.b)(t);case 4:if(!e.sent){e.next=9;break}return console.log(\"RoomAlreadyExist: =================>\"),e.abrupt(\"return\");case 9:return e.next=11,Object(g.c)(Ae,me,ve,je);case 11:console.log(\"NewRoomCreated: ============>\");case 12:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,o,s,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(\"roomId::\",S),a=\"\",null===(n=t.filter((function(e,t){if(e.hasOwnProperty(\"lastMsg\")||e.roomId===S){if(e.roomId!==S||R)return e;a=e}})))||void 0===n||n.sort((function(e,t){var a,n;return(null===(a=t.lastMsg)||void 0===a?void 0:a.messageTimestamp)-(null===(n=e.lastMsg)||void 0===n?void 0:n.messageTimestamp)})),0!==n.length||a){e.next=8;break}return F(!0),ie&&(se(!1),Object(j.a)(!1)),e.abrupt(\"return\");case 8:if(F(!1),a&&(o=Object(i.a)(n)).unshift(a),console.log(\"ress: \",o,\"sortedRes\",n,\"res\",t,\"selectedRoomInfo\",a),s=Array.isArray(o)&&a?o:n,k(0===s.length?[{firstKey:\"emptyRes\"}]:s),!(s.length>0&&\"\"===S)){e.next=19;break}return S=s[0].roomId,G(s[0].roomId),s[0]&&(null===(r=s[0])||void 0===r?void 0:r.unreadMessages)>0&&(s[0].unreadMessages=0,Object(g.j)(s[0].roomId)),H(s[0]),e.abrupt(\"return\");case 19:s.length>0&&((l=s.find((function(e){return e.roomId==S})))&&(null===l||void 0===l?void 0:l.unreadMessages)>0&&(l.unreadMessages=0,Object(g.j)(l.roomId)),H(l));case 20:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(\"user: \",I),Object(d.useEffect)((function(){var e=g.a.onAuthStateChanged((function(e){e?(N(e),de(!1)):(N(!1),de(!0),Object(j.a)(!1),se(!1)),O&&f(!1)}));return e}),[O]),console.log(e.history,\"history\",X,\"roomId\",q,\"roomData\",S,\"selectedRoomID\",y,\"inBoxData\");var pe=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.n)(S),S=t.roomId,G(t.roomId),H(t),Object(g.j)(t.roomId);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){var e,t;if(W){var a=y.filter((function(e){var t,a,n;return null===(t=e.oppUserInfo)||void 0===t||null===(a=t.name)||void 0===a||null===(n=a.toLowerCase())||void 0===n?void 0:n.includes(W.toLowerCase())}));_(a)}(y.length||\"emptyRes\"===(null===(e=y[0])||void 0===e?void 0:e.firstKey))&&ie&&(\"emptyRes\"===(null===(t=y[0])||void 0===t?void 0:t.firstKey)&&k([]),Object(j.a)(!1),se(!1))}),[W,y]),Object(T.jsx)(\"div\",{className:\"app_wrapper\",children:Object(T.jsxs)(\"div\",{className:\"custom_container\",children:[Object(T.jsx)(\"span\",{className:\"mob_side_nav\",onClick:function(){return de(!0)},children:Object(T.jsx)(\"img\",{src:m.a,alt:\"mob-side-nav\"})}),Object(T.jsxs)(\"div\",{className:\"f_row chat_wrapr\",children:[Object(T.jsxs)(\"div\",{className:\"side_nav_col \".concat(le?\"active\":\"\"),children:[Object(T.jsx)(\"button\",{className:\"close_nav\",onClick:function(){return de(!1)},children:Object(T.jsx)(\"img\",{src:v.a,alt:\"close\"})}),Object(T.jsxs)(\"div\",{className:\"stick\",children:[Object(T.jsx)(\"span\",{className:\"title\",children:\"Chat\"}),Object(T.jsxs)(\"div\",{className:\"search_bar \".concat(te?\"active\":\"\"),onClick:function(){ae(!0)},children:[Object(T.jsx)(\"input\",{type:\"text\",placeholder:\"Search\",value:W,onChange:function(e){return J(e.target.value.trimLeft())}}),Object(T.jsx)(\"span\",{className:\"detect_icon_ltr\",children:Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\",alt:\"search\"})})]}),Object(T.jsx)(\"ul\",{className:\"chat_list\",children:W?0===E.length?Object(T.jsx)(\"li\",{children:Object(T.jsx)(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:Object(T.jsx)(\"div\",{className:\"detail\",children:Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})}):E.map((function(e){var t,a,n,o,i;return Object(T.jsx)(\"li\",{onClick:function(){pe(e)},children:Object(T.jsxs)(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(S===e.roomId?\"active\":\"\"),children:[Object(T.jsx)(\"figure\",{className:\"u_img\",children:Object(T.jsx)(\"img\",{src:(null===(t=e.oppUserInfo)||void 0===t?void 0:t.image)||u.a,alt:\"img\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=u.a)}})}),Object(T.jsxs)(\"div\",{className:\"detail\",children:[Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:null===(a=e.oppUserInfo)||void 0===a?void 0:a.name}),Object(T.jsx)(\"span\",{className:\"inner_title job line-1\",children:e.jobName}),Object(T.jsx)(\"p\",{className:\"commn_para line-1\",children:null===(n=e.lastMsg)||void 0===n?void 0:n.messageText}),(null===(o=e.lastMsg)||void 0===o?void 0:o.messageTimestamp)&&Object(T.jsx)(\"span\",{className:\"date_time\",children:Object(A.c)(null===(i=e.lastMsg)||void 0===i?void 0:i.messageTimestamp,\"inboxTime\")}),S===e.roomId||0===e.unreadMessages?null:Object(T.jsx)(\"span\",{className:\"count\",children:e.unreadMessages})]})]})})})):(null===y||void 0===y?void 0:y.length)>0?y.map((function(e){var t,a,n,o,i,s,c,r;return Object(T.jsx)(\"li\",{onClick:function(){pe(e)},children:Object(T.jsxs)(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(S===e.roomId?\"active\":\"\"),children:[Object(T.jsx)(\"figure\",{className:\"u_img\",children:Object(T.jsx)(\"img\",{src:(null===(t=e.oppUserInfo)||void 0===t?void 0:t.image)||u.a,alt:\"img\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=u.a)}})}),Object(T.jsxs)(\"div\",{className:\"detail\",children:[Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:null===(a=e.oppUserInfo)||void 0===a?void 0:a.name}),Object(T.jsx)(\"span\",{className:\"inner_title job line-1\",children:e.jobName}),Object(T.jsx)(\"p\",{className:\"commn_para line-1\",children:\"text\"===(null===(n=e.lastMsg)||void 0===n?void 0:n.messageType)?null===(o=e.lastMsg)||void 0===o?void 0:o.messageText:\"image\"===(null===(i=e.lastMsg)||void 0===i?void 0:i.messageType)?Object(T.jsx)(\"i\",{style:{color:\"#929292\"},children:\"Photo\"}):\"video\"===(null===(s=e.lastMsg)||void 0===s?void 0:s.messageType)?Object(T.jsx)(\"i\",{style:{color:\"#929292\"},children:\"Video\"}):\"\"}),(null===(c=e.lastMsg)||void 0===c?void 0:c.messageTimestamp)&&Object(T.jsx)(\"span\",{className:\"date_time\",children:Object(A.c)(null===(r=e.lastMsg)||void 0===r?void 0:r.messageTimestamp,\"inboxTime\")}),S===e.roomId||0===e.unreadMessages?null:Object(T.jsx)(\"span\",{className:\"count\",children:e.unreadMessages})]})]})})})):e.isLoading?null:Object(T.jsx)(\"li\",{children:Object(T.jsx)(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:Object(T.jsx)(\"div\",{className:\"detail\",children:Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})})})]})]}),ie?null:ie||0!==(null===y||void 0===y?void 0:y.length)?Object(T.jsx)(D,{roomId:S,roomData:q,isNoRecords:Y,history:e.history,isLoading:e.isLoading,inBoxData:y,setInBoxData:k}):Object(T.jsx)(\"div\",{className:\"detail_col\",children:Object(T.jsx)(\"div\",{className:\"flex_row tradies_row\",children:Object(T.jsxs)(\"div\",{className:\"no_record\",children:[Object(T.jsx)(\"figure\",{className:\"no_img\",children:Object(T.jsx)(\"img\",{src:b.a,alt:\"data not found\"})}),Object(T.jsx)(\"span\",{children:\"No Data Found\"})]})})})]})]})})},_=Object(n.b)((function(e){return{isLoading:e.common.isLoading,isSkeletonLoading:e.common.isSkeletonLoading}}),(function(e){return Object(o.b)({},e)}))(E);t.default=_}}]);","name":"static/js/30.23262937.chunk.js","map":{"version":3,"sources":["static/js/30.23262937.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","p","r","es","redux","toConsumableArray","regenerator","regenerator_default","n","asyncToGenerator","slicedToArray","react","u_placeholder","menu_line_blue","ic_cancel_blue","actions","common","no_search_data","firebase","objectSpread2","jobs_actions","storageService","not_found","video_3x","loader","auth_actions","constants","fslightbox_react","fslightbox_react_default","analyticsTools","jsx_runtime","lastDate","docTypes","userMessages","props","_storageService$getIt","_props$roomData16","_props$roomData16$opp","_props$roomData19","_props$roomData19$opp","_props$roomData21","_props$roomData21$opp","_props$roomData22","_props$roomData22$opp","divRref","Object","_useState","getItem","_id","userId","_useState3","_useState4","toggle","setToggle","_useState5","_useState6","jobDetailLoader","setJobDetailLoader","_useState7","_useState8","currentJobDetails","setCurrentJobDetails","_useState9","_useState10","messageText","setMessageText","_useState11","_useState12","messages","setMessages","_useState13","_useState14","isDocUploading","setIsDocUploading","_useState15","_useState16","itemsMedia","setItemsMedia","_useState17","_useState18","toggler","setToggler","_useState19","_useState20","selectedSlide","setSelectSlide","_useState21","_useState22","fsSlideListner","setFsSlideListner","_useState23","_useState24","roomId","onReceiveOfNewMsg","console","log","roomData","scrollToBottom","current","scroll","scrollHeight","clientHeight","scrollTo","arrmsg","fsSlideObj","mediaMsgs","slideCount","length","filter","item","index","messageType","concat","setInboxToTopWithLastMsg","lastMsg","newInboxData","inBoxData","currentIndex","findIndex","i","splice","unshift","setInBoxData","sendMessage","_ref","a","mark","_callee","_props$roomData","_props$roomData$oppUs","_props$roomData2","_props$roomData2$oppU","_props$roomData3","_props$roomData3$oppU","_props$roomData4","_props$roomData4$oppU","mData","wrap","_context","prev","next","trimLeft","sent","oppUserInfo","deviceToken","deviceType","hasOwnProperty","isNotification","sendFCMPushNotificationToOppUser","timeStamp","getCurrentTimeStamp","moE_SendEvent","CHAT","mixP_SendEvent","stop","apply","arguments","sendImageVideoMsg","_ref2","_callee2","url","msgType","_props$roomData5","_props$roomData5$oppU","_props$roomData6","_props$roomData6$oppU","_props$roomData7","_props$roomData7$oppU","_props$roomData8","_props$roomData8$oppU","_context2","_x","_x2","fetchJobDetail","_ref3","_callee3","jobId","res","_res$data","_res$data2","_res$data3","_res$data4","_res$data5","_res$data6","_res$data7","_res$data8","_res$data9","jobInfo","_context3","success","jobDescription","data","details","jobName","amount","locationName","fromDate","toDate","duration","status","_x3","setResDeviceType","msg","_storageService$getIt2","_storageService$getIt3","_storageService$getIt4","_storageService$getIt5","_storageService$getIt6","_msg$messageRoomId","_msg$messageRoomId$sp","_storageService$getIt7","_props$roomData9","_storageService$getIt8","_storageService$getIt9","_storageService$getIt10","_msg$messageRoomId2","_msg$messageRoomId2$s","_storageService$getIt11","_props$roomData10","Number","app_icon","title","notificationText","userName","senderName","room_id","messageRoomId","image","user_image","notificationType","sound","body","sender","first_name","device_token","user_id","device_type","split","badge","notification_type","messageId","notification","_ref4","_callee4","_props$roomData11","_props$roomData11$opp","_props$roomData12","_props$roomData12$opp","_props$roomData13","_props$roomData13$opp","_props$roomData14","_props$roomData14$opp","_props$roomData15","_props$roomData15$opp","newData","headers_","_context4","to","Authorization","FcmHeaderAuthorizationKey","fetch","method","headers","JSON","stringify","_x4","handleUpload","_ref5","_callee5","e","_newFile$type","_newFile$type$split$","maxFileSize","formData","newFile","fileType","selectedFileSize","check_type","_context5","FormData","target","files","type","toLowerCase","size","includes","indexOf","abrupt","append","imgUrl","_x5","displayMessages","curDate","messageTimestamp","messageClass","senderId","children","className","renderTextMsg","src","mediaUrl","alt","decoding","loading","onError","_e$target","_e$target2","onerror","onClick","_e$target3","_e$target4","renderImageMsg","poster","renderVideoMsg","_renderMediaItems","sources","types","forEach","renderMediaItems","isNoRecords","slide","onClose","_e$target5","_e$target6","_props$roomData17","_props$roomData17$opp","_props$roomData18","_props$roomData18$opp","history","name","_props$roomData20","ref","map","isBlock","style","color","htmlFor","id","accept","onChange","disabled","placeholder","onKeyDown","event","key","value","width","urlEncode","selectedRoomID","isFreshChatRoute","chat","_props$history","_props$history$locati","_props$history2","_props$history2$locat","_useState2","initializing","setInitializing","currentUser","user","setUser","filterInBoxData","setFilterInBoxData","setIsNoRecords","setRoomData","setRoomId","searchQuery","setSearchQuery","searchActive","setSearchActive","isInitialLoader","setIsInitialLoader","isMobInbox","setIsMobInbox","location","state","tradieId","builderId","setInitialItems","onUpdateofInbox","roomID","selectedRoomInfo","sortedRes","ress","newRes","_newRes$","itemObj","sort","x","y","_y$lastMsg","_x$lastMsg","Array","isArray","firstKey","unreadMessages","find","unsubscribe","onAuthStateChanged","getRoomDetails","_inBoxData$","_inBoxData$2","filteredVal","_item$oppUserInfo","_item$oppUserInfo$nam","_item$oppUserInfo$nam2","href","_item$oppUserInfo2","_item$oppUserInfo3","_item$lastMsg","_item$lastMsg2","_item$lastMsg3","_item$oppUserInfo4","_item$oppUserInfo5","_item$lastMsg4","_item$lastMsg5","_item$lastMsg6","_item$lastMsg7","_item$lastMsg8","_item$lastMsg9","isLoading","ChatComponent","isSkeletonLoading","dispatch"],"mappings":"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"},"input":"(this[\"webpackJsonptickt-web\"] = this[\"webpackJsonptickt-web\"] || []).push([[30],{\n\n/***/ 304:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\");\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\");\n\n/***/ }),\n\n/***/ 396:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.p + \"static/media/not-found.c5fd5f1f.png\");\n\n/***/ }),\n\n/***/ 599:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 24 modules\nvar es = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/redux/es/redux.js + 1 modules\nvar redux = __webpack_require__(44);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(2);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./src/assets/images/u_placeholder.jpg\nvar u_placeholder = __webpack_require__(76);\n\n// CONCATENATED MODULE: ./src/assets/images/search-chat.png\n/* harmony default export */ var search_chat = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\");\n// EXTERNAL MODULE: ./src/assets/images/menu-line-blue.png\nvar menu_line_blue = __webpack_require__(312);\n\n// EXTERNAL MODULE: ./src/assets/images/ic-cancel-blue.png\nvar ic_cancel_blue = __webpack_require__(304);\n\n// EXTERNAL MODULE: ./src/redux/common/actions.ts\nvar actions = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./src/utils/common.tsx\nvar common = __webpack_require__(53);\n\n// EXTERNAL MODULE: ./src/assets/images/no-search-data.png\nvar no_search_data = __webpack_require__(66);\n\n// EXTERNAL MODULE: ./src/services/firebase.js\nvar firebase = __webpack_require__(45);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./src/redux/jobs/actions.ts\nvar jobs_actions = __webpack_require__(221);\n\n// EXTERNAL MODULE: ./src/utils/storageService.ts\nvar storageService = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./src/assets/images/not-found.png\nvar not_found = __webpack_require__(396);\n\n// CONCATENATED MODULE: ./src/assets/images/video@3x.png\n/* harmony default export */ var video_3x = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\");\n// CONCATENATED MODULE: ./src/assets/images/icon-direction-blue.png\n/* harmony default export */ var icon_direction_blue = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\");\n// CONCATENATED MODULE: ./src/assets/images/ic-media.png\n/* harmony default export */ var ic_media = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\");\n// CONCATENATED MODULE: ./src/assets/images/ic-send.png\n/* harmony default export */ var ic_send = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\");\n// EXTERNAL MODULE: ./src/assets/images/loader.gif\nvar loader = __webpack_require__(93);\n\n// EXTERNAL MODULE: ./src/redux/auth/actions.ts\nvar auth_actions = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./src/utils/constants.ts\nvar constants = __webpack_require__(19);\n\n// EXTERNAL MODULE: ./node_modules/fslightbox-react/index.js\nvar fslightbox_react = __webpack_require__(262);\nvar fslightbox_react_default = /*#__PURE__*/__webpack_require__.n(fslightbox_react);\n\n// EXTERNAL MODULE: ./src/services/analyticsTools.js\nvar analyticsTools = __webpack_require__(48);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/pages/chat/userMessages.tsx\n//@ts-ignore\nvar lastDate='';var docTypes=[\"jpeg\",\"jpg\",\"png\",\"mp4\",\"wmv\",\"avi\"];var userMessages_UserMessages=function UserMessages(props){var _storageService$getIt,_props$roomData16,_props$roomData16$opp,_props$roomData19,_props$roomData19$opp,_props$roomData21,_props$roomData21$opp,_props$roomData22,_props$roomData22$opp;var divRref=Object(react[\"useRef\"])(null);var _useState=Object(react[\"useState\"])((_storageService$getIt=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt===void 0?void 0:_storageService$getIt._id),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,1),userId=_useState2[0];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),toggle=_useState4[0],setToggle=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),jobDetailLoader=_useState6[0],setJobDetailLoader=_useState6[1];var _useState7=Object(react[\"useState\"])(null),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),currentJobDetails=_useState8[0],setCurrentJobDetails=_useState8[1];var _useState9=Object(react[\"useState\"])(''),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),messageText=_useState10[0],setMessageText=_useState10[1];var _useState11=Object(react[\"useState\"])([]),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),messages=_useState12[0],setMessages=_useState12[1];var _useState13=Object(react[\"useState\"])(false),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),isDocUploading=_useState14[0],setIsDocUploading=_useState14[1];var _useState15=Object(react[\"useState\"])([]),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),itemsMedia=_useState16[0],setItemsMedia=_useState16[1];var _useState17=Object(react[\"useState\"])(false),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),toggler=_useState18[0],setToggler=_useState18[1];var _useState19=Object(react[\"useState\"])(1),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),selectedSlide=_useState20[0],setSelectSlide=_useState20[1];var _useState21=Object(react[\"useState\"])({}),_useState22=Object(slicedToArray[\"a\" /* default */])(_useState21,2),fsSlideListner=_useState22[0],setFsSlideListner=_useState22[1];var _useState23=Object(react[\"useState\"])(''),_useState24=Object(slicedToArray[\"a\" /* default */])(_useState23,2),oppUserFcmToken=_useState24[0],setOppUserFcmToken=_useState24[1];Object(react[\"useEffect\"])(function(){if(props.roomId!==''){lastDate='';Object(firebase[\"f\" /* getMessagesOfRoom */])(props.roomId,onReceiveOfNewMsg);setSelectSlide(1);setFsSlideListner({});setItemsMedia([]);setCurrentJobDetails(null);setToggle(false);}},[props.roomId]);// }, [props.roomId, props.roomData]);\nconsole.log('props.roomData: ',props.roomData);Object(react[\"useEffect\"])(function(){scrollToBottom();});var scrollToBottom=function scrollToBottom(){if(null!==(divRref===null||divRref===void 0?void 0:divRref.current)){var scroll=divRref.current.scrollHeight-divRref.current.clientHeight;// divRref.current.scrollIntoView({ behavior: \"smooth\" })\ndivRref.current.scrollTo(0,scroll);}};var onReceiveOfNewMsg=function onReceiveOfNewMsg(arrmsg){console.log('arrmsg: ',arrmsg);setMessages(arrmsg);};Object(react[\"useEffect\"])(function(){var fsSlideObj={};var mediaMsgs=[];var slideCount=1;if(messages.length){mediaMsgs=messages.filter(function(item,index){if(item.messageType==='image'||item.messageType==='video'){fsSlideObj[\"\".concat(index)]=slideCount++;return item;}});setItemsMedia(mediaMsgs);setFsSlideListner(fsSlideObj);}},[messages]);console.log('itemsMedia: ',itemsMedia,\"fsSlideListner\",fsSlideListner);var setInboxToTopWithLastMsg=function setInboxToTopWithLastMsg(lastMsg){var newInboxData=Object(toConsumableArray[\"a\" /* default */])(props.inBoxData);var currentIndex=newInboxData.findIndex(function(i){return i.roomId===props.roomId;});newInboxData[currentIndex].lastMsg=lastMsg;newInboxData.splice(currentIndex,1);newInboxData.unshift(props.inBoxData[currentIndex]);props.setInBoxData(newInboxData);console.log('lastMsg: ',lastMsg);console.log('currentIndex: ',currentIndex);console.log('newInboxData: ',newInboxData);};var sendMessage=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _props$roomData,_props$roomData$oppUs,_props$roomData2,_props$roomData2$oppU,_props$roomData3,_props$roomData3$oppU,_props$roomData4,_props$roomData4$oppU,lastMsg,mData;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(messageText&&messageText.trimLeft()!==\"\")){_context.next=7;break;}setMessageText('');_context.next=4;return Object(firebase[\"l\" /* sendTextMessage */])(props.roomId,messageText);case 4:lastMsg=_context.sent;if(lastMsg&&((_props$roomData=props.roomData)===null||_props$roomData===void 0?void 0:(_props$roomData$oppUs=_props$roomData.oppUserInfo)===null||_props$roomData$oppUs===void 0?void 0:_props$roomData$oppUs.deviceToken)&&((_props$roomData2=props.roomData)===null||_props$roomData2===void 0?void 0:(_props$roomData2$oppU=_props$roomData2.oppUserInfo)===null||_props$roomData2$oppU===void 0?void 0:_props$roomData2$oppU.deviceType)&&(((_props$roomData3=props.roomData)===null||_props$roomData3===void 0?void 0:(_props$roomData3$oppU=_props$roomData3.oppUserInfo)===null||_props$roomData3$oppU===void 0?void 0:_props$roomData3$oppU.hasOwnProperty('isNotification'))?(_props$roomData4=props.roomData)===null||_props$roomData4===void 0?void 0:(_props$roomData4$oppU=_props$roomData4.oppUserInfo)===null||_props$roomData4$oppU===void 0?void 0:_props$roomData4$oppU.isNotification:true)){sendFCMPushNotificationToOppUser(lastMsg);mData={timeStamp:analyticsTools[\"b\" /* moengage */].getCurrentTimeStamp()};analyticsTools[\"b\" /* moengage */].moE_SendEvent(constants[\"a\" /* MoEConstants */].CHAT,mData);analyticsTools[\"a\" /* mixPanel */].mixP_SendEvent(constants[\"a\" /* MoEConstants */].CHAT,mData);}setInboxToTopWithLastMsg(lastMsg);case 7:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(){return _ref.apply(this,arguments);};}();var handleKeyDown=function handleKeyDown(event){if(event.key==='Enter'){sendMessage();}};var sendImageVideoMsg=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(url,msgType){var _props$roomData5,_props$roomData5$oppU,_props$roomData6,_props$roomData6$oppU,_props$roomData7,_props$roomData7$oppU,_props$roomData8,_props$roomData8$oppU,lastMsg;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(url&&url!=='')){_context2.next=6;break;}_context2.next=3;return Object(firebase[\"k\" /* sendImageVideoMessage */])(props.roomId,url,msgType);case 3:lastMsg=_context2.sent;if(lastMsg&&((_props$roomData5=props.roomData)===null||_props$roomData5===void 0?void 0:(_props$roomData5$oppU=_props$roomData5.oppUserInfo)===null||_props$roomData5$oppU===void 0?void 0:_props$roomData5$oppU.deviceToken)&&((_props$roomData6=props.roomData)===null||_props$roomData6===void 0?void 0:(_props$roomData6$oppU=_props$roomData6.oppUserInfo)===null||_props$roomData6$oppU===void 0?void 0:_props$roomData6$oppU.deviceType)&&(((_props$roomData7=props.roomData)===null||_props$roomData7===void 0?void 0:(_props$roomData7$oppU=_props$roomData7.oppUserInfo)===null||_props$roomData7$oppU===void 0?void 0:_props$roomData7$oppU.hasOwnProperty('isNotification'))?(_props$roomData8=props.roomData)===null||_props$roomData8===void 0?void 0:(_props$roomData8$oppU=_props$roomData8.oppUserInfo)===null||_props$roomData8$oppU===void 0?void 0:_props$roomData8$oppU.isNotification:true)){sendFCMPushNotificationToOppUser(lastMsg);}setInboxToTopWithLastMsg(lastMsg);case 6:setMessageText('');case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function sendImageVideoMsg(_x,_x2){return _ref2.apply(this,arguments);};}();var fetchJobDetail=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(jobId){var res,_res$data,_res$data2,_res$data3,_res$data4,_res$data5,_res$data6,_res$data7,_res$data8,_res$data9,jobInfo;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setJobDetailLoader(true);_context3.next=3;return Object(jobs_actions[\"F\" /* getJobDetails */])(jobId);case 3:res=_context3.sent;if(res.success){jobInfo={jobDescription:((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.details)||'',jobId:((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.jobId)||'',jobName:((_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.jobName)||'',amount:((_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.amount)||'',locationName:((_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.locationName)||'',fromDate:((_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.fromDate)||'',toDate:((_res$data7=res.data)===null||_res$data7===void 0?void 0:_res$data7.toDate)||'',duration:((_res$data8=res.data)===null||_res$data8===void 0?void 0:_res$data8.duration)||'',status:((_res$data9=res.data)===null||_res$data9===void 0?void 0:_res$data9.status)||''};setCurrentJobDetails(jobInfo);setJobDetailLoader(false);}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchJobDetail(_x3){return _ref3.apply(this,arguments);};}();var renderMediaItems=function renderMediaItems(itemsMedia){var sources=[];var types=[];if(itemsMedia.length){itemsMedia.forEach(function(item){if(item.messageType==='video'){sources.push(item.mediaUrl);types.push('video');}if(item.messageType==='image'){sources.push(item.mediaUrl);types.push('image');}});}return{sources:sources,types:types};};var setResDeviceType=function setResDeviceType(deviceType,msg){var _storageService$getIt2,_storageService$getIt3,_storageService$getIt4,_storageService$getIt5,_storageService$getIt6,_msg$messageRoomId,_msg$messageRoomId$sp,_storageService$getIt7,_props$roomData9,_storageService$getIt8,_storageService$getIt9,_storageService$getIt10,_msg$messageRoomId2,_msg$messageRoomId2$s,_storageService$getIt11,_props$roomData10;switch(Number(deviceType)){case 1:return{app_icon:\"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",title:\"Tickt App\",notificationText:\"\".concat((_storageService$getIt2=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt2===void 0?void 0:_storageService$getIt2.userName,\" send you a message\"),senderName:\"\".concat((_storageService$getIt3=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt3===void 0?void 0:_storageService$getIt3.userName),messageType:\"\".concat(msg===null||msg===void 0?void 0:msg.messageType),messageText:\"\".concat((msg===null||msg===void 0?void 0:msg.messageType)==='text'?msg===null||msg===void 0?void 0:msg.messageText:''),room_id:msg===null||msg===void 0?void 0:msg.messageRoomId,image:(_storageService$getIt4=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt4===void 0?void 0:_storageService$getIt4.user_image,notificationType:25,sound:\"default\"};case 2:return{body:msg===null||msg===void 0?void 0:msg.messageText,messageText:msg===null||msg===void 0?void 0:msg.messageText,sender:{first_name:(_storageService$getIt5=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt5===void 0?void 0:_storageService$getIt5.userName,device_token:storageService[\"a\" /* default */].getItem('fcmToken'),user_id:(_storageService$getIt6=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt6===void 0?void 0:_storageService$getIt6._id,device_type:2},jobId:msg===null||msg===void 0?void 0:(_msg$messageRoomId=msg.messageRoomId)===null||_msg$messageRoomId===void 0?void 0:(_msg$messageRoomId$sp=_msg$messageRoomId.split('_'))===null||_msg$messageRoomId$sp===void 0?void 0:_msg$messageRoomId$sp[0],badge:1,device_type:2,title:(_storageService$getIt7=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt7===void 0?void 0:_storageService$getIt7.userName,jobName:(_props$roomData9=props.roomData)===null||_props$roomData9===void 0?void 0:_props$roomData9.jobName,notification_type:50,sound:'default',messageId:msg===null||msg===void 0?void 0:msg.messageId};case 3:return{notification:{body:msg===null||msg===void 0?void 0:msg.messageText,title:(_storageService$getIt8=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt8===void 0?void 0:_storageService$getIt8.userName},data:{body:msg===null||msg===void 0?void 0:msg.messageText,messageText:msg===null||msg===void 0?void 0:msg.messageText,sender:{first_name:(_storageService$getIt9=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt9===void 0?void 0:_storageService$getIt9.userName,device_token:storageService[\"a\" /* default */].getItem('fcmToken'),user_id:(_storageService$getIt10=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt10===void 0?void 0:_storageService$getIt10._id,device_type:2},jobId:msg===null||msg===void 0?void 0:(_msg$messageRoomId2=msg.messageRoomId)===null||_msg$messageRoomId2===void 0?void 0:(_msg$messageRoomId2$s=_msg$messageRoomId2.split('_'))===null||_msg$messageRoomId2$s===void 0?void 0:_msg$messageRoomId2$s[0],badge:1,device_type:2,title:(_storageService$getIt11=storageService[\"a\" /* default */].getItem('userInfo'))===null||_storageService$getIt11===void 0?void 0:_storageService$getIt11.userName,jobName:(_props$roomData10=props.roomData)===null||_props$roomData10===void 0?void 0:_props$roomData10.jobName,notification_type:50,sound:'default',messageId:msg===null||msg===void 0?void 0:msg.messageId}};default:return;}};var sendFCMPushNotificationToOppUser=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(msg){var _props$roomData11,_props$roomData11$opp,_props$roomData12,_props$roomData12$opp,_props$roomData13,_props$roomData13$opp,_props$roomData14,_props$roomData14$opp,_props$roomData15,_props$roomData15$opp;var data,newData,headers_,response;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=setResDeviceType((_props$roomData11=props.roomData)===null||_props$roomData11===void 0?void 0:(_props$roomData11$opp=_props$roomData11.oppUserInfo)===null||_props$roomData11$opp===void 0?void 0:_props$roomData11$opp.deviceType,msg);newData=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({to:\"\".concat((_props$roomData12=props.roomData)===null||_props$roomData12===void 0?void 0:(_props$roomData12$opp=_props$roomData12.oppUserInfo)===null||_props$roomData12$opp===void 0?void 0:_props$roomData12$opp.deviceToken)},((_props$roomData13=props.roomData)===null||_props$roomData13===void 0?void 0:(_props$roomData13$opp=_props$roomData13.oppUserInfo)===null||_props$roomData13$opp===void 0?void 0:_props$roomData13$opp.deviceType)==1&&{data:data}),((_props$roomData14=props.roomData)===null||_props$roomData14===void 0?void 0:(_props$roomData14$opp=_props$roomData14.oppUserInfo)===null||_props$roomData14$opp===void 0?void 0:_props$roomData14$opp.deviceType)==2&&{notification:data}),((_props$roomData15=props.roomData)===null||_props$roomData15===void 0?void 0:(_props$roomData15$opp=_props$roomData15.oppUserInfo)===null||_props$roomData15$opp===void 0?void 0:_props$roomData15$opp.deviceType)==3&&{notification:data===null||data===void 0?void 0:data.notification,data:data===null||data===void 0?void 0:data.data});headers_={'Content-Type':'application/json','Authorization':constants[\"b\" /* default */].FcmHeaderAuthorizationKey};_context4.next=5;return fetch(\"https://fcm.googleapis.com/fcm/send\",{method:\"POST\",headers:headers_,body:JSON.stringify(newData)});case 5:response=_context4.sent;// const res: any = await response.json();\nif(response.status===200){console.log('Chat push notification send to opposite user: success');}else{console.log('Chat push notification send to opposite user: failure');}case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function sendFCMPushNotificationToOppUser(_x4){return _ref4.apply(this,arguments);};}();var handleUpload=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(e){var _newFile$type,_newFile$type$split$;var maxFileSize,formData,newFile,fileType,selectedFileSize,check_type,res;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:maxFileSize=10;formData=new FormData();newFile=e.target.files[0];fileType=newFile===null||newFile===void 0?void 0:(_newFile$type=newFile.type)===null||_newFile$type===void 0?void 0:(_newFile$type$split$=_newFile$type.split('/')[1])===null||_newFile$type$split$===void 0?void 0:_newFile$type$split$.toLowerCase();selectedFileSize=(newFile===null||newFile===void 0?void 0:newFile.size)/1024/1024;// size in mb\nif([\"mp4\",\"wmv\",\"avi\"].includes(fileType)){maxFileSize=20;}if(!(docTypes.indexOf(fileType)<0||selectedFileSize>maxFileSize)){_context5.next=9;break;}Object(actions[\"c\" /* setShowToast */])(true,\"The file must be in proper format or size\");return _context5.abrupt(\"return\");case 9:formData.append('file',newFile);setIsDocUploading(true);check_type=[\"jpeg\",\"jpg\",\"png\"].includes(fileType)?1:[\"mp4\",\"wmv\",\"avi\"].includes(fileType)?2:null;_context5.next=14;return Object(auth_actions[\"l\" /* onFileUpload */])(formData);case 14:res=_context5.sent;if(res.success&&res.imgUrl){if(check_type===1){sendImageVideoMsg(res.imgUrl,\"image\");}else if(check_type===2){sendImageVideoMsg(res.imgUrl,\"video\");}else{Object(actions[\"c\" /* setShowToast */])(true,\"There is some technical issue\");}setIsDocUploading(false);// setLocalFiles((prev: any) => ({ ...prev, [filesUrl?.length]: URL.createObjectURL(newFile) }));\n}case 16:case\"end\":return _context5.stop();}}},_callee5);}));return function handleUpload(_x5){return _ref5.apply(this,arguments);};}();var renderTextMsg=function renderTextMsg(msg){var curDate=Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,'day');var messageClass=msg.senderId===userId?'message':'message recive_msg';if(lastDate===''||lastDate!==curDate){lastDate=curDate;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:curDate})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"\".concat(msg.senderId===userId?'mark':''),children:[msg.messageText,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})})]});}else return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"\".concat(msg.senderId===userId?'mark':''),children:[msg.messageText,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})});};var renderImageMsg=function renderImageMsg(msg,index){var curDate=Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,'day');var messageClass=msg.senderId===userId?'message':'message recive_msg';if(lastDate===''||lastDate!==curDate){lastDate=curDate;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:curDate})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:msg.mediaUrl||not_found[\"a\" /* default */],alt:\"media\",\"async-src\":msg.mediaUrl||not_found[\"a\" /* default */],decoding:\"async\",loading:\"lazy\",onError:function onError(e){var _e$target,_e$target2;if(e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.src){e.target.src=not_found[\"a\" /* default */];}},onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})})]});}else return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:msg.mediaUrl||not_found[\"a\" /* default */],alt:\"media\",\"async-src\":msg.mediaUrl||not_found[\"a\" /* default */],decoding:\"async\",loading:\"lazy\",onError:function onError(e){var _e$target3,_e$target4;if(e===null||e===void 0?void 0:(_e$target3=e.target)===null||_e$target3===void 0?void 0:_e$target3.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target4=e.target)===null||_e$target4===void 0?void 0:_e$target4.src){e.target.src=not_found[\"a\" /* default */];}},onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})});};var renderVideoMsg=function renderVideoMsg(msg,index){var curDate=Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,'day');var messageClass=msg.senderId===userId?'message':'message recive_msg';if(lastDate===''||lastDate!==curDate){lastDate=curDate;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:curDate})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media media_video \",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{src:msg.mediaUrl||not_found[\"a\" /* default */],poster:video_3x,onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})})]});}else return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media media_video \",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{src:msg.mediaUrl||not_found[\"a\" /* default */],poster:video_3x,onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})});};var displayMessages=function displayMessages(msg,index){if(index===0)lastDate='';switch(msg.messageType){case\"text\":return renderTextMsg(msg);case\"image\":return renderImageMsg(msg,index);case\"video\":return renderVideoMsg(msg,index);}};var _renderMediaItems=renderMediaItems(itemsMedia),sources=_renderMediaItems.sources,types=_renderMediaItems.types;return props.isNoRecords?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"flex_row\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{})})}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(fslightbox_react_default.a,{toggler:toggler,slide:selectedSlide,sources:sources,types:types,// disableLocalStorage={true}\nonClose:function onClose(){setSelectSlide(1);}},sources===null||sources===void 0?void 0:sources.length),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chat_col \".concat(toggle?'active':''),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chat_user\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"u_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:((_props$roomData16=props.roomData)===null||_props$roomData16===void 0?void 0:(_props$roomData16$opp=_props$roomData16.oppUserInfo)===null||_props$roomData16$opp===void 0?void 0:_props$roomData16$opp.image)||u_placeholder[\"a\" /* default */],alt:\"user-img\",onError:function onError(e){var _e$target5,_e$target6;if(e===null||e===void 0?void 0:(_e$target5=e.target)===null||_e$target5===void 0?void 0:_e$target5.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target6=e.target)===null||_e$target6===void 0?void 0:_e$target6.src){e.target.src=u_placeholder[\"a\" /* default */];}}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"name\",onClick:function onClick(){if(storageService[\"a\" /* default */].getItem('userType')===2){var _props$roomData17,_props$roomData17$opp;props.history.push(\"/tradie-info?tradeId=\".concat((_props$roomData17=props.roomData)===null||_props$roomData17===void 0?void 0:(_props$roomData17$opp=_props$roomData17.oppUserInfo)===null||_props$roomData17$opp===void 0?void 0:_props$roomData17$opp.userId,\"&hideInvite=true\"));}else{var _props$roomData18,_props$roomData18$opp;props.history.push(\"/builder-info?builderId=\".concat((_props$roomData18=props.roomData)===null||_props$roomData18===void 0?void 0:(_props$roomData18$opp=_props$roomData18.oppUserInfo)===null||_props$roomData18$opp===void 0?void 0:_props$roomData18$opp.userId));}},children:(_props$roomData19=props.roomData)===null||_props$roomData19===void 0?void 0:(_props$roomData19$opp=_props$roomData19.oppUserInfo)===null||_props$roomData19$opp===void 0?void 0:_props$roomData19$opp.name}),!toggle&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{onClick:function onClick(){var _props$roomData20;setToggle(true);if(currentJobDetails)return;fetchJobDetail((_props$roomData20=props.roomData)===null||_props$roomData20===void 0?void 0:_props$roomData20.jobId);},className:\"view_detail\",children:[\"View Job Details\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:icon_direction_blue,alt:\"view-more\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"message_wrapr\",ref:divRref,children:[messages.length>0&&messages.map(function(msg,index){return displayMessages(msg,index);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:((_props$roomData21=props.roomData)===null||_props$roomData21===void 0?void 0:(_props$roomData21$opp=_props$roomData21.oppUserInfo)===null||_props$roomData21$opp===void 0?void 0:_props$roomData21$opp.isBlock)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{color:'#929292'},children:'You can no longer chat with the user'})})]}),!((_props$roomData22=props.roomData)===null||_props$roomData22===void 0?void 0:(_props$roomData22$opp=_props$roomData22.oppUserInfo)===null||_props$roomData22$opp===void 0?void 0:_props$roomData22$opp.isBlock)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"send_msg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text_field\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"upload_item\",htmlFor:\"upload_item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_media,alt:\"media\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{id:\"upload_item\",className:\"hide\",type:\"file\",accept:\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\",onChange:handleUpload,disabled:isDocUploading}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{placeholder:\"Message..\",onKeyDown:handleKeyDown,value:messageText,onChange:function onChange(e){return setMessageText(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_send,alt:\"send\",onClick:sendMessage})})]})})]}),toggle&&jobDetailLoader?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"view_detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"no_record\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:loader[\"a\" /* default */],alt:\"loader\",width:\"130px\"})})})}):toggle?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"view_detail_col\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"f_spacebw relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"title line-2 pr-20\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{onClick:function onClick(){setToggle(function(prev){return!prev;});},className:\"close\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_cancel_blue[\"a\" /* default */],alt:\"close\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"job_info\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"ul\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon clock\",children:Object(common[\"h\" /* renderTime */])(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.fromDate,currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.toDate)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon dollar\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.amount}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon location line-1\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.locationName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon calendar\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.duration})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"commn_para\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobDescription}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"fill_btn full_btn btn-effect\",onClick:function onClick(){if(storageService[\"a\" /* default */].getItem('userType')===1){props.history.push(\"/job-details-page?jobId=\".concat(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobId,\"&redirect_from=jobs\"));}else{// let urlEncode: any = window.btoa(`?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`)\nvar urlEncode=\"?jobId=\".concat(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobId,\"&status=\").concat(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.status,\"&edit=true&activeType=active\");props.history.push(\"/job-detail?\".concat(urlEncode));}},children:\"View Job details\"})]}):null]})})]});};/* harmony default export */ var userMessages = (userMessages_UserMessages);\n// CONCATENATED MODULE: ./src/pages/chat/chat.tsx\nvar selectedRoomID='';var isFreshChatRoute=false;var chat_Chat=function Chat(props){var _props$history,_props$history$locati,_props$history2,_props$history2$locat;var _useState=Object(react[\"useState\"])(true),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),initializing=_useState2[0],setInitializing=_useState2[1];// firebase authenticated user details\nvar _useState3=Object(react[\"useState\"])(function(){return firebase[\"a\" /* auth */].currentUser;}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),inBoxData=_useState6[0],setInBoxData=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),filterInBoxData=_useState8[0],setFilterInBoxData=_useState8[1];var _useState9=Object(react[\"useState\"])(false),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),isNoRecords=_useState10[0],setIsNoRecords=_useState10[1];var _useState11=Object(react[\"useState\"])({}),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),roomData=_useState12[0],setRoomData=_useState12[1];var _useState13=Object(react[\"useState\"])(''),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),roomId=_useState14[0],setRoomId=_useState14[1];var _useState15=Object(react[\"useState\"])(''),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),searchQuery=_useState16[0],setSearchQuery=_useState16[1];var _useState17=Object(react[\"useState\"])(false),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),searchActive=_useState18[0],setSearchActive=_useState18[1];var _useState19=Object(react[\"useState\"])(true),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),isInitialLoader=_useState20[0],setIsInitialLoader=_useState20[1];var _useState21=Object(react[\"useState\"])(false),_useState22=Object(slicedToArray[\"a\" /* default */])(_useState21,2),isMobInbox=_useState22[0],setIsMobInbox=_useState22[1];var _ref=((_props$history=props.history)===null||_props$history===void 0?void 0:(_props$history$locati=_props$history.location)===null||_props$history$locati===void 0?void 0:_props$history$locati.state)?(_props$history2=props.history)===null||_props$history2===void 0?void 0:(_props$history2$locat=_props$history2.location)===null||_props$history2$locat===void 0?void 0:_props$history2$locat.state:{tradieId:'',builderId:'',jobName:'',jobId:''},tradieId=_ref.tradieId,builderId=_ref.builderId,jobName=_ref.jobName,jobId=_ref.jobId;console.log('tradieId, builderId, jobName, jobId: ',tradieId,builderId,jobName,jobId);Object(react[\"useEffect\"])(function(){console.log(\"roomId:: from didmout\",selectedRoomID);Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Object(actions[\"a\" /* setLoading */])(true);if(!(tradieId&&builderId&&jobName&&jobId)){_context.next=6;break;}_context.next=4;return setInitialItems();case 4:_context.next=7;break;case 6:isFreshChatRoute=true;case 7:_context.next=9;return Object(firebase[\"e\" /* getFirebaseInboxData */])(onUpdateofInbox);case 9:case\"end\":return _context.stop();}}},_callee);}))();return function(){// debugger;\nObject(firebase[\"n\" /* stopListeningOfRoom */])(selectedRoomID);selectedRoomID='';};},[]);var setInitialItems=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var roomID;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:roomID=\"\".concat(jobId,\"_\").concat(tradieId,\"_\").concat(builderId);selectedRoomID=roomID;_context2.next=4;return Object(firebase[\"b\" /* checkRoomExist */])(roomID);case 4:if(!_context2.sent){_context2.next=9;break;}console.log('RoomAlreadyExist: =================>');return _context2.abrupt(\"return\");case 9:_context2.next=11;return Object(firebase[\"c\" /* createRoom */])(jobId,tradieId,builderId,jobName);case 11:console.log('NewRoomCreated: ============>');case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function setInitialItems(){return _ref3.apply(this,arguments);};}();var onUpdateofInbox=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(res){var selectedRoomInfo,sortedRes,ress,newRes,_newRes$,itemObj;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"roomId::\",selectedRoomID);selectedRoomInfo='';sortedRes=res.filter(function(item,index){if(item.hasOwnProperty('lastMsg')||item.roomId===selectedRoomID){if(item.roomId===selectedRoomID&&!isFreshChatRoute){selectedRoomInfo=item;}else{return item;}}});sortedRes===null||sortedRes===void 0?void 0:sortedRes.sort(function(x,y){var _y$lastMsg,_x$lastMsg;return((_y$lastMsg=y.lastMsg)===null||_y$lastMsg===void 0?void 0:_y$lastMsg.messageTimestamp)-((_x$lastMsg=x.lastMsg)===null||_x$lastMsg===void 0?void 0:_x$lastMsg.messageTimestamp);});if(!(sortedRes.length===0&&!selectedRoomInfo)){_context3.next=8;break;}setIsNoRecords(true);if(isInitialLoader){setIsInitialLoader(false);Object(actions[\"a\" /* setLoading */])(false);}return _context3.abrupt(\"return\");case 8:setIsNoRecords(false);if(selectedRoomInfo){ress=Object(toConsumableArray[\"a\" /* default */])(sortedRes);ress.unshift(selectedRoomInfo);}console.log('ress: ',ress,\"sortedRes\",sortedRes,\"res\",res,\"selectedRoomInfo\",selectedRoomInfo);newRes=Array.isArray(ress)&&selectedRoomInfo?ress:sortedRes;setInBoxData(newRes.length===0?[{'firstKey':'emptyRes'}]:newRes);if(!(newRes.length>0&&selectedRoomID==='')){_context3.next=19;break;}selectedRoomID=newRes[0].roomId;setRoomId(newRes[0].roomId);if(newRes[0]&&((_newRes$=newRes[0])===null||_newRes$===void 0?void 0:_newRes$.unreadMessages)>0){newRes[0].unreadMessages=0;Object(firebase[\"j\" /* resetUnreadCounter */])(newRes[0].roomId);}setRoomData(newRes[0]);return _context3.abrupt(\"return\");case 19:if(newRes.length>0){itemObj=newRes.find(function(x){return x.roomId==selectedRoomID;});if(itemObj&&(itemObj===null||itemObj===void 0?void 0:itemObj.unreadMessages)>0){itemObj.unreadMessages=0;Object(firebase[\"j\" /* resetUnreadCounter */])(itemObj.roomId);}setRoomData(itemObj);}case 20:case\"end\":return _context3.stop();}}},_callee3);}));return function onUpdateofInbox(_x){return _ref4.apply(this,arguments);};}();console.log('user: ',user);Object(react[\"useEffect\"])(function(){var unsubscribe=firebase[\"a\" /* auth */].onAuthStateChanged(function(user){if(user){setUser(user);setIsMobInbox(false);}else{setUser(false);setIsMobInbox(true);Object(actions[\"a\" /* setLoading */])(false);setIsInitialLoader(false);}if(initializing){setInitializing(false);}});return unsubscribe;},[initializing]);console.log(props.history,\"history\",roomId,\"roomId\",roomData,\"roomData\",selectedRoomID,\"selectedRoomID\",inBoxData,'inBoxData');var getRoomDetails=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(item){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:Object(firebase[\"n\" /* stopListeningOfRoom */])(selectedRoomID);selectedRoomID=item.roomId;setRoomId(item.roomId);setRoomData(item);Object(firebase[\"j\" /* resetUnreadCounter */])(item.roomId);// fetchEquipmentDetail(item.itemId);\ncase 5:case\"end\":return _context4.stop();}}},_callee4);}));return function getRoomDetails(_x2){return _ref5.apply(this,arguments);};}();Object(react[\"useEffect\"])(function(){var _inBoxData$;if(searchQuery){var filteredVal=inBoxData.filter(function(item){var _item$oppUserInfo,_item$oppUserInfo$nam,_item$oppUserInfo$nam2;return(_item$oppUserInfo=item.oppUserInfo)===null||_item$oppUserInfo===void 0?void 0:(_item$oppUserInfo$nam=_item$oppUserInfo.name)===null||_item$oppUserInfo$nam===void 0?void 0:(_item$oppUserInfo$nam2=_item$oppUserInfo$nam.toLowerCase())===null||_item$oppUserInfo$nam2===void 0?void 0:_item$oppUserInfo$nam2.includes(searchQuery.toLowerCase());});setFilterInBoxData(filteredVal);}if((inBoxData.length||((_inBoxData$=inBoxData[0])===null||_inBoxData$===void 0?void 0:_inBoxData$['firstKey'])==='emptyRes')&&isInitialLoader){var _inBoxData$2;if(((_inBoxData$2=inBoxData[0])===null||_inBoxData$2===void 0?void 0:_inBoxData$2['firstKey'])==='emptyRes')setInBoxData([]);Object(actions[\"a\" /* setLoading */])(false);setIsInitialLoader(false);}},[searchQuery,inBoxData]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"mob_side_nav\",onClick:function onClick(){return setIsMobInbox(true);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:menu_line_blue[\"a\" /* default */],alt:\"mob-side-nav\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"f_row chat_wrapr\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"side_nav_col \".concat(isMobInbox?'active':''),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"close_nav\",onClick:function onClick(){return setIsMobInbox(false);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_cancel_blue[\"a\" /* default */],alt:\"close\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"stick\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"title\",children:\"Chat\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"search_bar \".concat(searchActive?'active':''),onClick:function onClick(){setSearchActive(true);},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",placeholder:\"Search\",value:searchQuery,onChange:function onChange(e){return setSearchQuery(e.target.value.trimLeft());}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:search_chat,alt:\"search\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{className:\"chat_list\",children:searchQuery?filterInBoxData.length===0?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})}):filterInBoxData.map(function(item){var _item$oppUserInfo2,_item$oppUserInfo3,_item$lastMsg,_item$lastMsg2,_item$lastMsg3;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{onClick:function onClick(){getRoomDetails(item);},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(selectedRoomID===item.roomId?'active':''),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"u_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:((_item$oppUserInfo2=item.oppUserInfo)===null||_item$oppUserInfo2===void 0?void 0:_item$oppUserInfo2.image)||u_placeholder[\"a\" /* default */],alt:\"img\",onError:function onError(e){var _e$target,_e$target2;if(e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.src){e.target.src=u_placeholder[\"a\" /* default */];}}})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"detail\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:(_item$oppUserInfo3=item.oppUserInfo)===null||_item$oppUserInfo3===void 0?void 0:_item$oppUserInfo3.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title job line-1\",children:item.jobName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"commn_para line-1\",children:(_item$lastMsg=item.lastMsg)===null||_item$lastMsg===void 0?void 0:_item$lastMsg.messageText}),((_item$lastMsg2=item.lastMsg)===null||_item$lastMsg2===void 0?void 0:_item$lastMsg2.messageTimestamp)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"date_time\",children:Object(common[\"c\" /* formatDateTime */])((_item$lastMsg3=item.lastMsg)===null||_item$lastMsg3===void 0?void 0:_item$lastMsg3.messageTimestamp,'inboxTime')}),selectedRoomID===item.roomId?null:item.unreadMessages===0?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"count\",children:item.unreadMessages})]})]})});}):(inBoxData===null||inBoxData===void 0?void 0:inBoxData.length)>0?inBoxData.map(function(item){var _item$oppUserInfo4,_item$oppUserInfo5,_item$lastMsg4,_item$lastMsg5,_item$lastMsg6,_item$lastMsg7,_item$lastMsg8,_item$lastMsg9;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{onClick:function onClick(){getRoomDetails(item);},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(selectedRoomID===item.roomId?'active':''),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"u_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:((_item$oppUserInfo4=item.oppUserInfo)===null||_item$oppUserInfo4===void 0?void 0:_item$oppUserInfo4.image)||u_placeholder[\"a\" /* default */],alt:\"img\",onError:function onError(e){var _e$target3,_e$target4;if(e===null||e===void 0?void 0:(_e$target3=e.target)===null||_e$target3===void 0?void 0:_e$target3.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target4=e.target)===null||_e$target4===void 0?void 0:_e$target4.src){e.target.src=u_placeholder[\"a\" /* default */];}}})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"detail\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:(_item$oppUserInfo5=item.oppUserInfo)===null||_item$oppUserInfo5===void 0?void 0:_item$oppUserInfo5.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title job line-1\",children:item.jobName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"commn_para line-1\",children:((_item$lastMsg4=item.lastMsg)===null||_item$lastMsg4===void 0?void 0:_item$lastMsg4.messageType)==='text'?(_item$lastMsg5=item.lastMsg)===null||_item$lastMsg5===void 0?void 0:_item$lastMsg5.messageText:((_item$lastMsg6=item.lastMsg)===null||_item$lastMsg6===void 0?void 0:_item$lastMsg6.messageType)==='image'?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{color:'#929292'},children:\"Photo\"}):((_item$lastMsg7=item.lastMsg)===null||_item$lastMsg7===void 0?void 0:_item$lastMsg7.messageType)==='video'?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{color:'#929292'},children:\"Video\"}):''}),((_item$lastMsg8=item.lastMsg)===null||_item$lastMsg8===void 0?void 0:_item$lastMsg8.messageTimestamp)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"date_time\",children:Object(common[\"c\" /* formatDateTime */])((_item$lastMsg9=item.lastMsg)===null||_item$lastMsg9===void 0?void 0:_item$lastMsg9.messageTimestamp,'inboxTime')}),selectedRoomID===item.roomId?null:item.unreadMessages===0?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"count\",children:item.unreadMessages})]})]})});}):props.isLoading?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})})})]})]}),isInitialLoader?null:!isInitialLoader&&(inBoxData===null||inBoxData===void 0?void 0:inBoxData.length)===0?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"flex_row tradies_row\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"no_record\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"no_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:no_search_data[\"a\" /* default */],alt:\"data not found\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"No Data Found\"})]})})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(userMessages,{roomId:selectedRoomID,roomData:roomData,isNoRecords:isNoRecords,history:props.history,isLoading:props.isLoading,inBoxData:inBoxData,setInBoxData:setInBoxData})]})]})});};/* harmony default export */ var chat = (chat_Chat);\n// CONCATENATED MODULE: ./src/pages/chat/index.tsx\nvar mapStateToProps=function mapStateToProps(state){return{isLoading:state.common.isLoading,isSkeletonLoading:state.common.isSkeletonLoading};};var chat_mapDispatchToProps=function mapDispatchToProps(dispatch){return Object(redux[\"b\" /* bindActionCreators */])({},dispatch);};var ChatComponent=Object(es[\"b\" /* connect */])(mapStateToProps,chat_mapDispatchToProps)(chat);/* harmony default export */ var pages_chat = __webpack_exports__[\"default\"] = (ChatComponent);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/ic-cancel-blue.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/menu-line-blue.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/not-found.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/search-chat.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/video@3x.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/icon-direction-blue.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/ic-media.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/ic-send.png","/home/appinventiv/Documents/Project/tickt/web/src/pages/chat/userMessages.tsx","/home/appinventiv/Documents/Project/tickt/web/src/pages/chat/chat.tsx","/home/appinventiv/Documents/Project/tickt/web/src/pages/chat/index.tsx"],"names":["lastDate","docTypes","UserMessages","props","divRref","useRef","useState","storageService","getItem","_id","userId","toggle","setToggle","jobDetailLoader","setJobDetailLoader","currentJobDetails","setCurrentJobDetails","messageText","setMessageText","messages","setMessages","isDocUploading","setIsDocUploading","itemsMedia","setItemsMedia","toggler","setToggler","selectedSlide","setSelectSlide","fsSlideListner","setFsSlideListner","oppUserFcmToken","setOppUserFcmToken","useEffect","roomId","getMessagesOfRoom","onReceiveOfNewMsg","console","log","roomData","scrollToBottom","current","scroll","scrollHeight","clientHeight","scrollTo","arrmsg","fsSlideObj","mediaMsgs","slideCount","length","filter","item","index","messageType","setInboxToTopWithLastMsg","lastMsg","newInboxData","inBoxData","currentIndex","findIndex","i","splice","unshift","setInBoxData","sendMessage","trimLeft","sendTextMessage","oppUserInfo","deviceToken","deviceType","hasOwnProperty","isNotification","sendFCMPushNotificationToOppUser","mData","timeStamp","moengage","getCurrentTimeStamp","moE_SendEvent","MoEConstants","CHAT","mixPanel","mixP_SendEvent","handleKeyDown","event","key","sendImageVideoMsg","url","msgType","sendImageVideoMessage","fetchJobDetail","jobId","getJobDetails","res","success","jobInfo","jobDescription","data","details","jobName","amount","locationName","fromDate","toDate","duration","status","renderMediaItems","sources","types","forEach","push","mediaUrl","setResDeviceType","msg","Number","app_icon","title","notificationText","userName","senderName","room_id","messageRoomId","image","user_image","notificationType","sound","body","sender","first_name","device_token","user_id","device_type","split","badge","notification_type","messageId","notification","newData","to","headers_","Constants","FcmHeaderAuthorizationKey","fetch","method","headers","JSON","stringify","response","handleUpload","e","maxFileSize","formData","FormData","newFile","target","files","fileType","type","toLowerCase","selectedFileSize","size","includes","indexOf","setShowToast","append","check_type","onFileUpload","imgUrl","renderTextMsg","curDate","formatDateTime","messageTimestamp","messageClass","senderId","renderImageMsg","notFound","onerror","src","prev","renderVideoMsg","chatVideoIcon","displayMessages","isNoRecords","dummy","history","name","viewMore","map","isBlock","color","sendMedia","value","sendBtn","loader","close","renderTime","urlEncode","selectedRoomID","isFreshChatRoute","Chat","initializing","setInitializing","auth","currentUser","user","setUser","filterInBoxData","setFilterInBoxData","setIsNoRecords","setRoomData","setRoomId","searchQuery","setSearchQuery","searchActive","setSearchActive","isInitialLoader","setIsInitialLoader","isMobInbox","setIsMobInbox","location","state","tradieId","builderId","setLoading","setInitialItems","getFirebaseInboxData","onUpdateofInbox","stopListeningOfRoom","roomID","checkRoomExist","createRoom","selectedRoomInfo","sortedRes","sort","x","y","ress","newRes","Array","isArray","unreadMessages","resetUnreadCounter","itemObj","find","unsubscribe","onAuthStateChanged","getRoomDetails","filteredVal","menu","chatSearch","isLoading","noData","mapStateToProps","common","isSkeletonLoading","mapDispatchToProps","dispatch","bindActionCreators","ChatComponent","connect"],"mappings":"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","file":"x","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/not-found.c5fd5f1f.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\"","import React, { useState, useEffect, useRef } from 'react';\nimport { getJobDetails } from '../../redux/jobs/actions';\nimport storageService from '../../utils/storageService';\n\nimport notFound from '../../assets/images/not-found.png';\nimport chatVideoIcon from '../../assets/images/video@3x.png';\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport viewMore from '../../assets/images/icon-direction-blue.png';\nimport close from '../../assets/images/ic-cancel-blue.png';\nimport sendMedia from '../../assets/images/ic-media.png';\nimport sendBtn from '../../assets/images/ic-send.png';\nimport loader from '../../assets/images/loader.gif';\n\nimport { formatDateTime, renderTime } from '../../utils/common';\nimport { setShowToast } from '../../redux/common/actions';\nimport { onFileUpload } from '../../redux/auth/actions';\nimport {\n    getMessagesOfRoom,\n    sendTextMessage,\n    sendImageVideoMessage,\n} from '../../services/firebase';\n\nimport Constants from '../../utils/constants';\n\n//@ts-ignore\nimport FsLightbox from 'fslightbox-react';\nimport { moengage, mixPanel } from '../../services/analyticsTools';\nimport { MoEConstants } from '../../utils/constants';\ninterface Types {\n    [key: string]: any | string;\n}\n\nlet lastDate = '';\nconst docTypes: Array<any> = [\"jpeg\", \"jpg\", \"png\", \"mp4\", \"wmv\", \"avi\"];\n\nconst UserMessages = (props: any) => {\n    const divRref = useRef<HTMLDivElement>(null);\n    const [userId] = useState<string>(storageService.getItem('userInfo')?._id);\n    const [toggle, setToggle] = useState<boolean>(false);\n    const [jobDetailLoader, setJobDetailLoader] = useState<boolean>(false);\n    const [currentJobDetails, setCurrentJobDetails] = useState<any>(null);\n    const [messageText, setMessageText] = useState<any>('');\n    const [messages, setMessages] = useState<Array<any>>([]);\n    const [isDocUploading, setIsDocUploading] = useState<boolean>(false);\n\n    const [itemsMedia, setItemsMedia] = useState([]);\n    const [toggler, setToggler] = useState(false);\n    const [selectedSlide, setSelectSlide] = useState<any>(1);\n    const [fsSlideListner, setFsSlideListner] = useState<any>({});\n    const [oppUserFcmToken, setOppUserFcmToken] = useState<any>('');\n\n    useEffect(() => {\n        if (props.roomId !== '') {\n            lastDate = '';\n            getMessagesOfRoom(props.roomId, onReceiveOfNewMsg);\n            setSelectSlide(1);\n            setFsSlideListner({});\n            setItemsMedia([]);\n            setCurrentJobDetails(null);\n            setToggle(false);\n        }\n    }, [props.roomId]);\n    // }, [props.roomId, props.roomData]);\n    console.log('props.roomData: ', props.roomData);\n\n    useEffect(() => {\n        scrollToBottom();\n    });\n\n    const scrollToBottom = () => {\n        if (null !== divRref?.current) {\n            const scroll =\n                divRref.current.scrollHeight -\n                divRref.current.clientHeight;\n            // divRref.current.scrollIntoView({ behavior: \"smooth\" })\n            divRref.current.scrollTo(0, scroll);\n        }\n    }\n\n    const onReceiveOfNewMsg = (arrmsg: any) => {\n        console.log('arrmsg: ', arrmsg);\n        setMessages(arrmsg);\n    }\n\n    useEffect(() => {\n        let fsSlideObj: any = {};\n        let mediaMsgs: any = [];\n        let slideCount = 1;\n        if (messages.length) {\n            mediaMsgs = messages.filter((item: any, index: number) => {\n                if (item.messageType === 'image' || item.messageType === 'video') {\n                    fsSlideObj[`${index}`] = slideCount++;\n                    return item;\n                }\n            });\n            setItemsMedia(mediaMsgs);\n            setFsSlideListner(fsSlideObj);\n        }\n    }, [messages]);\n    console.log('itemsMedia: ', itemsMedia, \"fsSlideListner\", fsSlideListner);\n\n    const setInboxToTopWithLastMsg = (lastMsg: any) => {\n        const newInboxData = [...props.inBoxData];\n        const currentIndex = newInboxData.findIndex(i => i.roomId === props.roomId);\n        newInboxData[currentIndex].lastMsg = lastMsg;\n        newInboxData.splice(currentIndex, 1);\n        newInboxData.unshift(props.inBoxData[currentIndex]);\n        props.setInBoxData(newInboxData);\n        console.log('lastMsg: ', lastMsg);\n        console.log('currentIndex: ', currentIndex);\n        console.log('newInboxData: ', newInboxData);\n    }\n\n    const sendMessage = async () => {\n        //setIsLoading(true);\n        if (messageText && messageText.trimLeft() !== \"\") {\n            setMessageText('');\n            const lastMsg: any = await sendTextMessage(props.roomId, messageText);\n            if (lastMsg &&\n                props.roomData?.oppUserInfo?.deviceToken\n                && props.roomData?.oppUserInfo?.deviceType\n                && (props.roomData?.oppUserInfo?.hasOwnProperty('isNotification') ? props.roomData?.oppUserInfo?.isNotification : true)\n            ) {\n                sendFCMPushNotificationToOppUser(lastMsg);\n                const mData = {\n                    timeStamp: moengage.getCurrentTimeStamp(),\n                }\n                moengage.moE_SendEvent(MoEConstants.CHAT, mData);\n                mixPanel.mixP_SendEvent(MoEConstants.CHAT, mData);\n            }\n            setInboxToTopWithLastMsg(lastMsg);\n        }\n    }\n\n    const handleKeyDown = (event: any) => {\n        if (event.key === 'Enter') {\n            sendMessage();\n        }\n    }\n\n    const sendImageVideoMsg = async (url: string, msgType: string) => {\n        //setIsLoading(true);\n        if (url && url !== '') {\n            const lastMsg: any = await sendImageVideoMessage(props.roomId, url, msgType);\n            if (lastMsg\n                && props.roomData?.oppUserInfo?.deviceToken\n                && props.roomData?.oppUserInfo?.deviceType\n                && (props.roomData?.oppUserInfo?.hasOwnProperty('isNotification') ? props.roomData?.oppUserInfo?.isNotification : true)\n            ) {\n                sendFCMPushNotificationToOppUser(lastMsg);\n            }\n            setInboxToTopWithLastMsg(lastMsg);\n        }\n        setMessageText('');\n    }\n\n\n    const fetchJobDetail = async (jobId: any) => {\n        setJobDetailLoader(true);\n        const res = await getJobDetails(jobId);\n        if (res.success) {\n            const jobInfo = {\n                jobDescription: res.data?.details || '',\n                jobId: res.data?.jobId || '',\n                jobName: res.data?.jobName || '',\n                amount: res.data?.amount || '',\n                locationName: res.data?.locationName || '',\n                fromDate: res.data?.fromDate || '',\n                toDate: res.data?.toDate || '',\n                duration: res.data?.duration || '',\n                status: res.data?.status || '',\n            }\n            setCurrentJobDetails(jobInfo);\n            setJobDetailLoader(false);\n        }\n    }\n\n    const renderMediaItems = (itemsMedia: any) => {\n        let sources: any = [];\n        let types: any = [];\n\n        if (itemsMedia.length) {\n            itemsMedia.forEach((item: any) => {\n                if (item.messageType === 'video') {\n                    sources.push(item.mediaUrl);\n                    types.push('video');\n                }\n                if (item.messageType === 'image') {\n                    sources.push(item.mediaUrl);\n                    types.push('image');\n                }\n            })\n        }\n\n        return { sources, types };\n    }\n\n    const setResDeviceType = (deviceType: number, msg: any) => {\n        switch (Number(deviceType)) {\n            case 1:\n                return {\n                    app_icon: \"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",\n                    title: \"Tickt App\",\n                    notificationText: `${storageService.getItem('userInfo')?.userName} send you a message`,\n                    senderName: `${storageService.getItem('userInfo')?.userName}`,\n                    messageType: `${msg?.messageType}`,\n                    messageText: `${msg?.messageType === 'text' ? msg?.messageText : ''}`,\n                    room_id: msg?.messageRoomId,\n                    image: storageService.getItem('userInfo')?.user_image,\n                    notificationType: 25,\n                    sound: \"default\",\n                }\n            case 2:\n                return {\n                    body: msg?.messageText,\n                    messageText: msg?.messageText,\n                    sender: {\n                        first_name: storageService.getItem('userInfo')?.userName,\n                        device_token: storageService.getItem('fcmToken'),\n                        user_id: storageService.getItem('userInfo')?._id,\n                        device_type: 2,\n                    },\n                    jobId: msg?.messageRoomId?.split('_')?.[0],\n                    badge: 1,\n                    device_type: 2,\n                    title: storageService.getItem('userInfo')?.userName,\n                    jobName: props.roomData?.jobName,\n                    notification_type: 50,\n                    sound: 'default',\n                    messageId: msg?.messageId,\n                }\n            case 3:\n                return {\n                    notification: {\n                        body: msg?.messageText,\n                        title: storageService.getItem('userInfo')?.userName\n                    },\n                    data: {\n                        body: msg?.messageText,\n                        messageText: msg?.messageText,\n                        sender: {\n                            first_name: storageService.getItem('userInfo')?.userName,\n                            device_token: storageService.getItem('fcmToken'),\n                            user_id: storageService.getItem('userInfo')?._id,\n                            device_type: 2,\n                        },\n                        jobId: msg?.messageRoomId?.split('_')?.[0],\n                        badge: 1,\n                        device_type: 2,\n                        title: storageService.getItem('userInfo')?.userName,\n                        jobName: props.roomData?.jobName,\n                        notification_type: 50,\n                        sound: 'default',\n                        messageId: msg?.messageId,\n                    }\n                }\n            default:\n                return;\n        }\n    }\n    const sendFCMPushNotificationToOppUser = async (msg: any) => {\n        let data = setResDeviceType(props.roomData?.oppUserInfo?.deviceType, msg);\n        let newData = {\n            to: `${props.roomData?.oppUserInfo?.deviceToken}`,\n            ...(props.roomData?.oppUserInfo?.deviceType == 1 && { data: data }),\n            ...(props.roomData?.oppUserInfo?.deviceType == 2 && { notification: data }),\n            ...(props.roomData?.oppUserInfo?.deviceType == 3 && { notification: data?.notification, data: data?.data }),\n        };\n\n        const headers_: Types = {\n            'Content-Type': 'application/json',\n            'Authorization': Constants.FcmHeaderAuthorizationKey,\n        }\n        const response: any = await fetch(`https://fcm.googleapis.com/fcm/send`, {\n            method: \"POST\",\n            headers: headers_,\n            body: JSON.stringify(newData)\n        });\n        // const res: any = await response.json();\n        if (response.status === 200) {\n            console.log('Chat push notification send to opposite user: success');\n        } else {\n            console.log('Chat push notification send to opposite user: failure');\n        }\n    }\n\n    const handleUpload = async (e: any) => {\n        let maxFileSize: number = 10;\n        const formData = new FormData();\n        const newFile = e.target.files[0];\n        var fileType = (newFile?.type?.split('/')[1])?.toLowerCase();\n\n        var selectedFileSize = newFile?.size / 1024 / 1024; // size in mb\n        if ([\"mp4\", \"wmv\", \"avi\"].includes(fileType)) {\n            maxFileSize = 20;\n        }\n        if (docTypes.indexOf(fileType) < 0 || (selectedFileSize > maxFileSize)) {\n            setShowToast(true, \"The file must be in proper format or size\")\n            return;\n        }\n\n        formData.append('file', newFile);\n        setIsDocUploading(true);\n        let check_type: any = [\"jpeg\", \"jpg\", \"png\"].includes(fileType) ? 1 : [\"mp4\", \"wmv\", \"avi\"].includes(fileType) ? 2 : null;\n        const res = await onFileUpload(formData);\n        if (res.success && res.imgUrl) {\n            if (check_type === 1) {\n                sendImageVideoMsg(res.imgUrl, \"image\");\n            } else if (check_type === 2) {\n                sendImageVideoMsg(res.imgUrl, \"video\");\n            } else {\n                setShowToast(true, \"There is some technical issue\");\n            }\n            setIsDocUploading(false);\n            // setLocalFiles((prev: any) => ({ ...prev, [filesUrl?.length]: URL.createObjectURL(newFile) }));\n        }\n    }\n\n    const renderTextMsg = (msg: any) => {\n        let curDate = formatDateTime(msg.messageTimestamp, 'day');\n        const messageClass = msg.senderId === userId ? 'message' : 'message recive_msg';\n        if (lastDate === '' || lastDate !== curDate) {\n            lastDate = curDate;\n            return (\n                <>\n                    <div className=\"date_time\">\n                        <span>{curDate}</span>\n                    </div>\n                    <div className={`${messageClass}`}>\n                        <p className={`${msg.senderId === userId ? 'mark' : ''}`}>{msg.messageText}\n                            <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                        </p>\n                    </div>\n                </>\n            )\n        } else\n            return (\n                <div className={`${messageClass}`}>\n                    <p className={`${msg.senderId === userId ? 'mark' : ''}`}>{msg.messageText}\n                        <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                    </p>\n                </div>\n            )\n    }\n\n    const renderImageMsg = (msg: any, index: number) => {\n        let curDate = formatDateTime(msg.messageTimestamp, 'day');\n        const messageClass = msg.senderId === userId ? 'message' : 'message recive_msg';\n        if (lastDate === '' || lastDate !== curDate) {\n            lastDate = curDate;\n            return (\n                <>\n                    <div className=\"date_time\">\n                        <span>{curDate}</span>\n                    </div>\n                    <div className={`${messageClass}`}>\n                        <figure className=\"media\">\n                            <img src={msg.mediaUrl || notFound} alt=\"media\"\n                                async-src={msg.mediaUrl || notFound}\n                                decoding=\"async\"\n                                loading=\"lazy\"\n                                onError={(e: any) => {\n                                    if (e?.target?.onerror) {\n                                        e.target.onerror = null;\n                                    }\n                                    if (e?.target?.src) {\n                                        e.target.src = notFound;\n                                    }\n                                }}\n                                onClick={() => {\n                                    setToggler((prev: any) => !prev);\n                                    setSelectSlide(fsSlideListner[`${index}`]);\n                                }} />\n                            <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                        </figure>\n                    </div>\n                </>\n            )\n        } else\n            return (\n                <div className={`${messageClass}`}>\n                    <figure className=\"media\">\n                        <img src={msg.mediaUrl || notFound} alt=\"media\"\n                            async-src={msg.mediaUrl || notFound}\n                            decoding=\"async\"\n                            loading=\"lazy\"\n                            onError={(e: any) => {\n                                if (e?.target?.onerror) {\n                                    e.target.onerror = null;\n                                }\n                                if (e?.target?.src) {\n                                    e.target.src = notFound;\n                                }\n                            }}\n                            onClick={() => {\n                                setToggler((prev: any) => !prev);\n                                setSelectSlide(fsSlideListner[`${index}`]);\n                            }} />\n                        <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                    </figure>\n                </div>\n            )\n    }\n\n    const renderVideoMsg = (msg: any, index: number) => {\n        let curDate = formatDateTime(msg.messageTimestamp, 'day');\n        const messageClass = msg.senderId === userId ? 'message' : 'message recive_msg';\n        if (lastDate === '' || lastDate !== curDate) {\n            lastDate = curDate;\n            return (\n                <>\n                    <div className=\"date_time\">\n                        <span>{curDate}</span>\n                    </div>\n                    <div className={`${messageClass}`}>\n                        <figure className=\"media media_video \">\n                            <video src={msg.mediaUrl || notFound}\n                                poster={chatVideoIcon}\n                                onClick={() => {\n                                    setToggler((prev: any) => !prev);\n                                    setSelectSlide(fsSlideListner[`${index}`]);\n                                }}\n                            />\n                            <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                        </figure>\n                    </div>\n                </>\n            )\n        } else\n            return (\n                <div className={`${messageClass}`}>\n                    <figure className=\"media media_video \">\n                        <video src={msg.mediaUrl || notFound}\n                            poster={chatVideoIcon}\n                            onClick={() => {\n                                setToggler((prev: any) => !prev);\n                                setSelectSlide(fsSlideListner[`${index}`]);\n                            }}\n                        />\n                        <span className=\"time\">{formatDateTime(msg.messageTimestamp, \"time\")}</span>\n                    </figure>\n                </div>\n            )\n    }\n\n    const displayMessages = (msg: any, index: number) => {\n        if (index === 0) lastDate = '';\n        switch (msg.messageType) {\n            case \"text\":\n                return renderTextMsg(msg);\n            case \"image\":\n                return renderImageMsg(msg, index);\n            case \"video\":\n                return renderVideoMsg(msg, index);\n        }\n    }\n\n    const { sources, types } = renderMediaItems(itemsMedia);\n\n    return (props.isNoRecords ? (\n        <div className=\"detail_col\">\n            <div className=\"flex_row\">\n                {/* <div>No Record Found</div> */}\n                <div></div>\n            </div>\n        </div>\n    ) : (\n        <>\n            <FsLightbox\n                toggler={toggler}\n                slide={selectedSlide}\n                sources={sources}\n                types={types}\n                key={sources?.length}\n                // disableLocalStorage={true}\n                onClose={() => {\n                    setSelectSlide(1)\n                }}\n            />\n            <div className=\"detail_col\">\n                <div className=\"flex_row\">\n\n\n                    <div className={`chat_col ${toggle ? 'active' : ''}`}>\n                        <div className=\"chat_user\">\n                            <figure className=\"u_img\">\n                                <img\n                                    src={props.roomData?.oppUserInfo?.image || dummy}\n                                    alt=\"user-img\"\n                                    onError={(e: any) => {\n                                        if (e?.target?.onerror) {\n                                            e.target.onerror = null;\n                                        }\n                                        if (e?.target?.src) {\n                                            e.target.src = dummy;\n                                        }\n                                    }}\n                                />\n                            </figure>\n                            <span className=\"name\"\n                                onClick={() => {\n                                    if (storageService.getItem('userType') === 2) {\n                                        props.history.push(`/tradie-info?tradeId=${props.roomData?.oppUserInfo?.userId}&hideInvite=true`);\n                                    } else {\n                                        props.history.push(`/builder-info?builderId=${props.roomData?.oppUserInfo?.userId}`);\n                                    }\n                                }}>{props.roomData?.oppUserInfo?.name}</span>\n                            {!toggle && <span\n                                onClick={() => {\n                                    setToggle(true);\n                                    if (currentJobDetails) return;\n                                    fetchJobDetail(props.roomData?.jobId);\n                                }}\n                                className=\"view_detail\">View Job Details\n                                <img src={viewMore} alt=\"view-more\" />\n                            </span>}\n                        </div>\n                        <div className=\"message_wrapr\" ref={divRref}>\n                            {messages.length > 0 && messages.map((msg: any, index: number) => {\n                                return (\n                                    displayMessages(msg, index)\n                                )\n                            })}\n                            <div className=\"date_time\">\n                                {props.roomData?.oppUserInfo?.isBlock && < i style={{ color: '#929292' }}>{'You can no longer chat with the user'}</i>}\n                            </div>\n                        </div>\n\n                        {!props.roomData?.oppUserInfo?.isBlock && <div className=\"send_msg\">\n                            <div className=\"text_field\">\n                                <label className=\"upload_item\" htmlFor=\"upload_item\">\n                                    <span className=\"detect_icon_ltr\">\n                                        <img src={sendMedia} alt=\"media\" />\n                                    </span>\n                                </label>\n                                <input\n                                    id=\"upload_item\"\n                                    className=\"hide\"\n                                    type=\"file\"\n                                    accept=\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\"\n                                    onChange={handleUpload}\n                                    disabled={isDocUploading}\n                                />\n                                <textarea placeholder=\"Message..\"\n                                    onKeyDown={handleKeyDown}\n                                    value={messageText} onChange={(e) => setMessageText(e.target.value)} />\n                                <span className=\"detect_icon\">\n                                    <img src={sendBtn} alt=\"send\" onClick={sendMessage} />\n                                </span>\n                            </div>\n                        </div>}\n                    </div>\n\n                    {(toggle && jobDetailLoader) ? (\n                        <div className=\"view_detail_col\">\n                            <div className=\"no_record\">\n                                <figure>\n                                    <img src={loader} alt=\"loader\" width=\"130px\" />\n                                </figure>\n                            </div>\n                        </div>\n                    ) : toggle ? (\n                        <div className=\"view_detail_col\">\n                            <div className=\"f_spacebw relative\">\n                                <span className=\"title line-2 pr-20\">{currentJobDetails?.jobName}</span>\n                                <span\n                                    onClick={() => {\n                                        setToggle((prev) => !prev)\n                                    }}\n                                    className=\"close\">\n                                    <img src={close} alt=\"close\" />\n                                </span>\n                            </div>\n\n                            <div className=\"job_info\">\n                                <ul>\n                                    <li className=\"icon clock\">{renderTime(currentJobDetails?.fromDate, currentJobDetails?.toDate)}</li>\n                                    <li className=\"icon dollar\">{currentJobDetails?.amount}</li>\n                                    <li className=\"icon location line-1\">{currentJobDetails?.locationName}</li>\n                                    <li className=\"icon calendar\">{currentJobDetails?.duration}</li>\n                                </ul>\n                            </div>\n\n                            <p className=\"commn_para\">\n                                {currentJobDetails?.jobDescription}\n                            </p>\n\n                            <button className=\"fill_btn full_btn btn-effect\"\n                                onClick={() => {\n                                    if (storageService.getItem('userType') === 1) {\n                                        props.history.push(`/job-details-page?jobId=${currentJobDetails?.jobId}&redirect_from=jobs`);\n                                    } else {\n                                        // let urlEncode: any = window.btoa(`?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`)\n                                        let urlEncode: any = `?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`\n                                        props.history.push(`/job-detail?${urlEncode}`);\n                                    }\n                                }}>View Job details</button>\n                        </div>\n                    ) : null}\n                </div>\n            </div >\n        </>)\n    )\n}\n\nexport default UserMessages;\n","import React, { useState, useEffect } from 'react';\n\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport chatSearch from '../../assets/images/search-chat.png';\nimport menu from '../../assets/images/menu-line-blue.png';\nimport close from '../../assets/images/ic-cancel-blue.png';\n\nimport { setLoading } from '../../redux/common/actions';\nimport { formatDateTime } from '../../utils/common';\nimport noData from '../../assets/images/no-search-data.png';\n\nimport {\n    auth,\n    createRoom,\n    checkRoomExist,\n    getFirebaseInboxData,\n    stopListeningOfRoom,\n    resetUnreadCounter,\n} from '../../services/firebase';\n\nimport UserMessages from './userMessages';\n\ninterface PropTypes {\n    builderProfile: any,\n    tradieProfileData: any,\n    isLoading: boolean,\n    history: any,\n}\n\nlet selectedRoomID = '';\nlet isFreshChatRoute: boolean = false;\n\nconst Chat = (props: PropTypes) => {\n    const [initializing, setInitializing] = useState<boolean>(true);\n    // firebase authenticated user details\n    const [user, setUser] = useState<any>(() => auth.currentUser);\n    const [inBoxData, setInBoxData] = useState<any>([]);\n    const [filterInBoxData, setFilterInBoxData] = useState<any>([]);\n    const [isNoRecords, setIsNoRecords] = useState<boolean>(false);\n    const [roomData, setRoomData] = useState<any>({});\n    const [roomId, setRoomId] = useState<string>('');\n    const [searchQuery, setSearchQuery] = useState('');\n    const [searchActive, setSearchActive] = useState(false);\n    const [isInitialLoader, setIsInitialLoader] = useState(true);\n    const [isMobInbox, setIsMobInbox] = useState<boolean>(false);\n\n    const { tradieId, builderId, jobName, jobId } = props.history?.location?.state ? props.history?.location?.state : { tradieId: '', builderId: '', jobName: '', jobId: '' };\n    console.log('tradieId, builderId, jobName, jobId: ', tradieId, builderId, jobName, jobId);\n\n    useEffect(() => {\n        console.log(\"roomId:: from didmout\", selectedRoomID);\n        (async () => {\n            setLoading(true);\n            if (tradieId && builderId && jobName && jobId) {\n                await setInitialItems();\n            } else {\n                isFreshChatRoute = true;\n            }\n            await getFirebaseInboxData(onUpdateofInbox);\n            // debugger;\n        })();\n\n        return () => {\n            // debugger;\n            stopListeningOfRoom(selectedRoomID);\n            selectedRoomID = '';\n        }\n    }, []);\n\n    const setInitialItems = async () => {\n        const roomID: string = `${jobId}_${tradieId}_${builderId}`;\n        selectedRoomID = roomID;\n        if (await checkRoomExist(roomID)) {\n            console.log('RoomAlreadyExist: =================>');\n            return;\n        } else {\n            await createRoom(jobId, tradieId, builderId, jobName);\n            console.log('NewRoomCreated: ============>');\n        }\n    }\n\n    const onUpdateofInbox = async (res: any) => {\n        console.log(\"roomId::\", selectedRoomID);\n        let selectedRoomInfo: any = '';\n        const sortedRes = res.filter((item: any, index: number) => {\n            if (item.hasOwnProperty('lastMsg') || item.roomId === selectedRoomID) {\n                if (item.roomId === selectedRoomID && !isFreshChatRoute) {\n                    selectedRoomInfo = item;\n                } else {\n                    return item;\n                }\n            }\n        });\n\n        sortedRes?.sort(function (x: any, y: any) {\n            return y.lastMsg?.messageTimestamp - x.lastMsg?.messageTimestamp;\n        });\n\n        if (sortedRes.length === 0 && !selectedRoomInfo) {\n            setIsNoRecords(true);\n            if (isInitialLoader) {\n                setIsInitialLoader(false);\n                setLoading(false);\n            }\n            return;\n        }\n        setIsNoRecords(false);\n\n        let ress: any;\n        if (selectedRoomInfo) {\n            ress = [...sortedRes];\n            ress.unshift(selectedRoomInfo);\n        }\n        console.log('ress: ', ress, \"sortedRes\", sortedRes, \"res\", res, \"selectedRoomInfo\", selectedRoomInfo);\n        const newRes = (Array.isArray(ress) && selectedRoomInfo) ? ress : sortedRes;\n        setInBoxData(newRes.length === 0 ? [{ 'firstKey': 'emptyRes' }] : newRes);\n        if (newRes.length > 0 && selectedRoomID === '') {\n            selectedRoomID = newRes[0].roomId;\n            setRoomId(newRes[0].roomId);\n            if (newRes[0] && newRes[0]?.unreadMessages > 0) {\n                newRes[0].unreadMessages = 0;\n                resetUnreadCounter(newRes[0].roomId);\n            }\n            setRoomData(newRes[0]);\n            return;\n            // fetchJobDetail(res[0].item?.jobId);\n        }\n\n        if (newRes.length > 0) {\n            let itemObj = newRes.find((x: any) => x.roomId == selectedRoomID);\n\n            if (itemObj && itemObj?.unreadMessages > 0) {\n                itemObj.unreadMessages = 0;\n                resetUnreadCounter(itemObj.roomId);\n            }\n            setRoomData(itemObj);\n        }\n    }\n\n    console.log('user: ', user);\n\n    useEffect(() => {\n        let unsubscribe = auth.onAuthStateChanged(user => {\n            if (user) {\n                setUser(user);\n                setIsMobInbox(false);\n            } else {\n                setUser(false);\n                setIsMobInbox(true);\n                setLoading(false);\n                setIsInitialLoader(false);\n            }\n            if (initializing) {\n                setInitializing(false);\n            }\n        });\n\n        return unsubscribe;\n    }, [initializing]);\n\n    console.log(props.history, \"history\", roomId, \"roomId\", roomData, \"roomData\", selectedRoomID, \"selectedRoomID\", inBoxData, 'inBoxData');\n\n    const getRoomDetails = async (item: any) => {\n        stopListeningOfRoom(selectedRoomID);\n        selectedRoomID = item.roomId;\n        setRoomId(item.roomId);\n        setRoomData(item);\n        resetUnreadCounter(item.roomId);\n        // fetchEquipmentDetail(item.itemId);\n    }\n\n    useEffect(() => {\n        if (searchQuery) {\n            let filteredVal = inBoxData.filter((item: any) => item.oppUserInfo?.name?.toLowerCase()?.includes(searchQuery.toLowerCase()));\n            setFilterInBoxData(filteredVal);\n        }\n        if ((inBoxData.length || inBoxData[0]?.['firstKey'] === 'emptyRes') && isInitialLoader) {\n            if (inBoxData[0]?.['firstKey'] === 'emptyRes') setInBoxData([]);\n            setLoading(false);\n            setIsInitialLoader(false);\n        }\n    }, [searchQuery, inBoxData]);\n\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"custom_container\">\n                <span className=\"mob_side_nav\" onClick={() => setIsMobInbox(true)}>\n                    <img src={menu} alt=\"mob-side-nav\" />\n                </span>\n                <div className=\"f_row chat_wrapr\">\n                    <div className={`side_nav_col ${isMobInbox ? 'active' : ''}`}>\n                        <button className=\"close_nav\" onClick={() => setIsMobInbox(false)}>\n                            <img src={close} alt=\"close\" />\n                        </button>\n                        <div className=\"stick\">\n                            <span className=\"title\">Chat</span>\n                            <div className={`search_bar ${searchActive ? 'active' : ''}`} onClick={() => { setSearchActive(true) }}>\n                                <input type=\"text\" placeholder=\"Search\" value={searchQuery} onChange={(e: any) => setSearchQuery(e.target.value.trimLeft())} />\n                                <span className=\"detect_icon_ltr\">\n                                    <img src={chatSearch} alt=\"search\" />\n                                </span>\n                            </div>\n                            <ul className=\"chat_list\">\n                                {searchQuery ? filterInBoxData.length === 0 ? (\n                                    <li>\n                                        <a href=\"javascript:void(0)\" className=\"chat\">\n                                            <div className=\"detail\">\n                                                <span className=\"inner_title line-1\">No Record Found</span>\n                                            </div>\n                                        </a>\n                                    </li>\n                                ) : filterInBoxData.map((item: any) => {\n                                    return (\n                                        <li onClick={() => { getRoomDetails(item) }}>\n                                            <a href=\"javascript:void(0)\" className={`chat ${selectedRoomID === item.roomId ? 'active' : ''}`}>\n                                                <figure className=\"u_img\">\n                                                    <img\n                                                        src={item.oppUserInfo?.image || dummy}\n                                                        alt=\"img\"\n                                                        onError={(e: any) => {\n                                                            if (e?.target?.onerror) {\n                                                                e.target.onerror = null;\n                                                            }\n                                                            if (e?.target?.src) {\n                                                                e.target.src = dummy;\n                                                            }\n                                                        }}\n                                                    />\n                                                </figure>\n                                                <div className=\"detail\">\n                                                    <span className=\"inner_title line-1\">{item.oppUserInfo?.name}</span>\n                                                    <span className=\"inner_title job line-1\">{item.jobName}</span>\n                                                    <p className=\"commn_para line-1\">{item.lastMsg?.messageText}</p>\n                                                    {item.lastMsg?.messageTimestamp && <span className=\"date_time\">{formatDateTime(item.lastMsg?.messageTimestamp, 'inboxTime')}</span>}\n                                                    {(selectedRoomID === item.roomId) ? null : item.unreadMessages === 0 ? null : <span className=\"count\">{item.unreadMessages}</span>}\n                                                </div>\n                                            </a>\n                                        </li>\n                                    )\n                                }) : inBoxData?.length > 0 ? inBoxData.map((item: any) => {\n                                    return (\n                                        <li onClick={() => { getRoomDetails(item) }}>\n                                            <a href=\"javascript:void(0)\" className={`chat ${selectedRoomID === item.roomId ? 'active' : ''}`}>\n                                                <figure className=\"u_img\">\n                                                    <img\n                                                        src={item.oppUserInfo?.image || dummy}\n                                                        alt=\"img\"\n                                                        onError={(e: any) => {\n                                                            if (e?.target?.onerror) {\n                                                                e.target.onerror = null;\n                                                            }\n                                                            if (e?.target?.src) {\n                                                                e.target.src = dummy;\n                                                            }\n                                                        }}\n                                                    />\n                                                </figure>\n                                                <div className=\"detail\">\n                                                    <span className=\"inner_title line-1\">{item.oppUserInfo?.name}</span>\n                                                    <span className=\"inner_title job line-1\">{item.jobName}</span>\n                                                    <p className=\"commn_para line-1\">{item.lastMsg?.messageType === 'text' ? item.lastMsg?.messageText : item.lastMsg?.messageType === 'image' ? <i style={{ color: '#929292' }}>Photo</i> : item.lastMsg?.messageType === 'video' ? <i style={{ color: '#929292' }}>Video</i> : ''}</p>\n                                                    {item.lastMsg?.messageTimestamp && <span className=\"date_time\">{formatDateTime(item.lastMsg?.messageTimestamp, 'inboxTime')}</span>}\n                                                    {(selectedRoomID === item.roomId) ? null : item.unreadMessages === 0 ? null : <span className=\"count\">{item.unreadMessages}</span>}\n                                                </div>\n                                            </a>\n                                        </li>\n                                    )\n                                }) : props.isLoading ? null : (\n                                    <li>\n                                        <a href=\"javascript:void(0)\" className=\"chat\">\n                                            <div className=\"detail\">\n                                                <span className=\"inner_title line-1\">No Record Found</span>\n                                            </div>\n                                        </a>\n                                    </li>\n                                )}\n                            </ul>\n                        </div>\n                    </div>\n                    {/* {(isInitialLoader || inBoxData?.length === 0) ? null : */}\n                    {isInitialLoader ? null :\n                        (!isInitialLoader && inBoxData?.length === 0) ?\n                            <div className=\"detail_col\">\n                                <div className=\"flex_row tradies_row\">\n                                    <div className=\"no_record\">\n                                        <figure className=\"no_img\">\n                                            <img src={noData} alt=\"data not found\" />\n                                        </figure>\n                                        <span>No Data Found</span>\n                                    </div>\n                                </div>\n                            </div> :\n                            <UserMessages\n                                roomId={selectedRoomID}\n                                roomData={roomData}\n                                isNoRecords={isNoRecords}\n                                history={props.history}\n                                isLoading={props.isLoading}\n                                inBoxData={inBoxData}\n                                setInBoxData={setInBoxData}\n                            />\n                    }\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default Chat;","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Chat from './chat';\n\nconst mapStateToProps = (state: any) => {\n    return {\n        isLoading: state.common.isLoading,\n        isSkeletonLoading: state.common.isSkeletonLoading,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return bindActionCreators({\n    }, dispatch);\n}\n\nconst ChatComponent = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Chat)\n\nexport default ChatComponent;"]}}