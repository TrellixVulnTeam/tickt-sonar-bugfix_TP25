{"code":"(this[\"webpackJsonptickt-web\"]=this[\"webpackJsonptickt-web\"]||[]).push([[30],{304:function(e,t,a){\"use strict\";t.a=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\"},312:function(e,t,a){\"use strict\";t.a=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\"},396:function(e,t,a){\"use strict\";t.a=a.p+\"static/media/not-found.c5fd5f1f.png\"},599:function(e,t,a){\"use strict\";a.r(t);var n=a(37),i=a(45),s=a(41),o=a(2),c=a.n(o),r=a(12),l=a(17),d=a(0),u=a(76),m=a(312),v=a(304),j=a(4),A=a(53),b=a(66),p=a(42),g=a(6),O=a(221),f=a(20),h=a(396),x=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\",N=a(93),I=a(25),U=a(19),w=a(262),k=a.n(w),y=a(48),T=a(1),C=\"\",B=[\"jpeg\",\"jpg\",\"png\",\"mp4\",\"wmv\",\"avi\"],D=function(e){var t,a,n,i,o,m,b,w,D,S=Object(d.useRef)(null),E=Object(d.useState)(null===(t=f.a.getItem(\"userInfo\"))||void 0===t?void 0:t._id),R=Object(l.a)(E,1)[0],_=Object(d.useState)(!1),Q=Object(l.a)(_,2),M=Q[0],Y=Q[1],F=Object(d.useState)(!1),z=Object(l.a)(F,2),L=z[0],q=z[1],H=Object(d.useState)(null),K=Object(l.a)(H,2),V=K[0],X=K[1],G=Object(d.useState)(\"\"),Z=Object(l.a)(G,2),P=Z[0],W=Z[1],J=Object(d.useState)([]),$=Object(l.a)(J,2),ee=$[0],te=$[1],ae=Object(d.useState)(!1),ne=Object(l.a)(ae,2),ie=ne[0],se=ne[1],oe=Object(d.useState)([]),ce=Object(l.a)(oe,2),re=ce[0],le=ce[1],de=Object(d.useState)(!1),ue=Object(l.a)(de,2),me=ue[0],ve=ue[1],je=Object(d.useState)(1),Ae=Object(l.a)(je,2),be=Ae[0],pe=Ae[1],ge=Object(d.useState)({}),Oe=Object(l.a)(ge,2),fe=Oe[0],he=Oe[1],xe=Object(d.useState)(\"\"),Ne=Object(l.a)(xe,2);Ne[0],Ne[1];Object(d.useEffect)((function(){\"\"!==e.roomId&&(C=\"\",Object(p.g)(e.roomId,Ue),pe(1),he({}),le([]),X(null),Y(!1))}),[e.roomId]),Object(d.useEffect)((function(){Ie()}));var Ie=function(){if(null!==(null===S||void 0===S?void 0:S.current)){var e=S.current.scrollHeight-S.current.clientHeight;S.current.scrollTo(0,e)}},Ue=function(e){te(e)};Object(d.useEffect)((function(){var e={},t=[],a=1;ee.length&&(t=ee.filter((function(t,n){if(\"image\"===t.messageType||\"video\"===t.messageType)return e[\"\".concat(n)]=a++,t})),le(t),he(e))}),[ee]);var we=function(t){var a=Object(s.a)(e.inBoxData),n=a.findIndex((function(t){return t.roomId===e.roomId}));a[n].lastMsg=t,a.splice(n,1),a.unshift(e.inBoxData[n]),e.setInBoxData(a)},ke=function(){var t=Object(r.a)(c.a.mark((function t(){var a,n,i,s,o,r,l,d,u,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!P||\"\"===P.trimLeft()){t.next=7;break}return W(\"\"),t.next=4,Object(p.m)(e.roomId,P);case 4:(u=t.sent)&&(null===(a=e.roomData)||void 0===a||null===(n=a.oppUserInfo)||void 0===n?void 0:n.deviceToken)&&(null===(i=e.roomData)||void 0===i||null===(s=i.oppUserInfo)||void 0===s?void 0:s.deviceType)&&(!(null===(o=e.roomData)||void 0===o||null===(r=o.oppUserInfo)||void 0===r?void 0:r.hasOwnProperty(\"isNotification\"))||(null===(l=e.roomData)||void 0===l||null===(d=l.oppUserInfo)||void 0===d?void 0:d.isNotification))&&(Be(u),m={timeStamp:y.b.getCurrentTimeStamp()},y.b.moE_SendEvent(U.a.CHAT,m),y.a.mixP_SendEvent(U.a.CHAT,m)),we(u);case 7:case\"end\":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ye=function(){var t=Object(r.a)(c.a.mark((function t(a,n){var i,s,o,r,l,d,u,m,v;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||\"\"===a){t.next=6;break}return t.next=3,Object(p.l)(e.roomId,a,n);case 3:(v=t.sent)&&(null===(i=e.roomData)||void 0===i||null===(s=i.oppUserInfo)||void 0===s?void 0:s.deviceToken)&&(null===(o=e.roomData)||void 0===o||null===(r=o.oppUserInfo)||void 0===r?void 0:r.deviceType)&&(!(null===(l=e.roomData)||void 0===l||null===(d=l.oppUserInfo)||void 0===d?void 0:d.hasOwnProperty(\"isNotification\"))||(null===(u=e.roomData)||void 0===u||null===(m=u.oppUserInfo)||void 0===m?void 0:m.isNotification))&&Be(v),we(v);case 6:W(\"\");case 7:case\"end\":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Te=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,i,s,o,r,l,d,u,m,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,Object(O.F)(t);case 3:(a=e.sent).success&&(v={jobDescription:(null===(n=a.data)||void 0===n?void 0:n.details)||\"\",jobId:(null===(i=a.data)||void 0===i?void 0:i.jobId)||\"\",jobName:(null===(s=a.data)||void 0===s?void 0:s.jobName)||\"\",amount:(null===(o=a.data)||void 0===o?void 0:o.amount)||\"\",locationName:(null===(r=a.data)||void 0===r?void 0:r.locationName)||\"\",fromDate:(null===(l=a.data)||void 0===l?void 0:l.fromDate)||\"\",toDate:(null===(d=a.data)||void 0===d?void 0:d.toDate)||\"\",duration:(null===(u=a.data)||void 0===u?void 0:u.duration)||\"\",status:(null===(m=a.data)||void 0===m?void 0:m.status)||\"\"},X(v),q(!1));case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(t,a){var n,i,s,o,c,r,l,d,u,m,v,j,A,b,p,g;switch(Number(t)){case 1:return{app_icon:\"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",title:\"Tickt App\",notificationText:\"\".concat(null===(n=f.a.getItem(\"userInfo\"))||void 0===n?void 0:n.userName,\" send you a message\"),senderName:\"\".concat(null===(i=f.a.getItem(\"userInfo\"))||void 0===i?void 0:i.userName),messageType:\"\".concat(null===a||void 0===a?void 0:a.messageType),messageText:\"\".concat(\"text\"===(null===a||void 0===a?void 0:a.messageType)?null===a||void 0===a?void 0:a.messageText:\"\"),room_id:null===a||void 0===a?void 0:a.messageRoomId,image:null===(s=f.a.getItem(\"userInfo\"))||void 0===s?void 0:s.user_image,notificationType:25,sound:\"default\"};case 2:return{body:null===a||void 0===a?void 0:a.messageText,messageText:null===a||void 0===a?void 0:a.messageText,sender:{first_name:null===(o=f.a.getItem(\"userInfo\"))||void 0===o?void 0:o.userName,device_token:f.a.getItem(\"fcmToken\"),user_id:null===(c=f.a.getItem(\"userInfo\"))||void 0===c?void 0:c._id,device_type:2},jobId:null===a||void 0===a||null===(r=a.messageRoomId)||void 0===r||null===(l=r.split(\"_\"))||void 0===l?void 0:l[0],badge:1,device_type:2,title:null===(d=f.a.getItem(\"userInfo\"))||void 0===d?void 0:d.userName,jobName:null===(u=e.roomData)||void 0===u?void 0:u.jobName,notification_type:50,sound:\"default\",messageId:null===a||void 0===a?void 0:a.messageId};case 3:return{notification:{body:null===a||void 0===a?void 0:a.messageText,title:null===(m=f.a.getItem(\"userInfo\"))||void 0===m?void 0:m.userName},data:{body:null===a||void 0===a?void 0:a.messageText,messageText:null===a||void 0===a?void 0:a.messageText,sender:{first_name:null===(v=f.a.getItem(\"userInfo\"))||void 0===v?void 0:v.userName,device_token:f.a.getItem(\"fcmToken\"),user_id:null===(j=f.a.getItem(\"userInfo\"))||void 0===j?void 0:j._id,device_type:2},jobId:null===a||void 0===a||null===(A=a.messageRoomId)||void 0===A||null===(b=A.split(\"_\"))||void 0===b?void 0:b[0],badge:1,device_type:2,title:null===(p=f.a.getItem(\"userInfo\"))||void 0===p?void 0:p.userName,jobName:null===(g=e.roomData)||void 0===g?void 0:g.jobName,notification_type:50,sound:\"default\",messageId:null===a||void 0===a?void 0:a.messageId}};default:return}},Be=function(){var t=Object(r.a)(c.a.mark((function t(a){var n,i,s,o,r,l,d,u,m,v,j,A,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j=Ce(null===(n=e.roomData)||void 0===n||null===(i=n.oppUserInfo)||void 0===i?void 0:i.deviceType,a),A=Object(g.a)(Object(g.a)(Object(g.a)({to:\"\".concat(null===(s=e.roomData)||void 0===s||null===(o=s.oppUserInfo)||void 0===o?void 0:o.deviceToken)},1==(null===(r=e.roomData)||void 0===r||null===(l=r.oppUserInfo)||void 0===l?void 0:l.deviceType)&&{data:j}),2==(null===(d=e.roomData)||void 0===d||null===(u=d.oppUserInfo)||void 0===u?void 0:u.deviceType)&&{notification:j}),3==(null===(m=e.roomData)||void 0===m||null===(v=m.oppUserInfo)||void 0===v?void 0:v.deviceType)&&{notification:null===j||void 0===j?void 0:j.notification,data:null===j||void 0===j?void 0:j.data}),b={\"Content-Type\":\"application/json\",Authorization:U.b.FcmHeaderAuthorizationKey},t.next=5,fetch(\"https://fcm.googleapis.com/fcm/send\",{method:\"POST\",headers:b,body:JSON.stringify(A)});case 5:200===t.sent.status?console.log(\"Chat push notification send to opposite user: success\"):console.log(\"Chat push notification send to opposite user: failure\");case 7:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),De=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,i,s,o,r,l,d,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=10,s=new FormData,o=t.target.files[0],r=null===o||void 0===o||null===(a=o.type)||void 0===a||null===(n=a.split(\"/\")[1])||void 0===n?void 0:n.toLowerCase(),l=(null===o||void 0===o?void 0:o.size)/1024/1024,[\"mp4\",\"wmv\",\"avi\"].includes(r)&&(i=20),!(B.indexOf(r)<0||l>i)){e.next=9;break}return Object(j.c)(!0,\"The file must be in proper format or size\"),e.abrupt(\"return\");case 9:return s.append(\"file\",o),se(!0),d=[\"jpeg\",\"jpg\",\"png\"].includes(r)?1:[\"mp4\",\"wmv\",\"avi\"].includes(r)?2:null,e.next=14,Object(I.l)(s);case 14:(u=e.sent).success&&u.imgUrl&&(1===d?ye(u.imgUrl,\"image\"):2===d?ye(u.imgUrl,\"video\"):Object(j.c)(!0,\"There is some technical issue\"),se(!1));case 16:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e,t){switch(0===t&&(C=\"\"),e.messageType){case\"text\":return function(e){var t=Object(A.c)(e.messageTimestamp,\"day\"),a=e.senderId===R?\"message\":\"message recive_msg\";return\"\"===C||C!==t?(C=t,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(\"div\",{className:\"date_time\",children:Object(T.jsx)(\"span\",{children:t})}),Object(T.jsx)(\"div\",{className:\"\".concat(a),children:Object(T.jsxs)(\"p\",{className:\"\".concat(e.senderId===R?\"mark\":\"\"),children:[e.messageText,Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})]})):Object(T.jsx)(\"div\",{className:\"\".concat(a),children:Object(T.jsxs)(\"p\",{className:\"\".concat(e.senderId===R?\"mark\":\"\"),children:[e.messageText,Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})}(e);case\"image\":return function(e,t){var a=Object(A.c)(e.messageTimestamp,\"day\"),n=e.senderId===R?\"message\":\"message recive_msg\";return\"\"===C||C!==a?(C=a,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(\"div\",{className:\"date_time\",children:Object(T.jsx)(\"span\",{children:a})}),Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media\",children:[Object(T.jsx)(\"img\",{src:e.mediaUrl||h.a,alt:\"media\",\"async-src\":e.mediaUrl||h.a,decoding:\"async\",loading:\"lazy\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=h.a)},onClick:function(){ve((function(e){return!e})),pe(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})]})):Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media\",children:[Object(T.jsx)(\"img\",{src:e.mediaUrl||h.a,alt:\"media\",\"async-src\":e.mediaUrl||h.a,decoding:\"async\",loading:\"lazy\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=h.a)},onClick:function(){ve((function(e){return!e})),pe(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})}(e,t);case\"video\":return function(e,t){var a=Object(A.c)(e.messageTimestamp,\"day\"),n=e.senderId===R?\"message\":\"message recive_msg\";return\"\"===C||C!==a?(C=a,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(\"div\",{className:\"date_time\",children:Object(T.jsx)(\"span\",{children:a})}),Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media media_video \",children:[Object(T.jsx)(\"video\",{src:e.mediaUrl||h.a,poster:x,onClick:function(){ve((function(e){return!e})),pe(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})]})):Object(T.jsx)(\"div\",{className:\"\".concat(n),children:Object(T.jsxs)(\"figure\",{className:\"media media_video \",children:[Object(T.jsx)(\"video\",{src:e.mediaUrl||h.a,poster:x,onClick:function(){ve((function(e){return!e})),pe(fe[\"\".concat(t)])}}),Object(T.jsx)(\"span\",{className:\"time\",children:Object(A.c)(e.messageTimestamp,\"time\")})]})})}(e,t)}},Ee=function(e){var t=[],a=[];return e.length&&e.forEach((function(e){\"video\"===e.messageType&&(t.push(e.mediaUrl),a.push(\"video\")),\"image\"===e.messageType&&(t.push(e.mediaUrl),a.push(\"image\"))})),{sources:t,types:a}}(re),Re=Ee.sources,_e=Ee.types;return e.isNoRecords?Object(T.jsx)(\"div\",{className:\"detail_col\",children:Object(T.jsx)(\"div\",{className:\"flex_row\",children:Object(T.jsx)(\"div\",{})})}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(k.a,{toggler:me,slide:be,sources:Re,types:_e,onClose:function(){pe(1)}},null===Re||void 0===Re?void 0:Re.length),Object(T.jsx)(\"div\",{className:\"detail_col\",children:Object(T.jsxs)(\"div\",{className:\"flex_row\",children:[Object(T.jsxs)(\"div\",{className:\"chat_col \".concat(M?\"active\":\"\"),children:[Object(T.jsxs)(\"div\",{className:\"chat_user\",children:[Object(T.jsx)(\"figure\",{className:\"u_img\",children:Object(T.jsx)(\"img\",{src:(null===(a=e.roomData)||void 0===a||null===(n=a.oppUserInfo)||void 0===n?void 0:n.image)||u.a,alt:\"user-img\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=u.a)}})}),Object(T.jsx)(\"span\",{className:\"name\",onClick:function(){var t,a,n,i;2===f.a.getItem(\"userType\")?e.history.push(\"/tradie-info?tradeId=\".concat(null===(t=e.roomData)||void 0===t||null===(a=t.oppUserInfo)||void 0===a?void 0:a.userId,\"&hideInvite=true\")):e.history.push(\"/builder-info?builderId=\".concat(null===(n=e.roomData)||void 0===n||null===(i=n.oppUserInfo)||void 0===i?void 0:i.userId))},children:null===(i=e.roomData)||void 0===i||null===(o=i.oppUserInfo)||void 0===o?void 0:o.name}),!M&&Object(T.jsxs)(\"span\",{onClick:function(){var t;Y(!0),V||Te(null===(t=e.roomData)||void 0===t?void 0:t.jobId)},className:\"view_detail\",children:[\"View Job Details\",Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\",alt:\"view-more\"})]})]}),Object(T.jsxs)(\"div\",{className:\"message_wrapr\",ref:S,children:[ee.length>0&&ee.map((function(e,t){return Se(e,t)})),Object(T.jsx)(\"div\",{className:\"date_time\",children:(null===(m=e.roomData)||void 0===m||null===(b=m.oppUserInfo)||void 0===b?void 0:b.isBlock)&&Object(T.jsx)(\"i\",{style:{color:\"#929292\"},children:\"You can no longer chat with the user\"})})]}),!(null===(w=e.roomData)||void 0===w||null===(D=w.oppUserInfo)||void 0===D?void 0:D.isBlock)&&Object(T.jsx)(\"div\",{className:\"send_msg\",children:Object(T.jsxs)(\"div\",{className:\"text_field\",children:[Object(T.jsx)(\"label\",{className:\"upload_item\",htmlFor:\"upload_item\",children:Object(T.jsx)(\"span\",{className:\"detect_icon_ltr\",children:Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\",alt:\"media\"})})}),Object(T.jsx)(\"input\",{id:\"upload_item\",className:\"hide\",type:\"file\",accept:\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\",onChange:De,disabled:ie}),Object(T.jsx)(\"textarea\",{placeholder:\"Message..\",onKeyDown:function(e){e.shiftKey||\"Enter\"!==e.key||(e.preventDefault(),ke(),W(\"\"))},value:P,onChange:function(e){return W(e.target.value)}}),Object(T.jsx)(\"span\",{className:\"detect_icon\",children:Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\",alt:\"send\",onClick:ke})})]})})]}),M&&L?Object(T.jsx)(\"div\",{className:\"view_detail_col\",children:Object(T.jsx)(\"div\",{className:\"no_record\",children:Object(T.jsx)(\"figure\",{children:Object(T.jsx)(\"img\",{src:N.a,alt:\"loader\",width:\"130px\"})})})}):M?Object(T.jsxs)(\"div\",{className:\"view_detail_col\",children:[Object(T.jsxs)(\"div\",{className:\"f_spacebw relative\",children:[Object(T.jsx)(\"span\",{className:\"title line-2 pr-20\",children:null===V||void 0===V?void 0:V.jobName}),Object(T.jsx)(\"span\",{onClick:function(){Y((function(e){return!e}))},className:\"close\",children:Object(T.jsx)(\"img\",{src:v.a,alt:\"close\"})})]}),Object(T.jsx)(\"div\",{className:\"job_info\",children:Object(T.jsxs)(\"ul\",{children:[Object(T.jsx)(\"li\",{className:\"icon clock\",children:Object(A.h)(null===V||void 0===V?void 0:V.fromDate,null===V||void 0===V?void 0:V.toDate)}),Object(T.jsx)(\"li\",{className:\"icon dollar\",children:null===V||void 0===V?void 0:V.amount}),Object(T.jsx)(\"li\",{className:\"icon location line-1\",children:null===V||void 0===V?void 0:V.locationName}),Object(T.jsx)(\"li\",{className:\"icon calendar\",children:null===V||void 0===V?void 0:V.duration})]})}),Object(T.jsx)(\"p\",{className:\"commn_para\",children:null===V||void 0===V?void 0:V.jobDescription}),Object(T.jsx)(\"button\",{className:\"fill_btn full_btn btn-effect\",onClick:function(){if(1===f.a.getItem(\"userType\"))e.history.push(\"/job-details-page?jobId=\".concat(null===V||void 0===V?void 0:V.jobId,\"&redirect_from=jobs\"));else{var t=\"?jobId=\".concat(null===V||void 0===V?void 0:V.jobId,\"&status=\").concat(null===V||void 0===V?void 0:V.status,\"&edit=true&activeType=active\");e.history.push(\"/job-detail?\".concat(t))}},children:\"View Job details\"})]}):null]})})]})},S=\"\",E=!1,R=function(e){var t,a,n,i,o=Object(d.useState)(!0),g=Object(l.a)(o,2),O=g[0],f=g[1],h=Object(d.useState)((function(){return p.a.currentUser})),x=Object(l.a)(h,2),N=(x[0],x[1]),I=Object(d.useState)([]),U=Object(l.a)(I,2),w=U[0],k=U[1],y=Object(d.useState)([]),C=Object(l.a)(y,2),B=C[0],R=C[1],_=Object(d.useState)(!1),Q=Object(l.a)(_,2),M=Q[0],Y=Q[1],F=Object(d.useState)({}),z=Object(l.a)(F,2),L=z[0],q=z[1],H=Object(d.useState)(\"\"),K=Object(l.a)(H,2),V=(K[0],K[1]),X=Object(d.useState)(\"\"),G=Object(l.a)(X,2),Z=G[0],P=G[1],W=Object(d.useState)(!1),J=Object(l.a)(W,2),$=J[0],ee=J[1],te=Object(d.useState)(!0),ae=Object(l.a)(te,2),ne=ae[0],ie=ae[1],se=Object(d.useState)(!1),oe=Object(l.a)(se,2),ce=oe[0],re=oe[1],le=(null===(t=e.history)||void 0===t||null===(a=t.location)||void 0===a?void 0:a.state)?null===(n=e.history)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.state:{tradieId:\"\",builderId:\"\",jobName:\"\",jobId:\"\"},de=le.tradieId,ue=le.builderId,me=le.jobName,ve=le.jobId;Object(d.useEffect)((function(){return Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(j.a)(!0),!(de&&ue&&me&&ve)){e.next=6;break}return e.next=4,je();case 4:e.next=7;break;case 6:E=!0;case 7:return e.next=9,Object(p.e)(Ae);case 9:case\"end\":return e.stop()}}),e)})))(),function(){Object(p.o)(S),S=\"\"}}),[]);var je=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=\"\".concat(ve,\"_\").concat(de,\"_\").concat(ue),S=t,e.next=4,Object(p.b)(t);case 4:if(!e.sent){e.next=8;break}return e.abrupt(\"return\");case 8:return e.next=10,Object(p.c)(ve,de,ue,me);case 10:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n,i,o,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=\"\",null===(n=t.filter((function(e,t){if(e.hasOwnProperty(\"lastMsg\")||e.roomId===S){if(e.roomId!==S||E)return e;a=e}})))||void 0===n||n.sort((function(e,t){var a,n;return(null===(a=t.lastMsg)||void 0===a?void 0:a.messageTimestamp)-(null===(n=e.lastMsg)||void 0===n?void 0:n.messageTimestamp)})),0!==n.length||a){e.next=7;break}return Y(!0),ne&&(ie(!1),Object(j.a)(!1)),e.abrupt(\"return\");case 7:if(Y(!1),a&&(i=Object(s.a)(n)).unshift(a),o=Array.isArray(i)&&a?i:n,k(0===o.length?[{firstKey:\"emptyRes\"}]:o),!(o.length>0&&\"\"===S)){e.next=17;break}return S=o[0].roomId,V(o[0].roomId),o[0]&&(null===(r=o[0])||void 0===r?void 0:r.unreadMessages)>0&&(o[0].unreadMessages=0,Object(p.k)(o[0].roomId)),q(o[0]),e.abrupt(\"return\");case 17:o.length>0&&((l=o.find((function(e){return e.roomId==S})))&&(null===l||void 0===l?void 0:l.unreadMessages)>0&&(l.unreadMessages=0,Object(p.k)(l.roomId)),q(l));case 18:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){var e=p.a.onAuthStateChanged((function(e){e?(N(e),re(!1)):(N(!1),re(!0),Object(j.a)(!1),ie(!1)),O&&f(!1)}));return e}),[O]);var be=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.o)(S),S=t.roomId,V(t.roomId),q(t),Object(p.k)(t.roomId);case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){var e,t;if(Z){var a=w.filter((function(e){var t,a,n;return null===(t=e.oppUserInfo)||void 0===t||null===(a=t.name)||void 0===a||null===(n=a.toLowerCase())||void 0===n?void 0:n.includes(Z.toLowerCase())}));R(a)}(w.length||\"emptyRes\"===(null===(e=w[0])||void 0===e?void 0:e.firstKey))&&ne&&(\"emptyRes\"===(null===(t=w[0])||void 0===t?void 0:t.firstKey)&&k([]),Object(j.a)(!1),ie(!1))}),[Z,w]),Object(T.jsx)(\"div\",{className:\"app_wrapper\",children:Object(T.jsxs)(\"div\",{className:\"custom_container\",children:[Object(T.jsx)(\"span\",{className:\"mob_side_nav\",onClick:function(){return re(!0)},children:Object(T.jsx)(\"img\",{src:m.a,alt:\"mob-side-nav\"})}),Object(T.jsxs)(\"div\",{className:\"f_row chat_wrapr\",children:[Object(T.jsxs)(\"div\",{className:\"side_nav_col \".concat(ce?\"active\":\"\"),children:[Object(T.jsx)(\"button\",{className:\"close_nav\",onClick:function(){return re(!1)},children:Object(T.jsx)(\"img\",{src:v.a,alt:\"close\"})}),Object(T.jsxs)(\"div\",{className:\"stick\",children:[Object(T.jsx)(\"span\",{className:\"title\",style:{marginLeft:\"50px\"},children:\"Chat\"}),Object(T.jsxs)(\"div\",{className:\"search_bar \".concat($?\"active\":\"\"),onClick:function(){ee(!0)},children:[Object(T.jsx)(\"input\",{type:\"text\",placeholder:\"Search\",value:Z,onChange:function(e){return P(e.target.value.trimLeft())}}),Object(T.jsx)(\"span\",{className:\"detect_icon_ltr\",children:Object(T.jsx)(\"img\",{src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\",alt:\"search\"})})]}),Object(T.jsx)(\"ul\",{className:\"chat_list\",children:Z?0===B.length?Object(T.jsx)(\"li\",{children:Object(T.jsx)(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:Object(T.jsx)(\"div\",{className:\"detail\",children:Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})}):B.map((function(e){var t,a,n,i,s;return Object(T.jsx)(\"li\",{onClick:function(){be(e)},children:Object(T.jsxs)(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(S===e.roomId?\"active\":\"\"),children:[Object(T.jsx)(\"figure\",{className:\"u_img\",children:Object(T.jsx)(\"img\",{src:(null===(t=e.oppUserInfo)||void 0===t?void 0:t.image)||u.a,alt:\"img\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=u.a)}})}),Object(T.jsxs)(\"div\",{className:\"detail\",children:[Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:null===(a=e.oppUserInfo)||void 0===a?void 0:a.name}),Object(T.jsx)(\"span\",{className:\"inner_title job line-1\",children:e.jobName}),Object(T.jsx)(\"p\",{className:\"commn_para line-1\",children:null===(n=e.lastMsg)||void 0===n?void 0:n.messageText}),(null===(i=e.lastMsg)||void 0===i?void 0:i.messageTimestamp)&&Object(T.jsx)(\"span\",{className:\"date_time\",children:Object(A.c)(null===(s=e.lastMsg)||void 0===s?void 0:s.messageTimestamp,\"inboxTime\")}),S===e.roomId||0===e.unreadMessages?null:Object(T.jsx)(\"span\",{className:\"count\",children:e.unreadMessages})]})]})})})):(null===w||void 0===w?void 0:w.length)>0?w.map((function(e){var t,a,n,i,s,o,c,r;return Object(T.jsx)(\"li\",{onClick:function(){be(e)},children:Object(T.jsxs)(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(S===e.roomId?\"active\":\"\"),children:[Object(T.jsx)(\"figure\",{className:\"u_img\",children:Object(T.jsx)(\"img\",{src:(null===(t=e.oppUserInfo)||void 0===t?void 0:t.image)||u.a,alt:\"img\",onError:function(e){var t,a;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.onerror)&&(e.target.onerror=null),(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.src)&&(e.target.src=u.a)}})}),Object(T.jsxs)(\"div\",{className:\"detail\",children:[Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:null===(a=e.oppUserInfo)||void 0===a?void 0:a.name}),Object(T.jsx)(\"span\",{className:\"inner_title job line-1\",children:e.jobName}),Object(T.jsx)(\"p\",{className:\"commn_para line-1\",children:\"text\"===(null===(n=e.lastMsg)||void 0===n?void 0:n.messageType)?null===(i=e.lastMsg)||void 0===i?void 0:i.messageText:\"image\"===(null===(s=e.lastMsg)||void 0===s?void 0:s.messageType)?Object(T.jsx)(\"i\",{style:{color:\"#929292\"},children:\"Photo\"}):\"video\"===(null===(o=e.lastMsg)||void 0===o?void 0:o.messageType)?Object(T.jsx)(\"i\",{style:{color:\"#929292\"},children:\"Video\"}):\"\"}),(null===(c=e.lastMsg)||void 0===c?void 0:c.messageTimestamp)&&Object(T.jsx)(\"span\",{className:\"date_time\",children:Object(A.c)(null===(r=e.lastMsg)||void 0===r?void 0:r.messageTimestamp,\"inboxTime\")}),S===e.roomId||0===e.unreadMessages?null:Object(T.jsx)(\"span\",{className:\"count\",children:e.unreadMessages})]})]})})})):e.isLoading?null:Object(T.jsx)(\"li\",{children:Object(T.jsx)(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:Object(T.jsx)(\"div\",{className:\"detail\",children:Object(T.jsx)(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})})})]})]}),ne?null:ne||0!==(null===w||void 0===w?void 0:w.length)?Object(T.jsx)(D,{roomId:S,roomData:L,isNoRecords:M,history:e.history,isLoading:e.isLoading,inBoxData:w,setInBoxData:k}):Object(T.jsx)(\"div\",{className:\"detail_col\",children:Object(T.jsx)(\"div\",{className:\"flex_row tradies_row\",children:Object(T.jsxs)(\"div\",{className:\"no_record\",children:[Object(T.jsx)(\"figure\",{className:\"no_img\",children:Object(T.jsx)(\"img\",{src:b.a,alt:\"data not found\"})}),Object(T.jsx)(\"span\",{children:\"No Data Found\"})]})})})]})]})})},_=Object(n.b)((function(e){return{isLoading:e.common.isLoading,isSkeletonLoading:e.common.isSkeletonLoading}}),(function(e){return Object(i.b)({},e)}))(R);t.default=_}}]);","name":"static/js/30.94cd2e0a.chunk.js","map":{"version":3,"sources":["static/js/30.94cd2e0a.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","p","r","es","redux","toConsumableArray","regenerator","regenerator_default","n","asyncToGenerator","slicedToArray","react","u_placeholder","menu_line_blue","ic_cancel_blue","actions","common","no_search_data","firebase","objectSpread2","jobs_actions","storageService","not_found","video_3x","loader","auth_actions","constants","fslightbox_react","fslightbox_react_default","analyticsTools","jsx_runtime","lastDate","docTypes","userMessages","props","_storageService$getIt","_props$roomData16","_props$roomData16$opp","_props$roomData19","_props$roomData19$opp","_props$roomData21","_props$roomData21$opp","_props$roomData22","_props$roomData22$opp","divRref","Object","_useState","getItem","_id","userId","_useState3","_useState4","toggle","setToggle","_useState5","_useState6","jobDetailLoader","setJobDetailLoader","_useState7","_useState8","currentJobDetails","setCurrentJobDetails","_useState9","_useState10","messageText","setMessageText","_useState11","_useState12","messages","setMessages","_useState13","_useState14","isDocUploading","setIsDocUploading","_useState15","_useState16","itemsMedia","setItemsMedia","_useState17","_useState18","toggler","setToggler","_useState19","_useState20","selectedSlide","setSelectSlide","_useState21","_useState22","fsSlideListner","setFsSlideListner","_useState23","_useState24","roomId","onReceiveOfNewMsg","scrollToBottom","current","scroll","scrollHeight","clientHeight","scrollTo","arrmsg","fsSlideObj","mediaMsgs","slideCount","length","filter","item","index","messageType","concat","setInboxToTopWithLastMsg","lastMsg","newInboxData","inBoxData","currentIndex","findIndex","i","splice","unshift","setInBoxData","sendMessage","_ref","a","mark","_callee","_props$roomData","_props$roomData$oppUs","_props$roomData2","_props$roomData2$oppU","_props$roomData3","_props$roomData3$oppU","_props$roomData4","_props$roomData4$oppU","mData","wrap","_context","prev","next","trimLeft","sent","roomData","oppUserInfo","deviceToken","deviceType","hasOwnProperty","isNotification","sendFCMPushNotificationToOppUser","timeStamp","getCurrentTimeStamp","moE_SendEvent","CHAT","mixP_SendEvent","stop","apply","arguments","sendImageVideoMsg","_ref2","_callee2","url","msgType","_props$roomData5","_props$roomData5$oppU","_props$roomData6","_props$roomData6$oppU","_props$roomData7","_props$roomData7$oppU","_props$roomData8","_props$roomData8$oppU","_context2","_x","_x2","fetchJobDetail","_ref3","_callee3","jobId","res","_res$data","_res$data2","_res$data3","_res$data4","_res$data5","_res$data6","_res$data7","_res$data8","_res$data9","jobInfo","_context3","success","jobDescription","data","details","jobName","amount","locationName","fromDate","toDate","duration","status","_x3","setResDeviceType","msg","_storageService$getIt2","_storageService$getIt3","_storageService$getIt4","_storageService$getIt5","_storageService$getIt6","_msg$messageRoomId","_msg$messageRoomId$sp","_storageService$getIt7","_props$roomData9","_storageService$getIt8","_storageService$getIt9","_storageService$getIt10","_msg$messageRoomId2","_msg$messageRoomId2$s","_storageService$getIt11","_props$roomData10","Number","app_icon","title","notificationText","userName","senderName","room_id","messageRoomId","image","user_image","notificationType","sound","body","sender","first_name","device_token","user_id","device_type","split","badge","notification_type","messageId","notification","_ref4","_callee4","_props$roomData11","_props$roomData11$opp","_props$roomData12","_props$roomData12$opp","_props$roomData13","_props$roomData13$opp","_props$roomData14","_props$roomData14$opp","_props$roomData15","_props$roomData15$opp","newData","headers_","_context4","to","Authorization","FcmHeaderAuthorizationKey","fetch","method","headers","JSON","stringify","console","log","_x4","handleUpload","_ref5","_callee5","e","_newFile$type","_newFile$type$split$","maxFileSize","formData","newFile","fileType","selectedFileSize","check_type","_context5","FormData","target","files","type","toLowerCase","size","includes","indexOf","abrupt","append","imgUrl","_x5","displayMessages","curDate","messageTimestamp","messageClass","senderId","children","className","renderTextMsg","src","mediaUrl","alt","decoding","loading","onError","_e$target","_e$target2","onerror","onClick","_e$target3","_e$target4","renderImageMsg","poster","renderVideoMsg","_renderMediaItems","sources","types","forEach","renderMediaItems","isNoRecords","slide","onClose","_e$target5","_e$target6","_props$roomData17","_props$roomData17$opp","_props$roomData18","_props$roomData18$opp","history","name","_props$roomData20","ref","map","isBlock","style","color","htmlFor","id","accept","onChange","disabled","placeholder","onKeyDown","event","shiftKey","key","preventDefault","value","width","urlEncode","selectedRoomID","isFreshChatRoute","chat","_props$history","_props$history$locati","_props$history2","_props$history2$locat","_useState2","initializing","setInitializing","currentUser","setUser","filterInBoxData","setFilterInBoxData","setIsNoRecords","setRoomData","setRoomId","searchQuery","setSearchQuery","searchActive","setSearchActive","isInitialLoader","setIsInitialLoader","isMobInbox","setIsMobInbox","location","state","tradieId","builderId","setInitialItems","onUpdateofInbox","roomID","selectedRoomInfo","sortedRes","ress","newRes","_newRes$","itemObj","sort","x","y","_y$lastMsg","_x$lastMsg","Array","isArray","firstKey","unreadMessages","find","unsubscribe","onAuthStateChanged","user","getRoomDetails","_inBoxData$","_inBoxData$2","filteredVal","_item$oppUserInfo","_item$oppUserInfo$nam","_item$oppUserInfo$nam2","marginLeft","href","_item$oppUserInfo2","_item$oppUserInfo3","_item$lastMsg","_item$lastMsg2","_item$lastMsg3","_item$oppUserInfo4","_item$oppUserInfo5","_item$lastMsg4","_item$lastMsg5","_item$lastMsg6","_item$lastMsg7","_item$lastMsg8","_item$lastMsg9","isLoading","ChatComponent","isSkeletonLoading","dispatch"],"mappings":"CAACA,KAAK,yBAA2BA,KAAK,0BAA4B,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE3E,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAC6BD,EAAuB,EAAI,knBAIlD,IACA,SAAUD,EAAQC,EAAqBC,GAE7C,aAC6BD,EAAuB,EAAI,kOAIlD,IACA,SAAUD,EAAQC,EAAqBC,GAE7C,aAC6BD,EAAuB,EAAKC,EAAoBC,EAAI,uCAI3E,IACA,SAAUH,EAAQC,EAAqBC,GAE7C,aAEAA,EAAoBE,EAAEH,GAGtB,IAAII,EAAKH,EAAoB,IAGzBI,EAAQJ,EAAoB,IAG5BK,EAAoBL,EAAoB,IAGxCM,EAAcN,EAAoB,GAClCO,EAAmCP,EAAoBQ,EAAEF,GAGzDG,EAAmBT,EAAoB,IAGvCU,EAAgBV,EAAoB,IAGpCW,EAAQX,EAAoB,GAG5BY,EAAgBZ,EAAoB,IAKpCa,EAAiBb,EAAoB,KAGrCc,EAAiBd,EAAoB,KAGrCe,EAAUf,EAAoB,GAG9BgB,EAAShB,EAAoB,IAG7BiB,EAAiBjB,EAAoB,IAGrCkB,EAAWlB,EAAoB,IAG/BmB,EAAgBnB,EAAoB,GAGpCoB,EAAepB,EAAoB,KAGnCqB,EAAiBrB,EAAoB,IAGrCsB,EAAYtB,EAAoB,KAGHuB,EAAW,qzBAQxCC,EAASxB,EAAoB,IAG7ByB,EAAezB,EAAoB,IAGnC0B,EAAY1B,EAAoB,IAGhC2B,EAAmB3B,EAAoB,KACvC4B,EAAwC5B,EAAoBQ,EAAEmB,GAG9DE,EAAiB7B,EAAoB,IAGrC8B,EAAc9B,EAAoB,GAIlC+B,EAAS,GAAOC,EAAS,CAAC,OAAO,MAAM,MAAM,MAAM,MAAM,OAauUC,EAblS,SAAsBC,GAAO,IAAIC,EAAsBC,EAAkBC,EAAsBC,EAAkBC,EAAsBC,EAAkBC,EAAsBC,EAAkBC,EAA0BC,EAAQC,OAAOlC,EAAc,OAArBkC,CAAwB,MAAUC,EAAUD,OAAOlC,EAAgB,SAAvBkC,CAA0G,QAA/EV,EAAsBd,EAAgC,EAAE0B,QAAQ,mBAA6C,IAAxBZ,OAA+B,EAAOA,EAAsBa,KAAsEC,EAAtDJ,OAAOnC,EAA+B,EAAtCmC,CAAyCC,EAAU,GAAqB,GAAOI,EAAWL,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAOM,EAAWN,OAAOnC,EAA+B,EAAtCmC,CAAyCK,EAAW,GAAGE,EAAOD,EAAW,GAAGE,EAAUF,EAAW,GAAOG,EAAWT,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAOU,EAAWV,OAAOnC,EAA+B,EAAtCmC,CAAyCS,EAAW,GAAGE,EAAgBD,EAAW,GAAGE,EAAmBF,EAAW,GAAOG,EAAWb,OAAOlC,EAAgB,SAAvBkC,CAA0B,MAAMc,EAAWd,OAAOnC,EAA+B,EAAtCmC,CAAyCa,EAAW,GAAGE,EAAkBD,EAAW,GAAGE,EAAqBF,EAAW,GAAOG,EAAWjB,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAIkB,EAAYlB,OAAOnC,EAA+B,EAAtCmC,CAAyCiB,EAAW,GAAGE,EAAYD,EAAY,GAAGE,EAAeF,EAAY,GAAOG,EAAYrB,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAIsB,EAAYtB,OAAOnC,EAA+B,EAAtCmC,CAAyCqB,EAAY,GAAGE,GAASD,EAAY,GAAGE,GAAYF,EAAY,GAAOG,GAAYzB,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAO0B,GAAY1B,OAAOnC,EAA+B,EAAtCmC,CAAyCyB,GAAY,GAAGE,GAAeD,GAAY,GAAGE,GAAkBF,GAAY,GAAOG,GAAY7B,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAI8B,GAAY9B,OAAOnC,EAA+B,EAAtCmC,CAAyC6B,GAAY,GAAGE,GAAWD,GAAY,GAAGE,GAAcF,GAAY,GAAOG,GAAYjC,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAOkC,GAAYlC,OAAOnC,EAA+B,EAAtCmC,CAAyCiC,GAAY,GAAGE,GAAQD,GAAY,GAAGE,GAAWF,GAAY,GAAOG,GAAYrC,OAAOlC,EAAgB,SAAvBkC,CAA0B,GAAGsC,GAAYtC,OAAOnC,EAA+B,EAAtCmC,CAAyCqC,GAAY,GAAGE,GAAcD,GAAY,GAAGE,GAAeF,GAAY,GAAOG,GAAYzC,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAI0C,GAAY1C,OAAOnC,EAA+B,EAAtCmC,CAAyCyC,GAAY,GAAGE,GAAeD,GAAY,GAAGE,GAAkBF,GAAY,GAAOG,GAAY7C,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAI8C,GAAY9C,OAAOnC,EAA+B,EAAtCmC,CAAyC6C,GAAY,GAAmBC,GAAY,GAAsBA,GAAY,GAAG9C,OAAOlC,EAAiB,UAAxBkC,EAA2B,WAA6B,KAAfX,EAAM0D,SAAa7D,EAAS,GAAGc,OAAO3B,EAAoC,EAA3C2B,CAA8CX,EAAM0D,OAAOC,IAAmBR,GAAe,GAAGI,GAAkB,IAAIZ,GAAc,IAAIhB,EAAqB,MAAMR,GAAU,MAAU,CAACnB,EAAM0D,SAEnuF/C,OAAOlC,EAAiB,UAAxBkC,EAA2B,WAAWiD,QAAoB,IAAIA,GAAe,WAA0B,GAAG,QAAkB,OAAVlD,QAA0B,IAAVA,OAAiB,EAAOA,EAAQmD,SAAS,CAAC,IAAIC,EAAOpD,EAAQmD,QAAQE,aAAarD,EAAQmD,QAAQG,aACpOtD,EAAQmD,QAAQI,SAAS,EAAEH,KAAeH,GAAkB,SAA2BO,GACvF/B,GAAY+B,IAAUvD,OAAOlC,EAAiB,UAAxBkC,EAA2B,WAAW,IAAIwD,EAAW,GAAOC,EAAU,GAAOC,EAAW,EAAKnC,GAASoC,SAAQF,EAAUlC,GAASqC,QAAO,SAASC,EAAKC,GAAO,GAAsB,UAAnBD,EAAKE,aAA0C,UAAnBF,EAAKE,YAAiE,OAA1CP,EAAW,GAAGQ,OAAOF,IAAQJ,IAAoBG,KAAS7B,GAAcyB,GAAWb,GAAkBY,MAAe,CAACjC,KACnW,IAAI0C,GAAyB,SAAkCC,GAAS,IAAIC,EAAanE,OAAOxC,EAAmC,EAA1CwC,CAA6CX,EAAM+E,WAAeC,EAAaF,EAAaG,WAAU,SAASC,GAAG,OAAOA,EAAExB,SAAS1D,EAAM0D,UAAUoB,EAAaE,GAAcH,QAAQA,EAAQC,EAAaK,OAAOH,EAAa,GAAGF,EAAaM,QAAQpF,EAAM+E,UAAUC,IAAehF,EAAMqF,aAAaP,IAG7XQ,GAAyB,WAAW,IAAIC,EAAK5E,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASC,IAAU,IAAIC,EAAgBC,EAAsBC,EAAiBC,EAAsBC,EAAiBC,EAAsBC,EAAiBC,EAAsBrB,EAAQsB,EAAM,OAAO9H,EAAoBmH,EAAEY,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAE,IAAKzE,GAAsC,KAAzBA,EAAY0E,WAAiB,CAACH,EAASE,KAAK,EAAE,MAA0C,OAAnCxE,EAAe,IAAIsE,EAASE,KAAK,EAAS5F,OAAO3B,EAAkC,EAAzC2B,CAA4CX,EAAM0D,OAAO5B,GAAa,KAAK,GAAE+C,EAAQwB,EAASI,QAAqD,QAAlCd,EAAgB3F,EAAM0G,gBAAoC,IAAlBf,GAAsF,QAArDC,EAAsBD,EAAgBgB,mBAA6C,IAAxBf,OAAnE,EAAyGA,EAAsBgB,eAAmD,QAAnCf,EAAiB7F,EAAM0G,gBAAqC,IAAnBb,GAAwF,QAAtDC,EAAsBD,EAAiBc,mBAA6C,IAAxBb,OAApE,EAA0GA,EAAsBe,gBAAmD,QAAnCd,EAAiB/F,EAAM0G,gBAAqC,IAAnBX,GAAwF,QAAtDC,EAAsBD,EAAiBY,mBAA6C,IAAxBX,OAApE,EAA0GA,EAAsBc,eAAe,qBAAuD,QAAnCb,EAAiBjG,EAAM0G,gBAAqC,IAAnBT,GAAwF,QAAtDC,EAAsBD,EAAiBU,mBAA6C,IAAxBT,OAApE,EAA0GA,EAAsBa,mBAAsBC,GAAiCnC,GAASsB,EAAM,CAACc,UAAUtH,EAAiC,EAAEuH,uBAAuBvH,EAAiC,EAAEwH,cAAc3H,EAAgC,EAAE4H,KAAKjB,GAAOxG,EAAiC,EAAE0H,eAAe7H,EAAgC,EAAE4H,KAAKjB,IAAQvB,GAAyBC,GAAS,KAAK,EAAE,IAAI,MAAM,OAAOwB,EAASiB,UAAW5B,OAAa,OAAO,WAAuB,OAAOH,EAAKgC,MAAM7J,KAAK8J,YAAn6D,GAA4kEC,GAA+B,WAAW,IAAIC,EAAM/G,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASkC,EAASC,EAAIC,GAAS,IAAIC,EAAiBC,EAAsBC,EAAiBC,EAAsBC,EAAiBC,EAAsBC,EAAiBC,EAAsBxD,EAAQ,OAAOxG,EAAoBmH,EAAEY,MAAK,SAAmBkC,GAAW,OAAS,OAAOA,EAAUhC,KAAKgC,EAAU/B,MAAM,KAAK,EAAE,IAAKqB,GAAW,KAANA,EAAU,CAACU,EAAU/B,KAAK,EAAE,MAAwB,OAAjB+B,EAAU/B,KAAK,EAAS5F,OAAO3B,EAAwC,EAA/C2B,CAAkDX,EAAM0D,OAAOkE,EAAIC,GAAS,KAAK,GAAEhD,EAAQyD,EAAU7B,QAAsD,QAAnCqB,EAAiB9H,EAAM0G,gBAAqC,IAAnBoB,GAAwF,QAAtDC,EAAsBD,EAAiBnB,mBAA6C,IAAxBoB,OAApE,EAA0GA,EAAsBnB,eAAmD,QAAnCoB,EAAiBhI,EAAM0G,gBAAqC,IAAnBsB,GAAwF,QAAtDC,EAAsBD,EAAiBrB,mBAA6C,IAAxBsB,OAApE,EAA0GA,EAAsBpB,gBAAmD,QAAnCqB,EAAiBlI,EAAM0G,gBAAqC,IAAnBwB,GAAwF,QAAtDC,EAAsBD,EAAiBvB,mBAA6C,IAAxBwB,OAApE,EAA0GA,EAAsBrB,eAAe,qBAAuD,QAAnCsB,EAAiBpI,EAAM0G,gBAAqC,IAAnB0B,GAAwF,QAAtDC,EAAsBD,EAAiBzB,mBAA6C,IAAxB0B,OAApE,EAA0GA,EAAsBtB,kBAAsBC,GAAiCnC,GAAUD,GAAyBC,GAAS,KAAK,EAAE9C,EAAe,IAAI,KAAK,EAAE,IAAI,MAAM,OAAOuG,EAAUhB,UAAWK,OAAc,OAAO,SAA2BY,EAAGC,GAAK,OAAOd,EAAMH,MAAM7J,KAAK8J,YAA5qD,GAAisDiB,GAA4B,WAAW,IAAIC,EAAM/H,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASkD,EAASC,GAAO,IAAIC,EAAIC,EAAUC,EAAWC,EAAWC,EAAWC,EAAWC,EAAWC,EAAWC,EAAWC,EAAWC,EAAQ,OAAOlL,EAAoBmH,EAAEY,MAAK,SAAmBoD,GAAW,OAAS,OAAOA,EAAUlD,KAAKkD,EAAUjD,MAAM,KAAK,EAA4C,OAA1ChF,GAAmB,GAAMiI,EAAUjD,KAAK,EAAS5F,OAAOzB,EAAoC,EAA3CyB,CAA8CiI,GAAO,KAAK,GAAEC,EAAIW,EAAU/C,MAAYgD,UAASF,EAAQ,CAACG,gBAAuC,QAAtBZ,EAAUD,EAAIc,YAA0B,IAAZb,OAAmB,EAAOA,EAAUc,UAAU,GAAGhB,OAA+B,QAAvBG,EAAWF,EAAIc,YAA2B,IAAbZ,OAAoB,EAAOA,EAAWH,QAAQ,GAAGiB,SAAiC,QAAvBb,EAAWH,EAAIc,YAA2B,IAAbX,OAAoB,EAAOA,EAAWa,UAAU,GAAGC,QAAgC,QAAvBb,EAAWJ,EAAIc,YAA2B,IAAbV,OAAoB,EAAOA,EAAWa,SAAS,GAAGC,cAAsC,QAAvBb,EAAWL,EAAIc,YAA2B,IAAbT,OAAoB,EAAOA,EAAWa,eAAe,GAAGC,UAAkC,QAAvBb,EAAWN,EAAIc,YAA2B,IAAbR,OAAoB,EAAOA,EAAWa,WAAW,GAAGC,QAAgC,QAAvBb,EAAWP,EAAIc,YAA2B,IAAbP,OAAoB,EAAOA,EAAWa,SAAS,GAAGC,UAAkC,QAAvBb,EAAWR,EAAIc,YAA2B,IAAbN,OAAoB,EAAOA,EAAWa,WAAW,GAAGC,QAAgC,QAAvBb,EAAWT,EAAIc,YAA2B,IAAbL,OAAoB,EAAOA,EAAWa,SAAS,IAAIxI,EAAqB4H,GAAShI,GAAmB,IAAQ,KAAK,EAAE,IAAI,MAAM,OAAOiI,EAAUlC,UAAWqB,OAAc,OAAO,SAAwByB,GAAK,OAAO1B,EAAMnB,MAAM7J,KAAK8J,YAAt+C,GAAo1D6C,GAAiB,SAA0BxD,EAAWyD,GAAK,IAAIC,EAAuBC,EAAuBC,EAAuBC,EAAuBC,EAAuBC,EAAmBC,EAAsBC,EAAuBC,EAAiBC,EAAuBC,EAAuBC,EAAwBC,EAAoBC,EAAsBC,EAAwBC,EAAkB,OAAOC,OAAO1E,IAAa,KAAK,EAAE,MAAM,CAAC2E,SAAS,mFAAmFC,MAAM,YAAYC,iBAAiB,GAAG/G,OAAwF,QAAhF4F,EAAuBpL,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzB0J,OAAgC,EAAOA,EAAuBoB,SAAS,uBAAuBC,WAAW,GAAGjH,OAAwF,QAAhF6F,EAAuBrL,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzB2J,OAAgC,EAAOA,EAAuBmB,UAAUjH,YAAY,GAAGC,OAAa,OAAN2F,QAAkB,IAANA,OAAa,EAAOA,EAAI5F,aAAa5C,YAAY,GAAG6C,OAA2D,UAA7C,OAAN2F,QAAkB,IAANA,OAAa,EAAOA,EAAI5F,aAA4B,OAAN4F,QAAkB,IAANA,OAAa,EAAOA,EAAIxI,YAAY,IAAI+J,QAAc,OAANvB,QAAkB,IAANA,OAAa,EAAOA,EAAIwB,cAAcC,MAAuF,QAAhFtB,EAAuBtL,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzB4J,OAAgC,EAAOA,EAAuBuB,WAAWC,iBAAiB,GAAGC,MAAM,WAAW,KAAK,EAAE,MAAM,CAACC,KAAW,OAAN7B,QAAkB,IAANA,OAAa,EAAOA,EAAIxI,YAAYA,YAAkB,OAANwI,QAAkB,IAANA,OAAa,EAAOA,EAAIxI,YAAYsK,OAAO,CAACC,WAA4F,QAAhF3B,EAAuBvL,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzB6J,OAAgC,EAAOA,EAAuBiB,SAASW,aAAanN,EAAgC,EAAE0B,QAAQ,YAAY0L,QAAyF,QAAhF5B,EAAuBxL,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzB8J,OAAgC,EAAOA,EAAuB7J,IAAI0L,YAAY,GAAG5D,MAAY,OAAN0B,QAAkB,IAANA,GAA6D,QAAxCM,EAAmBN,EAAIwB,qBAA4C,IAArBlB,GAA2F,QAAvDC,EAAsBD,EAAmB6B,MAAM,YAAsC,IAAxB5B,OAAvJ,EAA6LA,EAAsB,GAAG6B,MAAM,EAAEF,YAAY,EAAEf,MAAuF,QAAhFX,EAAuB3L,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzBiK,OAAgC,EAAOA,EAAuBa,SAAS9B,QAA4C,QAAnCkB,EAAiB/K,EAAM0G,gBAAqC,IAAnBqE,OAA0B,EAAOA,EAAiBlB,QAAQ8C,kBAAkB,GAAGT,MAAM,UAAUU,UAAgB,OAANtC,QAAkB,IAANA,OAAa,EAAOA,EAAIsC,WAAW,KAAK,EAAE,MAAM,CAACC,aAAa,CAACV,KAAW,OAAN7B,QAAkB,IAANA,OAAa,EAAOA,EAAIxI,YAAY2J,MAAuF,QAAhFT,EAAuB7L,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzBmK,OAAgC,EAAOA,EAAuBW,UAAUhC,KAAK,CAACwC,KAAW,OAAN7B,QAAkB,IAANA,OAAa,EAAOA,EAAIxI,YAAYA,YAAkB,OAANwI,QAAkB,IAANA,OAAa,EAAOA,EAAIxI,YAAYsK,OAAO,CAACC,WAA4F,QAAhFpB,EAAuB9L,EAAgC,EAAE0B,QAAQ,mBAA8C,IAAzBoK,OAAgC,EAAOA,EAAuBU,SAASW,aAAanN,EAAgC,EAAE0B,QAAQ,YAAY0L,QAA0F,QAAjFrB,EAAwB/L,EAAgC,EAAE0B,QAAQ,mBAA+C,IAA1BqK,OAAiC,EAAOA,EAAwBpK,IAAI0L,YAAY,GAAG5D,MAAY,OAAN0B,QAAkB,IAANA,GAA8D,QAAzCa,EAAoBb,EAAIwB,qBAA6C,IAAtBX,GAA6F,QAAxDC,EAAsBD,EAAoBsB,MAAM,YAAsC,IAAxBrB,OAA1J,EAAgMA,EAAsB,GAAGsB,MAAM,EAAEF,YAAY,EAAEf,MAAwF,QAAjFJ,EAAwBlM,EAAgC,EAAE0B,QAAQ,mBAA+C,IAA1BwK,OAAiC,EAAOA,EAAwBM,SAAS9B,QAA6C,QAApCyB,EAAkBtL,EAAM0G,gBAAsC,IAApB4E,OAA2B,EAAOA,EAAkBzB,QAAQ8C,kBAAkB,GAAGT,MAAM,UAAUU,UAAgB,OAANtC,QAAkB,IAANA,OAAa,EAAOA,EAAIsC,YAAY,QAAQ,SAAc5F,GAA8C,WAAW,IAAI8F,EAAMnM,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASsH,EAASzC,GAAK,IAAI0C,EAAkBC,EAAsBC,EAAkBC,EAAsBC,EAAkBC,EAAsBC,EAAkBC,EAAsBC,EAAkBC,EAA0B9D,EAAK+D,EAAQC,EAAkB,OAAOtP,EAAoBmH,EAAEY,MAAK,SAAmBwH,GAAW,OAAS,OAAOA,EAAUtH,KAAKsH,EAAUrH,MAAM,KAAK,EAAu/C,OAAr/CoD,EAAKU,GAAsD,QAApC2C,EAAkBhN,EAAM0G,gBAAsC,IAApBsG,GAA0F,QAAvDC,EAAsBD,EAAkBrG,mBAA6C,IAAxBsG,OAArE,EAA2GA,EAAsBpG,WAAWyD,GAAKoD,EAAQ/M,OAAO1B,EAA+B,EAAtC0B,CAAyCA,OAAO1B,EAA+B,EAAtC0B,CAAyCA,OAAO1B,EAA+B,EAAtC0B,CAAyC,CAACkN,GAAG,GAAGlJ,OAA4C,QAApCuI,EAAkBlN,EAAM0G,gBAAsC,IAApBwG,GAA0F,QAAvDC,EAAsBD,EAAkBvG,mBAA6C,IAAxBwG,OAArE,EAA2GA,EAAsBvG,cAAmO,IAA/K,QAApCwG,EAAkBpN,EAAM0G,gBAAsC,IAApB0G,GAA0F,QAAvDC,EAAsBD,EAAkBzG,mBAA6C,IAAxB0G,OAArE,EAA2GA,EAAsBxG,aAAgB,CAAC8C,KAAKA,IAA4N,IAA/K,QAApC2D,EAAkBtN,EAAM0G,gBAAsC,IAApB4G,GAA0F,QAAvDC,EAAsBD,EAAkB3G,mBAA6C,IAAxB4G,OAArE,EAA2GA,EAAsB1G,aAAgB,CAACgG,aAAalD,IAA4N,IAA/K,QAApC6D,EAAkBxN,EAAM0G,gBAAsC,IAApB8G,GAA0F,QAAvDC,EAAsBD,EAAkB7G,mBAA6C,IAAxB8G,OAArE,EAA2GA,EAAsB5G,aAAgB,CAACgG,aAAoB,OAAPlD,QAAoB,IAAPA,OAAc,EAAOA,EAAKkD,aAAalD,KAAY,OAAPA,QAAoB,IAAPA,OAAc,EAAOA,EAAKA,OAAOgE,EAAS,CAAC,eAAe,mBAAmBG,cAActO,EAA2B,EAAEuO,2BAA2BH,EAAUrH,KAAK,EAASyH,MAAM,sCAAsC,CAACC,OAAO,OAAOC,QAAQP,EAASxB,KAAKgC,KAAKC,UAAUV,KAAW,KAAK,EACvvX,MADkwXE,EAAUnH,KACrxX0D,OAAckE,QAAQC,IAAI,yDAA+DD,QAAQC,IAAI,yDAA0D,KAAK,EAAE,IAAI,MAAM,OAAOV,EAAUtG,UAAWyF,OAAc,OAAO,SAA0CwB,GAAK,OAAOzB,EAAMvF,MAAM7J,KAAK8J,YADu4S,GACl3SgH,GAA0B,WAAW,IAAIC,EAAM9N,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASiJ,EAASC,GAAG,IAAIC,EAAcC,EAAyBC,EAAYC,EAASC,EAAQC,EAASC,EAAiBC,EAAWtG,EAAI,OAAOxK,EAAoBmH,EAAEY,MAAK,SAAmBgJ,GAAW,OAAS,OAAOA,EAAU9I,KAAK8I,EAAU7I,MAAM,KAAK,EAC3oB,GAD6oBuI,EAAY,GAAGC,EAAS,IAAIM,SAAWL,EAAQL,EAAEW,OAAOC,MAAM,GAAGN,EAAmB,OAAVD,QAA0B,IAAVA,GAAuD,QAA9BJ,EAAcI,EAAQQ,YAA8B,IAAhBZ,GAAmF,QAApDC,EAAqBD,EAAcnC,MAAM,KAAK,UAAmC,IAAvBoC,OAArI,EAA0KA,EAAqBY,cAAcP,GAA4B,OAAVF,QAA0B,IAAVA,OAAiB,EAAOA,EAAQU,MAAM,KAAK,KAC1kC,CAAC,MAAM,MAAM,OAAOC,SAASV,KAAWH,EAAY,MAAShP,EAAS8P,QAAQX,GAAU,GAAGC,EAAiBJ,GAAa,CAACM,EAAU7I,KAAK,EAAE,MAAiG,OAA1F5F,OAAO9B,EAA8B,EAArC8B,EAAwC,EAAK,6CAAoDyO,EAAUS,OAAO,UAAU,KAAK,EAA+K,OAA7Kd,EAASe,OAAO,OAAOd,GAASzM,IAAkB,GAAM4M,EAAW,CAAC,OAAO,MAAM,OAAOQ,SAASV,GAAU,EAAE,CAAC,MAAM,MAAM,OAAOU,SAASV,GAAU,EAAE,KAAKG,EAAU7I,KAAK,GAAU5F,OAAOpB,EAAmC,EAA1CoB,CAA6CoO,GAAU,KAAK,IAAGlG,EAAIuG,EAAU3I,MAAYgD,SAASZ,EAAIkH,SAAwB,IAAbZ,EAAgB1H,GAAkBoB,EAAIkH,OAAO,SAA+B,IAAbZ,EAAgB1H,GAAkBoB,EAAIkH,OAAO,SAAepP,OAAO9B,EAA8B,EAArC8B,EAAwC,EAAK,iCAAkC4B,IAAkB,IACxxB,KAAK,GAAG,IAAI,MAAM,OAAO6M,EAAU9H,UAAWoH,OAAc,OAAO,SAAsBsB,GAAK,OAAOvB,EAAMlH,MAAM7J,KAAK8J,YAF4O,GAEm+JyI,GAAgB,SAAyB3F,EAAI7F,GAAgC,OAAd,IAARA,IAAU5E,EAAS,IAAUyK,EAAI5F,aAAa,IAAI,OAAO,OAA5xK,SAAuB4F,GAAK,IAAI4F,EAAQvP,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,OAAWC,EAAa9F,EAAI+F,WAAWtP,EAAO,UAAU,qBAAqB,MAAc,KAAXlB,GAAeA,IAAWqQ,GAASrQ,EAASqQ,EAA2BvP,OAAOf,EAAkB,KAAzBe,CAA4Bf,EAAsB,SAAE,CAAC0Q,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,YAAYD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC2P,SAASJ,MAAyBvP,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,GAAG5L,OAAOyL,GAAcE,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,IAAI,CAAC4P,UAAU,GAAG5L,OAAO2F,EAAI+F,WAAWtP,EAAO,OAAO,IAAIuP,SAAS,CAAChG,EAAIxI,YAAyBnB,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,mBAA2CxP,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,GAAG5L,OAAOyL,GAAcE,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,IAAI,CAAC4P,UAAU,GAAG5L,OAAO2F,EAAI+F,WAAWtP,EAAO,OAAO,IAAIuP,SAAS,CAAChG,EAAIxI,YAAyBnB,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,eAAwnIK,CAAclG,GAAK,IAAI,QAAQ,OAAnnI,SAAwBA,EAAI7F,GAAO,IAAIyL,EAAQvP,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,OAAWC,EAAa9F,EAAI+F,WAAWtP,EAAO,UAAU,qBAAqB,MAAc,KAAXlB,GAAeA,IAAWqQ,GAASrQ,EAASqQ,EAA2BvP,OAAOf,EAAkB,KAAzBe,CAA4Bf,EAAsB,SAAE,CAAC0Q,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,YAAYD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC2P,SAASJ,MAAyBvP,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,GAAG5L,OAAOyL,GAAcE,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,SAAS,CAAC4P,UAAU,QAAQD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAInG,EAAIoG,UAAUtR,EAA2B,EAAEuR,IAAI,QAAQ,YAAYrG,EAAIoG,UAAUtR,EAA2B,EAAEwR,SAAS,QAAQC,QAAQ,OAAOC,QAAQ,SAAiBnC,GAAG,IAAIoC,EAAUC,GAAkB,OAAJrC,QAAc,IAAJA,GAAyC,QAAtBoC,EAAUpC,EAAEW,cAA4B,IAAZyB,OAApC,EAA8DA,EAAUE,WAAStC,EAAEW,OAAO2B,QAAQ,OAAa,OAAJtC,QAAc,IAAJA,GAA0C,QAAvBqC,EAAWrC,EAAEW,cAA6B,IAAb0B,OAArC,EAAgEA,EAAWP,OAAK9B,EAAEW,OAAOmB,IAAIrR,EAA2B,IAAK8R,QAAQ,WAAmBnO,IAAW,SAASuD,GAAM,OAAOA,KAAQnD,GAAeG,GAAe,GAAGqB,OAAOF,QAA0B9D,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,mBAA2CxP,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,GAAG5L,OAAOyL,GAAcE,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,SAAS,CAAC4P,UAAU,QAAQD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAInG,EAAIoG,UAAUtR,EAA2B,EAAEuR,IAAI,QAAQ,YAAYrG,EAAIoG,UAAUtR,EAA2B,EAAEwR,SAAS,QAAQC,QAAQ,OAAOC,QAAQ,SAAiBnC,GAAG,IAAIwC,EAAWC,GAAkB,OAAJzC,QAAc,IAAJA,GAA0C,QAAvBwC,EAAWxC,EAAEW,cAA6B,IAAb6B,OAArC,EAAgEA,EAAWF,WAAStC,EAAEW,OAAO2B,QAAQ,OAAa,OAAJtC,QAAc,IAAJA,GAA0C,QAAvByC,EAAWzC,EAAEW,cAA6B,IAAb8B,OAArC,EAAgEA,EAAWX,OAAK9B,EAAEW,OAAOmB,IAAIrR,EAA2B,IAAK8R,QAAQ,WAAmBnO,IAAW,SAASuD,GAAM,OAAOA,KAAQnD,GAAeG,GAAe,GAAGqB,OAAOF,QAA0B9D,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,eAAwxDkB,CAAe/G,EAAI7F,GAAO,IAAI,QAAQ,OAA1xD,SAAwB6F,EAAI7F,GAAO,IAAIyL,EAAQvP,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,OAAWC,EAAa9F,EAAI+F,WAAWtP,EAAO,UAAU,qBAAqB,MAAc,KAAXlB,GAAeA,IAAWqQ,GAASrQ,EAASqQ,EAA2BvP,OAAOf,EAAkB,KAAzBe,CAA4Bf,EAAsB,SAAE,CAAC0Q,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,YAAYD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC2P,SAASJ,MAAyBvP,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,GAAG5L,OAAOyL,GAAcE,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,SAAS,CAAC4P,UAAU,qBAAqBD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,QAAQ,CAAC8P,IAAInG,EAAIoG,UAAUtR,EAA2B,EAAEkS,OAAOjS,EAAS6R,QAAQ,WAAmBnO,IAAW,SAASuD,GAAM,OAAOA,KAAQnD,GAAeG,GAAe,GAAGqB,OAAOF,QAA0B9D,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,mBAA2CxP,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,GAAG5L,OAAOyL,GAAcE,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,SAAS,CAAC4P,UAAU,qBAAqBD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,QAAQ,CAAC8P,IAAInG,EAAIoG,UAAUtR,EAA2B,EAAEkS,OAAOjS,EAAS6R,QAAQ,WAAmBnO,IAAW,SAASuD,GAAM,OAAOA,KAAQnD,GAAeG,GAAe,GAAGqB,OAAOF,QAA0B9D,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyC2J,EAAI6F,iBAAiB,eAA+NoB,CAAejH,EAAI7F,KAAc+M,GAH9L,SAA0B9O,GAAY,IAAI+O,EAAQ,GAAOC,EAAM,GAA+N,OAAzNhP,EAAW4B,QAAQ5B,EAAWiP,SAAQ,SAASnN,GAA4B,UAAnBA,EAAKE,cAAuB+M,EAAQ9T,KAAK6G,EAAKkM,UAAUgB,EAAM/T,KAAK,UAAgC,UAAnB6G,EAAKE,cAAuB+M,EAAQ9T,KAAK6G,EAAKkM,UAAUgB,EAAM/T,KAAK,aAAoB,CAAC8T,QAAQA,EAAQC,MAAMA,GAG3GE,CAAiBlP,IAAY+O,GAAQD,GAAkBC,QAAQC,GAAMF,GAAkBE,MAAM,OAAO1R,EAAM6R,YAAyBlR,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,aAAaD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,WAAWD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,QAAqBA,OAAOf,EAAkB,KAAzBe,CAA4Bf,EAAsB,SAAE,CAAC0Q,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2BjB,EAAyB8F,EAAE,CAAC1C,QAAQA,GAAQgP,MAAM5O,GAAcuO,QAAQA,GAAQC,MAAMA,GACrlMK,QAAQ,WAAmB5O,GAAe,KAAgB,OAAVsO,SAA0B,IAAVA,QAAiB,EAAOA,GAAQnN,QAAqB3D,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,aAAaD,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,WAAWD,SAAS,CAAc3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,YAAY5L,OAAOzD,EAAO,SAAS,IAAIoP,SAAS,CAAc3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,YAAYD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC4P,UAAU,QAAQD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,KAA0C,QAApCvQ,EAAkBF,EAAM0G,gBAAsC,IAApBxG,GAA0F,QAAvDC,EAAsBD,EAAkByG,mBAA6C,IAAxBxG,OAArE,EAA2GA,EAAsB4L,QAAQrN,EAA+B,EAAEiS,IAAI,WAAWG,QAAQ,SAAiBnC,GAAG,IAAIqD,EAAWC,GAAkB,OAAJtD,QAAc,IAAJA,GAA0C,QAAvBqD,EAAWrD,EAAEW,cAA6B,IAAb0C,OAArC,EAAgEA,EAAWf,WAAStC,EAAEW,OAAO2B,QAAQ,OAAa,OAAJtC,QAAc,IAAJA,GAA0C,QAAvBsD,EAAWtD,EAAEW,cAA6B,IAAb2C,OAArC,EAAgEA,EAAWxB,OAAK9B,EAAEW,OAAOmB,IAAI/R,EAA+B,QAAsBiC,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,OAAOW,QAAQ,WAAiF,IAAIgB,EAAkBC,EAAqTC,EAAkBC,EAAhW,IAAxDlT,EAAgC,EAAE0B,QAAQ,YAA6Db,EAAMsS,QAAQ3U,KAAK,wBAAwBgH,OAA4C,QAApCuN,EAAkBlS,EAAM0G,gBAAsC,IAApBwL,GAA0F,QAAvDC,EAAsBD,EAAkBvL,mBAA6C,IAAxBwL,OAArE,EAA2GA,EAAsBpR,OAAO,qBAAuEf,EAAMsS,QAAQ3U,KAAK,2BAA2BgH,OAA4C,QAApCyN,EAAkBpS,EAAM0G,gBAAsC,IAApB0L,GAA0F,QAAvDC,EAAsBD,EAAkBzL,mBAA6C,IAAxB0L,OAArE,EAA2GA,EAAsBtR,UAAYuP,SAA8C,QAApClQ,EAAkBJ,EAAM0G,gBAAsC,IAApBtG,GAA0F,QAAvDC,EAAsBD,EAAkBuG,mBAA6C,IAAxBtG,OAArE,EAA2GA,EAAsBkS,QAAQrR,GAAqBP,OAAOf,EAAkB,KAAzBe,CAA4B,OAAO,CAACuQ,QAAQ,WAAmB,IAAIsB,EAAkBrR,GAAU,GAASO,GAAyB+G,GAAoD,QAApC+J,EAAkBxS,EAAM0G,gBAAsC,IAApB8L,OAA2B,EAAOA,EAAkB5J,QAAS2H,UAAU,cAAcD,SAAS,CAAC,mBAAgC3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAtC97E,iXAsCs9EE,IAAI,oBAAiChQ,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,gBAAgBkC,IAAI/R,EAAQ4P,SAAS,CAACpO,GAASoC,OAAO,GAAGpC,GAASwQ,KAAI,SAASpI,EAAI7F,GAAO,OAAOwL,GAAgB3F,EAAI7F,MAAuB9D,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,YAAYD,UAA+C,QAApChQ,EAAkBN,EAAM0G,gBAAsC,IAApBpG,GAA0F,QAAvDC,EAAsBD,EAAkBqG,mBAA6C,IAAxBpG,OAArE,EAA2GA,EAAsBoS,UAAuBhS,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAACiS,MAAM,CAACC,MAAM,WAAWvC,SAAS,gDAAqF,QAApC9P,EAAkBR,EAAM0G,gBAAsC,IAApBlG,GAA0F,QAAvDC,EAAsBD,EAAkBmG,mBAA6C,IAAxBlG,OAArE,EAA2GA,EAAsBkS,UAAuBhS,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,WAAWD,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,aAAaD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,QAAQ,CAAC4P,UAAU,cAAcuC,QAAQ,cAAcxC,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,kBAAkBD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IApC3qH,qtBAoCwrHE,IAAI,cAA2BhQ,OAAOf,EAAiB,IAAxBe,CAA2B,QAAQ,CAACoS,GAAG,cAAcxC,UAAU,OAAOf,KAAK,OAAOwD,OAAO,kEAAkEC,SAASzE,GAAa0E,SAAS5Q,KAA8B3B,OAAOf,EAAiB,IAAxBe,CAA2B,WAAW,CAACwS,YAAY,YAAYC,UAJrjE,SAAuBC,GAAWA,EAAMC,UAAsB,UAAZD,EAAME,MAAeF,EAAMG,iBAAiBlO,KAAcvD,EAAe,MAIk9D0R,MAAM3R,EAAYmR,SAAS,SAAkBtE,GAAG,OAAO5M,EAAe4M,EAAEW,OAAOmE,UAAwB9S,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,cAAcD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAlCjuI,idAkC6uIE,IAAI,OAAOO,QAAQ5L,eAAwBpE,GAAQI,EAA6BX,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,kBAAkBD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,YAAYD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC2P,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAInR,EAAwB,EAAEqR,IAAI,SAAS+C,MAAM,gBAAgBxS,EAAoBP,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,kBAAkBD,SAAS,CAAc3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,qBAAqBD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,qBAAqBD,SAA6B,OAApB5O,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBmI,UAAuBlJ,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAACuQ,QAAQ,WAAmB/P,GAAU,SAASmF,GAAM,OAAOA,MAAUiK,UAAU,QAAQD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAI7R,EAAgC,EAAE+R,IAAI,eAA4BhQ,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,WAAWD,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,KAAK,CAAC2P,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC4P,UAAU,aAAaD,SAAS3P,OAAO7B,EAA2B,EAAlC6B,CAAyD,OAApBe,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBsI,SAA6B,OAApBtI,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBuI,UAAuBtJ,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC4P,UAAU,cAAcD,SAA6B,OAApB5O,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBoI,SAAsBnJ,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC4P,UAAU,uBAAuBD,SAA6B,OAApB5O,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBqI,eAA4BpJ,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC4P,UAAU,gBAAgBD,SAA6B,OAApB5O,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBwI,gBAA6BvJ,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAAC4P,UAAU,aAAaD,SAA6B,OAApB5O,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBgI,iBAA8B/I,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC4P,UAAU,+BAA+BW,QAAQ,WAAmB,GAA2D,IAAxD/R,EAAgC,EAAE0B,QAAQ,YAAiBb,EAAMsS,QAAQ3U,KAAK,2BAA2BgH,OAA2B,OAApBjD,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBkH,MAAM,4BAA6B,CAC9rN,IAAI+K,EAAU,UAAUhP,OAA2B,OAApBjD,QAA8C,IAApBA,OAA2B,EAAOA,EAAkBkH,MAAM,YAAYjE,OAA2B,OAApBjD,QAA8C,IAApBA,OAA2B,EAAOA,EAAkByI,OAAO,gCAAgCnK,EAAMsS,QAAQ3U,KAAK,eAAegH,OAAOgP,MAAerD,SAAS,wBAAwB,cAEhVsD,EAAe,GAAOC,GAAiB,EAQw2RC,EARp1R,SAAc9T,GAAO,IAAI+T,EAAeC,EAAsBC,EAAgBC,EAA0BtT,EAAUD,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAMwT,EAAWxT,OAAOnC,EAA+B,EAAtCmC,CAAyCC,EAAU,GAAGwT,EAAaD,EAAW,GAAGE,EAAgBF,EAAW,GACpUnT,EAAWL,OAAOlC,EAAgB,SAAvBkC,EAA0B,WAAW,OAAO3B,EAAuB,EAAEsV,eAAerT,EAAWN,OAAOnC,EAA+B,EAAtCmC,CAAyCK,EAAW,GAAsBuT,GAAdtT,EAAW,GAAWA,EAAW,IAAOG,EAAWT,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAIU,EAAWV,OAAOnC,EAA+B,EAAtCmC,CAAyCS,EAAW,GAAG2D,EAAU1D,EAAW,GAAGgE,EAAahE,EAAW,GAAOG,EAAWb,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAIc,EAAWd,OAAOnC,EAA+B,EAAtCmC,CAAyCa,EAAW,GAAGgT,EAAgB/S,EAAW,GAAGgT,EAAmBhT,EAAW,GAAOG,EAAWjB,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAOkB,EAAYlB,OAAOnC,EAA+B,EAAtCmC,CAAyCiB,EAAW,GAAGiQ,EAAYhQ,EAAY,GAAG6S,EAAe7S,EAAY,GAAOG,EAAYrB,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAIsB,EAAYtB,OAAOnC,EAA+B,EAAtCmC,CAAyCqB,EAAY,GAAG0E,EAASzE,EAAY,GAAG0S,EAAY1S,EAAY,GAAOG,EAAYzB,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAI0B,EAAY1B,OAAOnC,EAA+B,EAAtCmC,CAAyCyB,EAAY,GAAyBwS,GAAfvS,EAAY,GAAaA,EAAY,IAAOG,EAAY7B,OAAOlC,EAAgB,SAAvBkC,CAA0B,IAAI8B,EAAY9B,OAAOnC,EAA+B,EAAtCmC,CAAyC6B,EAAY,GAAGqS,EAAYpS,EAAY,GAAGqS,EAAerS,EAAY,GAAOG,EAAYjC,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAOkC,EAAYlC,OAAOnC,EAA+B,EAAtCmC,CAAyCiC,EAAY,GAAGmS,EAAalS,EAAY,GAAGmS,GAAgBnS,EAAY,GAAOG,GAAYrC,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAMsC,GAAYtC,OAAOnC,EAA+B,EAAtCmC,CAAyCqC,GAAY,GAAGiS,GAAgBhS,GAAY,GAAGiS,GAAmBjS,GAAY,GAAOG,GAAYzC,OAAOlC,EAAgB,SAAvBkC,EAA0B,GAAO0C,GAAY1C,OAAOnC,EAA+B,EAAtCmC,CAAyCyC,GAAY,GAAG+R,GAAW9R,GAAY,GAAG+R,GAAc/R,GAAY,GAAOkC,IAAuC,QAAhCwO,EAAe/T,EAAMsS,eAAkC,IAAjByB,GAAiF,QAAjDC,EAAsBD,EAAesB,gBAA0C,IAAxBrB,OAA/D,EAAqGA,EAAsBsB,OAAyC,QAAjCrB,EAAgBjU,EAAMsS,eAAmC,IAAlB2B,GAAmF,QAAlDC,EAAsBD,EAAgBoB,gBAA0C,IAAxBnB,OAAhE,EAAsGA,EAAsBoB,MAAM,CAACC,SAAS,GAAGC,UAAU,GAAG3L,QAAQ,GAAGjB,MAAM,IAAI2M,GAAShQ,GAAKgQ,SAASC,GAAUjQ,GAAKiQ,UAAU3L,GAAQtE,GAAKsE,QAAQjB,GAAMrD,GAAKqD,MACztEjI,OAAOlC,EAAiB,UAAxBkC,EAA2B,WAC0iB,OAArkBA,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASC,IAAU,OAAOrH,EAAoBmH,EAAEY,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAA8C,GAA5C5F,OAAO9B,EAA4B,EAAnC8B,EAAsC,KAAW4U,IAAUC,IAAW3L,IAASjB,IAAO,CAACvC,EAASE,KAAK,EAAE,MAAuB,OAAhBF,EAASE,KAAK,EAASkP,KAAkB,KAAK,EAAEpP,EAASE,KAAK,EAAE,MAAM,KAAK,EAAEsN,GAAiB,EAAK,KAAK,EAAkB,OAAhBxN,EAASE,KAAK,EAAS5F,OAAO3B,EAAuC,EAA9C2B,CAAiD+U,IAAiB,KAAK,EAAE,IAAI,MAAM,OAAOrP,EAASiB,UAAW5B,MAAtjB/E,GAA4kB,WAC5kBA,OAAO3B,EAAsC,EAA7C2B,CAAgDiT,GAAgBA,EAAe,MAAO,IAAI,IAAI6B,GAA6B,WAAW,IAAI/M,EAAM/H,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASkC,IAAW,IAAIgO,EAAO,OAAOtX,EAAoBmH,EAAEY,MAAK,SAAmBkC,GAAW,OAAS,OAAOA,EAAUhC,KAAKgC,EAAU/B,MAAM,KAAK,EAA4G,OAA1GoP,EAAO,GAAGhR,OAAOiE,GAAM,KAAKjE,OAAO4Q,GAAS,KAAK5Q,OAAO6Q,IAAW5B,EAAe+B,EAAOrN,EAAU/B,KAAK,EAAS5F,OAAO3B,EAAiC,EAAxC2B,CAA2CgV,GAAQ,KAAK,EAAE,IAAIrN,EAAU7B,KAAK,CAAC6B,EAAU/B,KAAK,EAAE,MAAO,OAAO+B,EAAUuH,OAAO,UAAU,KAAK,EAAoB,OAAlBvH,EAAU/B,KAAK,GAAU5F,OAAO3B,EAA6B,EAApC2B,CAAuCiI,GAAM2M,GAASC,GAAU3L,IAAS,KAAK,GAAG,IAAI,MAAM,OAAOvB,EAAUhB,UAAWK,OAAc,OAAO,WAA2B,OAAOe,EAAMnB,MAAM7J,KAAK8J,YAAttB,GAA2uBkO,GAA6B,WAAW,IAAI5I,EAAMnM,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASkD,EAASE,GAAK,IAAI+M,EAAiBC,EAAUC,EAAKC,EAAOC,EAASC,EAAQ,OAAO5X,EAAoBmH,EAAEY,MAAK,SAAmBoD,GAAW,OAAS,OAAOA,EAAUlD,KAAKkD,EAAUjD,MAAM,KAAK,EACvrB,GAA5fqP,EAAiB,GAA2N,QAAxNC,EAAUhN,EAAItE,QAAO,SAASC,EAAKC,GAAO,GAAGD,EAAKsC,eAAe,YAAYtC,EAAKd,SAASkQ,EAAe,CAAC,GAAGpP,EAAKd,SAASkQ,GAAiBC,EAA8C,OAAOrP,EAAnCoR,EAAiBpR,aAA0D,IAAZqR,GAA0BA,EAAUK,MAAK,SAASC,EAAEC,GAAG,IAAIC,EAAWC,EAAW,OAAgC,QAAxBD,EAAWD,EAAEvR,eAA8B,IAAbwR,OAAoB,EAAOA,EAAWlG,mBAA4C,QAAxBmG,EAAWH,EAAEtR,eAA8B,IAAbyR,OAAoB,EAAOA,EAAWnG,qBAA6C,IAAnB0F,EAAUvR,QAAasR,EAAkB,CAACpM,EAAUjD,KAAK,EAAE,MAAwH,OAAjHmO,GAAe,GAASO,KAAiBC,IAAmB,GAAOvU,OAAO9B,EAA4B,EAAnC8B,EAAsC,IAAe6I,EAAUqG,OAAO,UAAU,KAAK,EAChmB,GADkmB6E,GAAe,GAAUkB,IAAkBE,EAAKnV,OAAOxC,EAAmC,EAA1CwC,CAA6CkV,IAAgBzQ,QAAQwQ,GACl1BG,EAAOQ,MAAMC,QAAQV,IAAOF,EAAiBE,EAAKD,EAAUxQ,EAA6B,IAAhB0Q,EAAOzR,OAAW,CAAC,CAACmS,SAAS,aAAaV,KAAaA,EAAOzR,OAAO,GAAoB,KAAjBsP,GAAqB,CAACpK,EAAUjD,KAAK,GAAG,MAAwR,OAAjRqN,EAAemC,EAAO,GAAGrS,OAAOkR,EAAUmB,EAAO,GAAGrS,QAAWqS,EAAO,KAA4B,QAAtBC,EAASD,EAAO,UAAuB,IAAXC,OAAkB,EAAOA,EAASU,gBAAgB,IAAGX,EAAO,GAAGW,eAAe,EAAE/V,OAAO3B,EAAqC,EAA5C2B,CAA+CoV,EAAO,GAAGrS,SAASiR,EAAYoB,EAAO,IAAWvM,EAAUqG,OAAO,UAAU,KAAK,GAAMkG,EAAOzR,OAAO,KAAG2R,EAAQF,EAAOY,MAAK,SAASR,GAAG,OAAOA,EAAEzS,QAAQkQ,QAAyC,OAAVqC,QAA0B,IAAVA,OAAiB,EAAOA,EAAQS,gBAAgB,IAAGT,EAAQS,eAAe,EAAE/V,OAAO3B,EAAqC,EAA5C2B,CAA+CsV,EAAQvS,SAASiR,EAAYsB,IAAU,KAAK,GAAG,IAAI,MAAM,OAAOzM,EAAUlC,UAAWqB,OAAc,OAAO,SAAyBJ,GAAI,OAAOuE,EAAMvF,MAAM7J,KAAK8J,YAFN,GAEuB7G,OAAOlC,EAAiB,UAAxBkC,EAA2B,WAAW,IAAIiW,EAAY5X,EAAuB,EAAE6X,oBAAmB,SAASC,GAASA,GAAMvC,EAAQuC,GAAM1B,IAAc,KAAab,GAAQ,GAAOa,IAAc,GAAMzU,OAAO9B,EAA4B,EAAnC8B,EAAsC,GAAOuU,IAAmB,IAAWd,GAAcC,GAAgB,MAAW,OAAOuC,IAAc,CAACxC,IAC1uC,IAAI2C,GAA4B,WAAW,IAAItI,EAAM9N,OAAOpC,EAAkC,EAAzCoC,CAAyDtC,EAAoBmH,EAAEC,MAAK,SAASsH,EAASvI,GAAM,OAAOnG,EAAoBmH,EAAEY,MAAK,SAAmBwH,GAAW,OAAS,OAAOA,EAAUtH,KAAKsH,EAAUrH,MAAM,KAAK,EAAE5F,OAAO3B,EAAsC,EAA7C2B,CAAgDiT,GAAgBA,EAAepP,EAAKd,OAAOkR,EAAUpQ,EAAKd,QAAQiR,EAAYnQ,GAAM7D,OAAO3B,EAAqC,EAA5C2B,CAA+C6D,EAAKd,QAC/c,KAAK,EAAE,IAAI,MAAM,OAAOkK,EAAUtG,UAAWyF,OAAc,OAAO,SAAwBvE,GAAK,OAAOiG,EAAMlH,MAAM7J,KAAK8J,YADvF,GAC8hC,OAAt7B7G,OAAOlC,EAAiB,UAAxBkC,EAA2B,WAAW,IAAIqW,EAA+pBC,EAAnpB,GAAGpC,EAAY,CAAC,IAAIqC,EAAYnS,EAAUR,QAAO,SAASC,GAAM,IAAI2S,EAAkBC,EAAsBC,EAAuB,OAA6C,QAAtCF,EAAkB3S,EAAKmC,mBAAyC,IAApBwQ,GAAmF,QAAhDC,EAAsBD,EAAkB5E,YAAsC,IAAxB6E,GAAqG,QAA9DC,EAAuBD,EAAsB3H,qBAAgD,IAAzB4H,OAAzK,EAAgNA,EAAuB1H,SAASkF,EAAYpF,kBAAkBgF,EAAmByC,IAAkBnS,EAAUT,QAAmG,cAA7D,QAA5B0S,EAAYjS,EAAU,UAA0B,IAAdiS,OAAqB,EAAOA,EAAsB,YAAkB/B,KAAmI,cAA/D,QAA7BgC,EAAalS,EAAU,UAA2B,IAAfkS,OAAsB,EAAOA,EAAuB,WAAgB5R,EAAa,IAAI1E,OAAO9B,EAA4B,EAAnC8B,EAAsC,GAAOuU,IAAmB,MAAU,CAACL,EAAY9P,IAA+BpE,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,cAAcD,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,mBAAmBD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,eAAeW,QAAQ,WAAmB,OAAOkE,IAAc,IAAQ9E,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAI9R,EAAgC,EAAEgS,IAAI,mBAAgChQ,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,mBAAmBD,SAAS,CAAc3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,gBAAgB5L,OAAOwQ,GAAW,SAAS,IAAI7E,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC4P,UAAU,YAAYW,QAAQ,WAAmB,OAAOkE,IAAc,IAAS9E,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAI7R,EAAgC,EAAE+R,IAAI,YAAyBhQ,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,QAAQD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,QAAQqC,MAAM,CAAC0E,WAAW,QAAQhH,SAAS,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,cAAc5L,OAAOoQ,EAAa,SAAS,IAAI7D,QAAQ,WAAmB8D,IAAgB,IAAQ1E,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,QAAQ,CAAC6O,KAAK,OAAO2D,YAAY,SAASM,MAAMoB,EAAY5B,SAAS,SAAkBtE,GAAG,OAAOmG,EAAenG,EAAEW,OAAOmE,MAAMjN,eAA6B7F,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,kBAAkBD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAnFtgF,qxBAmFshFE,IAAI,gBAA6BhQ,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC4P,UAAU,YAAYD,SAASuE,EAAqC,IAAzBL,EAAgBlQ,OAAwB3D,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC2P,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAAC4W,KAAK,qBAAqBhH,UAAU,OAAOD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,SAASD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,qBAAqBD,SAAS,0BAA0BkE,EAAgB9B,KAAI,SAASlO,GAAM,IAAIgT,EAAmBC,EAAmBC,EAAcC,EAAeC,EAAe,OAAmBjX,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAACuQ,QAAQ,WAAmB6F,GAAevS,IAAQ8L,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,IAAI,CAAC4W,KAAK,qBAAqBhH,UAAU,QAAQ5L,OAAOiP,IAAiBpP,EAAKd,OAAO,SAAS,IAAI4M,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC4P,UAAU,QAAQD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,KAA6C,QAAvC+G,EAAmBhT,EAAKmC,mBAA0C,IAArB6Q,OAA4B,EAAOA,EAAmBzL,QAAQrN,EAA+B,EAAEiS,IAAI,MAAMG,QAAQ,SAAiBnC,GAAG,IAAIoC,EAAUC,GAAkB,OAAJrC,QAAc,IAAJA,GAAyC,QAAtBoC,EAAUpC,EAAEW,cAA4B,IAAZyB,OAApC,EAA8DA,EAAUE,WAAStC,EAAEW,OAAO2B,QAAQ,OAAa,OAAJtC,QAAc,IAAJA,GAA0C,QAAvBqC,EAAWrC,EAAEW,cAA6B,IAAb0B,OAArC,EAAgEA,EAAWP,OAAK9B,EAAEW,OAAOmB,IAAI/R,EAA+B,QAAsBiC,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,SAASD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,qBAAqBD,SAAiD,QAAvCmH,EAAmBjT,EAAKmC,mBAA0C,IAArB8Q,OAA4B,EAAOA,EAAmBlF,OAAoB5R,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,yBAAyBD,SAAS9L,EAAKqF,UAAuBlJ,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAAC4P,UAAU,oBAAoBD,SAAwC,QAA9BoH,EAAclT,EAAKK,eAAiC,IAAhB6S,OAAuB,EAAOA,EAAc5V,eAA+C,QAA/B6V,EAAenT,EAAKK,eAAkC,IAAjB8S,OAAwB,EAAOA,EAAexH,mBAAgCxP,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,YAAYD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyE,QAA/BiX,EAAepT,EAAKK,eAAkC,IAAjB+S,OAAwB,EAAOA,EAAezH,iBAAiB,eAAeyD,IAAiBpP,EAAKd,QAAkC,IAAtBc,EAAKkS,eAAV,KAA+C/V,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,QAAQD,SAAS9L,EAAKkS,6BAAyC,OAAZ3R,QAA8B,IAAZA,OAAmB,EAAOA,EAAUT,QAAQ,EAAES,EAAU2N,KAAI,SAASlO,GAAM,IAAIqT,EAAmBC,EAAmBC,EAAeC,EAAeC,EAAeC,EAAeC,EAAeC,EAAe,OAAmBzX,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAACuQ,QAAQ,WAAmB6F,GAAevS,IAAQ8L,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,IAAI,CAAC4W,KAAK,qBAAqBhH,UAAU,QAAQ5L,OAAOiP,IAAiBpP,EAAKd,OAAO,SAAS,IAAI4M,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC4P,UAAU,QAAQD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,KAA6C,QAAvCoH,EAAmBrT,EAAKmC,mBAA0C,IAArBkR,OAA4B,EAAOA,EAAmB9L,QAAQrN,EAA+B,EAAEiS,IAAI,MAAMG,QAAQ,SAAiBnC,GAAG,IAAIwC,EAAWC,GAAkB,OAAJzC,QAAc,IAAJA,GAA0C,QAAvBwC,EAAWxC,EAAEW,cAA6B,IAAb6B,OAArC,EAAgEA,EAAWF,WAAStC,EAAEW,OAAO2B,QAAQ,OAAa,OAAJtC,QAAc,IAAJA,GAA0C,QAAvByC,EAAWzC,EAAEW,cAA6B,IAAb8B,OAArC,EAAgEA,EAAWX,OAAK9B,EAAEW,OAAOmB,IAAI/R,EAA+B,QAAsBiC,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,SAASD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,qBAAqBD,SAAiD,QAAvCwH,EAAmBtT,EAAKmC,mBAA0C,IAArBmR,OAA4B,EAAOA,EAAmBvF,OAAoB5R,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,yBAAyBD,SAAS9L,EAAKqF,UAAuBlJ,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAAC4P,UAAU,oBAAoBD,SAA6G,UAAnE,QAA/ByH,EAAevT,EAAKK,eAAkC,IAAjBkT,OAAwB,EAAOA,EAAerT,aAAsD,QAA/BsT,EAAexT,EAAKK,eAAkC,IAAjBmT,OAAwB,EAAOA,EAAelW,YAAgH,WAAnE,QAA/BmW,EAAezT,EAAKK,eAAkC,IAAjBoT,OAAwB,EAAOA,EAAevT,aAAoC/D,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAACiS,MAAM,CAACC,MAAM,WAAWvC,SAAS,UAA8G,WAAnE,QAA/B4H,EAAe1T,EAAKK,eAAkC,IAAjBqT,OAAwB,EAAOA,EAAexT,aAAoC/D,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAACiS,MAAM,CAACC,MAAM,WAAWvC,SAAS,UAAU,MAAsC,QAA/B6H,EAAe3T,EAAKK,eAAkC,IAAjBsT,OAAwB,EAAOA,EAAehI,mBAAgCxP,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,YAAYD,SAAS3P,OAAO7B,EAA+B,EAAtC6B,CAAyE,QAA/ByX,EAAe5T,EAAKK,eAAkC,IAAjBuT,OAAwB,EAAOA,EAAejI,iBAAiB,eAAeyD,IAAiBpP,EAAKd,QAAkC,IAAtBc,EAAKkS,eAAV,KAA+C/V,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,QAAQD,SAAS9L,EAAKkS,4BAA4B1W,EAAMqY,UAAU,KAAkB1X,OAAOf,EAAiB,IAAxBe,CAA2B,KAAK,CAAC2P,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,IAAI,CAAC4W,KAAK,qBAAqBhH,UAAU,OAAOD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,SAASD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC4P,UAAU,qBAAqBD,SAAS,kCAAkC2E,GAAgB,KAAMA,IAAkF,KAApD,OAAZlQ,QAA8B,IAAZA,OAAmB,EAAOA,EAAUT,QAA+hB3D,OAAOf,EAAiB,IAAxBe,CAA2BZ,EAAa,CAAC2D,OAAOkQ,EAAelN,SAASA,EAASmL,YAAYA,EAAYS,QAAQtS,EAAMsS,QAAQ+F,UAAUrY,EAAMqY,UAAUtT,UAAUA,EAAUM,aAAaA,IAAhsB1E,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,aAAaD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC4P,UAAU,uBAAuBD,SAAsB3P,OAAOf,EAAkB,KAAzBe,CAA4B,MAAM,CAAC4P,UAAU,YAAYD,SAAS,CAAc3P,OAAOf,EAAiB,IAAxBe,CAA2B,SAAS,CAAC4P,UAAU,SAASD,SAAsB3P,OAAOf,EAAiB,IAAxBe,CAA2B,MAAM,CAAC8P,IAAI1R,EAAgC,EAAE4R,IAAI,qBAAkChQ,OAAOf,EAAiB,IAAxBe,CAA2B,OAAO,CAAC2P,SAAS,kCAEj2QgI,EAAc3X,OAAO1C,EAAoB,EAA3B0C,EAAlR,SAAyB2U,GAAO,MAAM,CAAC+C,UAAU/C,EAAMxW,OAAOuZ,UAAUE,kBAAkBjD,EAAMxW,OAAOyZ,sBAAiD,SAA4BC,GAAU,OAAO7X,OAAOzC,EAAkC,EAAzCyC,CAA4C,GAAG6X,KAA8B7X,CAAuEmT,GAAoDjW,EAA6B,QAAI"},"input":"(this[\"webpackJsonptickt-web\"] = this[\"webpackJsonptickt-web\"] || []).push([[30],{\n\n/***/ 304:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\");\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\");\n\n/***/ }),\n\n/***/ 396:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.p + \"static/media/not-found.c5fd5f1f.png\");\n\n/***/ }),\n\n/***/ 599:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 24 modules\nvar es = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/redux/es/redux.js + 1 modules\nvar redux = __webpack_require__(45);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(2);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./src/assets/images/u_placeholder.jpg\nvar u_placeholder = __webpack_require__(76);\n\n// CONCATENATED MODULE: ./src/assets/images/search-chat.png\n/* harmony default export */ var search_chat = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\");\n// EXTERNAL MODULE: ./src/assets/images/menu-line-blue.png\nvar menu_line_blue = __webpack_require__(312);\n\n// EXTERNAL MODULE: ./src/assets/images/ic-cancel-blue.png\nvar ic_cancel_blue = __webpack_require__(304);\n\n// EXTERNAL MODULE: ./src/redux/common/actions.ts\nvar actions = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./src/utils/common.tsx\nvar common = __webpack_require__(53);\n\n// EXTERNAL MODULE: ./src/assets/images/no-search-data.png\nvar no_search_data = __webpack_require__(66);\n\n// EXTERNAL MODULE: ./src/services/firebase.js\nvar firebase = __webpack_require__(42);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./src/redux/jobs/actions.ts\nvar jobs_actions = __webpack_require__(221);\n\n// EXTERNAL MODULE: ./src/utils/storageService.ts\nvar storageService = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./src/assets/images/not-found.png\nvar not_found = __webpack_require__(396);\n\n// CONCATENATED MODULE: ./src/assets/images/video@3x.png\n/* harmony default export */ var video_3x = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\");\n// CONCATENATED MODULE: ./src/assets/images/icon-direction-blue.png\n/* harmony default export */ var icon_direction_blue = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\");\n// CONCATENATED MODULE: ./src/assets/images/ic-media.png\n/* harmony default export */ var ic_media = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\");\n// CONCATENATED MODULE: ./src/assets/images/ic-send.png\n/* harmony default export */ var ic_send = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\");\n// EXTERNAL MODULE: ./src/assets/images/loader.gif\nvar loader = __webpack_require__(93);\n\n// EXTERNAL MODULE: ./src/redux/auth/actions.ts\nvar auth_actions = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./src/utils/constants.ts\nvar constants = __webpack_require__(19);\n\n// EXTERNAL MODULE: ./node_modules/fslightbox-react/index.js\nvar fslightbox_react = __webpack_require__(262);\nvar fslightbox_react_default = /*#__PURE__*/__webpack_require__.n(fslightbox_react);\n\n// EXTERNAL MODULE: ./src/services/analyticsTools.js\nvar analyticsTools = __webpack_require__(48);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/pages/chat/userMessages.tsx\n//@ts-ignore\nvar lastDate=\"\";var docTypes=[\"jpeg\",\"jpg\",\"png\",\"mp4\",\"wmv\",\"avi\"];var userMessages_UserMessages=function UserMessages(props){var _storageService$getIt,_props$roomData16,_props$roomData16$opp,_props$roomData19,_props$roomData19$opp,_props$roomData21,_props$roomData21$opp,_props$roomData22,_props$roomData22$opp;var divRref=Object(react[\"useRef\"])(null);var _useState=Object(react[\"useState\"])((_storageService$getIt=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt===void 0?void 0:_storageService$getIt._id),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,1),userId=_useState2[0];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),toggle=_useState4[0],setToggle=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),jobDetailLoader=_useState6[0],setJobDetailLoader=_useState6[1];var _useState7=Object(react[\"useState\"])(null),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),currentJobDetails=_useState8[0],setCurrentJobDetails=_useState8[1];var _useState9=Object(react[\"useState\"])(\"\"),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),messageText=_useState10[0],setMessageText=_useState10[1];var _useState11=Object(react[\"useState\"])([]),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),messages=_useState12[0],setMessages=_useState12[1];var _useState13=Object(react[\"useState\"])(false),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),isDocUploading=_useState14[0],setIsDocUploading=_useState14[1];var _useState15=Object(react[\"useState\"])([]),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),itemsMedia=_useState16[0],setItemsMedia=_useState16[1];var _useState17=Object(react[\"useState\"])(false),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),toggler=_useState18[0],setToggler=_useState18[1];var _useState19=Object(react[\"useState\"])(1),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),selectedSlide=_useState20[0],setSelectSlide=_useState20[1];var _useState21=Object(react[\"useState\"])({}),_useState22=Object(slicedToArray[\"a\" /* default */])(_useState21,2),fsSlideListner=_useState22[0],setFsSlideListner=_useState22[1];var _useState23=Object(react[\"useState\"])(\"\"),_useState24=Object(slicedToArray[\"a\" /* default */])(_useState23,2),oppUserFcmToken=_useState24[0],setOppUserFcmToken=_useState24[1];Object(react[\"useEffect\"])(function(){if(props.roomId!==\"\"){lastDate=\"\";Object(firebase[\"g\" /* getMessagesOfRoom */])(props.roomId,onReceiveOfNewMsg);setSelectSlide(1);setFsSlideListner({});setItemsMedia([]);setCurrentJobDetails(null);setToggle(false);}},[props.roomId]);// }, [props.roomId, props.roomData]);\n//console.log('props.roomData: ', props.roomData);\nObject(react[\"useEffect\"])(function(){scrollToBottom();});var scrollToBottom=function scrollToBottom(){if(null!==(divRref===null||divRref===void 0?void 0:divRref.current)){var scroll=divRref.current.scrollHeight-divRref.current.clientHeight;// divRref.current.scrollIntoView({ behavior: \"smooth\" })\ndivRref.current.scrollTo(0,scroll);}};var onReceiveOfNewMsg=function onReceiveOfNewMsg(arrmsg){// console.log('arrmsg: ', arrmsg);\nsetMessages(arrmsg);};Object(react[\"useEffect\"])(function(){var fsSlideObj={};var mediaMsgs=[];var slideCount=1;if(messages.length){mediaMsgs=messages.filter(function(item,index){if(item.messageType===\"image\"||item.messageType===\"video\"){fsSlideObj[\"\".concat(index)]=slideCount++;return item;}});setItemsMedia(mediaMsgs);setFsSlideListner(fsSlideObj);}},[messages]);// console.log('itemsMedia: ', itemsMedia, \"fsSlideListner\", fsSlideListner);\nvar setInboxToTopWithLastMsg=function setInboxToTopWithLastMsg(lastMsg){var newInboxData=Object(toConsumableArray[\"a\" /* default */])(props.inBoxData);var currentIndex=newInboxData.findIndex(function(i){return i.roomId===props.roomId;});newInboxData[currentIndex].lastMsg=lastMsg;newInboxData.splice(currentIndex,1);newInboxData.unshift(props.inBoxData[currentIndex]);props.setInBoxData(newInboxData);// console.log('lastMsg: ', lastMsg);\n// console.log('currentIndex: ', currentIndex);\n// console.log('newInboxData: ', newInboxData);\n};var sendMessage=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _props$roomData,_props$roomData$oppUs,_props$roomData2,_props$roomData2$oppU,_props$roomData3,_props$roomData3$oppU,_props$roomData4,_props$roomData4$oppU,lastMsg,mData;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(messageText&&messageText.trimLeft()!==\"\")){_context.next=7;break;}setMessageText(\"\");_context.next=4;return Object(firebase[\"m\" /* sendTextMessage */])(props.roomId,messageText);case 4:lastMsg=_context.sent;if(lastMsg&&((_props$roomData=props.roomData)===null||_props$roomData===void 0?void 0:(_props$roomData$oppUs=_props$roomData.oppUserInfo)===null||_props$roomData$oppUs===void 0?void 0:_props$roomData$oppUs.deviceToken)&&((_props$roomData2=props.roomData)===null||_props$roomData2===void 0?void 0:(_props$roomData2$oppU=_props$roomData2.oppUserInfo)===null||_props$roomData2$oppU===void 0?void 0:_props$roomData2$oppU.deviceType)&&(((_props$roomData3=props.roomData)===null||_props$roomData3===void 0?void 0:(_props$roomData3$oppU=_props$roomData3.oppUserInfo)===null||_props$roomData3$oppU===void 0?void 0:_props$roomData3$oppU.hasOwnProperty(\"isNotification\"))?(_props$roomData4=props.roomData)===null||_props$roomData4===void 0?void 0:(_props$roomData4$oppU=_props$roomData4.oppUserInfo)===null||_props$roomData4$oppU===void 0?void 0:_props$roomData4$oppU.isNotification:true)){sendFCMPushNotificationToOppUser(lastMsg);mData={timeStamp:analyticsTools[\"b\" /* moengage */].getCurrentTimeStamp()};analyticsTools[\"b\" /* moengage */].moE_SendEvent(constants[\"a\" /* MoEConstants */].CHAT,mData);analyticsTools[\"a\" /* mixPanel */].mixP_SendEvent(constants[\"a\" /* MoEConstants */].CHAT,mData);}setInboxToTopWithLastMsg(lastMsg);case 7:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(){return _ref.apply(this,arguments);};}();var handleKeyDown=function handleKeyDown(event){if(!event.shiftKey&&event.key===\"Enter\"){event.preventDefault();sendMessage();setMessageText(\"\");}};var sendImageVideoMsg=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(url,msgType){var _props$roomData5,_props$roomData5$oppU,_props$roomData6,_props$roomData6$oppU,_props$roomData7,_props$roomData7$oppU,_props$roomData8,_props$roomData8$oppU,lastMsg;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(url&&url!==\"\")){_context2.next=6;break;}_context2.next=3;return Object(firebase[\"l\" /* sendImageVideoMessage */])(props.roomId,url,msgType);case 3:lastMsg=_context2.sent;if(lastMsg&&((_props$roomData5=props.roomData)===null||_props$roomData5===void 0?void 0:(_props$roomData5$oppU=_props$roomData5.oppUserInfo)===null||_props$roomData5$oppU===void 0?void 0:_props$roomData5$oppU.deviceToken)&&((_props$roomData6=props.roomData)===null||_props$roomData6===void 0?void 0:(_props$roomData6$oppU=_props$roomData6.oppUserInfo)===null||_props$roomData6$oppU===void 0?void 0:_props$roomData6$oppU.deviceType)&&(((_props$roomData7=props.roomData)===null||_props$roomData7===void 0?void 0:(_props$roomData7$oppU=_props$roomData7.oppUserInfo)===null||_props$roomData7$oppU===void 0?void 0:_props$roomData7$oppU.hasOwnProperty(\"isNotification\"))?(_props$roomData8=props.roomData)===null||_props$roomData8===void 0?void 0:(_props$roomData8$oppU=_props$roomData8.oppUserInfo)===null||_props$roomData8$oppU===void 0?void 0:_props$roomData8$oppU.isNotification:true)){sendFCMPushNotificationToOppUser(lastMsg);}setInboxToTopWithLastMsg(lastMsg);case 6:setMessageText(\"\");case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function sendImageVideoMsg(_x,_x2){return _ref2.apply(this,arguments);};}();var fetchJobDetail=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(jobId){var res,_res$data,_res$data2,_res$data3,_res$data4,_res$data5,_res$data6,_res$data7,_res$data8,_res$data9,jobInfo;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setJobDetailLoader(true);_context3.next=3;return Object(jobs_actions[\"F\" /* getJobDetails */])(jobId);case 3:res=_context3.sent;if(res.success){jobInfo={jobDescription:((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.details)||\"\",jobId:((_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.jobId)||\"\",jobName:((_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.jobName)||\"\",amount:((_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.amount)||\"\",locationName:((_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.locationName)||\"\",fromDate:((_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.fromDate)||\"\",toDate:((_res$data7=res.data)===null||_res$data7===void 0?void 0:_res$data7.toDate)||\"\",duration:((_res$data8=res.data)===null||_res$data8===void 0?void 0:_res$data8.duration)||\"\",status:((_res$data9=res.data)===null||_res$data9===void 0?void 0:_res$data9.status)||\"\"};setCurrentJobDetails(jobInfo);setJobDetailLoader(false);}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchJobDetail(_x3){return _ref3.apply(this,arguments);};}();var renderMediaItems=function renderMediaItems(itemsMedia){var sources=[];var types=[];if(itemsMedia.length){itemsMedia.forEach(function(item){if(item.messageType===\"video\"){sources.push(item.mediaUrl);types.push(\"video\");}if(item.messageType===\"image\"){sources.push(item.mediaUrl);types.push(\"image\");}});}return{sources:sources,types:types};};var setResDeviceType=function setResDeviceType(deviceType,msg){var _storageService$getIt2,_storageService$getIt3,_storageService$getIt4,_storageService$getIt5,_storageService$getIt6,_msg$messageRoomId,_msg$messageRoomId$sp,_storageService$getIt7,_props$roomData9,_storageService$getIt8,_storageService$getIt9,_storageService$getIt10,_msg$messageRoomId2,_msg$messageRoomId2$s,_storageService$getIt11,_props$roomData10;switch(Number(deviceType)){case 1:return{app_icon:\"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",title:\"Tickt App\",notificationText:\"\".concat((_storageService$getIt2=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt2===void 0?void 0:_storageService$getIt2.userName,\" send you a message\"),senderName:\"\".concat((_storageService$getIt3=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt3===void 0?void 0:_storageService$getIt3.userName),messageType:\"\".concat(msg===null||msg===void 0?void 0:msg.messageType),messageText:\"\".concat((msg===null||msg===void 0?void 0:msg.messageType)===\"text\"?msg===null||msg===void 0?void 0:msg.messageText:\"\"),room_id:msg===null||msg===void 0?void 0:msg.messageRoomId,image:(_storageService$getIt4=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt4===void 0?void 0:_storageService$getIt4.user_image,notificationType:25,sound:\"default\"};case 2:return{body:msg===null||msg===void 0?void 0:msg.messageText,messageText:msg===null||msg===void 0?void 0:msg.messageText,sender:{first_name:(_storageService$getIt5=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt5===void 0?void 0:_storageService$getIt5.userName,device_token:storageService[\"a\" /* default */].getItem(\"fcmToken\"),user_id:(_storageService$getIt6=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt6===void 0?void 0:_storageService$getIt6._id,device_type:2},jobId:msg===null||msg===void 0?void 0:(_msg$messageRoomId=msg.messageRoomId)===null||_msg$messageRoomId===void 0?void 0:(_msg$messageRoomId$sp=_msg$messageRoomId.split(\"_\"))===null||_msg$messageRoomId$sp===void 0?void 0:_msg$messageRoomId$sp[0],badge:1,device_type:2,title:(_storageService$getIt7=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt7===void 0?void 0:_storageService$getIt7.userName,jobName:(_props$roomData9=props.roomData)===null||_props$roomData9===void 0?void 0:_props$roomData9.jobName,notification_type:50,sound:\"default\",messageId:msg===null||msg===void 0?void 0:msg.messageId};case 3:return{notification:{body:msg===null||msg===void 0?void 0:msg.messageText,title:(_storageService$getIt8=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt8===void 0?void 0:_storageService$getIt8.userName},data:{body:msg===null||msg===void 0?void 0:msg.messageText,messageText:msg===null||msg===void 0?void 0:msg.messageText,sender:{first_name:(_storageService$getIt9=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt9===void 0?void 0:_storageService$getIt9.userName,device_token:storageService[\"a\" /* default */].getItem(\"fcmToken\"),user_id:(_storageService$getIt10=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt10===void 0?void 0:_storageService$getIt10._id,device_type:2},jobId:msg===null||msg===void 0?void 0:(_msg$messageRoomId2=msg.messageRoomId)===null||_msg$messageRoomId2===void 0?void 0:(_msg$messageRoomId2$s=_msg$messageRoomId2.split(\"_\"))===null||_msg$messageRoomId2$s===void 0?void 0:_msg$messageRoomId2$s[0],badge:1,device_type:2,title:(_storageService$getIt11=storageService[\"a\" /* default */].getItem(\"userInfo\"))===null||_storageService$getIt11===void 0?void 0:_storageService$getIt11.userName,jobName:(_props$roomData10=props.roomData)===null||_props$roomData10===void 0?void 0:_props$roomData10.jobName,notification_type:50,sound:\"default\",messageId:msg===null||msg===void 0?void 0:msg.messageId}};default:return;}};var sendFCMPushNotificationToOppUser=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(msg){var _props$roomData11,_props$roomData11$opp,_props$roomData12,_props$roomData12$opp,_props$roomData13,_props$roomData13$opp,_props$roomData14,_props$roomData14$opp,_props$roomData15,_props$roomData15$opp;var data,newData,headers_,response;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=setResDeviceType((_props$roomData11=props.roomData)===null||_props$roomData11===void 0?void 0:(_props$roomData11$opp=_props$roomData11.oppUserInfo)===null||_props$roomData11$opp===void 0?void 0:_props$roomData11$opp.deviceType,msg);newData=Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({to:\"\".concat((_props$roomData12=props.roomData)===null||_props$roomData12===void 0?void 0:(_props$roomData12$opp=_props$roomData12.oppUserInfo)===null||_props$roomData12$opp===void 0?void 0:_props$roomData12$opp.deviceToken)},((_props$roomData13=props.roomData)===null||_props$roomData13===void 0?void 0:(_props$roomData13$opp=_props$roomData13.oppUserInfo)===null||_props$roomData13$opp===void 0?void 0:_props$roomData13$opp.deviceType)==1&&{data:data}),((_props$roomData14=props.roomData)===null||_props$roomData14===void 0?void 0:(_props$roomData14$opp=_props$roomData14.oppUserInfo)===null||_props$roomData14$opp===void 0?void 0:_props$roomData14$opp.deviceType)==2&&{notification:data}),((_props$roomData15=props.roomData)===null||_props$roomData15===void 0?void 0:(_props$roomData15$opp=_props$roomData15.oppUserInfo)===null||_props$roomData15$opp===void 0?void 0:_props$roomData15$opp.deviceType)==3&&{notification:data===null||data===void 0?void 0:data.notification,data:data===null||data===void 0?void 0:data.data});headers_={\"Content-Type\":\"application/json\",Authorization:constants[\"b\" /* default */].FcmHeaderAuthorizationKey};_context4.next=5;return fetch(\"https://fcm.googleapis.com/fcm/send\",{method:\"POST\",headers:headers_,body:JSON.stringify(newData)});case 5:response=_context4.sent;// const res: any = await response.json();\nif(response.status===200){console.log(\"Chat push notification send to opposite user: success\");}else{console.log(\"Chat push notification send to opposite user: failure\");}case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function sendFCMPushNotificationToOppUser(_x4){return _ref4.apply(this,arguments);};}();var handleUpload=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(e){var _newFile$type,_newFile$type$split$;var maxFileSize,formData,newFile,fileType,selectedFileSize,check_type,res;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:maxFileSize=10;formData=new FormData();newFile=e.target.files[0];fileType=newFile===null||newFile===void 0?void 0:(_newFile$type=newFile.type)===null||_newFile$type===void 0?void 0:(_newFile$type$split$=_newFile$type.split(\"/\")[1])===null||_newFile$type$split$===void 0?void 0:_newFile$type$split$.toLowerCase();selectedFileSize=(newFile===null||newFile===void 0?void 0:newFile.size)/1024/1024;// size in mb\nif([\"mp4\",\"wmv\",\"avi\"].includes(fileType)){maxFileSize=20;}if(!(docTypes.indexOf(fileType)<0||selectedFileSize>maxFileSize)){_context5.next=9;break;}Object(actions[\"c\" /* setShowToast */])(true,\"The file must be in proper format or size\");return _context5.abrupt(\"return\");case 9:formData.append(\"file\",newFile);setIsDocUploading(true);check_type=[\"jpeg\",\"jpg\",\"png\"].includes(fileType)?1:[\"mp4\",\"wmv\",\"avi\"].includes(fileType)?2:null;_context5.next=14;return Object(auth_actions[\"l\" /* onFileUpload */])(formData);case 14:res=_context5.sent;if(res.success&&res.imgUrl){if(check_type===1){sendImageVideoMsg(res.imgUrl,\"image\");}else if(check_type===2){sendImageVideoMsg(res.imgUrl,\"video\");}else{Object(actions[\"c\" /* setShowToast */])(true,\"There is some technical issue\");}setIsDocUploading(false);// setLocalFiles((prev: any) => ({ ...prev, [filesUrl?.length]: URL.createObjectURL(newFile) }));\n}case 16:case\"end\":return _context5.stop();}}},_callee5);}));return function handleUpload(_x5){return _ref5.apply(this,arguments);};}();var renderTextMsg=function renderTextMsg(msg){var curDate=Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"day\");var messageClass=msg.senderId===userId?\"message\":\"message recive_msg\";if(lastDate===\"\"||lastDate!==curDate){lastDate=curDate;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:curDate})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"\".concat(msg.senderId===userId?\"mark\":\"\"),children:[msg.messageText,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})})]});}else return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"\".concat(msg.senderId===userId?\"mark\":\"\"),children:[msg.messageText,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})});};var renderImageMsg=function renderImageMsg(msg,index){var curDate=Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"day\");var messageClass=msg.senderId===userId?\"message\":\"message recive_msg\";if(lastDate===\"\"||lastDate!==curDate){lastDate=curDate;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:curDate})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:msg.mediaUrl||not_found[\"a\" /* default */],alt:\"media\",\"async-src\":msg.mediaUrl||not_found[\"a\" /* default */],decoding:\"async\",loading:\"lazy\",onError:function onError(e){var _e$target,_e$target2;if(e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.src){e.target.src=not_found[\"a\" /* default */];}},onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})})]});}else return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:msg.mediaUrl||not_found[\"a\" /* default */],alt:\"media\",\"async-src\":msg.mediaUrl||not_found[\"a\" /* default */],decoding:\"async\",loading:\"lazy\",onError:function onError(e){var _e$target3,_e$target4;if(e===null||e===void 0?void 0:(_e$target3=e.target)===null||_e$target3===void 0?void 0:_e$target3.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target4=e.target)===null||_e$target4===void 0?void 0:_e$target4.src){e.target.src=not_found[\"a\" /* default */];}},onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})});};var renderVideoMsg=function renderVideoMsg(msg,index){var curDate=Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"day\");var messageClass=msg.senderId===userId?\"message\":\"message recive_msg\";if(lastDate===\"\"||lastDate!==curDate){lastDate=curDate;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:curDate})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media media_video \",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{src:msg.mediaUrl||not_found[\"a\" /* default */],poster:video_3x,onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})})]});}else return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(messageClass),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{className:\"media media_video \",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{src:msg.mediaUrl||not_found[\"a\" /* default */],poster:video_3x,onClick:function onClick(){setToggler(function(prev){return!prev;});setSelectSlide(fsSlideListner[\"\".concat(index)]);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"time\",children:Object(common[\"c\" /* formatDateTime */])(msg.messageTimestamp,\"time\")})]})});};var displayMessages=function displayMessages(msg,index){if(index===0)lastDate=\"\";switch(msg.messageType){case\"text\":return renderTextMsg(msg);case\"image\":return renderImageMsg(msg,index);case\"video\":return renderVideoMsg(msg,index);}};var _renderMediaItems=renderMediaItems(itemsMedia),sources=_renderMediaItems.sources,types=_renderMediaItems.types;return props.isNoRecords?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"flex_row\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{})})}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(fslightbox_react_default.a,{toggler:toggler,slide:selectedSlide,sources:sources,types:types,// disableLocalStorage={true}\nonClose:function onClose(){setSelectSlide(1);}},sources===null||sources===void 0?void 0:sources.length),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chat_col \".concat(toggle?\"active\":\"\"),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chat_user\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"u_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:((_props$roomData16=props.roomData)===null||_props$roomData16===void 0?void 0:(_props$roomData16$opp=_props$roomData16.oppUserInfo)===null||_props$roomData16$opp===void 0?void 0:_props$roomData16$opp.image)||u_placeholder[\"a\" /* default */],alt:\"user-img\",onError:function onError(e){var _e$target5,_e$target6;if(e===null||e===void 0?void 0:(_e$target5=e.target)===null||_e$target5===void 0?void 0:_e$target5.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target6=e.target)===null||_e$target6===void 0?void 0:_e$target6.src){e.target.src=u_placeholder[\"a\" /* default */];}}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"name\",onClick:function onClick(){if(storageService[\"a\" /* default */].getItem(\"userType\")===2){var _props$roomData17,_props$roomData17$opp;props.history.push(\"/tradie-info?tradeId=\".concat((_props$roomData17=props.roomData)===null||_props$roomData17===void 0?void 0:(_props$roomData17$opp=_props$roomData17.oppUserInfo)===null||_props$roomData17$opp===void 0?void 0:_props$roomData17$opp.userId,\"&hideInvite=true\"));}else{var _props$roomData18,_props$roomData18$opp;props.history.push(\"/builder-info?builderId=\".concat((_props$roomData18=props.roomData)===null||_props$roomData18===void 0?void 0:(_props$roomData18$opp=_props$roomData18.oppUserInfo)===null||_props$roomData18$opp===void 0?void 0:_props$roomData18$opp.userId));}},children:(_props$roomData19=props.roomData)===null||_props$roomData19===void 0?void 0:(_props$roomData19$opp=_props$roomData19.oppUserInfo)===null||_props$roomData19$opp===void 0?void 0:_props$roomData19$opp.name}),!toggle&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{onClick:function onClick(){var _props$roomData20;setToggle(true);if(currentJobDetails)return;fetchJobDetail((_props$roomData20=props.roomData)===null||_props$roomData20===void 0?void 0:_props$roomData20.jobId);},className:\"view_detail\",children:[\"View Job Details\",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:icon_direction_blue,alt:\"view-more\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"message_wrapr\",ref:divRref,children:[messages.length>0&&messages.map(function(msg,index){return displayMessages(msg,index);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"date_time\",children:((_props$roomData21=props.roomData)===null||_props$roomData21===void 0?void 0:(_props$roomData21$opp=_props$roomData21.oppUserInfo)===null||_props$roomData21$opp===void 0?void 0:_props$roomData21$opp.isBlock)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{color:\"#929292\"},children:\"You can no longer chat with the user\"})})]}),!((_props$roomData22=props.roomData)===null||_props$roomData22===void 0?void 0:(_props$roomData22$opp=_props$roomData22.oppUserInfo)===null||_props$roomData22$opp===void 0?void 0:_props$roomData22$opp.isBlock)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"send_msg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text_field\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"upload_item\",htmlFor:\"upload_item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_media,alt:\"media\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{id:\"upload_item\",className:\"hide\",type:\"file\",accept:\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\",onChange:handleUpload,disabled:isDocUploading}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{placeholder:\"Message..\",onKeyDown:handleKeyDown,value:messageText,onChange:function onChange(e){return setMessageText(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_send,alt:\"send\",onClick:sendMessage})})]})})]}),toggle&&jobDetailLoader?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"view_detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"no_record\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:loader[\"a\" /* default */],alt:\"loader\",width:\"130px\"})})})}):toggle?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"view_detail_col\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"f_spacebw relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"title line-2 pr-20\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{onClick:function onClick(){setToggle(function(prev){return!prev;});},className:\"close\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_cancel_blue[\"a\" /* default */],alt:\"close\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"job_info\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"ul\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon clock\",children:Object(common[\"h\" /* renderTime */])(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.fromDate,currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.toDate)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon dollar\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.amount}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon location line-1\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.locationName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"icon calendar\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.duration})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"commn_para\",children:currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobDescription}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"fill_btn full_btn btn-effect\",onClick:function onClick(){if(storageService[\"a\" /* default */].getItem(\"userType\")===1){props.history.push(\"/job-details-page?jobId=\".concat(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobId,\"&redirect_from=jobs\"));}else{// let urlEncode: any = window.btoa(`?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`)\nvar urlEncode=\"?jobId=\".concat(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.jobId,\"&status=\").concat(currentJobDetails===null||currentJobDetails===void 0?void 0:currentJobDetails.status,\"&edit=true&activeType=active\");props.history.push(\"/job-detail?\".concat(urlEncode));}},children:\"View Job details\"})]}):null]})})]});};/* harmony default export */ var userMessages = (userMessages_UserMessages);\n// CONCATENATED MODULE: ./src/pages/chat/chat.tsx\nvar selectedRoomID=\"\";var isFreshChatRoute=false;var chat_Chat=function Chat(props){var _props$history,_props$history$locati,_props$history2,_props$history2$locat;var _useState=Object(react[\"useState\"])(true),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),initializing=_useState2[0],setInitializing=_useState2[1];// firebase authenticated user details\nvar _useState3=Object(react[\"useState\"])(function(){return firebase[\"a\" /* auth */].currentUser;}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),inBoxData=_useState6[0],setInBoxData=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),filterInBoxData=_useState8[0],setFilterInBoxData=_useState8[1];var _useState9=Object(react[\"useState\"])(false),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),isNoRecords=_useState10[0],setIsNoRecords=_useState10[1];var _useState11=Object(react[\"useState\"])({}),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),roomData=_useState12[0],setRoomData=_useState12[1];var _useState13=Object(react[\"useState\"])(\"\"),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),roomId=_useState14[0],setRoomId=_useState14[1];var _useState15=Object(react[\"useState\"])(\"\"),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),searchQuery=_useState16[0],setSearchQuery=_useState16[1];var _useState17=Object(react[\"useState\"])(false),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),searchActive=_useState18[0],setSearchActive=_useState18[1];var _useState19=Object(react[\"useState\"])(true),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),isInitialLoader=_useState20[0],setIsInitialLoader=_useState20[1];var _useState21=Object(react[\"useState\"])(false),_useState22=Object(slicedToArray[\"a\" /* default */])(_useState21,2),isMobInbox=_useState22[0],setIsMobInbox=_useState22[1];var _ref=((_props$history=props.history)===null||_props$history===void 0?void 0:(_props$history$locati=_props$history.location)===null||_props$history$locati===void 0?void 0:_props$history$locati.state)?(_props$history2=props.history)===null||_props$history2===void 0?void 0:(_props$history2$locat=_props$history2.location)===null||_props$history2$locat===void 0?void 0:_props$history2$locat.state:{tradieId:\"\",builderId:\"\",jobName:\"\",jobId:\"\"},tradieId=_ref.tradieId,builderId=_ref.builderId,jobName=_ref.jobName,jobId=_ref.jobId;// console.log('tradieId, builderId, jobName, jobId: ', tradieId, builderId, jobName, jobId);\nObject(react[\"useEffect\"])(function(){//  console.log(\"roomId:: from didmout\", selectedRoomID);\nObject(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Object(actions[\"a\" /* setLoading */])(true);if(!(tradieId&&builderId&&jobName&&jobId)){_context.next=6;break;}_context.next=4;return setInitialItems();case 4:_context.next=7;break;case 6:isFreshChatRoute=true;case 7:_context.next=9;return Object(firebase[\"e\" /* getFirebaseInboxData */])(onUpdateofInbox);case 9:case\"end\":return _context.stop();}}},_callee);}))();return function(){// debugger;\nObject(firebase[\"o\" /* stopListeningOfRoom */])(selectedRoomID);selectedRoomID=\"\";};},[]);var setInitialItems=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var roomID;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:roomID=\"\".concat(jobId,\"_\").concat(tradieId,\"_\").concat(builderId);selectedRoomID=roomID;_context2.next=4;return Object(firebase[\"b\" /* checkRoomExist */])(roomID);case 4:if(!_context2.sent){_context2.next=8;break;}return _context2.abrupt(\"return\");case 8:_context2.next=10;return Object(firebase[\"c\" /* createRoom */])(jobId,tradieId,builderId,jobName);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function setInitialItems(){return _ref3.apply(this,arguments);};}();var onUpdateofInbox=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(res){var selectedRoomInfo,sortedRes,ress,newRes,_newRes$,itemObj;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://  console.log(\"roomId::\", selectedRoomID);\nselectedRoomInfo=\"\";sortedRes=res.filter(function(item,index){if(item.hasOwnProperty(\"lastMsg\")||item.roomId===selectedRoomID){if(item.roomId===selectedRoomID&&!isFreshChatRoute){selectedRoomInfo=item;}else{return item;}}});sortedRes===null||sortedRes===void 0?void 0:sortedRes.sort(function(x,y){var _y$lastMsg,_x$lastMsg;return((_y$lastMsg=y.lastMsg)===null||_y$lastMsg===void 0?void 0:_y$lastMsg.messageTimestamp)-((_x$lastMsg=x.lastMsg)===null||_x$lastMsg===void 0?void 0:_x$lastMsg.messageTimestamp);});if(!(sortedRes.length===0&&!selectedRoomInfo)){_context3.next=7;break;}setIsNoRecords(true);if(isInitialLoader){setIsInitialLoader(false);Object(actions[\"a\" /* setLoading */])(false);}return _context3.abrupt(\"return\");case 7:setIsNoRecords(false);if(selectedRoomInfo){ress=Object(toConsumableArray[\"a\" /* default */])(sortedRes);ress.unshift(selectedRoomInfo);}// console.log('ress: ', ress, \"sortedRes\", sortedRes, \"res\", res, \"selectedRoomInfo\", selectedRoomInfo);\nnewRes=Array.isArray(ress)&&selectedRoomInfo?ress:sortedRes;setInBoxData(newRes.length===0?[{firstKey:\"emptyRes\"}]:newRes);if(!(newRes.length>0&&selectedRoomID===\"\")){_context3.next=17;break;}selectedRoomID=newRes[0].roomId;setRoomId(newRes[0].roomId);if(newRes[0]&&((_newRes$=newRes[0])===null||_newRes$===void 0?void 0:_newRes$.unreadMessages)>0){newRes[0].unreadMessages=0;Object(firebase[\"k\" /* resetUnreadCounter */])(newRes[0].roomId);}setRoomData(newRes[0]);return _context3.abrupt(\"return\");case 17:if(newRes.length>0){itemObj=newRes.find(function(x){return x.roomId==selectedRoomID;});if(itemObj&&(itemObj===null||itemObj===void 0?void 0:itemObj.unreadMessages)>0){itemObj.unreadMessages=0;Object(firebase[\"k\" /* resetUnreadCounter */])(itemObj.roomId);}setRoomData(itemObj);}case 18:case\"end\":return _context3.stop();}}},_callee3);}));return function onUpdateofInbox(_x){return _ref4.apply(this,arguments);};}();Object(react[\"useEffect\"])(function(){var unsubscribe=firebase[\"a\" /* auth */].onAuthStateChanged(function(user){if(user){setUser(user);setIsMobInbox(false);}else{setUser(false);setIsMobInbox(true);Object(actions[\"a\" /* setLoading */])(false);setIsInitialLoader(false);}if(initializing){setInitializing(false);}});return unsubscribe;},[initializing]);// console.log(props.history, \"history\", roomId, \"roomId\", roomData, \"roomData\", selectedRoomID, \"selectedRoomID\", inBoxData, 'inBoxData');\nvar getRoomDetails=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(item){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:Object(firebase[\"o\" /* stopListeningOfRoom */])(selectedRoomID);selectedRoomID=item.roomId;setRoomId(item.roomId);setRoomData(item);Object(firebase[\"k\" /* resetUnreadCounter */])(item.roomId);// fetchEquipmentDetail(item.itemId);\ncase 5:case\"end\":return _context4.stop();}}},_callee4);}));return function getRoomDetails(_x2){return _ref5.apply(this,arguments);};}();Object(react[\"useEffect\"])(function(){var _inBoxData$;if(searchQuery){var filteredVal=inBoxData.filter(function(item){var _item$oppUserInfo,_item$oppUserInfo$nam,_item$oppUserInfo$nam2;return(_item$oppUserInfo=item.oppUserInfo)===null||_item$oppUserInfo===void 0?void 0:(_item$oppUserInfo$nam=_item$oppUserInfo.name)===null||_item$oppUserInfo$nam===void 0?void 0:(_item$oppUserInfo$nam2=_item$oppUserInfo$nam.toLowerCase())===null||_item$oppUserInfo$nam2===void 0?void 0:_item$oppUserInfo$nam2.includes(searchQuery.toLowerCase());});setFilterInBoxData(filteredVal);}if((inBoxData.length||((_inBoxData$=inBoxData[0])===null||_inBoxData$===void 0?void 0:_inBoxData$[\"firstKey\"])===\"emptyRes\")&&isInitialLoader){var _inBoxData$2;if(((_inBoxData$2=inBoxData[0])===null||_inBoxData$2===void 0?void 0:_inBoxData$2[\"firstKey\"])===\"emptyRes\")setInBoxData([]);Object(actions[\"a\" /* setLoading */])(false);setIsInitialLoader(false);}},[searchQuery,inBoxData]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"mob_side_nav\",onClick:function onClick(){return setIsMobInbox(true);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:menu_line_blue[\"a\" /* default */],alt:\"mob-side-nav\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"f_row chat_wrapr\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"side_nav_col \".concat(isMobInbox?\"active\":\"\"),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"close_nav\",onClick:function onClick(){return setIsMobInbox(false);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:ic_cancel_blue[\"a\" /* default */],alt:\"close\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"stick\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"title\",style:{marginLeft:\"50px\"},children:\"Chat\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"search_bar \".concat(searchActive?\"active\":\"\"),onClick:function onClick(){setSearchActive(true);},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",placeholder:\"Search\",value:searchQuery,onChange:function onChange(e){return setSearchQuery(e.target.value.trimLeft());}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:search_chat,alt:\"search\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{className:\"chat_list\",children:searchQuery?filterInBoxData.length===0?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})}):filterInBoxData.map(function(item){var _item$oppUserInfo2,_item$oppUserInfo3,_item$lastMsg,_item$lastMsg2,_item$lastMsg3;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{onClick:function onClick(){getRoomDetails(item);},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(selectedRoomID===item.roomId?\"active\":\"\"),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"u_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:((_item$oppUserInfo2=item.oppUserInfo)===null||_item$oppUserInfo2===void 0?void 0:_item$oppUserInfo2.image)||u_placeholder[\"a\" /* default */],alt:\"img\",onError:function onError(e){var _e$target,_e$target2;if(e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.src){e.target.src=u_placeholder[\"a\" /* default */];}}})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"detail\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:(_item$oppUserInfo3=item.oppUserInfo)===null||_item$oppUserInfo3===void 0?void 0:_item$oppUserInfo3.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title job line-1\",children:item.jobName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"commn_para line-1\",children:(_item$lastMsg=item.lastMsg)===null||_item$lastMsg===void 0?void 0:_item$lastMsg.messageText}),((_item$lastMsg2=item.lastMsg)===null||_item$lastMsg2===void 0?void 0:_item$lastMsg2.messageTimestamp)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"date_time\",children:Object(common[\"c\" /* formatDateTime */])((_item$lastMsg3=item.lastMsg)===null||_item$lastMsg3===void 0?void 0:_item$lastMsg3.messageTimestamp,\"inboxTime\")}),selectedRoomID===item.roomId?null:item.unreadMessages===0?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"count\",children:item.unreadMessages})]})]})});}):(inBoxData===null||inBoxData===void 0?void 0:inBoxData.length)>0?inBoxData.map(function(item){var _item$oppUserInfo4,_item$oppUserInfo5,_item$lastMsg4,_item$lastMsg5,_item$lastMsg6,_item$lastMsg7,_item$lastMsg8,_item$lastMsg9;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{onClick:function onClick(){getRoomDetails(item);},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat \".concat(selectedRoomID===item.roomId?\"active\":\"\"),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"u_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:((_item$oppUserInfo4=item.oppUserInfo)===null||_item$oppUserInfo4===void 0?void 0:_item$oppUserInfo4.image)||u_placeholder[\"a\" /* default */],alt:\"img\",onError:function onError(e){var _e$target3,_e$target4;if(e===null||e===void 0?void 0:(_e$target3=e.target)===null||_e$target3===void 0?void 0:_e$target3.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target4=e.target)===null||_e$target4===void 0?void 0:_e$target4.src){e.target.src=u_placeholder[\"a\" /* default */];}}})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"detail\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:(_item$oppUserInfo5=item.oppUserInfo)===null||_item$oppUserInfo5===void 0?void 0:_item$oppUserInfo5.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title job line-1\",children:item.jobName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"commn_para line-1\",children:((_item$lastMsg4=item.lastMsg)===null||_item$lastMsg4===void 0?void 0:_item$lastMsg4.messageType)===\"text\"?(_item$lastMsg5=item.lastMsg)===null||_item$lastMsg5===void 0?void 0:_item$lastMsg5.messageText:((_item$lastMsg6=item.lastMsg)===null||_item$lastMsg6===void 0?void 0:_item$lastMsg6.messageType)===\"image\"?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{color:\"#929292\"},children:\"Photo\"}):((_item$lastMsg7=item.lastMsg)===null||_item$lastMsg7===void 0?void 0:_item$lastMsg7.messageType)===\"video\"?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{color:\"#929292\"},children:\"Video\"}):\"\"}),((_item$lastMsg8=item.lastMsg)===null||_item$lastMsg8===void 0?void 0:_item$lastMsg8.messageTimestamp)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"date_time\",children:Object(common[\"c\" /* formatDateTime */])((_item$lastMsg9=item.lastMsg)===null||_item$lastMsg9===void 0?void 0:_item$lastMsg9.messageTimestamp,\"inboxTime\")}),selectedRoomID===item.roomId?null:item.unreadMessages===0?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"count\",children:item.unreadMessages})]})]})});}):props.isLoading?null:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"javascript:void(0)\",className:\"chat\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"inner_title line-1\",children:\"No Record Found\"})})})})})]})]}),isInitialLoader?null:!isInitialLoader&&(inBoxData===null||inBoxData===void 0?void 0:inBoxData.length)===0?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"detail_col\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"flex_row tradies_row\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"no_record\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figure\",{className:\"no_img\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:no_search_data[\"a\" /* default */],alt:\"data not found\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"No Data Found\"})]})})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(userMessages,{roomId:selectedRoomID,roomData:roomData,isNoRecords:isNoRecords,history:props.history,isLoading:props.isLoading,inBoxData:inBoxData,setInBoxData:setInBoxData})]})]})});};/* harmony default export */ var chat = (chat_Chat);\n// CONCATENATED MODULE: ./src/pages/chat/index.tsx\nvar mapStateToProps=function mapStateToProps(state){return{isLoading:state.common.isLoading,isSkeletonLoading:state.common.isSkeletonLoading};};var chat_mapDispatchToProps=function mapDispatchToProps(dispatch){return Object(redux[\"b\" /* bindActionCreators */])({},dispatch);};var ChatComponent=Object(es[\"b\" /* connect */])(mapStateToProps,chat_mapDispatchToProps)(chat);/* harmony default export */ var pages_chat = __webpack_exports__[\"default\"] = (ChatComponent);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/ic-cancel-blue.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/menu-line-blue.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/not-found.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/search-chat.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/video@3x.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/icon-direction-blue.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/ic-media.png","/home/appinventiv/Documents/Project/tickt/web/node_modules/url-loader/dist/cjs.js??ref--5-oneOf-1!/home/appinventiv/Documents/Project/tickt/web/src/assets/images/ic-send.png","/home/appinventiv/Documents/Project/tickt/web/src/pages/chat/userMessages.tsx","/home/appinventiv/Documents/Project/tickt/web/src/pages/chat/chat.tsx","/home/appinventiv/Documents/Project/tickt/web/src/pages/chat/index.tsx"],"names":["lastDate","docTypes","UserMessages","props","divRref","useRef","useState","storageService","getItem","_id","userId","toggle","setToggle","jobDetailLoader","setJobDetailLoader","currentJobDetails","setCurrentJobDetails","messageText","setMessageText","messages","setMessages","isDocUploading","setIsDocUploading","itemsMedia","setItemsMedia","toggler","setToggler","selectedSlide","setSelectSlide","fsSlideListner","setFsSlideListner","oppUserFcmToken","setOppUserFcmToken","useEffect","roomId","getMessagesOfRoom","onReceiveOfNewMsg","scrollToBottom","current","scroll","scrollHeight","clientHeight","scrollTo","arrmsg","fsSlideObj","mediaMsgs","slideCount","length","filter","item","index","messageType","setInboxToTopWithLastMsg","lastMsg","newInboxData","inBoxData","currentIndex","findIndex","i","splice","unshift","setInBoxData","sendMessage","trimLeft","sendTextMessage","roomData","oppUserInfo","deviceToken","deviceType","hasOwnProperty","isNotification","sendFCMPushNotificationToOppUser","mData","timeStamp","moengage","getCurrentTimeStamp","moE_SendEvent","MoEConstants","CHAT","mixPanel","mixP_SendEvent","handleKeyDown","event","shiftKey","key","preventDefault","sendImageVideoMsg","url","msgType","sendImageVideoMessage","fetchJobDetail","jobId","getJobDetails","res","success","jobInfo","jobDescription","data","details","jobName","amount","locationName","fromDate","toDate","duration","status","renderMediaItems","sources","types","forEach","push","mediaUrl","setResDeviceType","msg","Number","app_icon","title","notificationText","userName","senderName","room_id","messageRoomId","image","user_image","notificationType","sound","body","sender","first_name","device_token","user_id","device_type","split","badge","notification_type","messageId","notification","newData","to","headers_","Authorization","Constants","FcmHeaderAuthorizationKey","fetch","method","headers","JSON","stringify","response","console","log","handleUpload","e","maxFileSize","formData","FormData","newFile","target","files","fileType","type","toLowerCase","selectedFileSize","size","includes","indexOf","setShowToast","append","check_type","onFileUpload","imgUrl","renderTextMsg","curDate","formatDateTime","messageTimestamp","messageClass","senderId","renderImageMsg","notFound","onerror","src","prev","renderVideoMsg","chatVideoIcon","displayMessages","isNoRecords","dummy","history","name","viewMore","map","isBlock","color","sendMedia","value","sendBtn","loader","close","renderTime","urlEncode","selectedRoomID","isFreshChatRoute","Chat","initializing","setInitializing","auth","currentUser","user","setUser","filterInBoxData","setFilterInBoxData","setIsNoRecords","setRoomData","setRoomId","searchQuery","setSearchQuery","searchActive","setSearchActive","isInitialLoader","setIsInitialLoader","isMobInbox","setIsMobInbox","location","state","tradieId","builderId","setLoading","setInitialItems","getFirebaseInboxData","onUpdateofInbox","stopListeningOfRoom","roomID","checkRoomExist","createRoom","selectedRoomInfo","sortedRes","sort","x","y","ress","newRes","Array","isArray","firstKey","unreadMessages","resetUnreadCounter","itemObj","find","unsubscribe","onAuthStateChanged","getRoomDetails","filteredVal","menu","marginLeft","chatSearch","isLoading","noData","mapStateToProps","common","isSkeletonLoading","mapDispatchToProps","dispatch","bindActionCreators","ChatComponent","connect"],"mappings":";;;;;;AAAe,yEAAgB,gmB;;;;;;;;ACAhB,yEAAgB,gN;;;;;;;;ACAhB,8EAAuB,wCAAwC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA/D,gEAAgB,owB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhB,6DAAgB,oyB;;ACAhB,wEAAgB,gW;;ACAhB,6DAAgB,osB;;ACAhB,4DAAgB,gc;;;;;;;;;;;;;;;;;;;;;ACwB/B;AAQA,GAAIA,SAAQ,CAAG,EAAf,CACA,GAAMC,SAAoB,CAAG,CAAC,MAAD,CAAS,KAAT,CAAgB,KAAhB,CAAuB,KAAvB,CAA8B,KAA9B,CAAqC,KAArC,CAA7B,CAEA,GAAMC,0BAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAgB,2LACnC,GAAMC,QAAO,CAAGC,uBAAM,CAAiB,IAAjB,CAAtB,CACA,cAAiBC,yBAAQ,wBAASC,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAT,gDAAS,sBAAoCC,GAA7C,CAAzB,kEAAOC,MAAP,eACA,eAA4BJ,yBAAQ,CAAU,KAAV,CAApC,mEAAOK,MAAP,eAAeC,SAAf,eACA,eAA8CN,yBAAQ,CAAU,KAAV,CAAtD,mEAAOO,eAAP,eAAwBC,kBAAxB,eACA,eAAkDR,yBAAQ,CAAM,IAAN,CAA1D,mEAAOS,iBAAP,eAA0BC,oBAA1B,eACA,eAAsCV,yBAAQ,CAAM,EAAN,CAA9C,oEAAOW,WAAP,gBAAoBC,cAApB,gBACA,gBAAgCZ,yBAAQ,CAAa,EAAb,CAAxC,qEAAOa,QAAP,gBAAiBC,WAAjB,gBACA,gBAA4Cd,yBAAQ,CAAU,KAAV,CAApD,qEAAOe,cAAP,gBAAuBC,iBAAvB,gBAEA,gBAAoChB,yBAAQ,CAAC,EAAD,CAA5C,qEAAOiB,UAAP,gBAAmBC,aAAnB,gBACA,gBAA8BlB,yBAAQ,CAAC,KAAD,CAAtC,qEAAOmB,OAAP,gBAAgBC,UAAhB,gBACA,gBAAwCpB,yBAAQ,CAAM,CAAN,CAAhD,qEAAOqB,aAAP,gBAAsBC,cAAtB,gBACA,gBAA4CtB,yBAAQ,CAAM,EAAN,CAApD,qEAAOuB,cAAP,gBAAuBC,iBAAvB,gBACA,gBAA8CxB,yBAAQ,CAAM,EAAN,CAAtD,qEAAOyB,eAAP,gBAAwBC,kBAAxB,gBAEAC,0BAAS,CAAC,UAAM,CACd,GAAI9B,KAAK,CAAC+B,MAAN,GAAiB,EAArB,CAAyB,CACvBlC,QAAQ,CAAG,EAAX,CACAmC,6CAAiB,CAAChC,KAAK,CAAC+B,MAAP,CAAeE,iBAAf,CAAjB,CACAR,cAAc,CAAC,CAAD,CAAd,CACAE,iBAAiB,CAAC,EAAD,CAAjB,CACAN,aAAa,CAAC,EAAD,CAAb,CACAR,oBAAoB,CAAC,IAAD,CAApB,CACAJ,SAAS,CAAC,KAAD,CAAT,CACD,CACF,CAVQ,CAUN,CAACT,KAAK,CAAC+B,MAAP,CAVM,CAAT,CAWA;AACA;AAEAD,0BAAS,CAAC,UAAM,CACdI,cAAc,GACf,CAFQ,CAAT,CAIA,GAAMA,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAC3B,GAAI,QAASjC,OAAT,SAASA,OAAT,iBAASA,OAAO,CAAEkC,OAAlB,CAAJ,CAA+B,CAC7B,GAAMC,OAAM,CACVnC,OAAO,CAACkC,OAAR,CAAgBE,YAAhB,CAA+BpC,OAAO,CAACkC,OAAR,CAAgBG,YADjD,CAEA;AACArC,OAAO,CAACkC,OAAR,CAAgBI,QAAhB,CAAyB,CAAzB,CAA4BH,MAA5B,EACD,CACF,CAPD,CASA,GAAMH,kBAAiB,CAAG,QAApBA,kBAAoB,CAACO,MAAD,CAAiB,CACzC;AACAvB,WAAW,CAACuB,MAAD,CAAX,CACD,CAHD,CAKAV,0BAAS,CAAC,UAAM,CACd,GAAIW,WAAe,CAAG,EAAtB,CACA,GAAIC,UAAc,CAAG,EAArB,CACA,GAAIC,WAAU,CAAG,CAAjB,CACA,GAAI3B,QAAQ,CAAC4B,MAAb,CAAqB,CACnBF,SAAS,CAAG1B,QAAQ,CAAC6B,MAAT,CAAgB,SAACC,IAAD,CAAYC,KAAZ,CAA8B,CACxD,GAAID,IAAI,CAACE,WAAL,GAAqB,OAArB,EAAgCF,IAAI,CAACE,WAAL,GAAqB,OAAzD,CAAkE,CAChEP,UAAU,WAAIM,KAAJ,EAAV,CAAyBJ,UAAU,EAAnC,CACA,MAAOG,KAAP,CACD,CACF,CALW,CAAZ,CAMAzB,aAAa,CAACqB,SAAD,CAAb,CACAf,iBAAiB,CAACc,UAAD,CAAjB,CACD,CACF,CAdQ,CAcN,CAACzB,QAAD,CAdM,CAAT,CAeA;AAEA,GAAMiC,yBAAwB,CAAG,QAA3BA,yBAA2B,CAACC,OAAD,CAAkB,CACjD,GAAMC,aAAY,8CAAOnD,KAAK,CAACoD,SAAb,CAAlB,CACA,GAAMC,aAAY,CAAGF,YAAY,CAACG,SAAb,CACnB,SAACC,CAAD,QAAOA,EAAC,CAACxB,MAAF,GAAa/B,KAAK,CAAC+B,MAA1B,EADmB,CAArB,CAGAoB,YAAY,CAACE,YAAD,CAAZ,CAA2BH,OAA3B,CAAqCA,OAArC,CACAC,YAAY,CAACK,MAAb,CAAoBH,YAApB,CAAkC,CAAlC,EACAF,YAAY,CAACM,OAAb,CAAqBzD,KAAK,CAACoD,SAAN,CAAgBC,YAAhB,CAArB,EACArD,KAAK,CAAC0D,YAAN,CAAmBP,YAAnB,EACA;AACA;AACA;AACD,CAZD,CAcA,GAAMQ,YAAW,sHAAG,uTAEd7C,WAAW,EAAIA,WAAW,CAAC8C,QAAZ,KAA2B,EAF5B,0BAGhB7C,cAAc,CAAC,EAAD,CAAd,CAHgB,sBAIW8C,4CAAe,CAAC7D,KAAK,CAAC+B,MAAP,CAAejB,WAAf,CAJ1B,QAIVoC,OAJU,eAKhB,GACEA,OAAO,oBACPlD,KAAK,CAAC8D,QADC,iEACP,gBAAgBC,WADT,gDACP,sBAA6BC,WADtB,CAAP,qBAEAhE,KAAK,CAAC8D,QAFN,kEAEA,iBAAgBC,WAFhB,gDAEA,sBAA6BE,UAF7B,IAGC,mBAAAjE,KAAK,CAAC8D,QAAN,mFAAgBC,WAAhB,sEAA6BG,cAA7B,CAA4C,gBAA5C,qBACGlE,KAAK,CAAC8D,QADT,kEACG,iBAAgBC,WADnB,gDACG,sBAA6BI,cADhC,CAEG,IALJ,CADF,CAOE,CACAC,gCAAgC,CAAClB,OAAD,CAAhC,CACMmB,KAFN,CAEc,CACZC,SAAS,CAAEC,kCAAQ,CAACC,mBAAT,EADC,CAFd,CAKAD,kCAAQ,CAACE,aAAT,CAAuBC,iCAAY,CAACC,IAApC,CAA0CN,KAA1C,EACAO,kCAAQ,CAACC,cAAT,CAAwBH,iCAAY,CAACC,IAArC,CAA2CN,KAA3C,EACD,CACDpB,wBAAwB,CAACC,OAAD,CAAxB,CApBgB,sDAAH,kBAAXS,YAAW,0CAAjB,CAwBA,GAAMmB,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAgB,CACpC,GAAI,CAACA,KAAK,CAACC,QAAP,EAAmBD,KAAK,CAACE,GAAN,GAAc,OAArC,CAA8C,CAC5CF,KAAK,CAACG,cAAN,GACAvB,WAAW,GACX5C,cAAc,CAAC,EAAD,CAAd,CACD,CACF,CAND,CAQA,GAAMoE,kBAAiB,uHAAG,kBAAOC,GAAP,CAAoBC,OAApB,qSAEpBD,GAAG,EAAIA,GAAG,GAAK,EAFK,kDAGKE,kDAAqB,CAC9CtF,KAAK,CAAC+B,MADwC,CAE9CqD,GAF8C,CAG9CC,OAH8C,CAH1B,QAGhBnC,OAHgB,gBAQtB,GACEA,OAAO,qBACPlD,KAAK,CAAC8D,QADC,kEACP,iBAAgBC,WADT,gDACP,sBAA6BC,WADtB,CAAP,qBAEAhE,KAAK,CAAC8D,QAFN,kEAEA,iBAAgBC,WAFhB,gDAEA,sBAA6BE,UAF7B,IAGC,mBAAAjE,KAAK,CAAC8D,QAAN,mFAAgBC,WAAhB,sEAA6BG,cAA7B,CAA4C,gBAA5C,qBACGlE,KAAK,CAAC8D,QADT,kEACG,iBAAgBC,WADnB,gDACG,sBAA6BI,cADhC,CAEG,IALJ,CADF,CAOE,CACAC,gCAAgC,CAAClB,OAAD,CAAhC,CACD,CACDD,wBAAwB,CAACC,OAAD,CAAxB,CAlBsB,OAoBxBnC,cAAc,CAAC,EAAD,CAAd,CApBwB,wDAAH,kBAAjBoE,kBAAiB,iDAAvB,CAuBA,GAAMI,eAAc,uHAAG,kBAAOC,KAAP,0OACrB7E,kBAAkB,CAAC,IAAD,CAAlB,CADqB,uBAEH8E,8CAAa,CAACD,KAAD,CAFV,QAEfE,GAFe,gBAGrB,GAAIA,GAAG,CAACC,OAAR,CAAiB,CACTC,OADS,CACC,CACdC,cAAc,CAAE,YAAAH,GAAG,CAACI,IAAJ,8CAAUC,OAAV,GAAqB,EADvB,CAEdP,KAAK,CAAE,aAAAE,GAAG,CAACI,IAAJ,gDAAUN,KAAV,GAAmB,EAFZ,CAGdQ,OAAO,CAAE,aAAAN,GAAG,CAACI,IAAJ,gDAAUE,OAAV,GAAqB,EAHhB,CAIdC,MAAM,CAAE,aAAAP,GAAG,CAACI,IAAJ,gDAAUG,MAAV,GAAoB,EAJd,CAKdC,YAAY,CAAE,aAAAR,GAAG,CAACI,IAAJ,gDAAUI,YAAV,GAA0B,EAL1B,CAMdC,QAAQ,CAAE,aAAAT,GAAG,CAACI,IAAJ,gDAAUK,QAAV,GAAsB,EANlB,CAOdC,MAAM,CAAE,aAAAV,GAAG,CAACI,IAAJ,gDAAUM,MAAV,GAAoB,EAPd,CAQdC,QAAQ,CAAE,aAAAX,GAAG,CAACI,IAAJ,gDAAUO,QAAV,GAAsB,EARlB,CASdC,MAAM,CAAE,aAAAZ,GAAG,CAACI,IAAJ,gDAAUQ,MAAV,GAAoB,EATd,CADD,CAYfzF,oBAAoB,CAAC+E,OAAD,CAApB,CACAjF,kBAAkB,CAAC,KAAD,CAAlB,CACD,CAjBoB,wDAAH,kBAAd4E,eAAc,8CAApB,CAoBA,GAAMgB,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACnF,UAAD,CAAqB,CAC5C,GAAIoF,QAAY,CAAG,EAAnB,CACA,GAAIC,MAAU,CAAG,EAAjB,CAEA,GAAIrF,UAAU,CAACwB,MAAf,CAAuB,CACrBxB,UAAU,CAACsF,OAAX,CAAmB,SAAC5D,IAAD,CAAe,CAChC,GAAIA,IAAI,CAACE,WAAL,GAAqB,OAAzB,CAAkC,CAChCwD,OAAO,CAACG,IAAR,CAAa7D,IAAI,CAAC8D,QAAlB,EACAH,KAAK,CAACE,IAAN,CAAW,OAAX,EACD,CACD,GAAI7D,IAAI,CAACE,WAAL,GAAqB,OAAzB,CAAkC,CAChCwD,OAAO,CAACG,IAAR,CAAa7D,IAAI,CAAC8D,QAAlB,EACAH,KAAK,CAACE,IAAN,CAAW,OAAX,EACD,CACF,CATD,EAUD,CAED,MAAO,CAAEH,OAAO,CAAPA,OAAF,CAAWC,KAAK,CAALA,KAAX,CAAP,CACD,CAlBD,CAoBA,GAAMI,iBAAgB,CAAG,QAAnBA,iBAAmB,CAAC5C,UAAD,CAAqB6C,GAArB,CAAkC,mWACzD,OAAQC,MAAM,CAAC9C,UAAD,CAAd,EACE,IAAK,EAAL,CACE,MAAO,CACL+C,QAAQ,CACN,kFAFG,CAGLC,KAAK,CAAE,WAHF,CAILC,gBAAgB,mCACd9G,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CADc,iDACd,uBAAoC8G,QADtB,uBAJX,CAOLC,UAAU,mCAAKhH,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAL,iDAAK,uBAAoC8G,QAAzC,CAPL,CAQLnE,WAAW,WAAK8D,GAAL,SAAKA,GAAL,iBAAKA,GAAG,CAAE9D,WAAV,CARN,CASLlC,WAAW,WAAK,CAAAgG,GAAG,OAAH,EAAAA,GAAG,SAAH,QAAAA,GAAG,CAAE9D,WAAL,IAAqB,MAArB,CAA8B8D,GAA9B,SAA8BA,GAA9B,iBAA8BA,GAAG,CAAEhG,WAAnC,CAAiD,EAAtD,CATN,CAULuG,OAAO,CAAEP,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEQ,aAVT,CAWLC,KAAK,yBAAEnH,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,iDAAE,uBAAoCmH,UAXtC,CAYLC,gBAAgB,CAAE,EAZb,CAaLC,KAAK,CAAE,SAbF,CAAP,CAeF,IAAK,EAAL,CACE,MAAO,CACLC,IAAI,CAAEb,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEhG,WADN,CAELA,WAAW,CAAEgG,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEhG,WAFb,CAGL8G,MAAM,CAAE,CACNC,UAAU,yBAAEzH,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,iDAAE,uBAAoC8G,QAD1C,CAENW,YAAY,CAAE1H,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAFR,CAGN0H,OAAO,yBAAE3H,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,iDAAE,uBAAoCC,GAHvC,CAIN0H,WAAW,CAAE,CAJP,CAHH,CASLxC,KAAK,CAAEsB,GAAF,SAAEA,GAAF,qCAAEA,GAAG,CAAEQ,aAAP,oEAAE,mBAAoBW,KAApB,CAA0B,GAA1B,CAAF,gDAAE,sBAAiC,CAAjC,CATF,CAULC,KAAK,CAAE,CAVF,CAWLF,WAAW,CAAE,CAXR,CAYLf,KAAK,yBAAE7G,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,iDAAE,uBAAoC8G,QAZtC,CAaLnB,OAAO,mBAAEhG,KAAK,CAAC8D,QAAR,2CAAE,iBAAgBkC,OAbpB,CAcLmC,iBAAiB,CAAE,EAdd,CAeLT,KAAK,CAAE,SAfF,CAgBLU,SAAS,CAAEtB,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEsB,SAhBX,CAAP,CAkBF,IAAK,EAAL,CACE,MAAO,CACLC,YAAY,CAAE,CACZV,IAAI,CAAEb,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEhG,WADC,CAEZmG,KAAK,yBAAE7G,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,iDAAE,uBAAoC8G,QAF/B,CADT,CAKLrB,IAAI,CAAE,CACJ6B,IAAI,CAAEb,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEhG,WADP,CAEJA,WAAW,CAAEgG,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEhG,WAFd,CAGJ8G,MAAM,CAAE,CACNC,UAAU,yBAAEzH,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,iDAAE,uBAAoC8G,QAD1C,CAENW,YAAY,CAAE1H,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAFR,CAGN0H,OAAO,0BAAE3H,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,kDAAE,wBAAoCC,GAHvC,CAIN0H,WAAW,CAAE,CAJP,CAHJ,CASJxC,KAAK,CAAEsB,GAAF,SAAEA,GAAF,sCAAEA,GAAG,CAAEQ,aAAP,qEAAE,oBAAoBW,KAApB,CAA0B,GAA1B,CAAF,gDAAE,sBAAiC,CAAjC,CATH,CAUJC,KAAK,CAAE,CAVH,CAWJF,WAAW,CAAE,CAXT,CAYJf,KAAK,0BAAE7G,iCAAc,CAACC,OAAf,CAAuB,UAAvB,CAAF,kDAAE,wBAAoC8G,QAZvC,CAaJnB,OAAO,oBAAEhG,KAAK,CAAC8D,QAAR,4CAAE,kBAAgBkC,OAbrB,CAcJmC,iBAAiB,CAAE,EAdf,CAeJT,KAAK,CAAE,SAfH,CAgBJU,SAAS,CAAEtB,GAAF,SAAEA,GAAF,iBAAEA,GAAG,CAAEsB,SAhBZ,CALD,CAAP,CAwBF,QACE,OA9DJ,CAgED,CAjED,CAkEA,GAAMhE,iCAAgC,uHAAG,kBAAO0C,GAAP,uWACnChB,IADmC,CAC5Be,gBAAgB,oBAAC7G,KAAK,CAAC8D,QAAP,mEAAC,kBAAgBC,WAAjB,gDAAC,sBAA6BE,UAA9B,CAA0C6C,GAA1C,CADY,CAEnCwB,OAFmC,6HAGrCC,EAAE,8BAAKvI,KAAK,CAAC8D,QAAX,mEAAK,kBAAgBC,WAArB,gDAAK,sBAA6BC,WAAlC,CAHmC,EAIjC,oBAAAhE,KAAK,CAAC8D,QAAN,qFAAgBC,WAAhB,sEAA6BE,UAA7B,GAA2C,CAA3C,EAAgD,CAAE6B,IAAI,CAAEA,IAAR,CAJf,EAKjC,oBAAA9F,KAAK,CAAC8D,QAAN,qFAAgBC,WAAhB,sEAA6BE,UAA7B,GAA2C,CAA3C,EAAgD,CAClDoE,YAAY,CAAEvC,IADoC,CALf,EAQjC,oBAAA9F,KAAK,CAAC8D,QAAN,qFAAgBC,WAAhB,sEAA6BE,UAA7B,GAA2C,CAA3C,EAAgD,CAClDoE,YAAY,CAAEvC,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEuC,YAD8B,CAElDvC,IAAI,CAAEA,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEA,IAFsC,CARf,EAcjC0C,QAdiC,CAcf,CACtB,eAAgB,kBADM,CAEtBC,aAAa,CAAEC,4BAAS,CAACC,yBAFH,CAde,wBAkBXC,MAAK,uCAAwC,CACvEC,MAAM,CAAE,MAD+D,CAEvEC,OAAO,CAAEN,QAF8D,CAGvEb,IAAI,CAAEoB,IAAI,CAACC,SAAL,CAAeV,OAAf,CAHiE,CAAxC,CAlBM,QAkBjCW,QAlBiC,gBAuBvC;AACA,GAAIA,QAAQ,CAAC3C,MAAT,GAAoB,GAAxB,CAA6B,CAC3B4C,OAAO,CAACC,GAAR,CAAY,uDAAZ,EACD,CAFD,IAEO,CACLD,OAAO,CAACC,GAAR,CAAY,uDAAZ,EACD,CA5BsC,wDAAH,kBAAhC/E,iCAAgC,8CAAtC,CA+BA,GAAMgF,aAAY,uHAAG,kBAAOC,CAAP,yOACfC,WADe,CACO,EADP,CAEbC,QAFa,CAEF,GAAIC,SAAJ,EAFE,CAGbC,OAHa,CAGHJ,CAAC,CAACK,MAAF,CAASC,KAAT,CAAe,CAAf,CAHG,CAIfC,QAJe,CAIJH,OAJI,SAIJA,OAJI,gCAIJA,OAAO,CAAEI,IAJL,8DAIJ,cAAe5B,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAJI,+CAIJ,qBAA8B6B,WAA9B,EAJI,CAMfC,gBANe,CAMI,CAAAN,OAAO,OAAP,EAAAA,OAAO,SAAP,QAAAA,OAAO,CAAEO,IAAT,EAAgB,IAAhB,CAAuB,IAN3B,CAMiC;AACpD,GAAI,CAAC,KAAD,CAAQ,KAAR,CAAe,KAAf,EAAsBC,QAAtB,CAA+BL,QAA/B,CAAJ,CAA8C,CAC5CN,WAAW,CAAG,EAAd,CACD,CATkB,KAUfxJ,QAAQ,CAACoK,OAAT,CAAiBN,QAAjB,EAA6B,CAA7B,EAAkCG,gBAAgB,CAAGT,WAVtC,2BAWjBa,uCAAY,CAAC,IAAD,CAAO,2CAAP,CAAZ,CAXiB,yCAenBZ,QAAQ,CAACa,MAAT,CAAgB,MAAhB,CAAwBX,OAAxB,EACAtI,iBAAiB,CAAC,IAAD,CAAjB,CACIkJ,UAjBe,CAiBG,CAAC,MAAD,CAAS,KAAT,CAAgB,KAAhB,EAAuBJ,QAAvB,CAAgCL,QAAhC,EAClB,CADkB,CAElB,CAAC,KAAD,CAAQ,KAAR,CAAe,KAAf,EAAsBK,QAAtB,CAA+BL,QAA/B,EACA,CADA,CAEA,IArBe,yBAsBDU,6CAAY,CAACf,QAAD,CAtBX,SAsBb7D,GAtBa,gBAuBnB,GAAIA,GAAG,CAACC,OAAJ,EAAeD,GAAG,CAAC6E,MAAvB,CAA+B,CAC7B,GAAIF,UAAU,GAAK,CAAnB,CAAsB,CACpBlF,iBAAiB,CAACO,GAAG,CAAC6E,MAAL,CAAa,OAAb,CAAjB,CACD,CAFD,IAEO,IAAIF,UAAU,GAAK,CAAnB,CAAsB,CAC3BlF,iBAAiB,CAACO,GAAG,CAAC6E,MAAL,CAAa,OAAb,CAAjB,CACD,CAFM,IAEA,CACLJ,uCAAY,CAAC,IAAD,CAAO,+BAAP,CAAZ,CACD,CACDhJ,iBAAiB,CAAC,KAAD,CAAjB,CACA;AACD,CAjCkB,yDAAH,kBAAZiI,aAAY,8CAAlB,CAoCA,GAAMoB,cAAa,CAAG,QAAhBA,cAAgB,CAAC1D,GAAD,CAAc,CAClC,GAAI2D,QAAO,CAAGC,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,KAAvB,CAA5B,CACA,GAAMC,aAAY,CAChB9D,GAAG,CAAC+D,QAAJ,GAAiBtK,MAAjB,CAA0B,SAA1B,CAAsC,oBADxC,CAEA,GAAIV,QAAQ,GAAK,EAAb,EAAmBA,QAAQ,GAAK4K,OAApC,CAA6C,CAC3C5K,QAAQ,CAAG4K,OAAX,CACA,mBACE,4EACE,kCAAK,SAAS,CAAC,WAAf,uBACE,4CAAOA,OAAP,EADF,EADF,cAIE,kCAAK,SAAS,WAAKG,YAAL,CAAd,uBACE,iCAAG,SAAS,WAAK9D,GAAG,CAAC+D,QAAJ,GAAiBtK,MAAjB,CAA0B,MAA1B,CAAmC,EAAxC,CAAZ,WACGuG,GAAG,CAAChG,WADP,cAEE,mCAAM,SAAS,CAAC,MAAhB,UACG4J,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,MAAvB,CADjB,EAFF,GADF,EAJF,GADF,CAeD,CAjBD,IAkBE,oBACE,kCAAK,SAAS,WAAKC,YAAL,CAAd,uBACE,iCAAG,SAAS,WAAK9D,GAAG,CAAC+D,QAAJ,GAAiBtK,MAAjB,CAA0B,MAA1B,CAAmC,EAAxC,CAAZ,WACGuG,GAAG,CAAChG,WADP,cAEE,mCAAM,SAAS,CAAC,MAAhB,UACG4J,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,MAAvB,CADjB,EAFF,GADF,EADF,CAUH,CAhCD,CAkCA,GAAMG,eAAc,CAAG,QAAjBA,eAAiB,CAAChE,GAAD,CAAW/D,KAAX,CAA6B,CAClD,GAAI0H,QAAO,CAAGC,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,KAAvB,CAA5B,CACA,GAAMC,aAAY,CAChB9D,GAAG,CAAC+D,QAAJ,GAAiBtK,MAAjB,CAA0B,SAA1B,CAAsC,oBADxC,CAEA,GAAIV,QAAQ,GAAK,EAAb,EAAmBA,QAAQ,GAAK4K,OAApC,CAA6C,CAC3C5K,QAAQ,CAAG4K,OAAX,CACA,mBACE,4EACE,kCAAK,SAAS,CAAC,WAAf,uBACE,4CAAOA,OAAP,EADF,EADF,cAIE,kCAAK,SAAS,WAAKG,YAAL,CAAd,uBACE,sCAAQ,SAAS,CAAC,OAAlB,wBACE,kCACE,GAAG,CAAE9D,GAAG,CAACF,QAAJ,EAAgBmE,4BADvB,CAEE,GAAG,CAAC,OAFN,CAGE,YAAWjE,GAAG,CAACF,QAAJ,EAAgBmE,4BAH7B,CAIE,QAAQ,CAAC,OAJX,CAKE,OAAO,CAAC,MALV,CAME,OAAO,CAAE,iBAAC1B,CAAD,CAAY,0BACnB,GAAIA,CAAJ,SAAIA,CAAJ,4BAAIA,CAAC,CAAEK,MAAP,oCAAI,UAAWsB,OAAf,CAAwB,CACtB3B,CAAC,CAACK,MAAF,CAASsB,OAAT,CAAmB,IAAnB,CACD,CACD,GAAI3B,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWuB,GAAf,CAAoB,CAClB5B,CAAC,CAACK,MAAF,CAASuB,GAAT,CAAeF,4BAAf,CACD,CACF,CAbH,CAcE,OAAO,CAAE,kBAAM,CACbxJ,UAAU,CAAC,SAAC2J,IAAD,QAAe,CAACA,IAAhB,EAAD,CAAV,CACAzJ,cAAc,CAACC,cAAc,WAAIqB,KAAJ,EAAf,CAAd,CACD,CAjBH,EADF,cAoBE,mCAAM,SAAS,CAAC,MAAhB,UACG2H,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,MAAvB,CADjB,EApBF,GADF,EAJF,GADF,CAiCD,CAnCD,IAoCE,oBACE,kCAAK,SAAS,WAAKC,YAAL,CAAd,uBACE,sCAAQ,SAAS,CAAC,OAAlB,wBACE,kCACE,GAAG,CAAE9D,GAAG,CAACF,QAAJ,EAAgBmE,4BADvB,CAEE,GAAG,CAAC,OAFN,CAGE,YAAWjE,GAAG,CAACF,QAAJ,EAAgBmE,4BAH7B,CAIE,QAAQ,CAAC,OAJX,CAKE,OAAO,CAAC,MALV,CAME,OAAO,CAAE,iBAAC1B,CAAD,CAAY,2BACnB,GAAIA,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWsB,OAAf,CAAwB,CACtB3B,CAAC,CAACK,MAAF,CAASsB,OAAT,CAAmB,IAAnB,CACD,CACD,GAAI3B,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWuB,GAAf,CAAoB,CAClB5B,CAAC,CAACK,MAAF,CAASuB,GAAT,CAAeF,4BAAf,CACD,CACF,CAbH,CAcE,OAAO,CAAE,kBAAM,CACbxJ,UAAU,CAAC,SAAC2J,IAAD,QAAe,CAACA,IAAhB,EAAD,CAAV,CACAzJ,cAAc,CAACC,cAAc,WAAIqB,KAAJ,EAAf,CAAd,CACD,CAjBH,EADF,cAoBE,mCAAM,SAAS,CAAC,MAAhB,UACG2H,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,MAAvB,CADjB,EApBF,GADF,EADF,CA4BH,CApED,CAsEA,GAAMQ,eAAc,CAAG,QAAjBA,eAAiB,CAACrE,GAAD,CAAW/D,KAAX,CAA6B,CAClD,GAAI0H,QAAO,CAAGC,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,KAAvB,CAA5B,CACA,GAAMC,aAAY,CAChB9D,GAAG,CAAC+D,QAAJ,GAAiBtK,MAAjB,CAA0B,SAA1B,CAAsC,oBADxC,CAEA,GAAIV,QAAQ,GAAK,EAAb,EAAmBA,QAAQ,GAAK4K,OAApC,CAA6C,CAC3C5K,QAAQ,CAAG4K,OAAX,CACA,mBACE,4EACE,kCAAK,SAAS,CAAC,WAAf,uBACE,4CAAOA,OAAP,EADF,EADF,cAIE,kCAAK,SAAS,WAAKG,YAAL,CAAd,uBACE,sCAAQ,SAAS,CAAC,oBAAlB,wBACE,oCACE,GAAG,CAAE9D,GAAG,CAACF,QAAJ,EAAgBmE,4BADvB,CAEE,MAAM,CAAEK,QAFV,CAGE,OAAO,CAAE,kBAAM,CACb7J,UAAU,CAAC,SAAC2J,IAAD,QAAe,CAACA,IAAhB,EAAD,CAAV,CACAzJ,cAAc,CAACC,cAAc,WAAIqB,KAAJ,EAAf,CAAd,CACD,CANH,EADF,cASE,mCAAM,SAAS,CAAC,MAAhB,UACG2H,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,MAAvB,CADjB,EATF,GADF,EAJF,GADF,CAsBD,CAxBD,IAyBE,oBACE,kCAAK,SAAS,WAAKC,YAAL,CAAd,uBACE,sCAAQ,SAAS,CAAC,oBAAlB,wBACE,oCACE,GAAG,CAAE9D,GAAG,CAACF,QAAJ,EAAgBmE,4BADvB,CAEE,MAAM,CAAEK,QAFV,CAGE,OAAO,CAAE,kBAAM,CACb7J,UAAU,CAAC,SAAC2J,IAAD,QAAe,CAACA,IAAhB,EAAD,CAAV,CACAzJ,cAAc,CAACC,cAAc,WAAIqB,KAAJ,EAAf,CAAd,CACD,CANH,EADF,cASE,mCAAM,SAAS,CAAC,MAAhB,UACG2H,wCAAc,CAAC5D,GAAG,CAAC6D,gBAAL,CAAuB,MAAvB,CADjB,EATF,GADF,EADF,CAiBH,CA9CD,CAgDA,GAAMU,gBAAe,CAAG,QAAlBA,gBAAkB,CAACvE,GAAD,CAAW/D,KAAX,CAA6B,CACnD,GAAIA,KAAK,GAAK,CAAd,CAAiBlD,QAAQ,CAAG,EAAX,CACjB,OAAQiH,GAAG,CAAC9D,WAAZ,EACE,IAAK,MAAL,CACE,MAAOwH,cAAa,CAAC1D,GAAD,CAApB,CACF,IAAK,OAAL,CACE,MAAOgE,eAAc,CAAChE,GAAD,CAAM/D,KAAN,CAArB,CACF,IAAK,OAAL,CACE,MAAOoI,eAAc,CAACrE,GAAD,CAAM/D,KAAN,CAArB,CANJ,CAQD,CAVD,CAYA,sBAA2BwD,gBAAgB,CAACnF,UAAD,CAA3C,CAAQoF,OAAR,mBAAQA,OAAR,CAAiBC,KAAjB,mBAAiBA,KAAjB,CAEA,MAAOzG,MAAK,CAACsL,WAAN,cACL,kCAAK,SAAS,CAAC,YAAf,uBACE,kCAAK,SAAS,CAAC,UAAf,uBAEE,oCAFF,EADF,EADK,cAQL,4EACE,2BAAC,0BAAD,EACE,OAAO,CAAEhK,OADX,CAEE,KAAK,CAAEE,aAFT,CAGE,OAAO,CAAEgF,OAHX,CAIE,KAAK,CAAEC,KAJT,CAME;AACA,OAAO,CAAE,kBAAM,CACbhF,cAAc,CAAC,CAAD,CAAd,CACD,CATH,EAKO+E,OALP,SAKOA,OALP,iBAKOA,OAAO,CAAE5D,MALhB,CADF,cAYE,kCAAK,SAAS,CAAC,YAAf,uBACE,mCAAK,SAAS,CAAC,UAAf,wBACE,mCAAK,SAAS,oBAAcpC,MAAM,CAAG,QAAH,CAAc,EAAlC,CAAd,wBACE,mCAAK,SAAS,CAAC,WAAf,wBACE,qCAAQ,SAAS,CAAC,OAAlB,uBACE,kCACE,GAAG,CAAE,oBAAAR,KAAK,CAAC8D,QAAN,qFAAgBC,WAAhB,sEAA6BwD,KAA7B,GAAsCgE,gCAD7C,CAEE,GAAG,CAAC,UAFN,CAGE,OAAO,CAAE,iBAAClC,CAAD,CAAY,2BACnB,GAAIA,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWsB,OAAf,CAAwB,CACtB3B,CAAC,CAACK,MAAF,CAASsB,OAAT,CAAmB,IAAnB,CACD,CACD,GAAI3B,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWuB,GAAf,CAAoB,CAClB5B,CAAC,CAACK,MAAF,CAASuB,GAAT,CAAeM,gCAAf,CACD,CACF,CAVH,EADF,EADF,cAeE,mCACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE,kBAAM,CACb,GAAInL,iCAAc,CAACC,OAAf,CAAuB,UAAvB,IAAuC,CAA3C,CAA8C,6CAC5CL,KAAK,CAACwL,OAAN,CAAc7E,IAAd,mDAC0B3G,KAAK,CAAC8D,QADhC,mEAC0B,kBAAgBC,WAD1C,gDAC0B,sBAA6BxD,MADvD,sBAGD,CAJD,IAIO,6CACLP,KAAK,CAACwL,OAAN,CAAc7E,IAAd,sDAC6B3G,KAAK,CAAC8D,QADnC,mEAC6B,kBAAgBC,WAD7C,gDAC6B,sBAA6BxD,MAD1D,GAGD,CACF,CAZH,6BAcGP,KAAK,CAAC8D,QAdT,mEAcG,kBAAgBC,WAdnB,gDAcG,sBAA6B0H,IAdhC,EAfF,CA+BG,CAACjL,MAAD,eACC,oCACE,OAAO,CAAE,kBAAM,uBACbC,SAAS,CAAC,IAAD,CAAT,CACA,GAAIG,iBAAJ,CAAuB,OACvB2E,cAAc,oBAACvF,KAAK,CAAC8D,QAAP,4CAAC,kBAAgB0B,KAAjB,CAAd,CACD,CALH,CAME,SAAS,CAAC,aANZ,2CASE,kCAAK,GAAG,CAAEkG,mBAAV,CAAoB,GAAG,CAAC,WAAxB,EATF,GAhCJ,GADF,cA8CE,mCAAK,SAAS,CAAC,eAAf,CAA+B,GAAG,CAAEzL,OAApC,WACGe,QAAQ,CAAC4B,MAAT,CAAkB,CAAlB,EACC5B,QAAQ,CAAC2K,GAAT,CAAa,SAAC7E,GAAD,CAAW/D,KAAX,CAA6B,CACxC,MAAOsI,gBAAe,CAACvE,GAAD,CAAM/D,KAAN,CAAtB,CACD,CAFD,CAFJ,cAKE,kCAAK,SAAS,CAAC,WAAf,UACG,oBAAA/C,KAAK,CAAC8D,QAAN,qFAAgBC,WAAhB,sEAA6B6H,OAA7B,gBACC,gCAAG,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAT,CAAV,UACG,sCADH,EAFJ,EALF,GA9CF,CA4DG,qBAAC7L,KAAK,CAAC8D,QAAP,mEAAC,kBAAgBC,WAAjB,gDAAC,sBAA6B6H,OAA9B,gBACC,kCAAK,SAAS,CAAC,UAAf,uBACE,mCAAK,SAAS,CAAC,YAAf,wBACE,oCAAO,SAAS,CAAC,aAAjB,CAA+B,OAAO,CAAC,aAAvC,uBACE,mCAAM,SAAS,CAAC,iBAAhB,uBACE,kCAAK,GAAG,CAAEE,QAAV,CAAqB,GAAG,CAAC,OAAzB,EADF,EADF,EADF,cAME,oCACE,EAAE,CAAC,aADL,CAEE,SAAS,CAAC,MAFZ,CAGE,IAAI,CAAC,MAHP,CAIE,MAAM,CAAC,iEAJT,CAKE,QAAQ,CAAE1C,YALZ,CAME,QAAQ,CAAElI,cANZ,EANF,cAcE,uCACE,WAAW,CAAC,WADd,CAEE,SAAS,CAAE4D,aAFb,CAGE,KAAK,CAAEhE,WAHT,CAIE,QAAQ,CAAE,kBAACuI,CAAD,QAAOtI,eAAc,CAACsI,CAAC,CAACK,MAAF,CAASqC,KAAV,CAArB,EAJZ,EAdF,cAoBE,mCAAM,SAAS,CAAC,aAAhB,uBACE,kCAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,MAAvB,CAA8B,OAAO,CAAErI,WAAvC,EADF,EApBF,GADF,EA7DJ,GADF,CA2FGnD,MAAM,EAAIE,eAAV,cACC,kCAAK,SAAS,CAAC,iBAAf,uBACE,kCAAK,SAAS,CAAC,WAAf,uBACE,2DACE,kCAAK,GAAG,CAAEuL,yBAAV,CAAkB,GAAG,CAAC,QAAtB,CAA+B,KAAK,CAAC,OAArC,EADF,EADF,EADF,EADD,CAQGzL,MAAM,cACR,mCAAK,SAAS,CAAC,iBAAf,wBACE,mCAAK,SAAS,CAAC,oBAAf,wBACE,mCAAM,SAAS,CAAC,oBAAhB,UACGI,iBADH,SACGA,iBADH,iBACGA,iBAAiB,CAAEoF,OADtB,EADF,cAIE,mCACE,OAAO,CAAE,kBAAM,CACbvF,SAAS,CAAC,SAACyK,IAAD,QAAU,CAACA,IAAX,EAAD,CAAT,CACD,CAHH,CAIE,SAAS,CAAC,OAJZ,uBAME,kCAAK,GAAG,CAAEgB,iCAAV,CAAiB,GAAG,CAAC,OAArB,EANF,EAJF,GADF,cAeE,kCAAK,SAAS,CAAC,UAAf,uBACE,yDACE,iCAAI,SAAS,CAAC,YAAd,UACGC,oCAAU,CACTvL,iBADS,SACTA,iBADS,iBACTA,iBAAiB,CAAEuF,QADV,CAETvF,iBAFS,SAETA,iBAFS,iBAETA,iBAAiB,CAAEwF,MAFV,CADb,EADF,cAOE,iCAAI,SAAS,CAAC,aAAd,UAA6BxF,iBAA7B,SAA6BA,iBAA7B,iBAA6BA,iBAAiB,CAAEqF,MAAhD,EAPF,cAQE,iCAAI,SAAS,CAAC,sBAAd,UACGrF,iBADH,SACGA,iBADH,iBACGA,iBAAiB,CAAEsF,YADtB,EARF,cAWE,iCAAI,SAAS,CAAC,eAAd,UACGtF,iBADH,SACGA,iBADH,iBACGA,iBAAiB,CAAEyF,QADtB,EAXF,GADF,EAfF,cAiCE,gCAAG,SAAS,CAAC,YAAb,UAA2BzF,iBAA3B,SAA2BA,iBAA3B,iBAA2BA,iBAAiB,CAAEiF,cAA9C,EAjCF,cAmCE,qCACE,SAAS,CAAC,8BADZ,CAEE,OAAO,CAAE,kBAAM,CACb,GAAIzF,iCAAc,CAACC,OAAf,CAAuB,UAAvB,IAAuC,CAA3C,CAA8C,CAC5CL,KAAK,CAACwL,OAAN,CAAc7E,IAAd,mCAC6B/F,iBAD7B,SAC6BA,iBAD7B,iBAC6BA,iBAAiB,CAAE4E,KADhD,yBAGD,CAJD,IAIO,CACL;AACA,GAAI4G,UAAc,kBAAaxL,iBAAb,SAAaA,iBAAb,iBAAaA,iBAAiB,CAAE4E,KAAhC,oBAAgD5E,iBAAhD,SAAgDA,iBAAhD,iBAAgDA,iBAAiB,CAAE0F,MAAnE,gCAAlB,CACAtG,KAAK,CAACwL,OAAN,CAAc7E,IAAd,uBAAkCyF,SAAlC,GACD,CACF,CAZH,8BAnCF,GADQ,CAqDN,IAxJN,GADF,EAZF,GARF,CAkLD,CA3oBD,CA6oBerM,0EAAf,E;;AClpBA,GAAIsM,eAAc,CAAG,EAArB,CACA,GAAIC,iBAAyB,CAAG,KAAhC,CAEA,GAAMC,UAAI,CAAG,QAAPA,KAAO,CAACvM,KAAD,CAAsB,gFACjC,cAAwCG,yBAAQ,CAAU,IAAV,CAAhD,kEAAOqM,YAAP,eAAqBC,eAArB,eACA;AACA,eAAwBtM,yBAAQ,CAAM,iBAAMuM,yBAAI,CAACC,WAAX,EAAN,CAAhC,mEAAOC,IAAP,eAAaC,OAAb,eACA,eAAkC1M,yBAAQ,CAAM,EAAN,CAA1C,mEAAOiD,SAAP,eAAkBM,YAAlB,eACA,eAA8CvD,yBAAQ,CAAM,EAAN,CAAtD,mEAAO2M,eAAP,eAAwBC,kBAAxB,eACA,eAAsC5M,yBAAQ,CAAU,KAAV,CAA9C,oEAAOmL,WAAP,gBAAoB0B,cAApB,gBACA,gBAAgC7M,yBAAQ,CAAM,EAAN,CAAxC,qEAAO2D,QAAP,gBAAiBmJ,WAAjB,gBACA,gBAA4B9M,yBAAQ,CAAS,EAAT,CAApC,qEAAO4B,MAAP,gBAAemL,SAAf,gBACA,gBAAsC/M,yBAAQ,CAAC,EAAD,CAA9C,qEAAOgN,WAAP,gBAAoBC,cAApB,gBACA,gBAAwCjN,yBAAQ,CAAC,KAAD,CAAhD,qEAAOkN,YAAP,gBAAqBC,eAArB,gBACA,gBAA8CnN,yBAAQ,CAAC,IAAD,CAAtD,qEAAOoN,eAAP,gBAAwBC,kBAAxB,gBACA,gBAAoCrN,yBAAQ,CAAU,KAAV,CAA5C,qEAAOsN,UAAP,gBAAmBC,aAAnB,gBAEA,SAAgD,iBAAA1N,KAAK,CAACwL,OAAN,+EAAemC,QAAf,sEAAyBC,KAAzB,mBAC5C5N,KAAK,CAACwL,OADsC,iEAC5C,gBAAemC,QAD6B,gDAC5C,sBAAyBC,KADmB,CAE5C,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,SAAS,CAAE,EAA3B,CAA+B9H,OAAO,CAAE,EAAxC,CAA4CR,KAAK,CAAE,EAAnD,CAFJ,CAAQqI,QAAR,MAAQA,QAAR,CAAkBC,SAAlB,MAAkBA,SAAlB,CAA6B9H,OAA7B,MAA6BA,OAA7B,CAAsCR,KAAtC,MAAsCA,KAAtC,CAGA;AAEA1D,0BAAS,CAAC,UAAM,CACd;AACA,oFAAC,qIACCiM,qCAAU,CAAC,IAAD,CAAV,CADD,KAEKF,QAAQ,EAAIC,SAAZ,EAAyB9H,OAAzB,EAAoCR,KAFzC,gDAGSwI,gBAAe,EAHxB,qCAKG1B,gBAAgB,CAAG,IAAnB,CALH,6BAOO2B,iDAAoB,CAACC,eAAD,CAP3B,uDAAD,KAWA,MAAO,WAAM,CACX;AACAC,+CAAmB,CAAC9B,cAAD,CAAnB,CACAA,cAAc,CAAG,EAAjB,CACD,CAJD,CAKD,CAlBQ,CAkBN,EAlBM,CAAT,CAoBA,GAAM2B,gBAAe,uHAAG,qJAChBI,MADgB,WACI5I,KADJ,aACaqI,QADb,aACyBC,SADzB,EAEtBzB,cAAc,CAAG+B,MAAjB,CAFsB,uBAGZC,2CAAc,CAACD,MAAD,CAHF,qHAOdE,uCAAU,CAAC9I,KAAD,CAAQqI,QAAR,CAAkBC,SAAlB,CAA6B9H,OAA7B,CAPI,0DAAH,kBAAfgI,gBAAe,2CAArB,CAYA,GAAME,gBAAe,uHAAG,kBAAOxI,GAAP,oLACtB;AACI6I,gBAFkB,CAEM,EAFN,CAGhBC,SAHgB,CAGJ9I,GAAG,CAAC7C,MAAJ,CAAW,SAACC,IAAD,CAAYC,KAAZ,CAA8B,CACzD,GAAID,IAAI,CAACoB,cAAL,CAAoB,SAApB,GAAkCpB,IAAI,CAACf,MAAL,GAAgBsK,cAAtD,CAAsE,CACpE,GAAIvJ,IAAI,CAACf,MAAL,GAAgBsK,cAAhB,EAAkC,CAACC,gBAAvC,CAAyD,CACvDiC,gBAAgB,CAAGzL,IAAnB,CACD,CAFD,IAEO,CACL,MAAOA,KAAP,CACD,CACF,CACF,CARiB,CAHI,CAatB0L,SAAS,OAAT,EAAAA,SAAS,SAAT,QAAAA,SAAS,CAAEC,IAAX,CAAgB,SAAUC,CAAV,CAAkBC,CAAlB,CAA0B,2BACxC,MAAO,aAAAA,CAAC,CAACzL,OAAF,gDAAWyH,gBAAX,eAA8B+D,CAAC,CAACxL,OAAhC,qCAA8B,WAAWyH,gBAAzC,CAAP,CACD,CAFD,EAbsB,KAiBlB6D,SAAS,CAAC5L,MAAV,GAAqB,CAArB,EAA0B,CAAC2L,gBAjBT,2BAkBpBvB,cAAc,CAAC,IAAD,CAAd,CACA,GAAIO,eAAJ,CAAqB,CACnBC,kBAAkB,CAAC,KAAD,CAAlB,CACAO,qCAAU,CAAC,KAAD,CAAV,CACD,CAtBmB,yCAyBtBf,cAAc,CAAC,KAAD,CAAd,CAGA,GAAIuB,gBAAJ,CAAsB,CACpBK,IAAI,8CAAOJ,SAAP,CAAJ,CACAI,IAAI,CAACnL,OAAL,CAAa8K,gBAAb,EACD,CACD;AACMM,MAjCgB,CAiCPC,KAAK,CAACC,OAAN,CAAcH,IAAd,GAAuBL,gBAAvB,CAA0CK,IAA1C,CAAiDJ,SAjC1C,CAkCtB9K,YAAY,CAACmL,MAAM,CAACjM,MAAP,GAAkB,CAAlB,CAAsB,CAAC,CAAEoM,QAAQ,CAAE,UAAZ,CAAD,CAAtB,CAAmDH,MAApD,CAAZ,CAlCsB,KAmClBA,MAAM,CAACjM,MAAP,CAAgB,CAAhB,EAAqByJ,cAAc,GAAK,EAnCtB,4BAoCpBA,cAAc,CAAGwC,MAAM,CAAC,CAAD,CAAN,CAAU9M,MAA3B,CACAmL,SAAS,CAAC2B,MAAM,CAAC,CAAD,CAAN,CAAU9M,MAAX,CAAT,CACA,GAAI8M,MAAM,CAAC,CAAD,CAAN,EAAa,WAAAA,MAAM,CAAC,CAAD,CAAN,4CAAWI,cAAX,EAA4B,CAA7C,CAAgD,CAC9CJ,MAAM,CAAC,CAAD,CAAN,CAAUI,cAAV,CAA2B,CAA3B,CACAC,8CAAkB,CAACL,MAAM,CAAC,CAAD,CAAN,CAAU9M,MAAX,CAAlB,CACD,CACDkL,WAAW,CAAC4B,MAAM,CAAC,CAAD,CAAP,CAAX,CA1CoB,0CA+CtB,GAAIA,MAAM,CAACjM,MAAP,CAAgB,CAApB,CAAuB,CACjBuM,OADiB,CACPN,MAAM,CAACO,IAAP,CAAY,SAACV,CAAD,QAAYA,EAAC,CAAC3M,MAAF,EAAYsK,cAAxB,EAAZ,CADO,CAGrB,GAAI8C,OAAO,EAAI,CAAAA,OAAO,OAAP,EAAAA,OAAO,SAAP,QAAAA,OAAO,CAAEF,cAAT,EAA0B,CAAzC,CAA4C,CAC1CE,OAAO,CAACF,cAAR,CAAyB,CAAzB,CACAC,8CAAkB,CAACC,OAAO,CAACpN,MAAT,CAAlB,CACD,CACDkL,WAAW,CAACkC,OAAD,CAAX,CACD,CAvDqB,yDAAH,kBAAfjB,gBAAe,6CAArB,CA0DApM,0BAAS,CAAC,UAAM,CACd,GAAIuN,YAAW,CAAG3C,wBAAI,CAAC4C,kBAAL,CAAwB,SAAC1C,IAAD,CAAU,CAClD,GAAIA,IAAJ,CAAU,CACRC,OAAO,CAACD,IAAD,CAAP,CACAc,aAAa,CAAC,KAAD,CAAb,CACD,CAHD,IAGO,CACLb,OAAO,CAAC,KAAD,CAAP,CACAa,aAAa,CAAC,IAAD,CAAb,CACAK,qCAAU,CAAC,KAAD,CAAV,CACAP,kBAAkB,CAAC,KAAD,CAAlB,CACD,CACD,GAAIhB,YAAJ,CAAkB,CAChBC,eAAe,CAAC,KAAD,CAAf,CACD,CACF,CAbiB,CAAlB,CAeA,MAAO4C,YAAP,CACD,CAjBQ,CAiBN,CAAC7C,YAAD,CAjBM,CAAT,CAmBA;AAEA,GAAM+C,eAAc,uHAAG,kBAAOzM,IAAP,wHACrBqL,+CAAmB,CAAC9B,cAAD,CAAnB,CACAA,cAAc,CAAGvJ,IAAI,CAACf,MAAtB,CACAmL,SAAS,CAACpK,IAAI,CAACf,MAAN,CAAT,CACAkL,WAAW,CAACnK,IAAD,CAAX,CACAoM,8CAAkB,CAACpM,IAAI,CAACf,MAAN,CAAlB,CACA;AANqB,wDAAH,kBAAdwN,eAAc,8CAApB,CASAzN,0BAAS,CAAC,UAAM,iBACd,GAAIqL,WAAJ,CAAiB,CACf,GAAIqC,YAAW,CAAGpM,SAAS,CAACP,MAAV,CAAiB,SAACC,IAAD,8FACjCA,IAAI,CAACiB,WAD4B,mEACjC,kBAAkB0H,IADe,wEACjC,sBACI3B,WADJ,EADiC,iDACjC,uBAEIG,QAFJ,CAEakD,WAAW,CAACrD,WAAZ,EAFb,CADiC,EAAjB,CAAlB,CAKAiD,kBAAkB,CAACyC,WAAD,CAAlB,CACD,CACD,GACE,CAACpM,SAAS,CAACR,MAAV,EAAoB,cAAAQ,SAAS,CAAC,CAAD,CAAT,kDAAe,UAAf,KAA+B,UAApD,GACAmK,eAFF,CAGE,kBACA,GAAI,eAAAnK,SAAS,CAAC,CAAD,CAAT,oDAAe,UAAf,KAA+B,UAAnC,CAA+CM,YAAY,CAAC,EAAD,CAAZ,CAC/CqK,qCAAU,CAAC,KAAD,CAAV,CACAP,kBAAkB,CAAC,KAAD,CAAlB,CACD,CACF,CAjBQ,CAiBN,CAACL,WAAD,CAAc/J,SAAd,CAjBM,CAAT,CAmBA,mBACE,kCAAK,SAAS,CAAC,aAAf,uBACE,mCAAK,SAAS,CAAC,kBAAf,wBACE,mCAAM,SAAS,CAAC,cAAhB,CAA+B,OAAO,CAAE,yBAAMsK,cAAa,CAAC,IAAD,CAAnB,EAAxC,uBACE,kCAAK,GAAG,CAAE+B,iCAAV,CAAgB,GAAG,CAAC,cAApB,EADF,EADF,cAIE,mCAAK,SAAS,CAAC,kBAAf,wBACE,mCAAK,SAAS,wBAAkBhC,UAAU,CAAG,QAAH,CAAc,EAA1C,CAAd,wBACE,qCAAQ,SAAS,CAAC,WAAlB,CAA8B,OAAO,CAAE,yBAAMC,cAAa,CAAC,KAAD,CAAnB,EAAvC,uBACE,kCAAK,GAAG,CAAExB,iCAAV,CAAiB,GAAG,CAAC,OAArB,EADF,EADF,cAIE,mCAAK,SAAS,CAAC,OAAf,wBACE,mCAAM,SAAS,CAAC,OAAhB,CAAwB,KAAK,CAAE,CAAEwD,UAAU,CAAE,MAAd,CAA/B,kBADF,cAKE,mCACE,SAAS,sBAAgBrC,YAAY,CAAG,QAAH,CAAc,EAA1C,CADX,CAEE,OAAO,CAAE,kBAAM,CACbC,eAAe,CAAC,IAAD,CAAf,CACD,CAJH,wBAME,oCACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,QAFd,CAGE,KAAK,CAAEH,WAHT,CAIE,QAAQ,CAAE,kBAAC9D,CAAD,QACR+D,eAAc,CAAC/D,CAAC,CAACK,MAAF,CAASqC,KAAT,CAAenI,QAAf,EAAD,CADN,EAJZ,EANF,cAcE,mCAAM,SAAS,CAAC,iBAAhB,uBACE,kCAAK,GAAG,CAAE+L,WAAV,CAAsB,GAAG,CAAC,QAA1B,EADF,EAdF,GALF,cAuBE,iCAAI,SAAS,CAAC,WAAd,UACGxC,WAAW,CACVL,eAAe,CAAClK,MAAhB,GAA2B,CAA3B,cACE,uDACE,gCAAG,IAAI,CAAC,oBAAR,CAA6B,SAAS,CAAC,MAAvC,uBACE,kCAAK,SAAS,CAAC,QAAf,uBACE,mCAAM,SAAS,CAAC,oBAAhB,6BADF,EADF,EADF,EADF,CAWEkK,eAAe,CAACnB,GAAhB,CAAoB,SAAC7I,IAAD,CAAe,uFACjC,mBACE,iCACE,OAAO,CAAE,kBAAM,CACbyM,cAAc,CAACzM,IAAD,CAAd,CACD,CAHH,uBAKE,iCACE,IAAI,CAAC,oBADP,CAEE,SAAS,gBACPuJ,cAAc,GAAKvJ,IAAI,CAACf,MAAxB,CAAiC,QAAjC,CAA4C,EADrC,CAFX,wBAME,qCAAQ,SAAS,CAAC,OAAlB,uBACE,kCACE,GAAG,CAAE,qBAAAe,IAAI,CAACiB,WAAL,gEAAkBwD,KAAlB,GAA2BgE,gCADlC,CAEE,GAAG,CAAC,KAFN,CAGE,OAAO,CAAE,iBAAClC,CAAD,CAAY,0BACnB,GAAIA,CAAJ,SAAIA,CAAJ,4BAAIA,CAAC,CAAEK,MAAP,oCAAI,UAAWsB,OAAf,CAAwB,CACtB3B,CAAC,CAACK,MAAF,CAASsB,OAAT,CAAmB,IAAnB,CACD,CACD,GAAI3B,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWuB,GAAf,CAAoB,CAClB5B,CAAC,CAACK,MAAF,CAASuB,GAAT,CAAeM,gCAAf,CACD,CACF,CAVH,EADF,EANF,cAoBE,mCAAK,SAAS,CAAC,QAAf,wBACE,mCAAM,SAAS,CAAC,oBAAhB,8BACGzI,IAAI,CAACiB,WADR,6CACG,mBAAkB0H,IADrB,EADF,cAIE,mCAAM,SAAS,CAAC,wBAAhB,UACG3I,IAAI,CAACkD,OADR,EAJF,cAOE,gCAAG,SAAS,CAAC,mBAAb,yBACGlD,IAAI,CAACI,OADR,wCACG,cAAcpC,WADjB,EAPF,CAUG,iBAAAgC,IAAI,CAACI,OAAL,wDAAcyH,gBAAd,gBACC,mCAAM,SAAS,CAAC,WAAhB,UACGD,wCAAc,iBACb5H,IAAI,CAACI,OADQ,yCACb,eAAcyH,gBADD,CAEb,WAFa,CADjB,EAXJ,CAmBG0B,cAAc,GACfvJ,IAAI,CAACf,MADJ,CACa,IADb,CACoBe,IAAI,CAACmM,cAAL,GACnB,CADmB,CACf,IADe,cAEnB,mCAAM,SAAS,CAAC,OAAhB,UACGnM,IAAI,CAACmM,cADR,EAtBJ,GApBF,GALF,EADF,CAwDD,CAzDD,CAZQ,CAuER,CAAA7L,SAAS,OAAT,EAAAA,SAAS,SAAT,QAAAA,SAAS,CAAER,MAAX,EAAoB,CAApB,CACFQ,SAAS,CAACuI,GAAV,CAAc,SAAC7I,IAAD,CAAe,qIAC3B,mBACE,iCACE,OAAO,CAAE,kBAAM,CACbyM,cAAc,CAACzM,IAAD,CAAd,CACD,CAHH,uBAKE,iCACE,IAAI,CAAC,oBADP,CAEE,SAAS,gBACPuJ,cAAc,GAAKvJ,IAAI,CAACf,MAAxB,CAAiC,QAAjC,CAA4C,EADrC,CAFX,wBAME,qCAAQ,SAAS,CAAC,OAAlB,uBACE,kCACE,GAAG,CAAE,qBAAAe,IAAI,CAACiB,WAAL,gEAAkBwD,KAAlB,GAA2BgE,gCADlC,CAEE,GAAG,CAAC,KAFN,CAGE,OAAO,CAAE,iBAAClC,CAAD,CAAY,2BACnB,GAAIA,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWsB,OAAf,CAAwB,CACtB3B,CAAC,CAACK,MAAF,CAASsB,OAAT,CAAmB,IAAnB,CACD,CACD,GAAI3B,CAAJ,SAAIA,CAAJ,6BAAIA,CAAC,CAAEK,MAAP,qCAAI,WAAWuB,GAAf,CAAoB,CAClB5B,CAAC,CAACK,MAAF,CAASuB,GAAT,CAAeM,gCAAf,CACD,CACF,CAVH,EADF,EANF,cAoBE,mCAAK,SAAS,CAAC,QAAf,wBACE,mCAAM,SAAS,CAAC,oBAAhB,8BACGzI,IAAI,CAACiB,WADR,6CACG,mBAAkB0H,IADrB,EADF,cAIE,mCAAM,SAAS,CAAC,wBAAhB,UACG3I,IAAI,CAACkD,OADR,EAJF,cAOE,gCAAG,SAAS,CAAC,mBAAb,UACG,iBAAAlD,IAAI,CAACI,OAAL,wDAAcF,WAAd,IAA8B,MAA9B,iBACCF,IAAI,CAACI,OADN,yCACC,eAAcpC,WADf,CAEG,iBAAAgC,IAAI,CAACI,OAAL,wDAAcF,WAAd,IAA8B,OAA9B,cACF,gCAAG,KAAK,CAAE,CAAE6I,KAAK,CAAE,SAAT,CAAV,mBADE,CAEA,iBAAA/I,IAAI,CAACI,OAAL,wDAAcF,WAAd,IAA8B,OAA9B,cACF,gCAAG,KAAK,CAAE,CAAE6I,KAAK,CAAE,SAAT,CAAV,mBADE,CAGF,EARJ,EAPF,CAkBG,iBAAA/I,IAAI,CAACI,OAAL,wDAAcyH,gBAAd,gBACC,mCAAM,SAAS,CAAC,WAAhB,UACGD,wCAAc,iBACb5H,IAAI,CAACI,OADQ,yCACb,eAAcyH,gBADD,CAEb,WAFa,CADjB,EAnBJ,CA0BG0B,cAAc,GACfvJ,IAAI,CAACf,MADJ,CACa,IADb,CACoBe,IAAI,CAACmM,cAAL,GACnB,CADmB,CACf,IADe,cAEnB,mCAAM,SAAS,CAAC,OAAhB,UACGnM,IAAI,CAACmM,cADR,EA7BJ,GApBF,GALF,EADF,CA+DD,CAhED,CADE,CAkEAjP,KAAK,CAAC4P,SAAN,CAAkB,IAAlB,cACF,uDACE,gCAAG,IAAI,CAAC,oBAAR,CAA6B,SAAS,CAAC,MAAvC,uBACE,kCAAK,SAAS,CAAC,QAAf,uBACE,mCAAM,SAAS,CAAC,oBAAhB,6BADF,EADF,EADF,EA3IJ,EAvBF,GAJF,GADF,CA4MGrC,eAAe,CAAG,IAAH,CAAU,CAACA,eAAD,EACxB,CAAAnK,SAAS,OAAT,EAAAA,SAAS,SAAT,QAAAA,SAAS,CAAER,MAAX,IAAsB,CADE,cAExB,kCAAK,SAAS,CAAC,YAAf,uBACE,kCAAK,SAAS,CAAC,sBAAf,uBACE,mCAAK,SAAS,CAAC,WAAf,wBACE,qCAAQ,SAAS,CAAC,QAAlB,uBACE,kCAAK,GAAG,CAAEiN,iCAAV,CAAkB,GAAG,CAAC,gBAAtB,EADF,EADF,cAIE,6DAJF,GADF,EADF,EAFwB,cAaxB,2BAAC,YAAD,EACE,MAAM,CAAExD,cADV,CAEE,QAAQ,CAAEvI,QAFZ,CAGE,WAAW,CAAEwH,WAHf,CAIE,OAAO,CAAEtL,KAAK,CAACwL,OAJjB,CAKE,SAAS,CAAExL,KAAK,CAAC4P,SALnB,CAME,SAAS,CAAExM,SANb,CAOE,YAAY,CAAEM,YAPhB,EAzNJ,GAJF,GADF,EADF,CA6OD,CA3YD,CA6Ye6I,kDAAf,E;;AC1aA,GAAMuD,gBAAe,CAAG,QAAlBA,gBAAkB,CAAClC,KAAD,CAAgB,CACpC,MAAO,CACHgC,SAAS,CAAEhC,KAAK,CAACmC,MAAN,CAAaH,SADrB,CAEHI,iBAAiB,CAAEpC,KAAK,CAACmC,MAAN,CAAaC,iBAF7B,CAAP,CAIH,CALD,CAOA,GAAMC,wBAAkB,CAAG,QAArBA,mBAAqB,CAACC,QAAD,CAAmB,CAC1C,MAAOC,4CAAkB,CAAC,EAAD,CACtBD,QADsB,CAAzB,CAEH,CAHD,CAKA,GAAME,cAAa,CAAGC,6BAAO,CACzBP,eADyB,CAEzBG,uBAFyB,CAAP,CAGpB1D,IAHoB,CAAtB,CAKe6D,6FAAf,E","file":"x","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZTPTcMwFMbfswTqn0tG6AhhA6cT9ATKjUwATECYoGKC9kbLhQ2oN6AjZAQfaFRU4YedJlUIjmOExKHqJ0WKbL/f5/fZMsBJRy+0Dfb54gYZ8nOVJ1Ik0gXo8acRY2zKlHp8F7FozjOrq4Yj0WSHg1XAZ4ETjrgya4nRxLbGaqCUuiOADIDCNpMDHGCkt7Q+Ux+pjWWNyAqgPKri+j4H2SdRtBVxBr4dGJkCpQvrnZhx040v3NmBtROEORCGxtAH7mXww2QvL7gRAw/1YCsRUNa2JXzg3gY77L9UsehPAsH1cLyY+dR2GpQgDmUsQCyqTAbj5X1XPXbCNQgamQ/5cwiozK0KCDHNX68efm1Qg0sNv2hmXpq8mX+XCbPDl9MKbiKxHehGXK6BKCl2SZTq9+vW24D217GAF6AWbUQ8P5gAtb5ZVrkeub+sPen/9QVDS7zkZB34uAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAW0lEQVRIS2NkoDFgpLH5DMPMAm7HFf+pEWRf90fAQwYliGhuATVcj27GMIvk4RtEpKYunMkUVxDR3AJK4mY0mRIMPfoGEampBZfzR0tTghGLrIC+kUyS04hUDAD9mBgZUEFJtQAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/not-found.c5fd5f1f.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABUUExURUdwTPLy8vHx8e/v7/Hx8e/v7+/v7+/v7+/v7/Dw8PPz8/Hx8e/v7/////n5+fPz9BIOJIiGkU1KW3FufMnIzSAdMeLh5C8sP1xZaJeVnz47TaalreepWhcAAAANdFJOUwC/32CaEIBAJHB/71CwYgcnAAABbklEQVQ4y52V25aDIAxFRUShKkFQ8fL//znQWg0otp08qEv3OhwDSbIsCsapKEvRVNl9MEFqkD4AgFCeBCvisHYPhxfXMCsAcW/6Cq7yE/iE85NpAZekF36E5APaZITsHelYgXzeko7d/fJc3qMyZxtafCAdW2yieHmYjdbdmLCARedBWb0oZSJYkljUqKl3t7FTNmLBu6UH2qlue+oHHcn6hJF9/VGZw4nqzw4O0VWhVWPZmuH0Twv6ZIbILM+aA9VYqFORWZoJ+Z2q+69SIiGUtyVOQYnRfs+Vf15PKDLQTnuGRmvbkwGKULDD/NK0KMXbtyY8LKNW1nTGX5GZ94FhdfBmnQY16BnQJm9osLFhhOxzY0XqYAcsUN8qkoWFWXi2DiLTbB9WzE299qHoL2WYsc/FzX9vGb653ZIlblolfEt6Ntk0xf9bsWsd1w2eXU4DB2PajRmSHkmcEjeFXtOoJoJ9mF1V40cc5SfuDwSERuTh1ludAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAA8CAYAAAAZp4inAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgB1Zr/UcJAEIVfHAuwhKMD6UA60AqUDrQCsQQrkA6kA9KBdJDrQDpYd03Qm0zQS3I/9r6Z/SMMwzzefAkXckAHEV3zvPF8UstHd2ygFQ53T+dp5EtBG9Io+fEMTXQ6+PKuRh3HaV8a0qAOTSevOjSPfOrQfBrKoQ6FI606FJZ06lB4GkqgzgXCY3hkuRBXHYpLNHUq+XTExfLcVVV1QEBiqNLHIIY6lJZg6qRQpY9FAHVSqNLHIIA6ORp32fE8cfsWI8kdXLCYoE4OVfoYTFBHQ+Mu3upoCy5YeKijQZU+Bh7qaGzc5aw62oMLFgPqaFSlj8GAOiU07iLqrLn9Y2nBhZqDr0oMLqxLDV6XcHIOYUoNfiw1+KFUxxclNi7XcVtScMuz4tBbOSgl+AvPkkPXpxcuoRtZWK2H1uZaGz+iXc4uz91QaGy8RncC/vUmTY2fWl753HNqabyGR8suuRsf1bJLzsZ/bgowgRzBJagE3mEGqVV55VnMDS2katyibblGIFI0Li0vQ4b+huLR8NwgFhSHDc8VYkJhkT9u0jzXpzDInpcNUkLz2VOOrR80HWn5Ebmg8Vub8rXcC74fEThvyy7UbpT0QZ4Kx73EjYUDPfzT8i20Qu3GyS39Ot9Qih+SiXwBkwmQStsXLyMAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACWSURBVHgB7ZTBDYAgDEWLejBOgZvIGE6oW+gmMoYXxdZwMF7kkxA88C4EQvtIKRAVcqOQzZ2ZNwk4nDP7OtqQmIpwdK3U0g6TDtkMCU4+uSOyiAQqkSBJK07OgZqn9qtcsACVRAkQSbQgVNK8g3wrasK5L57H/rkY06YQyUv0z0tO2qZJHxqaXIC6CE0OCzwW+a4L+bkA+mx0ERNXUvgAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABXUExURUdwTP///////////////////////////////////////wtBqODn9KC13YWg1GaIyWaJyEhwvsLP6RpNrSlZs/Dz+tHb73aUzld8xLPD5DlkubLD5Fd9wl7Mg6UAAAAKdFJOUwDfn6C/cIAcc+/XmZsvAAABPklEQVQ4y5WV7ZpFIBSFOSc87b7sSmHm/q9zImbihGb9iafXqrVjq6qoriU1fIiSpqtSdQQu9U7QhsKNaLNzLTyo3fzgUatnR59BuuzzBQUiwRCK1JXsMOYhZSCpDlEGqaTQbvgE6+pwq2bhv9EyM+P6RDJ1BO02xfUkPc6GWZcH2WnRQdgMOMiRqVQiWLMMqFAeZT3onCNzp6TcwIQ5kO8AzmIdGYjxDrR+MjqCXt6AS4BRxIt1vHQMxTY8gqgvQD2GKe77JRdXDIzLg94IYcRWVdOz5ARSUCMGU2eXANqi5syZ3Fkz42MYqya0X8se9ZwFp72OPcphDSMR7lL/ngwzvAh06cuUgKjEUajSF/evNYXyHSUTQ1r+cbVlYFPeAMrWfv2nSRW3vfJGWt6awz7fNxU8/RcakrGtSbtjP7Y8P8bN8RBFAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTAtBqApBqApBqAtApwpApwtBqApBqAhApxBAnwlApwtApwtBqA/NXNUAAAAMdFJOUwDBf99gQO+hIBBwkA7bl6QAAACoSURBVBjTY2CAA1ZhBHtSzkE4O/BYzhEok1Pt4OozBlDlMtkBOsoFUOVSE5gO+TRAlG9lYNBREIQoX8nAwHSI4whEOQNIgh2o30ZqAgNIgoEZqN/5eANYggGs3/l4AEiCQRBssPPBAKAEB9R+54NACXao/QzOAgxg/RDXHGWA6AcDQZh+EIgJgOkHAmYBuH4GBpajcP1AYIjQDzQrEcFmYDuCxOEC6wcA6NUlu1h0PO0AAAAASUVORK5CYII=\"","import React, { useState, useEffect, useRef } from \"react\";\nimport { getJobDetails } from \"../../redux/jobs/actions\";\nimport storageService from \"../../utils/storageService\";\n\nimport notFound from \"../../assets/images/not-found.png\";\nimport chatVideoIcon from \"../../assets/images/video@3x.png\";\nimport dummy from \"../../assets/images/u_placeholder.jpg\";\nimport viewMore from \"../../assets/images/icon-direction-blue.png\";\nimport close from \"../../assets/images/ic-cancel-blue.png\";\nimport sendMedia from \"../../assets/images/ic-media.png\";\nimport sendBtn from \"../../assets/images/ic-send.png\";\nimport loader from \"../../assets/images/loader.gif\";\n\nimport { formatDateTime, renderTime } from \"../../utils/common\";\nimport { setShowToast } from \"../../redux/common/actions\";\nimport { onFileUpload } from \"../../redux/auth/actions\";\nimport {\n  getMessagesOfRoom,\n  sendTextMessage,\n  sendImageVideoMessage,\n} from \"../../services/firebase\";\n\nimport Constants from \"../../utils/constants\";\n\n//@ts-ignore\nimport FsLightbox from \"fslightbox-react\";\nimport { moengage, mixPanel } from \"../../services/analyticsTools\";\nimport { MoEConstants } from \"../../utils/constants\";\ninterface Types {\n  [key: string]: any | string;\n}\n\nlet lastDate = \"\";\nconst docTypes: Array<any> = [\"jpeg\", \"jpg\", \"png\", \"mp4\", \"wmv\", \"avi\"];\n\nconst UserMessages = (props: any) => {\n  const divRref = useRef<HTMLDivElement>(null);\n  const [userId] = useState<string>(storageService.getItem(\"userInfo\")?._id);\n  const [toggle, setToggle] = useState<boolean>(false);\n  const [jobDetailLoader, setJobDetailLoader] = useState<boolean>(false);\n  const [currentJobDetails, setCurrentJobDetails] = useState<any>(null);\n  const [messageText, setMessageText] = useState<any>(\"\");\n  const [messages, setMessages] = useState<Array<any>>([]);\n  const [isDocUploading, setIsDocUploading] = useState<boolean>(false);\n\n  const [itemsMedia, setItemsMedia] = useState([]);\n  const [toggler, setToggler] = useState(false);\n  const [selectedSlide, setSelectSlide] = useState<any>(1);\n  const [fsSlideListner, setFsSlideListner] = useState<any>({});\n  const [oppUserFcmToken, setOppUserFcmToken] = useState<any>(\"\");\n\n  useEffect(() => {\n    if (props.roomId !== \"\") {\n      lastDate = \"\";\n      getMessagesOfRoom(props.roomId, onReceiveOfNewMsg);\n      setSelectSlide(1);\n      setFsSlideListner({});\n      setItemsMedia([]);\n      setCurrentJobDetails(null);\n      setToggle(false);\n    }\n  }, [props.roomId]);\n  // }, [props.roomId, props.roomData]);\n  //console.log('props.roomData: ', props.roomData);\n\n  useEffect(() => {\n    scrollToBottom();\n  });\n\n  const scrollToBottom = () => {\n    if (null !== divRref?.current) {\n      const scroll =\n        divRref.current.scrollHeight - divRref.current.clientHeight;\n      // divRref.current.scrollIntoView({ behavior: \"smooth\" })\n      divRref.current.scrollTo(0, scroll);\n    }\n  };\n\n  const onReceiveOfNewMsg = (arrmsg: any) => {\n    // console.log('arrmsg: ', arrmsg);\n    setMessages(arrmsg);\n  };\n\n  useEffect(() => {\n    let fsSlideObj: any = {};\n    let mediaMsgs: any = [];\n    let slideCount = 1;\n    if (messages.length) {\n      mediaMsgs = messages.filter((item: any, index: number) => {\n        if (item.messageType === \"image\" || item.messageType === \"video\") {\n          fsSlideObj[`${index}`] = slideCount++;\n          return item;\n        }\n      });\n      setItemsMedia(mediaMsgs);\n      setFsSlideListner(fsSlideObj);\n    }\n  }, [messages]);\n  // console.log('itemsMedia: ', itemsMedia, \"fsSlideListner\", fsSlideListner);\n\n  const setInboxToTopWithLastMsg = (lastMsg: any) => {\n    const newInboxData = [...props.inBoxData];\n    const currentIndex = newInboxData.findIndex(\n      (i) => i.roomId === props.roomId\n    );\n    newInboxData[currentIndex].lastMsg = lastMsg;\n    newInboxData.splice(currentIndex, 1);\n    newInboxData.unshift(props.inBoxData[currentIndex]);\n    props.setInBoxData(newInboxData);\n    // console.log('lastMsg: ', lastMsg);\n    // console.log('currentIndex: ', currentIndex);\n    // console.log('newInboxData: ', newInboxData);\n  };\n\n  const sendMessage = async () => {\n    //setIsLoading(true);\n    if (messageText && messageText.trimLeft() !== \"\") {\n      setMessageText(\"\");\n      const lastMsg: any = await sendTextMessage(props.roomId, messageText);\n      if (\n        lastMsg &&\n        props.roomData?.oppUserInfo?.deviceToken &&\n        props.roomData?.oppUserInfo?.deviceType &&\n        (props.roomData?.oppUserInfo?.hasOwnProperty(\"isNotification\")\n          ? props.roomData?.oppUserInfo?.isNotification\n          : true)\n      ) {\n        sendFCMPushNotificationToOppUser(lastMsg);\n        const mData = {\n          timeStamp: moengage.getCurrentTimeStamp(),\n        };\n        moengage.moE_SendEvent(MoEConstants.CHAT, mData);\n        mixPanel.mixP_SendEvent(MoEConstants.CHAT, mData);\n      }\n      setInboxToTopWithLastMsg(lastMsg);\n    }\n  };\n\n  const handleKeyDown = (event: any) => {\n    if (!event.shiftKey && event.key === \"Enter\") {\n      event.preventDefault();\n      sendMessage();\n      setMessageText(\"\");\n    }\n  };\n\n  const sendImageVideoMsg = async (url: string, msgType: string) => {\n    //setIsLoading(true);\n    if (url && url !== \"\") {\n      const lastMsg: any = await sendImageVideoMessage(\n        props.roomId,\n        url,\n        msgType\n      );\n      if (\n        lastMsg &&\n        props.roomData?.oppUserInfo?.deviceToken &&\n        props.roomData?.oppUserInfo?.deviceType &&\n        (props.roomData?.oppUserInfo?.hasOwnProperty(\"isNotification\")\n          ? props.roomData?.oppUserInfo?.isNotification\n          : true)\n      ) {\n        sendFCMPushNotificationToOppUser(lastMsg);\n      }\n      setInboxToTopWithLastMsg(lastMsg);\n    }\n    setMessageText(\"\");\n  };\n\n  const fetchJobDetail = async (jobId: any) => {\n    setJobDetailLoader(true);\n    const res = await getJobDetails(jobId);\n    if (res.success) {\n      const jobInfo = {\n        jobDescription: res.data?.details || \"\",\n        jobId: res.data?.jobId || \"\",\n        jobName: res.data?.jobName || \"\",\n        amount: res.data?.amount || \"\",\n        locationName: res.data?.locationName || \"\",\n        fromDate: res.data?.fromDate || \"\",\n        toDate: res.data?.toDate || \"\",\n        duration: res.data?.duration || \"\",\n        status: res.data?.status || \"\",\n      };\n      setCurrentJobDetails(jobInfo);\n      setJobDetailLoader(false);\n    }\n  };\n\n  const renderMediaItems = (itemsMedia: any) => {\n    let sources: any = [];\n    let types: any = [];\n\n    if (itemsMedia.length) {\n      itemsMedia.forEach((item: any) => {\n        if (item.messageType === \"video\") {\n          sources.push(item.mediaUrl);\n          types.push(\"video\");\n        }\n        if (item.messageType === \"image\") {\n          sources.push(item.mediaUrl);\n          types.push(\"image\");\n        }\n      });\n    }\n\n    return { sources, types };\n  };\n\n  const setResDeviceType = (deviceType: number, msg: any) => {\n    switch (Number(deviceType)) {\n      case 1:\n        return {\n          app_icon:\n            \"https://appinventiv-development.s3.amazonaws.com/1628513615740ic-logo-yellow.png\",\n          title: \"Tickt App\",\n          notificationText: `${\n            storageService.getItem(\"userInfo\")?.userName\n          } send you a message`,\n          senderName: `${storageService.getItem(\"userInfo\")?.userName}`,\n          messageType: `${msg?.messageType}`,\n          messageText: `${msg?.messageType === \"text\" ? msg?.messageText : \"\"}`,\n          room_id: msg?.messageRoomId,\n          image: storageService.getItem(\"userInfo\")?.user_image,\n          notificationType: 25,\n          sound: \"default\",\n        };\n      case 2:\n        return {\n          body: msg?.messageText,\n          messageText: msg?.messageText,\n          sender: {\n            first_name: storageService.getItem(\"userInfo\")?.userName,\n            device_token: storageService.getItem(\"fcmToken\"),\n            user_id: storageService.getItem(\"userInfo\")?._id,\n            device_type: 2,\n          },\n          jobId: msg?.messageRoomId?.split(\"_\")?.[0],\n          badge: 1,\n          device_type: 2,\n          title: storageService.getItem(\"userInfo\")?.userName,\n          jobName: props.roomData?.jobName,\n          notification_type: 50,\n          sound: \"default\",\n          messageId: msg?.messageId,\n        };\n      case 3:\n        return {\n          notification: {\n            body: msg?.messageText,\n            title: storageService.getItem(\"userInfo\")?.userName,\n          },\n          data: {\n            body: msg?.messageText,\n            messageText: msg?.messageText,\n            sender: {\n              first_name: storageService.getItem(\"userInfo\")?.userName,\n              device_token: storageService.getItem(\"fcmToken\"),\n              user_id: storageService.getItem(\"userInfo\")?._id,\n              device_type: 2,\n            },\n            jobId: msg?.messageRoomId?.split(\"_\")?.[0],\n            badge: 1,\n            device_type: 2,\n            title: storageService.getItem(\"userInfo\")?.userName,\n            jobName: props.roomData?.jobName,\n            notification_type: 50,\n            sound: \"default\",\n            messageId: msg?.messageId,\n          },\n        };\n      default:\n        return;\n    }\n  };\n  const sendFCMPushNotificationToOppUser = async (msg: any) => {\n    let data = setResDeviceType(props.roomData?.oppUserInfo?.deviceType, msg);\n    let newData = {\n      to: `${props.roomData?.oppUserInfo?.deviceToken}`,\n      ...(props.roomData?.oppUserInfo?.deviceType == 1 && { data: data }),\n      ...(props.roomData?.oppUserInfo?.deviceType == 2 && {\n        notification: data,\n      }),\n      ...(props.roomData?.oppUserInfo?.deviceType == 3 && {\n        notification: data?.notification,\n        data: data?.data,\n      }),\n    };\n\n    const headers_: Types = {\n      \"Content-Type\": \"application/json\",\n      Authorization: Constants.FcmHeaderAuthorizationKey,\n    };\n    const response: any = await fetch(`https://fcm.googleapis.com/fcm/send`, {\n      method: \"POST\",\n      headers: headers_,\n      body: JSON.stringify(newData),\n    });\n    // const res: any = await response.json();\n    if (response.status === 200) {\n      console.log(\"Chat push notification send to opposite user: success\");\n    } else {\n      console.log(\"Chat push notification send to opposite user: failure\");\n    }\n  };\n\n  const handleUpload = async (e: any) => {\n    let maxFileSize: number = 10;\n    const formData = new FormData();\n    const newFile = e.target.files[0];\n    var fileType = newFile?.type?.split(\"/\")[1]?.toLowerCase();\n\n    var selectedFileSize = newFile?.size / 1024 / 1024; // size in mb\n    if ([\"mp4\", \"wmv\", \"avi\"].includes(fileType)) {\n      maxFileSize = 20;\n    }\n    if (docTypes.indexOf(fileType) < 0 || selectedFileSize > maxFileSize) {\n      setShowToast(true, \"The file must be in proper format or size\");\n      return;\n    }\n\n    formData.append(\"file\", newFile);\n    setIsDocUploading(true);\n    let check_type: any = [\"jpeg\", \"jpg\", \"png\"].includes(fileType)\n      ? 1\n      : [\"mp4\", \"wmv\", \"avi\"].includes(fileType)\n      ? 2\n      : null;\n    const res = await onFileUpload(formData);\n    if (res.success && res.imgUrl) {\n      if (check_type === 1) {\n        sendImageVideoMsg(res.imgUrl, \"image\");\n      } else if (check_type === 2) {\n        sendImageVideoMsg(res.imgUrl, \"video\");\n      } else {\n        setShowToast(true, \"There is some technical issue\");\n      }\n      setIsDocUploading(false);\n      // setLocalFiles((prev: any) => ({ ...prev, [filesUrl?.length]: URL.createObjectURL(newFile) }));\n    }\n  };\n\n  const renderTextMsg = (msg: any) => {\n    let curDate = formatDateTime(msg.messageTimestamp, \"day\");\n    const messageClass =\n      msg.senderId === userId ? \"message\" : \"message recive_msg\";\n    if (lastDate === \"\" || lastDate !== curDate) {\n      lastDate = curDate;\n      return (\n        <>\n          <div className=\"date_time\">\n            <span>{curDate}</span>\n          </div>\n          <div className={`${messageClass}`}>\n            <p className={`${msg.senderId === userId ? \"mark\" : \"\"}`}>\n              {msg.messageText}\n              <span className=\"time\">\n                {formatDateTime(msg.messageTimestamp, \"time\")}\n              </span>\n            </p>\n          </div>\n        </>\n      );\n    } else\n      return (\n        <div className={`${messageClass}`}>\n          <p className={`${msg.senderId === userId ? \"mark\" : \"\"}`}>\n            {msg.messageText}\n            <span className=\"time\">\n              {formatDateTime(msg.messageTimestamp, \"time\")}\n            </span>\n          </p>\n        </div>\n      );\n  };\n\n  const renderImageMsg = (msg: any, index: number) => {\n    let curDate = formatDateTime(msg.messageTimestamp, \"day\");\n    const messageClass =\n      msg.senderId === userId ? \"message\" : \"message recive_msg\";\n    if (lastDate === \"\" || lastDate !== curDate) {\n      lastDate = curDate;\n      return (\n        <>\n          <div className=\"date_time\">\n            <span>{curDate}</span>\n          </div>\n          <div className={`${messageClass}`}>\n            <figure className=\"media\">\n              <img\n                src={msg.mediaUrl || notFound}\n                alt=\"media\"\n                async-src={msg.mediaUrl || notFound}\n                decoding=\"async\"\n                loading=\"lazy\"\n                onError={(e: any) => {\n                  if (e?.target?.onerror) {\n                    e.target.onerror = null;\n                  }\n                  if (e?.target?.src) {\n                    e.target.src = notFound;\n                  }\n                }}\n                onClick={() => {\n                  setToggler((prev: any) => !prev);\n                  setSelectSlide(fsSlideListner[`${index}`]);\n                }}\n              />\n              <span className=\"time\">\n                {formatDateTime(msg.messageTimestamp, \"time\")}\n              </span>\n            </figure>\n          </div>\n        </>\n      );\n    } else\n      return (\n        <div className={`${messageClass}`}>\n          <figure className=\"media\">\n            <img\n              src={msg.mediaUrl || notFound}\n              alt=\"media\"\n              async-src={msg.mediaUrl || notFound}\n              decoding=\"async\"\n              loading=\"lazy\"\n              onError={(e: any) => {\n                if (e?.target?.onerror) {\n                  e.target.onerror = null;\n                }\n                if (e?.target?.src) {\n                  e.target.src = notFound;\n                }\n              }}\n              onClick={() => {\n                setToggler((prev: any) => !prev);\n                setSelectSlide(fsSlideListner[`${index}`]);\n              }}\n            />\n            <span className=\"time\">\n              {formatDateTime(msg.messageTimestamp, \"time\")}\n            </span>\n          </figure>\n        </div>\n      );\n  };\n\n  const renderVideoMsg = (msg: any, index: number) => {\n    let curDate = formatDateTime(msg.messageTimestamp, \"day\");\n    const messageClass =\n      msg.senderId === userId ? \"message\" : \"message recive_msg\";\n    if (lastDate === \"\" || lastDate !== curDate) {\n      lastDate = curDate;\n      return (\n        <>\n          <div className=\"date_time\">\n            <span>{curDate}</span>\n          </div>\n          <div className={`${messageClass}`}>\n            <figure className=\"media media_video \">\n              <video\n                src={msg.mediaUrl || notFound}\n                poster={chatVideoIcon}\n                onClick={() => {\n                  setToggler((prev: any) => !prev);\n                  setSelectSlide(fsSlideListner[`${index}`]);\n                }}\n              />\n              <span className=\"time\">\n                {formatDateTime(msg.messageTimestamp, \"time\")}\n              </span>\n            </figure>\n          </div>\n        </>\n      );\n    } else\n      return (\n        <div className={`${messageClass}`}>\n          <figure className=\"media media_video \">\n            <video\n              src={msg.mediaUrl || notFound}\n              poster={chatVideoIcon}\n              onClick={() => {\n                setToggler((prev: any) => !prev);\n                setSelectSlide(fsSlideListner[`${index}`]);\n              }}\n            />\n            <span className=\"time\">\n              {formatDateTime(msg.messageTimestamp, \"time\")}\n            </span>\n          </figure>\n        </div>\n      );\n  };\n\n  const displayMessages = (msg: any, index: number) => {\n    if (index === 0) lastDate = \"\";\n    switch (msg.messageType) {\n      case \"text\":\n        return renderTextMsg(msg);\n      case \"image\":\n        return renderImageMsg(msg, index);\n      case \"video\":\n        return renderVideoMsg(msg, index);\n    }\n  };\n\n  const { sources, types } = renderMediaItems(itemsMedia);\n\n  return props.isNoRecords ? (\n    <div className=\"detail_col\">\n      <div className=\"flex_row\">\n        {/* <div>No Record Found</div> */}\n        <div></div>\n      </div>\n    </div>\n  ) : (\n    <>\n      <FsLightbox\n        toggler={toggler}\n        slide={selectedSlide}\n        sources={sources}\n        types={types}\n        key={sources?.length}\n        // disableLocalStorage={true}\n        onClose={() => {\n          setSelectSlide(1);\n        }}\n      />\n      <div className=\"detail_col\">\n        <div className=\"flex_row\">\n          <div className={`chat_col ${toggle ? \"active\" : \"\"}`}>\n            <div className=\"chat_user\">\n              <figure className=\"u_img\">\n                <img\n                  src={props.roomData?.oppUserInfo?.image || dummy}\n                  alt=\"user-img\"\n                  onError={(e: any) => {\n                    if (e?.target?.onerror) {\n                      e.target.onerror = null;\n                    }\n                    if (e?.target?.src) {\n                      e.target.src = dummy;\n                    }\n                  }}\n                />\n              </figure>\n              <span\n                className=\"name\"\n                onClick={() => {\n                  if (storageService.getItem(\"userType\") === 2) {\n                    props.history.push(\n                      `/tradie-info?tradeId=${props.roomData?.oppUserInfo?.userId}&hideInvite=true`\n                    );\n                  } else {\n                    props.history.push(\n                      `/builder-info?builderId=${props.roomData?.oppUserInfo?.userId}`\n                    );\n                  }\n                }}\n              >\n                {props.roomData?.oppUserInfo?.name}\n              </span>\n              {!toggle && (\n                <span\n                  onClick={() => {\n                    setToggle(true);\n                    if (currentJobDetails) return;\n                    fetchJobDetail(props.roomData?.jobId);\n                  }}\n                  className=\"view_detail\"\n                >\n                  View Job Details\n                  <img src={viewMore} alt=\"view-more\" />\n                </span>\n              )}\n            </div>\n            <div className=\"message_wrapr\" ref={divRref}>\n              {messages.length > 0 &&\n                messages.map((msg: any, index: number) => {\n                  return displayMessages(msg, index);\n                })}\n              <div className=\"date_time\">\n                {props.roomData?.oppUserInfo?.isBlock && (\n                  <i style={{ color: \"#929292\" }}>\n                    {\"You can no longer chat with the user\"}\n                  </i>\n                )}\n              </div>\n            </div>\n\n            {!props.roomData?.oppUserInfo?.isBlock && (\n              <div className=\"send_msg\">\n                <div className=\"text_field\">\n                  <label className=\"upload_item\" htmlFor=\"upload_item\">\n                    <span className=\"detect_icon_ltr\">\n                      <img src={sendMedia} alt=\"media\" />\n                    </span>\n                  </label>\n                  <input\n                    id=\"upload_item\"\n                    className=\"hide\"\n                    type=\"file\"\n                    accept=\"image/png,image/jpg,image/jpeg, video/mp4, video/wmv, video/avi\"\n                    onChange={handleUpload}\n                    disabled={isDocUploading}\n                  />\n                  <textarea\n                    placeholder=\"Message..\"\n                    onKeyDown={handleKeyDown}\n                    value={messageText}\n                    onChange={(e) => setMessageText(e.target.value)}\n                  />\n                  <span className=\"detect_icon\">\n                    <img src={sendBtn} alt=\"send\" onClick={sendMessage} />\n                  </span>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {toggle && jobDetailLoader ? (\n            <div className=\"view_detail_col\">\n              <div className=\"no_record\">\n                <figure>\n                  <img src={loader} alt=\"loader\" width=\"130px\" />\n                </figure>\n              </div>\n            </div>\n          ) : toggle ? (\n            <div className=\"view_detail_col\">\n              <div className=\"f_spacebw relative\">\n                <span className=\"title line-2 pr-20\">\n                  {currentJobDetails?.jobName}\n                </span>\n                <span\n                  onClick={() => {\n                    setToggle((prev) => !prev);\n                  }}\n                  className=\"close\"\n                >\n                  <img src={close} alt=\"close\" />\n                </span>\n              </div>\n\n              <div className=\"job_info\">\n                <ul>\n                  <li className=\"icon clock\">\n                    {renderTime(\n                      currentJobDetails?.fromDate,\n                      currentJobDetails?.toDate\n                    )}\n                  </li>\n                  <li className=\"icon dollar\">{currentJobDetails?.amount}</li>\n                  <li className=\"icon location line-1\">\n                    {currentJobDetails?.locationName}\n                  </li>\n                  <li className=\"icon calendar\">\n                    {currentJobDetails?.duration}\n                  </li>\n                </ul>\n              </div>\n\n              <p className=\"commn_para\">{currentJobDetails?.jobDescription}</p>\n\n              <button\n                className=\"fill_btn full_btn btn-effect\"\n                onClick={() => {\n                  if (storageService.getItem(\"userType\") === 1) {\n                    props.history.push(\n                      `/job-details-page?jobId=${currentJobDetails?.jobId}&redirect_from=jobs`\n                    );\n                  } else {\n                    // let urlEncode: any = window.btoa(`?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`)\n                    let urlEncode: any = `?jobId=${currentJobDetails?.jobId}&status=${currentJobDetails?.status}&edit=true&activeType=active`;\n                    props.history.push(`/job-detail?${urlEncode}`);\n                  }\n                }}\n              >\n                View Job details\n              </button>\n            </div>\n          ) : null}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default UserMessages;\n","import React, { useState, useEffect } from \"react\";\n\nimport dummy from \"../../assets/images/u_placeholder.jpg\";\nimport chatSearch from \"../../assets/images/search-chat.png\";\nimport menu from \"../../assets/images/menu-line-blue.png\";\nimport close from \"../../assets/images/ic-cancel-blue.png\";\n\nimport { setLoading } from \"../../redux/common/actions\";\nimport { formatDateTime } from \"../../utils/common\";\nimport noData from \"../../assets/images/no-search-data.png\";\nimport emptyChat from \"../../assets/images/emptyChat.png\";\n\nimport {\n  auth,\n  createRoom,\n  checkRoomExist,\n  getFirebaseInboxData,\n  stopListeningOfRoom,\n  resetUnreadCounter,\n} from \"../../services/firebase\";\n\nimport UserMessages from \"./userMessages\";\n\ninterface PropTypes {\n  builderProfile: any;\n  tradieProfileData: any;\n  isLoading: boolean;\n  history: any;\n}\n\nlet selectedRoomID = \"\";\nlet isFreshChatRoute: boolean = false;\n\nconst Chat = (props: PropTypes) => {\n  const [initializing, setInitializing] = useState<boolean>(true);\n  // firebase authenticated user details\n  const [user, setUser] = useState<any>(() => auth.currentUser);\n  const [inBoxData, setInBoxData] = useState<any>([]);\n  const [filterInBoxData, setFilterInBoxData] = useState<any>([]);\n  const [isNoRecords, setIsNoRecords] = useState<boolean>(false);\n  const [roomData, setRoomData] = useState<any>({});\n  const [roomId, setRoomId] = useState<string>(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchActive, setSearchActive] = useState(false);\n  const [isInitialLoader, setIsInitialLoader] = useState(true);\n  const [isMobInbox, setIsMobInbox] = useState<boolean>(false);\n\n  const { tradieId, builderId, jobName, jobId } = props.history?.location?.state\n    ? props.history?.location?.state\n    : { tradieId: \"\", builderId: \"\", jobName: \"\", jobId: \"\" };\n  // console.log('tradieId, builderId, jobName, jobId: ', tradieId, builderId, jobName, jobId);\n\n  useEffect(() => {\n    //  console.log(\"roomId:: from didmout\", selectedRoomID);\n    (async () => {\n      setLoading(true);\n      if (tradieId && builderId && jobName && jobId) {\n        await setInitialItems();\n      } else {\n        isFreshChatRoute = true;\n      }\n      await getFirebaseInboxData(onUpdateofInbox);\n      // debugger;\n    })();\n\n    return () => {\n      // debugger;\n      stopListeningOfRoom(selectedRoomID);\n      selectedRoomID = \"\";\n    };\n  }, []);\n\n  const setInitialItems = async () => {\n    const roomID: string = `${jobId}_${tradieId}_${builderId}`;\n    selectedRoomID = roomID;\n    if (await checkRoomExist(roomID)) {\n      //console.log('RoomAlreadyExist: =================>');\n      return;\n    } else {\n      await createRoom(jobId, tradieId, builderId, jobName);\n      // console.log('NewRoomCreated: ============>');\n    }\n  };\n\n  const onUpdateofInbox = async (res: any) => {\n    //  console.log(\"roomId::\", selectedRoomID);\n    let selectedRoomInfo: any = \"\";\n    const sortedRes = res.filter((item: any, index: number) => {\n      if (item.hasOwnProperty(\"lastMsg\") || item.roomId === selectedRoomID) {\n        if (item.roomId === selectedRoomID && !isFreshChatRoute) {\n          selectedRoomInfo = item;\n        } else {\n          return item;\n        }\n      }\n    });\n\n    sortedRes?.sort(function (x: any, y: any) {\n      return y.lastMsg?.messageTimestamp - x.lastMsg?.messageTimestamp;\n    });\n\n    if (sortedRes.length === 0 && !selectedRoomInfo) {\n      setIsNoRecords(true);\n      if (isInitialLoader) {\n        setIsInitialLoader(false);\n        setLoading(false);\n      }\n      return;\n    }\n    setIsNoRecords(false);\n\n    let ress: any;\n    if (selectedRoomInfo) {\n      ress = [...sortedRes];\n      ress.unshift(selectedRoomInfo);\n    }\n    // console.log('ress: ', ress, \"sortedRes\", sortedRes, \"res\", res, \"selectedRoomInfo\", selectedRoomInfo);\n    const newRes = Array.isArray(ress) && selectedRoomInfo ? ress : sortedRes;\n    setInBoxData(newRes.length === 0 ? [{ firstKey: \"emptyRes\" }] : newRes);\n    if (newRes.length > 0 && selectedRoomID === \"\") {\n      selectedRoomID = newRes[0].roomId;\n      setRoomId(newRes[0].roomId);\n      if (newRes[0] && newRes[0]?.unreadMessages > 0) {\n        newRes[0].unreadMessages = 0;\n        resetUnreadCounter(newRes[0].roomId);\n      }\n      setRoomData(newRes[0]);\n      return;\n      // fetchJobDetail(res[0].item?.jobId);\n    }\n\n    if (newRes.length > 0) {\n      let itemObj = newRes.find((x: any) => x.roomId == selectedRoomID);\n\n      if (itemObj && itemObj?.unreadMessages > 0) {\n        itemObj.unreadMessages = 0;\n        resetUnreadCounter(itemObj.roomId);\n      }\n      setRoomData(itemObj);\n    }\n  };\n\n  useEffect(() => {\n    let unsubscribe = auth.onAuthStateChanged((user) => {\n      if (user) {\n        setUser(user);\n        setIsMobInbox(false);\n      } else {\n        setUser(false);\n        setIsMobInbox(true);\n        setLoading(false);\n        setIsInitialLoader(false);\n      }\n      if (initializing) {\n        setInitializing(false);\n      }\n    });\n\n    return unsubscribe;\n  }, [initializing]);\n\n  // console.log(props.history, \"history\", roomId, \"roomId\", roomData, \"roomData\", selectedRoomID, \"selectedRoomID\", inBoxData, 'inBoxData');\n\n  const getRoomDetails = async (item: any) => {\n    stopListeningOfRoom(selectedRoomID);\n    selectedRoomID = item.roomId;\n    setRoomId(item.roomId);\n    setRoomData(item);\n    resetUnreadCounter(item.roomId);\n    // fetchEquipmentDetail(item.itemId);\n  };\n\n  useEffect(() => {\n    if (searchQuery) {\n      let filteredVal = inBoxData.filter((item: any) =>\n        item.oppUserInfo?.name\n          ?.toLowerCase()\n          ?.includes(searchQuery.toLowerCase())\n      );\n      setFilterInBoxData(filteredVal);\n    }\n    if (\n      (inBoxData.length || inBoxData[0]?.[\"firstKey\"] === \"emptyRes\") &&\n      isInitialLoader\n    ) {\n      if (inBoxData[0]?.[\"firstKey\"] === \"emptyRes\") setInBoxData([]);\n      setLoading(false);\n      setIsInitialLoader(false);\n    }\n  }, [searchQuery, inBoxData]);\n\n  return (\n    <div className=\"app_wrapper\">\n      <div className=\"custom_container\">\n        <span className=\"mob_side_nav\" onClick={() => setIsMobInbox(true)}>\n          <img src={menu} alt=\"mob-side-nav\" />\n        </span>\n        <div className=\"f_row chat_wrapr\">\n          <div className={`side_nav_col ${isMobInbox ? \"active\" : \"\"}`}>\n            <button className=\"close_nav\" onClick={() => setIsMobInbox(false)}>\n              <img src={close} alt=\"close\" />\n            </button>\n            <div className=\"stick\">\n              <span className=\"title\" style={{ marginLeft: \"50px\" }}>\n                Chat\n              </span>\n\n              <div\n                className={`search_bar ${searchActive ? \"active\" : \"\"}`}\n                onClick={() => {\n                  setSearchActive(true);\n                }}\n              >\n                <input\n                  type=\"text\"\n                  placeholder=\"Search\"\n                  value={searchQuery}\n                  onChange={(e: any) =>\n                    setSearchQuery(e.target.value.trimLeft())\n                  }\n                />\n                <span className=\"detect_icon_ltr\">\n                  <img src={chatSearch} alt=\"search\" />\n                </span>\n              </div>\n              <ul className=\"chat_list\">\n                {searchQuery ? (\n                  filterInBoxData.length === 0 ? (\n                    <li>\n                      <a href=\"javascript:void(0)\" className=\"chat\">\n                        <div className=\"detail\">\n                          <span className=\"inner_title line-1\">\n                            No Record Found\n                          </span>\n                        </div>\n                      </a>\n                    </li>\n                  ) : (\n                    filterInBoxData.map((item: any) => {\n                      return (\n                        <li\n                          onClick={() => {\n                            getRoomDetails(item);\n                          }}\n                        >\n                          <a\n                            href=\"javascript:void(0)\"\n                            className={`chat ${\n                              selectedRoomID === item.roomId ? \"active\" : \"\"\n                            }`}\n                          >\n                            <figure className=\"u_img\">\n                              <img\n                                src={item.oppUserInfo?.image || dummy}\n                                alt=\"img\"\n                                onError={(e: any) => {\n                                  if (e?.target?.onerror) {\n                                    e.target.onerror = null;\n                                  }\n                                  if (e?.target?.src) {\n                                    e.target.src = dummy;\n                                  }\n                                }}\n                              />\n                            </figure>\n                            <div className=\"detail\">\n                              <span className=\"inner_title line-1\">\n                                {item.oppUserInfo?.name}\n                              </span>\n                              <span className=\"inner_title job line-1\">\n                                {item.jobName}\n                              </span>\n                              <p className=\"commn_para line-1\">\n                                {item.lastMsg?.messageText}\n                              </p>\n                              {item.lastMsg?.messageTimestamp && (\n                                <span className=\"date_time\">\n                                  {formatDateTime(\n                                    item.lastMsg?.messageTimestamp,\n                                    \"inboxTime\"\n                                  )}\n                                </span>\n                              )}\n\n                              {selectedRoomID ===\n                              item.roomId ? null : item.unreadMessages ===\n                                0 ? null : (\n                                <span className=\"count\">\n                                  {item.unreadMessages}\n                                </span>\n                              )}\n                            </div>\n                          </a>\n                        </li>\n                      );\n                    })\n                  )\n                ) : inBoxData?.length > 0 ? (\n                  inBoxData.map((item: any) => {\n                    return (\n                      <li\n                        onClick={() => {\n                          getRoomDetails(item);\n                        }}\n                      >\n                        <a\n                          href=\"javascript:void(0)\"\n                          className={`chat ${\n                            selectedRoomID === item.roomId ? \"active\" : \"\"\n                          }`}\n                        >\n                          <figure className=\"u_img\">\n                            <img\n                              src={item.oppUserInfo?.image || dummy}\n                              alt=\"img\"\n                              onError={(e: any) => {\n                                if (e?.target?.onerror) {\n                                  e.target.onerror = null;\n                                }\n                                if (e?.target?.src) {\n                                  e.target.src = dummy;\n                                }\n                              }}\n                            />\n                          </figure>\n                          <div className=\"detail\">\n                            <span className=\"inner_title line-1\">\n                              {item.oppUserInfo?.name}\n                            </span>\n                            <span className=\"inner_title job line-1\">\n                              {item.jobName}\n                            </span>\n                            <p className=\"commn_para line-1\">\n                              {item.lastMsg?.messageType === \"text\" ? (\n                                item.lastMsg?.messageText\n                              ) : item.lastMsg?.messageType === \"image\" ? (\n                                <i style={{ color: \"#929292\" }}>Photo</i>\n                              ) : item.lastMsg?.messageType === \"video\" ? (\n                                <i style={{ color: \"#929292\" }}>Video</i>\n                              ) : (\n                                \"\"\n                              )}\n                            </p>\n                            {item.lastMsg?.messageTimestamp && (\n                              <span className=\"date_time\">\n                                {formatDateTime(\n                                  item.lastMsg?.messageTimestamp,\n                                  \"inboxTime\"\n                                )}\n                              </span>\n                            )}\n                            {selectedRoomID ===\n                            item.roomId ? null : item.unreadMessages ===\n                              0 ? null : (\n                              <span className=\"count\">\n                                {item.unreadMessages}\n                              </span>\n                            )}\n                          </div>\n                        </a>\n                      </li>\n                    );\n                  })\n                ) : props.isLoading ? null : (\n                  <li>\n                    <a href=\"javascript:void(0)\" className=\"chat\">\n                      <div className=\"detail\">\n                        <span className=\"inner_title line-1\">\n                          No Record Found\n                        </span>\n                      </div>\n\n                      {/* <div className=\"detail\">\n                        <span className=\"no_record\">\n                          <figure>\n                            <figure className=\"no_img\">\n                              <img src={emptyChat} alt=\"data not found\" />\n                            </figure>\n                          </figure>\n\n                          <span className=\"empty_screen_text\">\n                            You don't have any chat messages yet.\n                          </span>\n                          <span className=\"empty_screen_subtext\">\n                            Connect to your local network\n                          </span>\n                          <button\n                            className=\"empty_screen_button\"\n                            onClick={() => props.history.push(\"/\")}\n                          >\n                            View Recommended tradespeople\n                          </button>\n                        </span>\n                      </div> */}\n                    </a>\n                  </li>\n                )}\n              </ul>\n            </div>\n          </div>\n          {/* {(isInitialLoader || inBoxData?.length === 0) ? null : */}\n          {isInitialLoader ? null : !isInitialLoader &&\n            inBoxData?.length === 0 ? (\n            <div className=\"detail_col\">\n              <div className=\"flex_row tradies_row\">\n                <div className=\"no_record\">\n                  <figure className=\"no_img\">\n                    <img src={noData} alt=\"data not found\" />\n                  </figure>\n                  <span>No Data Found</span>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <UserMessages\n              roomId={selectedRoomID}\n              roomData={roomData}\n              isNoRecords={isNoRecords}\n              history={props.history}\n              isLoading={props.isLoading}\n              inBoxData={inBoxData}\n              setInBoxData={setInBoxData}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Chat from './chat';\n\nconst mapStateToProps = (state: any) => {\n    return {\n        isLoading: state.common.isLoading,\n        isSkeletonLoading: state.common.isSkeletonLoading,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: any) => {\n    return bindActionCreators({\n    }, dispatch);\n}\n\nconst ChatComponent = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Chat)\n\nexport default ChatComponent;"]}}