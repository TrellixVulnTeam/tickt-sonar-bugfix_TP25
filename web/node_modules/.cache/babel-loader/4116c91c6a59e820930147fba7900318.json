{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{profileTemplateList,getMileStoneByTempId}from'../../../redux/jobs/actions';import moment from'moment';import noData from'../../../assets/images/no-search-data.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MileStoneTemplates=function MileStoneTemplates(props){var data=props.data,isLoading=props.isLoading,stepCompleted=props.stepCompleted,handleCombineMileStones=props.handleCombineMileStones,handleStepForward=props.handleStepForward,handleStepComplete=props.handleStepComplete,handleStepBack=props.handleStepBack;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),localFetch=_useState4[0],setLocalFetch=_useState4[1];var preFetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$profileTemplat,success,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return profileTemplateList();case 2:_yield$profileTemplat=_context.sent;success=_yield$profileTemplat.success;data=_yield$profileTemplat.data;if(success&&(data===null||data===void 0?void 0:data.length)){setList(data);setLocalFetch(true);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function preFetch(){return _ref.apply(this,arguments);};}();var formatMilestones=function formatMilestones(_ref2){var items=_ref2.items;var miles=items===null||items===void 0?void 0:items.milestones;if(miles===null||miles===void 0?void 0:miles.length){return miles.map(function(item){if(item===null||item===void 0?void 0:item.fromDate){item['fromDate']=moment(item===null||item===void 0?void 0:item.fromDate).format('MM-DD-YYYY');}if(item===null||item===void 0?void 0:item.toDate){item['toDate']=moment(item===null||item===void 0?void 0:item.toDate).format('MM-DD-YYYY');}return item;});}};var handleContinue=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$getMileStoneBy,success,data,_data$milestones,_props$data,to_date,from_date,selected_milestone,filter_milestones;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getMileStoneByTempId(id);case 2:_yield$getMileStoneBy=_context2.sent;success=_yield$getMileStoneBy.success;data=_yield$getMileStoneBy.data;if(success&&data){_props$data=props===null||props===void 0?void 0:props.data,to_date=_props$data.to_date,from_date=_props$data.from_date;selected_milestone=formatMilestones({items:data});filter_milestones=data===null||data===void 0?void 0:(_data$milestones=data.milestones)===null||_data$milestones===void 0?void 0:_data$milestones.map(function(item){return{from_date:moment(item===null||item===void 0?void 0:item.fromDate,'MM-DD-YYYY').format('MM-DD-YYYY'),to_date:moment(item===null||item===void 0?void 0:item.toDate,'MM-DD-YYYY').isValid()?moment(item===null||item===void 0?void 0:item.toDate,'MM-DD-YYYY').format('MM-DD-YYYY'):'',milestone_name:item===null||item===void 0?void 0:item.milestoneName,recommended_hours:item===null||item===void 0?void 0:item.recommendedHours,isPhotoevidence:(item===null||item===void 0?void 0:item.isPhotoevidence)||false};});handleCombineMileStones(filter_milestones);handleStepForward(6);}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleContinue(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){preFetch();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"custom_container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:function onClick(){handleStepForward(6);}}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:'Milestone Templates'})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"milestone_templates\",children:(list===null||list===void 0?void 0:list.length)?list.map(function(_ref4){var templateId=_ref4.templateId,templateName=_ref4.templateName,milestoneCount=_ref4.milestoneCount;return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){handleContinue(templateId);},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"name\",children:[templateName,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count\",children:[milestoneCount,/*#__PURE__*/_jsx(\"span\",{children:\"milestones\"})]})]});}):null})}),!isLoading&&!(list===null||list===void 0?void 0:list.length)?/*#__PURE__*/_jsxs(\"div\",{className:\"no_record m-t-vh\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"no_img\",children:/*#__PURE__*/_jsx(\"img\",{src:noData,alt:\"data not found\"})}),/*#__PURE__*/_jsx(\"span\",{children:'No Data Found'})]}):null]})]})})})});};export default MileStoneTemplates;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/milestoneTemplates.tsx"],"names":["React","useEffect","useState","profileTemplateList","getMileStoneByTempId","moment","noData","MileStoneTemplates","props","data","isLoading","stepCompleted","handleCombineMileStones","handleStepForward","handleStepComplete","handleStepBack","list","setList","localFetch","setLocalFetch","preFetch","success","length","formatMilestones","items","miles","milestones","map","item","fromDate","format","toDate","handleContinue","id","to_date","from_date","selected_milestone","filter_milestones","isValid","milestone_name","milestoneName","recommended_hours","recommendedHours","isPhotoevidence","templateId","templateName","milestoneCount"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Constants from '../../../utils/constants';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { profileTemplateList, getMileStoneByTempId } from '../../../redux/jobs/actions';\nimport moment from 'moment';\nimport noData from '../../../assets/images/no-search-data.png';\n\ninterface Proptypes {\n    data: any;\n    isLoading: any,\n    stepCompleted: Boolean;\n    handleStepComplete: (data: any) => void;\n    handleStepForward: (data: any) => void;\n    handleCombineMileStones: (data: any) => void;\n    handleStepBack: () => void;\n}\n\nconst MileStoneTemplates = (props: Proptypes) => {\n    const { data, isLoading, stepCompleted, handleCombineMileStones, handleStepForward, handleStepComplete, handleStepBack } = props;\n    const [list, setList] = useState([]);\n    const [localFetch, setLocalFetch] = useState(false);\n\n    const preFetch = async () => {\n        let { success, data } = await profileTemplateList();\n        if (success && data?.length) {\n            setList(data)\n            setLocalFetch(true)\n        }\n    }\n\n    const formatMilestones = ({ items }: any) => {\n        let miles: any = items?.milestones;\n        if (miles?.length) {\n            return miles.map((item: any) => {\n                if (item?.fromDate) {\n                    item['fromDate'] = moment(item?.fromDate).format('MM-DD-YYYY');\n                }\n\n                if (item?.toDate) {\n                    item['toDate'] = moment(item?.toDate).format('MM-DD-YYYY');\n                }\n\n                return item;\n            })\n        }\n    }\n\n    const handleContinue = async (id: any) => {\n        let { success, data } = await getMileStoneByTempId(id);\n\n        if (success && data) {\n            let { to_date, from_date } = props?.data;\n            let selected_milestone: any = formatMilestones({ items: data });\n            let filter_milestones = data?.milestones?.map((item: any) => ({\n                from_date: moment(item?.fromDate, 'MM-DD-YYYY').format('MM-DD-YYYY'),\n                to_date: moment(item?.toDate, 'MM-DD-YYYY').isValid() ? moment(item?.toDate, 'MM-DD-YYYY').format('MM-DD-YYYY') : '',\n                milestone_name: item?.milestoneName,\n                recommended_hours: item?.recommendedHours,\n                isPhotoevidence: item?.isPhotoevidence || false,\n            }))\n           \n            handleCombineMileStones(filter_milestones);\n            handleStepForward(6);\n        }\n    }\n\n    useEffect(() => {\n        preFetch();\n    }, []);\n\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"section_wrapper\">\n                <div className=\"custom_container\">\n                    <div className=\"form_field\">\n                        <div className=\"flex_row\">\n                            <div className=\"flex_col_sm_5\">\n                                <div className=\"relate\">\n                                    <button className=\"back\" onClick={() => { handleStepForward(6) }}></button>\n                                    <span className=\"title\">{'Milestone Templates'}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"flex_row\">\n                            <div className=\"flex_col_sm_6\">\n                                <ul className=\"milestone_templates\">\n                                    {list?.length ?\n                                        list.map(({ templateId, templateName, milestoneCount }: any) => (\n                                            <li\n                                                onClick={() => { handleContinue(templateId) }}\n                                            >\n                                                <span className=\"name\">{templateName} </span>\n                                                <div className=\"count\">{milestoneCount}\n                                                    <span>milestones</span>\n                                                </div>\n                                            </li>\n                                        )) : null}\n                                </ul>\n                            </div>\n\n                            {!isLoading && !list?.length ? (\n                                <div className=\"no_record m-t-vh\">\n                                    <figure className=\"no_img\">\n                                        <img src={noData} alt=\"data not found\" />\n                                    </figure>\n                                    <span>{'No Data Found'}</span>\n                                </div>\n                            ) : null}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default MileStoneTemplates;\n"]},"metadata":{},"sourceType":"module"}