{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{checkEmailId}from'../../../redux/auth/actions';import Constants from'../../../utils/constants';import regex from'../../../utils/regex';import SocialAuth from\"../../../common/auth/socialAuth\";import{setShowToast}from'../../../redux/common/actions';import Urls from'../../../network/Urls';import{urlFor}from'../../../network/Urls';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateAccount=function CreateAccount(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState({firstName:props.data.firstName,email:props.data.email,tnc:false}),_useState4=_slicedToArray(_useState3,2),signupData=_useState4[0],setSignupData=_useState4[1];var changeHandler=function changeHandler(e){setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},e.target.name,e.target.value));});};var tncHandler=function tncHandler(){setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{tnc:!prevData.tnc});});};var validateForm=function validateForm(){var newErrors={};if(!signupData.firstName){newErrors.firstName=Constants.errorStrings.fullNameEmpty;}else{var nameRegex=new RegExp(regex.fullname);if(!nameRegex.test(signupData.firstName.trim())){newErrors.firstName=Constants.errorStrings.fullNameErr;}}if(!signupData.email){newErrors.email=Constants.errorStrings.emailEmpty;}else{var emailRegex=new RegExp(regex.email);if(!emailRegex.test(signupData.email)){newErrors.email=Constants.errorStrings.emailErr;}}if(!signupData.tnc){newErrors.tnc=Constants.errorStrings.tncEmpty;}setErrors(newErrors);return!Object.keys(newErrors).length;};var phoneViewHandler=function phoneViewHandler(e){e.preventDefault();if(props.showModal){props.modalUpdateSteps(0);return;}props.history.push('/login');};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_objectSpread({},signupData);delete data.tnc;e.preventDefault();if(!validateForm()){_context.next=9;break;}_context.next=6;return checkEmailId(signupData.email);case 6:res=_context.sent;(res===null||res===void 0?void 0:res.isProfileCompleted)&&setShowToast(true,res.message);if(!res.isProfileCompleted&&res.success){props.updateSteps(props.step+1,data);}case 9:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"form_wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Full Name\",value:signupData.firstName,name:\"firstName\",onChange:changeHandler})}),!!errors.firstName&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{className:\"detect_input\",name:\"email\",value:signupData.email,placeholder:\"Enter Email Address\",onChange:changeHandler})}),!!errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"filter-type filled-in\",type:\"checkbox\",name:\"tnc\",id:\"tnc\",checked:signupData.tnc,onChange:tncHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tnc\",children:\"I agree to \"}),/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return window.open(urlFor(Urls.privacyPolicyWeb),\"_blank\");},rel:\"noopener\",className:\"link\",children:\"Privacy Policy\"}),/*#__PURE__*/_jsx(\"label\",{className:\"and\",children:\"\\xA0and\\xA0\"}),/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return window.open(urlFor(Urls.tncWeb),\"_blank\");},rel:\"noopener\",className:\"link m-l-30\",children:\"Terms & Conditions\"})]}),!!errors.tnc&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg m-t\",children:errors.tnc})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"fill_btn btn-effect\",children:\"Sign up\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"show_label text-center\",children:\"or continue with\"}),/*#__PURE__*/_jsx(SocialAuth,{onNewAccount:props.onNewAccount,history:props.history,userType:props.data.user_type,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field hide text-center\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"reg\",children:[\"Have an account? \",/*#__PURE__*/_jsx(\"a\",{className:\"link\",onClick:phoneViewHandler,children:\"Login\"})]})})]})});};export default CreateAccount;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/signup/components/createAccount.tsx"],"names":["useState","checkEmailId","Constants","regex","SocialAuth","setShowToast","Urls","urlFor","CreateAccount","props","errors","setErrors","firstName","data","email","tnc","signupData","setSignupData","changeHandler","e","prevData","target","name","value","tncHandler","validateForm","newErrors","errorStrings","fullNameEmpty","nameRegex","RegExp","fullname","test","trim","fullNameErr","emailEmpty","emailRegex","emailErr","tncEmpty","Object","keys","length","phoneViewHandler","preventDefault","showModal","modalUpdateSteps","history","push","onSubmit","res","isProfileCompleted","message","success","updateSteps","step","window","open","privacyPolicyWeb","tncWeb","onNewAccount","user_type","setShowModal"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { checkEmailId } from '../../../redux/auth/actions';\nimport Constants from '../../../utils/constants';\nimport regex from '../../../utils/regex';\nimport SocialAuth from \"../../../common/auth/socialAuth\";\nimport { setShowToast } from '../../../redux/common/actions';\nimport Urls from '../../../network/Urls';\nimport { urlFor } from '../../../network/Urls';\ninterface Propstype {\n    updateSteps: (num: number, data: any) => void,\n    step: number,\n    history?: any,\n    data: any,\n    onNewAccount: Function,\n    showModal?: boolean,\n    modalUpdateSteps: (data: any) => void,\n    setShowModal: (data: any) => void,\n}\n\nconst CreateAccount = (props: Propstype) => {\n    const [errors, setErrors] = useState<any>({});\n    const [signupData, setSignupData] = useState<any>({\n        firstName: props.data.firstName,\n        email: props.data.email,\n        tnc: false,\n    })\n\n    const changeHandler = (e: any) => {\n        setSignupData((prevData: any) => ({ ...prevData, [e.target.name]: e.target.value }))\n    }\n\n    const tncHandler = () => {\n        setSignupData((prevData: any) => ({ ...prevData, tnc: !prevData.tnc }))\n    }\n\n    const validateForm = () => {\n        const newErrors: any = {};\n        if (!signupData.firstName) {\n            newErrors.firstName = Constants.errorStrings.fullNameEmpty;\n        } else {\n            const nameRegex = new RegExp(regex.fullname);\n            if (!nameRegex.test(signupData.firstName.trim())) {\n                newErrors.firstName = Constants.errorStrings.fullNameErr\n            }\n        }\n        if (!signupData.email) {\n            newErrors.email = Constants.errorStrings.emailEmpty;\n        } else {\n            const emailRegex = new RegExp(regex.email);\n            if (!emailRegex.test(signupData.email)) {\n                newErrors.email = Constants.errorStrings.emailErr;\n            }\n        }\n        if (!signupData.tnc) {\n            newErrors.tnc = Constants.errorStrings.tncEmpty;\n        }\n        setErrors(newErrors);\n        return !Object.keys(newErrors).length;\n    }\n\n    const phoneViewHandler = (e: any) => {\n        e.preventDefault();\n        if(props.showModal){\n            props.modalUpdateSteps(0)\n            return;\n        }\n        props.history.push('/login')\n    }\n\n    const onSubmit = async (e: any) => {\n        const data = { ...signupData };\n        delete data.tnc;\n        e.preventDefault();\n        if (validateForm()) {\n            const res: any = await checkEmailId(signupData.email)\n            res?.isProfileCompleted && setShowToast(true, res.message);\n            if (!res.isProfileCompleted && res.success) {\n                props.updateSteps(props.step + 1, data)\n            }\n        }\n    }\n\n    return (\n        <div className=\"form_wrapper\">\n            <form onSubmit={onSubmit}>\n                <div className=\"form_field\">\n                    <label className=\"form_label\">Full Name</label>\n                    <div className=\"text_field\">\n                        <input placeholder=\"Enter Full Name\" value={signupData.firstName} name=\"firstName\" onChange={changeHandler} />\n                    </div>\n                    {!!errors.firstName && <span className=\"error_msg\">{errors.firstName}</span>}\n                </div>\n\n                <div className=\"form_field\">\n                    <label className=\"form_label\">Email</label>\n                    <div className=\"text_field\">\n                        <input className=\"detect_input\" name=\"email\" value={signupData.email}\n                            placeholder=\"Enter Email Address\" onChange={changeHandler} />\n                    </div>\n                    {!!errors.email && <span className=\"error_msg\">{errors.email}</span>}\n                </div>\n\n\n                <div className=\"form_field\">\n                    <div className=\"checkbox_wrap agree_check\">\n                        <input className=\"filter-type filled-in\" type=\"checkbox\" name=\"tnc\" id=\"tnc\"\n                            checked={signupData.tnc} onChange={tncHandler} />\n                        <label htmlFor=\"tnc\">I agree to </label>\n                        <a onClick={() => window.open(urlFor(Urls.privacyPolicyWeb), \"_blank\")} rel=\"noopener\" className=\"link\">Privacy Policy</a>\n                        <label className=\"and\">&nbsp;and&nbsp;</label>\n                        <a onClick={() => window.open(urlFor(Urls.tncWeb), \"_blank\")}  rel=\"noopener\" className=\"link m-l-30\">Terms &amp; Conditions</a>\n                    </div>\n                    {!!errors.tnc && <span className=\"error_msg m-t\">{errors.tnc}</span>}\n                </div>\n                <div className=\"form_field\">\n                    <button type=\"submit\" className=\"fill_btn btn-effect\">Sign up</button>\n                </div>\n                <span className=\"show_label text-center\">or continue with</span>\n                <SocialAuth onNewAccount={props.onNewAccount}\n                    history={props.history}\n                    userType={props.data.user_type}\n                    showModal={props.showModal}\n                    setShowModal={props.setShowModal}\n                    modalUpdateSteps={props.modalUpdateSteps}\n                />\n                <div className=\"form_field hide text-center\">\n                    <span className=\"reg\">Have an account? <a className=\"link\" onClick={phoneViewHandler}>\n                        Login</a></span>\n                </div>\n\n            </form>\n        </div>\n    )\n}\n\nexport default CreateAccount\n"]},"metadata":{},"sourceType":"module"}