{"ast":null,"code":"import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';// @ts-ignore\n// import PlacesAutocomplete from 'react-places-autocomplete';\nimport PlacesAutocomplete from'react-places-autocomplete';import icgps from\"../../../assets/images/ic-gps.png\";import Geocode from\"react-geocode\";import{setShowToast,setLoading}from'../../../redux/common/actions';import cross from\"../../../assets/images/close-black.png\";import Constants from'../../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Geocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);Geocode.setLanguage(\"en\");Geocode.setRegion('au');// Enable or disable logs. Its optional.\nGeocode.enableDebug();var searchOptions={componentRestrictions:{country:\"au\"},types:[\"(cities)\"]};var AddLocation=function AddLocation(_ref){var data=_ref.data,stepCompleted=_ref.stepCompleted,handleStepComplete=_ref.handleStepComplete,handleStepBack=_ref.handleStepBack;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState({location:{},location_name:''}),_useState4=_slicedToArray(_useState3,2),locationDetails=_useState4[0],setLocationDetails=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),localChanges=_useState8[0],setLocationChanges=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),activeCurrent=_useState10[0],setActiveCurrent=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),inputFocus=_useState12[0],setInputFocus=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),locationSelected=_useState14[0],setLocationSelected=_useState14[1];var updateLocalData=function updateLocalData(data){setLocationDetails({location:{type:'Point',coordinates:data===null||data===void 0?void 0:data.coordinates},location_name:data===null||data===void 0?void 0:data.location_name});};useEffect(function(){if(stepCompleted&&!localChanges){updateLocalData(data);setAddress(data===null||data===void 0?void 0:data.location_name);setLocationSelected(true);setLocationChanges(true);}if((address===null||address===void 0?void 0:address.length)>2){var _document$getElementB;setActiveCurrent(false);(_document$getElementB=document.getElementById('location_search_dynamic'))===null||_document$getElementB===void 0?void 0:_document$getElementB.focus();}else{var _document$getElementB2;setActiveCurrent(false);(_document$getElementB2=document.getElementById('location_search_static'))===null||_document$getElementB2===void 0?void 0:_document$getElementB2.focus();}},[address,stepCompleted,data]);var filterFromAddress=function filterFromAddress(response){var city,state,country=null;for(var i=0;i<response.results[0].address_components.length;i++){for(var j=0;j<response.results[0].address_components[i].types.length;j++){switch(response.results[0].address_components[i].types[j]){case\"locality\":city=response.results[0].address_components[i].long_name;break;case\"administrative_area_level_1\":state=response.results[0].address_components[i].long_name;break;case\"country\":country=response.results[0].address_components[i].long_name;break;}}}return{city:city,state:state,country:country.toLowerCase()};};var getCurrentLocation=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _navigator,_navigator$permission;var permission_web,_position$,_position$2,item_position,position,longitude,latitude,response,_filterFromAddress,city,state,country,_address,coordinates_values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setActiveCurrent(true);_context.next=4;return(_navigator=navigator)===null||_navigator===void 0?void 0:(_navigator$permission=_navigator.permissions)===null||_navigator$permission===void 0?void 0:_navigator$permission.query({name:'geolocation'});case 4:permission_web=_context.sent;if(!(permission_web.state!=='denied')){_context.next=25;break;}setLoading(true);item_position=localStorage.getItem('position');position=JSON.parse(item_position);longitude=(_position$=position[0])===null||_position$===void 0?void 0:_position$.toString();latitude=(_position$2=position[1])===null||_position$2===void 0?void 0:_position$2.toString();_context.prev=11;_context.next=14;return Geocode.fromLatLng(latitude,longitude);case 14:response=_context.sent;console.log({response:response});_filterFromAddress=filterFromAddress(response),city=_filterFromAddress.city,state=_filterFromAddress.state,country=_filterFromAddress.country;if(response&&[\"australia\",\"au\"].includes(country)){_address=response.results[0].formatted_address;coordinates_values=[latitude,longitude];setLocation({coordinates:coordinates_values,address:_address});setLoading(false);}else{setShowToast(true,\"Uh Oh! We don't provide service currently in your location\");setLoading(false);}_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](11);console.log({err:_context.t0});case 23:_context.next=26;break;case 25:setError('Please enable the location permission from the browser settings so that Tickt app can access your location');case 26:case\"end\":return _context.stop();}}},_callee,null,[[11,20]]);}));return function getCurrentLocation(_x){return _ref2.apply(this,arguments);};}();var handleContinue=function handleContinue(e){var _data$location,_data$location$coordi;e.preventDefault();var locationAddress=locationDetails;if((data===null||data===void 0?void 0:(_data$location=data.location)===null||_data$location===void 0?void 0:(_data$location$coordi=_data$location.coordinates)===null||_data$location$coordi===void 0?void 0:_data$location$coordi.length)&&(data===null||data===void 0?void 0:data.location_name)===address){var _data$location2;locationAddress.location['coordinates']=data===null||data===void 0?void 0:(_data$location2=data.location)===null||_data$location2===void 0?void 0:_data$location2.coordinates;handleStepComplete(locationAddress);return;}else{var _locationAddress$loca,_locationAddress$loca2;if(locationAddress===null||locationAddress===void 0?void 0:(_locationAddress$loca=locationAddress.location)===null||_locationAddress$loca===void 0?void 0:(_locationAddress$loca2=_locationAddress$loca.coordinates)===null||_locationAddress$loca2===void 0?void 0:_locationAddress$loca2.length){handleStepComplete(locationDetails);return;}}setError('please choose current location or search a location.');};var setLocation=function setLocation(_ref3){var coordinates=_ref3.coordinates,address=_ref3.address;setLocationDetails({location:{type:'Point',coordinates:coordinates},location_name:address});setAddress(address);setError('');};var handleSelect=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address){var coordinates_response,_coordinates_response,lat,lng;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLocationSelected(true);_context2.prev=1;_context2.next=4;return Geocode.fromAddress(address);case 4:coordinates_response=_context2.sent;if(coordinates_response){_coordinates_response=coordinates_response.results[0].geometry.location,lat=_coordinates_response.lat,lng=_coordinates_response.lng;setLocation({coordinates:[lng,lat],address:address});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log({err:_context2.t0});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleSelect(_x2){return _ref4.apply(this,arguments);};}();var checkErrors=function checkErrors(){var _location_details$loc,_location_details$loc2,_location_details$loc3;var location_details=locationDetails;if(!(location_details===null||location_details===void 0?void 0:(_location_details$loc=location_details.location)===null||_location_details$loc===void 0?void 0:(_location_details$loc2=_location_details$loc.coordinates)===null||_location_details$loc2===void 0?void 0:_location_details$loc2.length)&&!(location_details===null||location_details===void 0?void 0:(_location_details$loc3=location_details.location_name)===null||_location_details$loc3===void 0?void 0:_location_details$loc3.length)&&!(address===null||address===void 0?void 0:address.length)){return true;}return false;};// Please enable the location permission from the settings so that Tickt app can access your location\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:handleStepBack}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:\"Location\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"commn_para\",children:\"Type the place for your job\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text_field \".concat(address.length>2?'none':''),children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Type a State, city or suburb\",value:address// style={{ display:address.length > 2  ? 'none' : '' }}\n,id:\"location_search_static\",onChange:function onChange(e){return setAddress(e.target.value.trimLeft());},autoComplete:\"off\",onFocus:function onFocus(x){// console.log('Input - 1')\n}})}),/*#__PURE__*/_jsx(PlacesAutocomplete// debounce={400}\n,{value:address,onChange:function onChange(value){setLocationSelected(false);setAddress(value.trimLeft());},searchOptions:searchOptions,onSelect:handleSelect,children:function children(_ref5){var _locationDetails$loca,_locationDetails$loca2;var getInputProps=_ref5.getInputProps,suggestions=_ref5.suggestions,getSuggestionItemProps=_ref5.getSuggestionItemProps,loading=_ref5.loading;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"location_search_dynamic\",onFocus:function onFocus(x){setInputFocus(true);}// style={{ display: address?.length < 3 ? 'none+!important' : '' }}\n},getInputProps({placeholder:'Type a State, city or suburb',className:\"\".concat((address===null||address===void 0?void 0:address.length)<2?'none':'location-search-input detect_input')}))),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat((address===null||address===void 0?void 0:address.length)<2?'none':'detect_icon'),children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){setAddress('');// setLocation({});\nsetLocation({coordinates:[],address:''});setLocationSelected(false);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"autocomplete-drop-down-map-container\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),!locationSelected&&!loading&&!(suggestions===null||suggestions===void 0?void 0:suggestions.length)&&(address===null||address===void 0?void 0:address.length)>2&&!(locationDetails===null||locationDetails===void 0?void 0:(_locationDetails$loca=locationDetails.location)===null||_locationDetails$loca===void 0?void 0:(_locationDetails$loca2=_locationDetails$loca.coordinates)===null||_locationDetails$loca2===void 0?void 0:_locationDetails$loca2.length)?/*#__PURE__*/_jsx(\"div\",{className:\"loc_suggestions\",children:'No Result Found.'}):'',!locationSelected&&!loading&&(suggestions===null||suggestions===void 0?void 0:suggestions.length)&&(address===null||address===void 0?void 0:address.length)>2?suggestions.map(function(suggestion){var className=suggestion.active?'suggestion-item--active':'suggestion-item';// inline style for demonstration purpose\nvar style=suggestion.active?{backgroundColor:'#fafafa',cursor:'pointer'}:{backgroundColor:'#ffffff',cursor:'pointer'};return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},getSuggestionItemProps(suggestion,{className:className,style:style})),{},{children:/*#__PURE__*/_jsx(\"div\",{className:\"loc_suggestions\",children:suggestion.description})}));}):null]})]});}}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"button\",{className:activeCurrent?'location-btn fill_btn':\"location-btn\",onClick:getCurrentLocation,children:[/*#__PURE__*/_jsx(\"span\",{className:\"gps_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:icgps,alt:\"gps-icon\"})}),'Use my current location']})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn full_btn btn-effect \".concat(checkErrors()?'disable_btn':''),onClick:handleContinue,children:\"Continue\"})})]})})]})})});};export default AddLocation;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/addLocation.tsx"],"names":["useEffect","useState","PlacesAutocomplete","icgps","Geocode","setShowToast","setLoading","cross","Constants","setApiKey","SocialAuth","GOOGLE_GEOCODE_KEY","setLanguage","setRegion","enableDebug","searchOptions","componentRestrictions","country","types","AddLocation","data","stepCompleted","handleStepComplete","handleStepBack","address","setAddress","location","location_name","locationDetails","setLocationDetails","error","setError","localChanges","setLocationChanges","activeCurrent","setActiveCurrent","inputFocus","setInputFocus","locationSelected","setLocationSelected","updateLocalData","type","coordinates","length","document","getElementById","focus","filterFromAddress","response","city","state","i","results","address_components","j","long_name","toLowerCase","getCurrentLocation","e","preventDefault","navigator","permissions","query","name","permission_web","item_position","localStorage","getItem","position","JSON","parse","longitude","toString","latitude","fromLatLng","console","log","includes","formatted_address","coordinates_values","setLocation","err","handleContinue","locationAddress","handleSelect","fromAddress","coordinates_response","geometry","lat","lng","checkErrors","location_details","target","value","trimLeft","x","getInputProps","suggestions","getSuggestionItemProps","loading","placeholder","className","map","suggestion","active","style","backgroundColor","cursor","description"],"mappings":"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","sourcesContent":["\nimport { useEffect, useState } from 'react';\n// @ts-ignore\n// import PlacesAutocomplete from 'react-places-autocomplete';\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from 'react-places-autocomplete';\nimport icgps from \"../../../assets/images/ic-gps.png\";\nimport Geocode from \"react-geocode\";\nimport { setShowToast, setLoading } from '../../../redux/common/actions';\nimport cross from \"../../../assets/images/close-black.png\";\nimport Constants from '../../../utils/constants';\n\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\nGeocode.setLanguage(\"en\");\nGeocode.setRegion('au');\n// Enable or disable logs. Its optional.\nGeocode.enableDebug();\ninterface Proptypes {\n  data: any;\n  stepCompleted: Boolean;\n  handleStepComplete: (data: any) => void;\n  handleStepBack: () => void;\n}\n\nconst searchOptions = {\n  componentRestrictions: { country: \"au\" },\n  types: [\"(cities)\"]\n}\n\nconst AddLocation = ({ data, stepCompleted, handleStepComplete, handleStepBack }: Proptypes) => {\n  const [address, setAddress] = useState('');\n  const [locationDetails, setLocationDetails] = useState<{ [index: string]: any }>({ location: {}, location_name: '' });\n  const [error, setError] = useState('');\n  const [localChanges, setLocationChanges] = useState(false);\n  const [activeCurrent, setActiveCurrent] = useState(false);\n  const [inputFocus, setInputFocus] = useState(false);\n  const [locationSelected, setLocationSelected] = useState(false);\n\n  const updateLocalData = (data: any) => {\n    setLocationDetails({\n      location: {\n        type: 'Point',\n        coordinates: data?.coordinates\n      },\n      location_name: data?.location_name\n    });\n  }\n\n  useEffect(() => {\n    if (stepCompleted && !localChanges) {\n      updateLocalData(data);\n      setAddress(data?.location_name);\n      setLocationSelected(true);\n      setLocationChanges(true);\n    }\n\n    if (address?.length > 2) {\n      setActiveCurrent(false);\n      document.getElementById('location_search_dynamic')?.focus();\n    } else {\n      setActiveCurrent(false);\n      document.getElementById('location_search_static')?.focus();\n    }\n  }, [address, stepCompleted, data])\n\n\n  const filterFromAddress = (response: any) => {\n    let city, state, country = null;\n    for (let i = 0; i < response.results[0].address_components.length; i++) {\n      for (let j = 0; j < response.results[0].address_components[i].types.length; j++) {\n        switch (response.results[0].address_components[i].types[j]) {\n          case \"locality\":\n            city = response.results[0].address_components[i].long_name;\n            break;\n          case \"administrative_area_level_1\":\n            state = response.results[0].address_components[i].long_name;\n            break;\n          case \"country\":\n            country = response.results[0].address_components[i].long_name;\n            break;\n        }\n      }\n    }\n    return { city, state, country: country.toLowerCase() };\n  }\n\n  const getCurrentLocation = async (e: any) => {\n    e.preventDefault();\n    setActiveCurrent(true);\n    let permission_web = await navigator?.permissions?.query({ name: 'geolocation' });\n\n    if (permission_web.state !== 'denied') {\n      setLoading(true)\n      let item_position: any = localStorage.getItem('position');\n      let position = JSON.parse(item_position);\n      let longitude = (position[0])?.toString();\n      let latitude = (position[1])?.toString();\n      try {\n        let response: any = await Geocode.fromLatLng(latitude, longitude);\n        console.log({response});\n        const { city, state, country } = filterFromAddress(response);\n        if (response && [\"australia\", \"au\"].includes(country)) {\n          const address = response.results[0].formatted_address;\n          let coordinates_values = [latitude, longitude];\n          setLocation({ coordinates: coordinates_values, address: address })\n          setLoading(false);\n        } else {\n          setShowToast(true, \"Uh Oh! We don't provide service currently in your location\");\n          setLoading(false);\n        }\n      } catch (err) {\n        console.log({ err });\n      }\n\n    } else {\n      setError('Please enable the location permission from the browser settings so that Tickt app can access your location');\n    }\n  }\n\n  const handleContinue = (e: any) => {\n    e.preventDefault();\n    let locationAddress: any = locationDetails;\n    if (data?.location?.coordinates?.length && data?.location_name === address) {\n      locationAddress.location['coordinates'] = data?.location?.coordinates;\n      handleStepComplete(locationAddress);\n      return\n    } else {\n      if (locationAddress?.location?.coordinates?.length) {\n        handleStepComplete(locationDetails);\n        return\n      }\n    }\n    setError('please choose current location or search a location.');\n  }\n\n  const setLocation = ({ coordinates, address }: any) => {\n    setLocationDetails({\n      location: {\n        type: 'Point',\n        coordinates: coordinates,\n      },\n      location_name: address,\n    });\n    setAddress(address);\n    setError('');\n  }\n\n  const handleSelect = async (address: any) => {\n    setLocationSelected(true);\n    try {\n      let coordinates_response = await Geocode.fromAddress(address);\n      if (coordinates_response) {\n        const { lat, lng } = coordinates_response.results[0].geometry.location;\n        setLocation({ coordinates: [lng, lat], address })\n      }\n    } catch (err) {\n      console.log({ err });\n    }\n  };\n\n  const checkErrors = () => {\n    let location_details: any = locationDetails;\n    if (!location_details?.location?.coordinates?.length && !location_details?.location_name?.length && !address?.length) {\n      return true;\n    }\n    return false;\n  }\n\n  // Please enable the location permission from the settings so that Tickt app can access your location\n  return (\n    <div className=\"app_wrapper\">\n      <div className=\"section_wrapper\">\n        <div className=\"custom_container\">\n          <div className=\"form_field\">\n            <div className=\"flex_row\">\n              <div className=\"flex_col_sm_5\">\n                <div className=\"relate\">\n                  <button className=\"back\" onClick={handleStepBack}></button>\n                  <span className=\"title\">Location</span>\n                </div>\n                <p className=\"commn_para\">Type the place for your job</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex_row\">\n            <div className=\"flex_col_sm_5\">\n              <div className=\"form_field\">\n\n                <div className={`text_field ${address.length > 2 ? 'none' : ''}`}>\n                  <input\n                    placeholder='Type a State, city or suburb'\n                    value={address}\n                    // style={{ display:address.length > 2  ? 'none' : '' }}\n                    id=\"location_search_static\"\n                    onChange={(e) => setAddress((e.target.value).trimLeft())}\n                    autoComplete=\"off\"\n                    onFocus={(x) => {\n                      // console.log('Input - 1')\n                    }}\n                  />\n                </div>\n\n\n                <PlacesAutocomplete\n                  // debounce={400}\n                  value={address}\n                  onChange={(value) => {\n                    setLocationSelected(false);\n                    setAddress((value).trimLeft())\n                  }}\n                  searchOptions={searchOptions}\n                  onSelect={handleSelect}\n                >\n                  {({ getInputProps, suggestions, getSuggestionItemProps, loading }: any) => (\n                    <div>\n                      <div className=\"text_field\">\n                        <input\n                          id=\"location_search_dynamic\"\n                          onFocus={(x) => {\n                            setInputFocus(true);\n                          }}\n                          // style={{ display: address?.length < 3 ? 'none+!important' : '' }}\n                          {...getInputProps({\n                            placeholder: 'Type a State, city or suburb',\n                            className: `${address?.length < 2 ? 'none' : 'location-search-input detect_input'}`,\n                          })}\n                        />\n                        <span className={`${address?.length < 2 ? 'none' : 'detect_icon'}`}>\n                          <img\n                            src={cross}\n                            alt=\"cross\"\n                            onClick={() => {\n                              setAddress('');\n                              // setLocation({});\n                              setLocation({ coordinates: [], address: '' })\n                              setLocationSelected(false);\n                            }} />\n                        </span>\n                      </div>\n                      <div className=\"autocomplete-drop-down-map-container\">\n                        {loading && <div>Loading...</div>}\n                        {!locationSelected && !loading && !suggestions?.length && address?.length > 2 && !locationDetails?.location?.coordinates?.length ?\n                          (<div className=\"loc_suggestions\">\n                            {'No Result Found.'}\n                          </div>)\n                          : ''}\n                        {!locationSelected && !loading && suggestions?.length && address?.length > 2 ?\n                          suggestions.map((suggestion: any) => {\n                            const className = suggestion.active\n                              ? 'suggestion-item--active'\n                              : 'suggestion-item';\n                            // inline style for demonstration purpose\n                            const style = suggestion.active\n                              ? { backgroundColor: '#fafafa', cursor: 'pointer' }\n                              : { backgroundColor: '#ffffff', cursor: 'pointer' };\n                            return (\n                              <div\n                                {...getSuggestionItemProps(suggestion, {\n                                  className,\n                                  style,\n                                })}\n                              >\n                                <div className=\"loc_suggestions\">{suggestion.description}</div>\n                              </div>\n                            );\n                          }) : null}\n                      </div>\n                    </div>\n                  )}\n                </PlacesAutocomplete>\n\n                <span className=\"error_msg\">{error}</span>\n              </div>\n\n              <div className=\"form_field\">\n                <button\n                  className={activeCurrent ? 'location-btn fill_btn' : \"location-btn\"}\n                  onClick={getCurrentLocation}>\n                  <span className=\"gps_icon\">\n                    <img src={icgps} alt=\"gps-icon\" />\n                  </span>\n                  {'Use my current location'}\n                </button>\n              </div>\n\n              <div className=\"form_field\">\n                <button\n                  className={`fill_btn full_btn btn-effect ${checkErrors() ? 'disable_btn' : ''}`}\n                  onClick={handleContinue}>Continue</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div >\n  )\n}\n\nexport default AddLocation;\n"]},"metadata":{},"sourceType":"module"}