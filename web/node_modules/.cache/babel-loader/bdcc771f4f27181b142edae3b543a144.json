{"ast":null,"code":"import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import moment from'moment';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import Modal from'@material-ui/core/Modal';import{renderTimeWithCustomFormat}from'../../../../utils/common';import{setShowToast}from'../../../../redux/common/actions';// @ts-ignore\nimport{DateRangePicker}from'../../../../plugins/react-date-range/dist/index';import'../../../../plugins/react-date-range/dist/styles.css';import'../../../../plugins/react-date-range/dist/theme/default.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// for error messages\nvar label={name:'Milestone Name',duration:'From Date',recommended:'Recommended Hours'};var pattern=\"^([0-9][0-9]?[0-9]?[0-9]?[0-9]):[0-5][0-9]$\";var STRING_ERROR='Selected data is fully engage';var AddEditMile=function AddEditMile(props){var _errors$recommended,_props$milestones2,_props$milestones3;var resetItems=props.resetItems,item=props.item;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isToggle=_useState2[0],setToggle=_useState2[1];var _useState3=useState({name:'',isPhoto:false,duration:'',recommended:'',status:-1,order:-1}),_useState4=_slicedToArray(_useState3,2),stateData=_useState4[0],setStateData=_useState4[1];var _useState5=useState({name:'',duration:'',hours:'',pattern_error:''}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggleCalender=_useState8[0],setToggleCalender=_useState8[1];var _useState9=useState({name:false,isPhoto:false,duration:false,recommended:false}),_useState10=_slicedToArray(_useState9,2),changesFor=_useState10[0],setChangesFor=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),toggleItem=_useState12[0],setToggleItem=_useState12[1];var _useState13=useState({startDate:'',//new Date(),\nendDate:'',//new Date(),\nkey:'selection'}),_useState14=_slicedToArray(_useState13,2),calenderItems=_useState14[0],setCalender=_useState14[1];var toggleCal=function toggleCal(){setToggleCalender(function(prev){return!prev;});};var checkHoursVal=function checkHoursVal(value,lable,name){if(value===null||value===void 0?void 0:value.length){if(value.match(pattern)!==null){if(!(+value.split(':')[1]%15===0)){return'Time should be in mutiples of 15 like 10:15, 10:30';}return'';}else{return'Please enter a valid pattern like : 10:15';}}return'';// return `${label[name]} is required.`\n};var isInvalid=function isInvalid(name,value){switch(name){case'name':return!value.length?\"\".concat(label[name],\" is required.\"):value.length>50?'Maximum 50 characters are allowed.':'';case'duration':return'';case'recommended':return checkHoursVal(value,label,name);}};var handleChange=function handleChange(name,value){var error_clone={};if(name===\"name\"){value=value.trimLeft().replace(/[^a-zA-Z|0-9 ]/g,\"\");}if(name===\"recommended\"){value=value.trimLeft();}if(['name','recommended'].includes(name)){if(isInvalid(name,value)){error_clone[name]=isInvalid(name,value);}}setStateData(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});setErrors(error_clone);};var onMountCallable=function onMountCallable(){var count_times={};// let randomColors = getRandomColors();\nvar milestones=props.milestones;var filteredItems=milestones.filter(function(item){var toDate=item===null||item===void 0?void 0:item.toDate;var fromDate=item===null||item===void 0?void 0:item.fromDate;if(fromDate){var from_format=moment(fromDate).format('MM-DD-YYYY');item['from_date']=from_format;count_times[from_format]=0;}if(toDate){var to_format=moment(toDate).format('MM-DD-YYYY');item['to_date']=to_format;count_times[to_format]=0;}if(Object.keys(item).length){return item;}});console.log({filteredItems:filteredItems,count_times:count_times});if(filteredItems===null||filteredItems===void 0?void 0:filteredItems.length){filteredItems.forEach(function(item,index){var to_date=item===null||item===void 0?void 0:item.to_date;var from_date=item===null||item===void 0?void 0:item.from_date;var color_index=index;if(index>500){// make random index from the limit 0 to 500.\n// if the index is greater than 500.\ncolor_index=Math.floor(Math.random()*500+1);}if(!to_date&&from_date){if(count_times[from_date]>-1){count_times[from_date]++;}var from_element=document.getElementsByClassName(\"color_\".concat(count_times[from_date],\"_\").concat(from_date));if(from_element){var element_from=from_element[0];if((from_element===null||from_element===void 0?void 0:from_element.length)>1){element_from=from_element[1];}if(element_from){element_from.classList.add(\"color_\".concat(color_index));}}}if(to_date&&from_date){if(count_times[from_date]>-1){count_times[from_date]++;}if(count_times[to_date]>-1){count_times[to_date]++;}// let colorbyIndex = randomColors[index];\nvar _from_element=document.getElementsByClassName(\"color_\".concat(count_times[from_date],\"_\").concat(from_date));if(_from_element){var _element_from=null;if((_from_element===null||_from_element===void 0?void 0:_from_element.length)>1){if(!_from_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')){_element_from=_from_element[0];}else{_element_from=_from_element[1];}}else{_element_from=_from_element[0];}if(_element_from){_element_from.classList.add(\"color_\".concat(color_index));}}var to_element=document.getElementsByClassName(\"color_\".concat(count_times[to_date],\"_\").concat(to_date));if(to_element){var element_to=null;if((to_element===null||to_element===void 0?void 0:to_element.length)>1){if(!to_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')){element_to=to_element[0];}else{element_to=to_element[1];}}else{element_to=to_element[0];}if(element_to){element_to.classList.add(\"color_\".concat(color_index));}}}});}};useEffect(function(){var milestones=props.milestones,editMile=props.editMile;if(editMile>-1){var editItem=milestones[editMile];if(editItem){setStateData(function(prev){return{order:(editItem===null||editItem===void 0?void 0:editItem.order)?editItem===null||editItem===void 0?void 0:editItem.order:-1,name:editItem.milestoneName,isPhoto:editItem.isPhotoevidence,duration:renderTimeWithCustomFormat(editItem.fromDate,editItem.toDate,'',['DD MMM','DD MMM YY']),recommended:editItem===null||editItem===void 0?void 0:editItem.recommendedHours,status:editItem===null||editItem===void 0?void 0:editItem.status};});setCalender({startDate:moment(editItem===null||editItem===void 0?void 0:editItem.fromDate).isValid()?moment(editItem===null||editItem===void 0?void 0:editItem.fromDate).toDate():'',endDate:moment(editItem===null||editItem===void 0?void 0:editItem.toDate).isValid()?moment(editItem===null||editItem===void 0?void 0:editItem.toDate).toDate():'',key:'selection'});}}var interval=setInterval(function(){onMountCallable();},2000);return function(){console.log(\"clearing interval\");clearInterval(interval);};// onMountCallable();\n},[]);var checkIfChange=function checkIfChange(){var _stateData$name,_stateData$recommende;var renderDuration=renderTimeWithCustomFormat(calenderItems.startDate,calenderItems.endDate,'',['DD MMM','DD MMM YY'],'Choose');if(!(stateData===null||stateData===void 0?void 0:(_stateData$name=stateData.name)===null||_stateData$name===void 0?void 0:_stateData$name.length)&&!(stateData===null||stateData===void 0?void 0:stateData.isPhoto)&&renderDuration==='Choose'&&!(stateData===null||stateData===void 0?void 0:(_stateData$recommende=stateData.recommended)===null||_stateData$recommende===void 0?void 0:_stateData$recommende.length)){return false;}return true;};var checkBeforeExist=function checkBeforeExist(time,milestones_){var count_times={};var catch_boolean=true;var milestoneItems=props===null||props===void 0?void 0:props.milestones;milestoneItems.forEach(function(mile){var mile_start=mile.from_date;var mile_end=mile.to_date;var time_start=moment(time.fromDate).isValid()?moment(time.fromDate).format('MM-DD-YYYY'):'';var time_end=moment(time.toDate).isValid()?moment(time.toDate).format('MM-DD-YYYY'):'';if(count_times[mile_start]==undefined){count_times[mile_start]=1;}else{count_times[mile_start]=count_times[mile_start]+1;}if(count_times[mile_end]==undefined){count_times[mile_end]=1;}else{count_times[mile_end]=count_times[mile_end]+1;}if(count_times[mile_start]===4){if(mile_start==time_start||mile_start==time_end){setShowToast(true,STRING_ERROR);catch_boolean=false;}}else{if(count_times[time_start]===4){setShowToast(true,STRING_ERROR);catch_boolean=false;}}if(count_times[mile_end]===4){if(mile_end==time_start||mile_end==time_end){setShowToast(true,STRING_ERROR);catch_boolean=false;}}else{if(count_times[time_end]===4){setShowToast(true,STRING_ERROR);catch_boolean=false;}}});return catch_boolean;};var handleCalender=function handleCalender(date){var _props$milestones;var time={fromDate:date.selection.startDate,toDate:date.selection.endDate};console.log({selection:date.selection});var index=props===null||props===void 0?void 0:(_props$milestones=props.milestones)===null||_props$milestones===void 0?void 0:_props$milestones.length;var isChecked=checkBeforeExist(time);if(isChecked){addTimeToMileStone(time,index);}// setCalender(date.selection);\n};var addTimeToMileStone=function addTimeToMileStone(time,index,skip){var milestone_clone=props===null||props===void 0?void 0:props.milestones;var checkIsValid=true;if(!skip&&(milestone_clone===null||milestone_clone===void 0?void 0:milestone_clone.length)){var filter_milestone=milestone_clone.filter(function(item_mile,index_mile){return index_mile!==index;});if(filter_milestone===null||filter_milestone===void 0?void 0:filter_milestone.length){filter_milestone.forEach(function(mile){var msw=moment(mile.fromDate).isValid();var mew=moment(mile.toDate).isValid();var tsw=moment(time.fromDate).isValid();var tew=moment(time.toDate).isValid();var mile_start=mile.fromDate;var mile_end=mile.toDate;var time_start=time.fromDate;var time_end=time.toDate;if(msw&&mew){if(tsw&&tew){var checkIfSame=moment(time_start).isSame(moment(mile_start))&&moment(time_end).isSame(moment(mile_end));/* conditions for timing start here */ // if (checkIfSame) {\n//     checkIsValid = true;\n// }\n// if (!checkIfSame) {\n//     if (\n//         moment(time_start).isSameOrAfter(moment(mile_start)) &&\n//         moment(time_start).isSameOrBefore(moment(mile_end))\n//     ) {\n//         checkIsValid = false;\n//     }\n//     if (\n//         moment(time_end).isSameOrAfter(moment(mile_start)) &&\n//         moment(time_end).isSameOrBefore(moment(mile_end))\n//     ) {\n//         checkIsValid = false;\n//     }\n// }\n}// if (!tew) {\n//     if (moment(time_start).isSameOrAfter(moment(mile_start)) && moment(time_start).isSameOrBefore(moment(mile_start))) {\n//         checkIsValid = false;\n//     }\n// }\n/* conditions for timing end here */}// here conditions\n});}}console.log({checkIsValid:checkIsValid});if(!checkIsValid){setShowToast(true,'Please add unique date');return;}setCalender({startDate:moment(time.fromDate).toDate(),endDate:moment(time.toDate).toDate(),key:\"selection\"});};// before render check\nvar name=stateData.name,isPhoto=stateData.isPhoto,recommended=stateData.recommended,duration=stateData.duration;var check_errors=false;var renderDuration=renderTimeWithCustomFormat(calenderItems.startDate,calenderItems.endDate,'',['DD MMM','DD MMM YYYY',true],'Choose');if(!(name===null||name===void 0?void 0:name.length)||(recommended===null||recommended===void 0?void 0:recommended.length)>0&&((_errors$recommended=errors.recommended)===null||_errors$recommended===void 0?void 0:_errors$recommended.length)){check_errors=true;}var ItemCal=calenderItems;if(!moment(calenderItems===null||calenderItems===void 0?void 0:calenderItems.startDate).isValid()){ItemCal={startDate:new Date(),endDate:'',key:'selection'};}var min_date=moment(item===null||item===void 0?void 0:item.fromDate).isValid()?moment(item===null||item===void 0?void 0:item.fromDate).toDate():new Date();// let max_date: any = moment(item?.toDate).isValid() && !moment(item?.fromDate).isSame(item?.toDate) ? moment(item?.toDate).toDate() : moment().add(2, 'years').toDate();\nvar max_date=moment().add(2,'years').toDate();return/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_12\",children:[/*#__PURE__*/_jsxs(Dialog,{open:toggleItem// onClose={handleClose}\n,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",className:\"xs_alert_dialog_title\",children:'Heads Up'}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:'If you go back, you will lose all your changes.'})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setToggleItem(function(prev){return!prev;});},color:\"primary\",children:'Yes'}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setToggleItem(function(prev){return!prev;});resetItems();},color:\"primary\",autoFocus:true,children:'No'})]})]}),/*#__PURE__*/_jsx(Modal,{className:\"custom_modal \",open:toggleCalender,onClose:function onClose(){toggleCal();},\"aria-labelledby\":\"calender-active-modal-title\",\"aria-describedby\":\"calender-active-modal-title\",children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px 20px 0px'},className:\"item-modal-ctm custom_wh portfolio_preview \",children:[console.log({jobDetail:props.jobDetail}),/*#__PURE__*/_jsx(DateRangePicker,{ranges:[ItemCal],onChange:function onChange(date){handleCalender(date);setChangesFor(function(prev){return _objectSpread(_objectSpread({},prev),{},{duration:true});});},months:2,direction:\"horizontal\",moveRangeOnFirstSelection:false,rangeColors:[\"#fee600\",\"#b5b5b5\"],showDateDisplay:false,showSelectionPreview:true,showPreview:true,minDate:min_date,maxDate:max_date,fixedHeight:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(checkIfChange()){setToggleItem(function(prev){return!prev;});return;}resetItems();},className:\"back\"}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:(item===null||item===void 0?void 0:item.jobName)||''})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"sub_title\",children:[\"\".concat(props.editMile===''?'':'Edit '),\"\".concat(props.editMile===''&&(props===null||props===void 0?void 0:props.isSame)?\"Milestones \".concat((props===null||props===void 0?void 0:(_props$milestones2=props.milestones)===null||_props$milestones2===void 0?void 0:_props$milestones2.length)+1):props.editMile!==''&&props.editMile>-1&&(props===null||props===void 0?void 0:props.isSame)?\"Milestones \".concat(props.editMile+1):props.editMile!==''&&props.editMile>-1&&!(props===null||props===void 0?void 0:props.isSame)?\"Milestone \".concat(props.editMile+1):props.editMile===''&&!(props===null||props===void 0?void 0:props.isSame)?\"Milestone \".concat((props===null||props===void 0?void 0:(_props$milestones3=props.milestones)===null||_props$milestones3===void 0?void 0:_props$milestones3.length)+1):null)]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:'Milestone Name'}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Milestone Name\",onChange:function onChange(e){handleChange('name',e.target.value);setChangesFor(function(prev){return _objectSpread(_objectSpread({},prev),{},{name:true});});},value:name,name:\"milestone_name\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors===null||errors===void 0?void 0:errors.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(){setStateData(function(prev){return _objectSpread(_objectSpread({},prev),{},{isPhoto:!prev.isPhoto});});setChangesFor(function(prev){return _objectSpread(_objectSpread({},prev),{},{isPhoto:true});});},checked:isPhoto,className:\"filter-type filled-in\",type:\"checkbox\",id:\"milestone1\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"milestone1\",children:/*#__PURE__*/_jsx(\"b\",{children:'Photo evidence required'})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"f_spacebw\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:'Duration of milestone (optional)'}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){toggleCal();},className:\"fill_btn fill_grey_btn choose_btn\",children:renderDuration})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:'Estimated Hours (optional)'}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){handleChange('recommended',e.target.value);setChangesFor(function(prev){return _objectSpread(_objectSpread({},prev),{},{recommended:true});});},autoComplete:\"off\",value:recommended,type:\"text\",placeholder:\"Enter Estimated Hours\",name:\"recommended_hours\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.recommended})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){var description='';if(Object.values(changesFor).includes(true)){// description = `This job has Milestones change request with changes in ${changesFor?.name ? 'Milestone Name, ' : ''}${changesFor?.isPhoto ? 'Photo evidence required, ' : ''}${changesFor?.duration ? 'Duration of Milestone, ' : ''}${changesFor?.recommended ? 'Recommended Hours ' : ''}.`;\ndescription=\"\".concat(stateData.name,\" details are updated.\");}if(props.editMile!==''){// edit\nif(props===null||props===void 0?void 0:props.addNewMile){props===null||props===void 0?void 0:props.addNewMile({milestoneName:stateData.name,isPhotoevidence:stateData.isPhoto,order:stateData.order,index:props.editMile,status:stateData.status,recommendedHours:stateData.recommended,fromDate:calenderItems.startDate,toDate:calenderItems.endDate,description:description});}}else{// add\nif(props===null||props===void 0?void 0:props.addNewMile){var _props$milestones4;props===null||props===void 0?void 0:props.addNewMile({milestoneName:stateData.name,isPhotoevidence:stateData.isPhoto,status:-1,order:(props===null||props===void 0?void 0:(_props$milestones4=props.milestones)===null||_props$milestones4===void 0?void 0:_props$milestones4.length)+1,recommendedHours:stateData.recommended,fromDate:calenderItems.startDate,toDate:calenderItems.endDate,description:description});}}props.resetItems();},className:\"fill_btn full_btn btn-effect \".concat(check_errors?'disable_btn':''),children:'Continue'})})]})})]})});};export default AddEditMile;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/builderJobDasboard/components/editMilestones/addEditMile.tsx"],"names":["React","useEffect","useState","moment","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Modal","renderTimeWithCustomFormat","setShowToast","DateRangePicker","label","name","duration","recommended","pattern","STRING_ERROR","AddEditMile","props","resetItems","item","isToggle","setToggle","isPhoto","status","order","stateData","setStateData","hours","pattern_error","errors","setErrors","toggleCalender","setToggleCalender","changesFor","setChangesFor","toggleItem","setToggleItem","startDate","endDate","key","calenderItems","setCalender","toggleCal","prev","checkHoursVal","value","lable","length","match","split","isInvalid","handleChange","error_clone","trimLeft","replace","includes","onMountCallable","count_times","milestones","filteredItems","filter","toDate","fromDate","from_format","format","to_format","Object","keys","console","log","forEach","index","to_date","from_date","color_index","Math","floor","random","from_element","document","getElementsByClassName","element_from","classList","add","parentElement","contains","to_element","element_to","editMile","editItem","milestoneName","isPhotoevidence","recommendedHours","isValid","interval","setInterval","clearInterval","checkIfChange","renderDuration","checkBeforeExist","time","milestones_","catch_boolean","milestoneItems","mile","mile_start","mile_end","time_start","time_end","undefined","handleCalender","date","selection","isChecked","addTimeToMileStone","skip","milestone_clone","checkIsValid","filter_milestone","item_mile","index_mile","msw","mew","tsw","tew","checkIfSame","isSame","check_errors","ItemCal","Date","min_date","max_date","padding","jobDetail","jobName","e","target","description","values","addNewMile"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport moment from 'moment';\nimport { values } from 'lodash';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Modal from '@material-ui/core/Modal';\nimport { renderTimeWithCustomFormat } from '../../../../utils/common';\nimport { setShowToast } from '../../../../redux/common/actions';\n\n// @ts-ignore\nimport { DateRangePicker } from '../../../../plugins/react-date-range/dist/index';\nimport '../../../../plugins/react-date-range/dist/styles.css'\nimport '../../../../plugins/react-date-range/dist/theme/default.css'\nimport { randomColors as getRandomColors } from '../../../../utils/common'\n\n// for error messages\nconst label: { [index: string]: string } = {\n    name: 'Milestone Name',\n    duration: 'From Date',\n    recommended: 'Recommended Hours',\n}\n\nconst pattern = \"^([0-9][0-9]?[0-9]?[0-9]?[0-9]):[0-5][0-9]$\";\nconst STRING_ERROR = 'Selected data is fully engage';\nconst AddEditMile = (props: any) => {\n    const { resetItems, item } = props;\n    const [isToggle, setToggle] = useState(false);\n    const [stateData, setStateData] = useState({ name: '', isPhoto: false, duration: '', recommended: '', status: -1, order: -1 });\n    const [errors, setErrors] = useState<any>({ name: '', duration: '', hours: '', pattern_error: '' });\n    const [toggleCalender, setToggleCalender] = useState(false);\n\n    const [changesFor, setChangesFor] = useState({\n        name: false,\n        isPhoto: false,\n        duration: false,\n        recommended: false\n    })\n\n    const [toggleItem, setToggleItem] = useState(false);\n\n    const [calenderItems, setCalender] = useState<any>({\n        startDate: '', //new Date(),\n        endDate: '',//new Date(),\n        key: 'selection',\n    });\n\n    const toggleCal = () => {\n        setToggleCalender((prev: any) => !prev);\n    }\n\n    const checkHoursVal = (value: any, lable: any, name: any) => {\n        if (value?.length) {\n            if (value.match(pattern) !== null) {\n                if (!((+value.split(':')[1]) % 15 === 0)) {\n                    return 'Time should be in mutiples of 15 like 10:15, 10:30';\n                }\n                return '';\n            } else {\n                return 'Please enter a valid pattern like : 10:15'\n            }\n        }\n        return '';\n        // return `${label[name]} is required.`\n    }\n\n    const isInvalid = (name: string, value: string) => {\n        switch (name) {\n            case 'name':\n                return !value.length ? `${label[name]} is required.` : value.length > 50 ? 'Maximum 50 characters are allowed.' : '';\n            case 'duration':\n                return '';\n            case 'recommended':\n                return checkHoursVal(value, label, name);\n        }\n    }\n\n\n    const handleChange = (name: any, value: any) => {\n        let error_clone: any = {};\n\n        if (name === \"name\") {\n            value = (value).trimLeft().replace(/[^a-zA-Z|0-9 ]/g, \"\")\n        }\n\n        if (name === \"recommended\") {\n            value = (value).trimLeft();\n        }\n\n        if (['name', 'recommended'].includes(name)) {\n            if (isInvalid(name, value)) {\n                error_clone[name] = isInvalid(name, value)\n            }\n        }\n\n        setStateData((prev: any) => ({\n            ...prev,\n            [name]: value\n        }));\n        setErrors(error_clone);\n    }\n\n\n\n    const onMountCallable = () => {\n        let count_times: any = {};\n        // let randomColors = getRandomColors();\n        let milestones = props.milestones;\n        let filteredItems = milestones.filter((item: any) => {\n            let toDate = item?.toDate;\n            let fromDate = item?.fromDate;\n\n            if (fromDate) {\n                let from_format = moment(fromDate).format('MM-DD-YYYY')\n                item['from_date'] = from_format;\n                count_times[from_format] = 0;\n            }\n\n            if (toDate) {\n                let to_format = moment(toDate).format('MM-DD-YYYY');\n                item['to_date'] = to_format;\n                count_times[to_format] = 0;\n            }\n\n            if (Object.keys(item).length) {\n                return item;\n            }\n        });\n\n        console.log({ filteredItems, count_times })\n\n        if (filteredItems?.length) {\n            filteredItems.forEach((item: any, index: any) => {\n                let to_date = item?.to_date;\n                let from_date = item?.from_date;\n                let color_index = index;\n                if (index > 500) {\n                    // make random index from the limit 0 to 500.\n                    // if the index is greater than 500.\n                    color_index = Math.floor((Math.random() * 500) + 1);\n                }\n\n                if (!to_date && from_date) {\n                    if (count_times[from_date] > -1) {\n                        count_times[from_date]++;\n                    }\n\n                    let from_element: any = document.getElementsByClassName(`color_${count_times[from_date]}_${from_date}`);\n                    if (from_element) {\n                        let element_from = from_element[0];\n                        if (from_element?.length > 1) {\n                            element_from = from_element[1];\n                        }\n\n                        if (element_from) {\n                            element_from.classList.add(`color_${color_index}`);\n                        }\n                    }\n                }\n\n                if (to_date && from_date) {\n                    if (count_times[from_date] > -1) {\n                        count_times[from_date]++;\n                    }\n\n                    if (count_times[to_date] > -1) {\n                        count_times[to_date]++;\n                    }\n\n                    // let colorbyIndex = randomColors[index];\n                    let from_element: any = document.getElementsByClassName(`color_${count_times[from_date]}_${from_date}`);\n                    if (from_element) {\n                        let element_from = null;\n\n                        if (from_element?.length > 1) {\n                            if (!from_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')) {\n                                element_from = from_element[0];\n                            } else {\n                                element_from = from_element[1];\n                            }\n                        } else {\n                            element_from = from_element[0];\n                        }\n\n                        if (element_from) {\n                            element_from.classList.add(`color_${color_index}`)\n                        }\n                    }\n\n                    let to_element: any = document.getElementsByClassName(`color_${count_times[to_date]}_${to_date}`);\n                    if (to_element) {\n                        let element_to = null;\n                        if (to_element?.length > 1) {\n                            if (!to_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')) {\n                                element_to = to_element[0];\n                            } else {\n                                element_to = to_element[1];\n                            }\n                        } else {\n                            element_to = to_element[0];\n                        }\n                        if (element_to) {\n                            element_to.classList.add(`color_${color_index}`);\n                        }\n                    }\n                }\n\n            })\n        }\n    }\n\n\n    useEffect(() => {\n        const { milestones, editMile } = props;\n        if (editMile > -1) {\n            let editItem: any = milestones[editMile];\n            if (editItem) {\n                setStateData((prev: any) => ({\n                    order: editItem?.order ? editItem?.order : -1,\n                    name: editItem.milestoneName,\n                    isPhoto: editItem.isPhotoevidence,\n                    duration: renderTimeWithCustomFormat(editItem.fromDate, editItem.toDate, '', ['DD MMM', 'DD MMM YY']),\n                    recommended: editItem?.recommendedHours,\n                    status: editItem?.status\n                }));\n\n                setCalender({\n                    startDate: moment(editItem?.fromDate).isValid() ? moment(editItem?.fromDate).toDate() : '',\n                    endDate: moment(editItem?.toDate).isValid() ? moment(editItem?.toDate).toDate() : '',\n                    key: 'selection',\n                })\n            }\n        }\n\n        const interval = setInterval(() => {\n            onMountCallable();\n        }, 2000);\n\n        return () => {\n            console.log(`clearing interval`);\n            clearInterval(interval);\n        };\n        // onMountCallable();\n    }, []);\n\n    const checkIfChange = () => {\n        let renderDuration: any = renderTimeWithCustomFormat(\n            calenderItems.startDate,\n            calenderItems.endDate,\n            '',\n            ['DD MMM', 'DD MMM YY'],\n            'Choose'\n        );\n\n        if (!stateData?.name?.length && !stateData?.isPhoto && renderDuration === 'Choose' && !stateData?.recommended?.length) {\n            return false;\n        }\n        return true;\n    }\n\n    const checkBeforeExist = (time: any, milestones_?: any) => {\n        let count_times: any = {};\n        let catch_boolean: boolean = true;\n        let milestoneItems: any = props?.milestones;\n\n        milestoneItems.forEach((mile: any) => {\n\n            let mile_start = mile.from_date;\n            let mile_end = mile.to_date;\n\n            let time_start = moment(time.fromDate).isValid() ? moment(time.fromDate).format('MM-DD-YYYY') : '';\n            let time_end = moment(time.toDate).isValid() ? moment(time.toDate).format('MM-DD-YYYY') : '';\n\n\n            if (count_times[mile_start] == undefined) {\n                count_times[mile_start] = 1\n            } else {\n                count_times[mile_start] = count_times[mile_start] + 1;\n            }\n\n            if (count_times[mile_end] == undefined) {\n                count_times[mile_end] = 1\n            } else {\n                count_times[mile_end] = count_times[mile_end] + 1;\n            }\n\n            if (count_times[mile_start] === 4) {\n                if (mile_start == time_start || mile_start == time_end) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            } else {\n                if (count_times[time_start] === 4) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            }\n\n            if (count_times[mile_end] === 4) {\n                if (mile_end == time_start || mile_end == time_end) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            } else {\n                if (count_times[time_end] === 4) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            }\n        });\n\n        return catch_boolean;\n    }\n\n    const handleCalender = (date: any) => {\n        let time = {\n            fromDate: date.selection.startDate,\n            toDate: date.selection.endDate\n        };\n        console.log({ selection: date.selection })\n        let index = props?.milestones?.length;\n\n        let isChecked = checkBeforeExist(time);\n        if (isChecked) {\n            addTimeToMileStone(time, index);\n        }\n        // setCalender(date.selection);\n    }\n\n    const addTimeToMileStone = (time: any, index: any, skip?: any) => {\n        let milestone_clone: any = props?.milestones;\n        let checkIsValid: any = true;\n\n        if (!skip && milestone_clone?.length) {\n\n            let filter_milestone: any = milestone_clone.filter((item_mile: any, index_mile: any) => index_mile !== index);\n\n            if (filter_milestone?.length) {\n                filter_milestone.forEach((mile: any) => {\n                    let msw = moment(mile.fromDate).isValid();\n                    let mew = moment(mile.toDate).isValid();\n\n                    let tsw = moment(time.fromDate).isValid();\n                    let tew = moment(time.toDate).isValid();\n\n                    let mile_start = mile.fromDate;\n                    let mile_end = mile.toDate;\n\n                    let time_start = time.fromDate;\n                    let time_end = time.toDate;\n\n                    if (msw && mew) {\n                        if (tsw && tew) {\n                            let checkIfSame = moment(time_start).isSame(moment(mile_start)) && moment(time_end).isSame(moment(mile_end));\n                            /* conditions for timing start here */\n                            // if (checkIfSame) {\n                            //     checkIsValid = true;\n                            // }\n\n                            // if (!checkIfSame) {\n                            //     if (\n                            //         moment(time_start).isSameOrAfter(moment(mile_start)) &&\n                            //         moment(time_start).isSameOrBefore(moment(mile_end))\n                            //     ) {\n                            //         checkIsValid = false;\n                            //     }\n\n                            //     if (\n                            //         moment(time_end).isSameOrAfter(moment(mile_start)) &&\n                            //         moment(time_end).isSameOrBefore(moment(mile_end))\n                            //     ) {\n                            //         checkIsValid = false;\n                            //     }\n                            // }\n                        }\n\n                        // if (!tew) {\n                        //     if (moment(time_start).isSameOrAfter(moment(mile_start)) && moment(time_start).isSameOrBefore(moment(mile_start))) {\n                        //         checkIsValid = false;\n                        //     }\n                        // }\n                        /* conditions for timing end here */\n                    }\n\n                    // here conditions\n                })\n            }\n        }\n        console.log({ checkIsValid });\n        if (!checkIsValid) {\n            setShowToast(true, 'Please add unique date');\n            return;\n        }\n\n        setCalender({\n            startDate: moment(time.fromDate).toDate(),\n            endDate: moment(time.toDate).toDate(),\n            key: \"selection\"\n        })\n    }\n\n    // before render check\n    const { name, isPhoto, recommended, duration } = stateData;\n    let check_errors = false;\n    let renderDuration: any = renderTimeWithCustomFormat(\n        calenderItems.startDate,\n        calenderItems.endDate,\n        '',\n        ['DD MMM', 'DD MMM YYYY', true],\n        'Choose'\n    );\n\n    if (!name?.length || (recommended?.length > 0 && errors.recommended?.length)) {\n        check_errors = true;\n    }\n\n    let ItemCal: any = calenderItems;\n    if (!moment(calenderItems?.startDate).isValid()) {\n        ItemCal = { startDate: new Date(), endDate: '', key: 'selection' }\n    }\n\n    let min_date: any = moment(item?.fromDate).isValid() ? moment(item?.fromDate).toDate() : new Date();\n    // let max_date: any = moment(item?.toDate).isValid() && !moment(item?.fromDate).isSame(item?.toDate) ? moment(item?.toDate).toDate() : moment().add(2, 'years').toDate();\n    let max_date: any = moment().add(2, 'years').toDate();\n    return (\n        <div className=\"flex_row\">\n            <div className=\"flex_col_sm_12\">\n\n\n                <Dialog\n                    open={toggleItem}\n                    // onClose={handleClose}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogTitle id=\"alert-dialog-title\" className=\"xs_alert_dialog_title\">\n                        {'Heads Up'}\n                    </DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {'If you go back, you will lose all your changes.'}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            onClick={() => {\n                                setToggleItem((prev: any) => !prev);\n                            }}\n                            color=\"primary\">\n                            {'Yes'}\n                        </Button>\n                        <Button\n                            onClick={() => {\n                                setToggleItem((prev: any) => !prev);\n                                resetItems();\n                            }}\n                            color=\"primary\" autoFocus>\n                            {'No'}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n\n                <Modal\n                    className=\"custom_modal \"\n                    open={toggleCalender}\n                    onClose={() => { toggleCal() }}\n                    aria-labelledby=\"calender-active-modal-title\"\n                    aria-describedby=\"calender-active-modal-title\"\n                >\n                    <div\n                        style={{\n                            padding: '12px 20px 0px'\n                        }}\n                        className=\"item-modal-ctm custom_wh portfolio_preview \">\n                        {console.log({ jobDetail: props.jobDetail })}\n                        <DateRangePicker\n                            ranges={[ItemCal]}\n                            onChange={(date: any) => {\n                                handleCalender(date)\n                                setChangesFor((prev: any) => ({ ...prev, duration: true }))\n                            }}\n                            months={2}\n                            direction=\"horizontal\"\n                            moveRangeOnFirstSelection={false}\n                            rangeColors={[\"#fee600\", \"#b5b5b5\"]}\n                            showDateDisplay={false}\n                            showSelectionPreview={true}\n                            showPreview={true}\n                            minDate={min_date}\n                            maxDate={max_date}\n                            fixedHeight={true}\n                        />\n                    </div>\n                </Modal>\n\n\n                <div className=\"form_field\">\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_7\">\n                            <div className=\"relate\">\n                                <button\n                                    onClick={() => {\n                                        if (checkIfChange()) {\n                                            setToggleItem((prev: any) => !prev);\n                                            return\n                                        }\n                                        resetItems();\n                                    }}\n                                    className=\"back\">\n                                </button>\n                                <span className=\"title\">\n                                    {item?.jobName || ''}\n                                </span>\n                            </div>\n                            <p className=\"sub_title\">\n                                {`${props.editMile === '' ? '' : 'Edit '}`}\n                                {`${props.editMile === '' && props?.isSame ? `Milestones ${props?.milestones?.length + 1}` :\n                                    props.editMile !== '' && props.editMile > -1 && props?.isSame ? `Milestones ${props.editMile + 1}` :\n                                        props.editMile !== '' && props.editMile > -1 && !props?.isSame ? `Milestone ${props.editMile + 1}` :\n                                            props.editMile === '' && !props?.isSame ? `Milestone ${props?.milestones?.length + 1}` : null}`}\n                                {/* {`${!props?.isSame && props.editMile ? ' Mileston-e ' + props.editMile : props?.isSame && props.editMile > -1 ? ' Milesto-ne ' + (props.editMile + 1) : props?.milestones?.length + 1}`}\n                                {console.log({ props })} */}\n                                {/* {console.log({ props })} */}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"flex_row\">\n                    <div className=\"flex_col_sm_7\">\n                        <div className=\"form_field\">\n                            <label className=\"form_label\">\n                                {'Milestone Name'}\n                            </label>\n                            <div className=\"text_field\">\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Enter Milestone Name\"\n                                    onChange={(e: any) => {\n                                        handleChange('name', e.target.value)\n                                        setChangesFor((prev: any) => ({ ...prev, name: true }))\n                                    }}\n                                    value={name}\n                                    name=\"milestone_name\" />\n                            </div>\n                            <span className=\"error_msg\">{errors?.name}</span>\n                        </div>\n                        <div className=\"form_field\">\n\n                            <div className=\"checkbox_wrap agree_check\">\n                                <input\n                                    onChange={() => {\n                                        setStateData((prev: any) => ({ ...prev, isPhoto: !prev.isPhoto }))\n                                        setChangesFor((prev: any) => ({ ...prev, isPhoto: true }))\n                                    }}\n                                    checked={isPhoto}\n                                    className=\"filter-type filled-in\"\n                                    type=\"checkbox\"\n                                    id=\"milestone1\" />\n                                <label htmlFor=\"milestone1\">\n                                    <b>\n                                        {'Photo evidence required'}\n                                    </b>\n                                </label>\n                            </div>\n                        </div>\n                        <div className=\"form_field\">\n                            <div className=\"f_spacebw\">\n                                <label className=\"form_label\">\n                                    {'Duration of milestone (optional)'}\n                                </label>\n                                <button\n                                    onClick={() => { toggleCal() }}\n                                    className=\"fill_btn fill_grey_btn choose_btn\">\n                                    {renderDuration}\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"form_field\">\n                            <label className=\"form_label\">\n                                {'Estimated Hours (optional)'}\n                            </label>\n                            <div className=\"text_field\">\n                                <input\n                                    onChange={(e) => {\n                                        handleChange('recommended', e.target.value)\n                                        setChangesFor((prev: any) => ({ ...prev, recommended: true }))\n                                    }}\n                                    autoComplete='off'\n                                    value={recommended}\n                                    type=\"text\"\n                                    placeholder=\"Enter Estimated Hours\"\n                                    name=\"recommended_hours\" />\n                            </div>\n                            <span className=\"error_msg\">{errors.recommended}</span>\n                            {/* <span className=\"error_msg\">{errors.pattern_error}</span> */}\n                        </div>\n\n\n                        <div className=\"form_field\">\n                            <button\n                                onClick={() => {\n                                    let description: any = '';\n                                    if (Object.values(changesFor).includes(true)) {\n                                        // description = `This job has Milestones change request with changes in ${changesFor?.name ? 'Milestone Name, ' : ''}${changesFor?.isPhoto ? 'Photo evidence required, ' : ''}${changesFor?.duration ? 'Duration of Milestone, ' : ''}${changesFor?.recommended ? 'Recommended Hours ' : ''}.`;\n                                        description = `${stateData.name} details are updated.`;\n                                    }\n\n                                    if (props.editMile !== '') {\n                                        // edit\n                                        if (props?.addNewMile) {\n                                            props?.addNewMile({\n                                                milestoneName: stateData.name,\n                                                isPhotoevidence: stateData.isPhoto,\n                                                order: stateData.order,\n                                                index: props.editMile,\n                                                status: stateData.status,\n                                                recommendedHours: stateData.recommended,\n                                                fromDate: calenderItems.startDate,\n                                                toDate: calenderItems.endDate,\n                                                description: description,\n                                            })\n                                        }\n                                    } else {\n                                        // add\n                                        if (props?.addNewMile) {\n                                            props?.addNewMile({\n                                                milestoneName: stateData.name,\n                                                isPhotoevidence: stateData.isPhoto,\n                                                status: -1,\n                                                order: (props?.milestones?.length + 1),\n                                                recommendedHours: stateData.recommended,\n                                                fromDate: calenderItems.startDate,\n                                                toDate: calenderItems.endDate,\n                                                description: description\n                                            })\n                                        }\n                                    }\n                                    props.resetItems();\n                                }}\n                                className={`fill_btn full_btn btn-effect ${check_errors ? 'disable_btn' : ''}`}>\n                                {'Continue'}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\nexport default AddEditMile;"]},"metadata":{},"sourceType":"module"}