{"ast":null,"code":"import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import Constants from\"../../utils/constants\";// @ts-ignore\nimport PlacesAutocomplete from\"react-places-autocomplete\";// @ts-ignore\nimport{DateRange}from\"react-date-range\";import\"react-date-range/dist/styles.css\";// main style file\nimport\"react-date-range/dist/theme/default.css\";// theme css file\nimport Searchicon from\"../../assets/images/main-search.png\";import search from\"../../assets/images/ic-search.png\";import Location from\"../../assets/images/ic-location.png\";import cross from\"../../assets/images/close-black.png\";import icgps from\"../../assets/images/ic-gps.png\";import residential from\"../../assets/images/ic-residential.png\";import close from\"../../assets/images/icon-close-1.png\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{getSearchJobList,getRecentSearchList,postHomeSearchData,getRecentLocationList}from\"../../redux/homeSearch/actions\";import{isHandleChanges}from\"../../redux/jobs/actions\";// @ts-ignore\nimport{useDetectClickOutside}from\"react-detect-click-outside\";import moment from\"moment\";import Geocode from\"react-geocode\";import{setShowToast}from\"../../redux/common/actions\";import{deleteRecentSearch}from\"../../redux/homeSearch/actions\";import{renderTimeWithCustomFormat}from\"../../utils/common\";import{moengage,mixPanel}from\"../../services/analyticsTools\";import{MoEConstants}from\"../../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";Geocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);Geocode.setLanguage(\"en\");Geocode.setRegion(\"au\");// Geocode?.setLocationType(\"ROOFTOP\");\nvar example_calender={startDate:\"\",endDate:\"\",key:\"selection1\"};export function useStateFromProp(initialValue){var _useState=useState(initialValue),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];useEffect(function(){return setValue(initialValue);},[initialValue]);return[value,setValue];}var BannerSearch=function BannerSearch(props){var _props$recentLocation,_props$recentLocation2;var props_selected=props.selectedItem;var selectedItem=props.selectedItem,isHandleChanges=props.isHandleChanges,localChanges=props.localChanges,getRecentSearchList=props.getRecentSearchList,getRecentLocationList=props.getRecentLocationList;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),checkOnChange=_useState4[0],setOnChange=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showOnlyTradeName=_useState6[0],setShowOnlyTradeName=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),locationStatus=_useState8[0],setLocationStatus=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),stateData=_useState10[0],setStateData=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),searchText=_useState12[0],setSearchText=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),addressText=_useState14[0],setAddressText=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),recentLocation=_useState16[0],setRecentLocation=_useState16[1];// recentLocation\nvar _useState17=useState({}),_useState18=_slicedToArray(_useState17,2),selectedAddress=_useState18[0],setSelectedAddress=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),enableCurrentLocation=_useState20[0],setCurrentLocations=_useState20[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),errors=_useState22[0],setErrors=_useState22[1];var _useState23=useState({}),_useState24=_slicedToArray(_useState23,2),selectedTrade=_useState24[0],setSelectedTrade=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),inputFocus1=_useState26[0],setInputFocus1=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),inputFocus2=_useState28[0],setInputFocus2=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),inputFocus3=_useState30[0],setInputFocus3=_useState30[1];var _useState31=useState(example_calender),_useState32=_slicedToArray(_useState31,2),calenderRange1=_useState32[0],setCalenderRange1=_useState32[1];var _useState33=useState({}),_useState34=_slicedToArray(_useState33,2),suggestionSelected=_useState34[0],setSuggestion=_useState34[1];var tradeListRedux=useSelector(function(state){return state.auth.tradeListData;});var handleOnOutsideSearch=function handleOnOutsideSearch(){setOnChange(false);setInputFocus1(false);};var handleOnOutsideLocation=function handleOnOutsideLocation(){setInputFocus2(false);};var handleOnOutsideCalender=function handleOnOutsideCalender(){return setInputFocus3(false);};var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),addressRef=_useState36[0],setAddressRef=_useState36[1];var searchRef=useDetectClickOutside({onTriggered:handleOnOutsideSearch});var locationRef=useDetectClickOutside({onTriggered:function onTriggered(){// if (addressText?.length > 3) {\nhandleOnOutsideLocation();// }\n}});var locationRefClone=useDetectClickOutside({onTriggered:function onTriggered(){// if (!addressText || addressText?.length < 2) {\n// handleOnOutsideLocation()\n// }\n}});var calenderRef=useDetectClickOutside({onTriggered:handleOnOutsideCalender});var handleCalenderRange=function handleCalenderRange(item){setCalenderRange1(item.selection1);};useEffect(function(){if(getRecentSearchList){getRecentSearchList();}if(getRecentLocationList){getRecentLocationList();}// getRecentLocationData();\n},[]);useEffect(function(){console.log(\"In local-changes\",{props:props.selectedItem});return function(){console.log(\"local-changes\",{props:props.selectedItem});};},[props]);useEffect(function(){// if (props.recentLocationData?.length && JSON.stringify(props.recentLocationData[0]?.location?.coordinates) !== JSON.stringify(recentLocation[0]?.location?.coordinates)) {\n//     getRecentLocationData();\n// }\n},[props.recentLocationData,recentLocation]);useEffect(function(){if((searchText===null||searchText===void 0?void 0:searchText.length)>2){props.getSearchJobList(searchText);}if(!(searchText===null||searchText===void 0?void 0:searchText.length)){setSelectedTrade({});}},[searchText]);var checkIfExist=function checkIfExist(_id){if(selectedTrade){var isLength=Object.keys(selectedTrade).length;if(isLength){var _item=selectedTrade;if((_item===null||_item===void 0?void 0:_item._id)===_id){return true;}}}return false;};var cleanRecentSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,recentSearchId){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.stopPropagation();data={id:recentSearchId,status:0};_context.next=4;return deleteRecentSearch(data);case 4:res=_context.sent;if(res.success){if(getRecentSearchList){getRecentSearchList();}}case 6:case\"end\":return _context.stop();}}},_callee);}));return function cleanRecentSearch(_x,_x2){return _ref.apply(this,arguments);};}();var recentJobSearches=function recentJobSearches(){var _props$recentSearchJo,_props$recentSearchJo2,_props$recentSearchJo3;var props_Clone=props;var tradeListData=props_Clone.tradeListData;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_autosuggestion\",id:\"recent-job-search-div\",children:[(props===null||props===void 0?void 0:(_props$recentSearchJo=props.recentSearchJobData)===null||_props$recentSearchJo===void 0?void 0:_props$recentSearchJo.length)?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Recent searches\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row recent_search\",children:((_props$recentSearchJo2=props.recentSearchJobData)===null||_props$recentSearchJo2===void 0?void 0:_props$recentSearchJo2.length)>0&&((_props$recentSearchJo3=props.recentSearchJobData)===null||_props$recentSearchJo3===void 0?void 0:_props$recentSearchJo3.slice(0,4).map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_3\",onClick:function onClick(){var selected_address=selectedAddress;props.history.push({pathname:\"search-tradie-results\",state:{name:item===null||item===void 0?void 0:item.name,tradeId:[item===null||item===void 0?void 0:item._id],specializations:[item===null||item===void 0?void 0:item.specializationsId],location:Object.keys(selected_address).length?{coordinates:[selected_address===null||selected_address===void 0?void 0:selected_address.lng,selected_address===null||selected_address===void 0?void 0:selected_address.lat]}:null,calender:calenderRange1,address:addressText}});// setItemSearch(item);\n// setSelectedTrade({});\n},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card ico_txt_wrap\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"ico\",children:/*#__PURE__*/_jsx(\"img\",{src:(item===null||item===void 0?void 0:item.image)||residential,alt:\"icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"f_column\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:item.trade_name})]}),/*#__PURE__*/_jsx(\"span\",{className:\"remove_card\",onClick:function onClick(event){return cleanRecentSearch(event,item.recentSearchId);},children:/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"remove\"})})]})});}))})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"select_sphere recent_search\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Categories\"}),/*#__PURE__*/_jsx(\"ul\",{children:tradeListData===null||tradeListData===void 0?void 0:tradeListData.map(function(_ref2){var _id=_ref2._id,trade_name=_ref2.trade_name,selected_url=_ref2.selected_url,specialisations=_ref2.specialisations;return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){var item_spec=specialisations;if(item_spec===null||item_spec===void 0?void 0:item_spec.length){var getItem=item_spec[0];if(getItem){setStateData({image:selected_url,name:getItem===null||getItem===void 0?void 0:getItem.name,specializationsId:getItem===null||getItem===void 0?void 0:getItem._id,trade_name:trade_name,_id:_id});setSearchText(trade_name);}setShowOnlyTradeName(true);setSelectedTrade({_id:_id,trade_name:trade_name,selected_url:selected_url,specialisations:specialisations});}},className:checkIfExist(_id)?\"active\":\"\",children:[/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{src:selected_url,alt:\"\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:trade_name})]});})})]})]})});};var renderJobResult=function renderJobResult(){var _props$searchJobListD;if(props===null||props===void 0?void 0:(_props$searchJobListD=props.searchJobListData)===null||_props$searchJobListD===void 0?void 0:_props$searchJobListD.length){var _props$searchJobListD2;return/*#__PURE__*/_jsx(\"div\",{className:\"custom_autosuggestion\",id:\"fetched-custom-job-category-div\",children:/*#__PURE__*/_jsx(\"div\",{className:\"recent_search\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"drop_data\",children:(_props$searchJobListD2=props.searchJobListData)===null||_props$searchJobListD2===void 0?void 0:_props$searchJobListD2.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){setItemSearch(item);},children:[/*#__PURE__*/_jsx(\"figure\",{className:\"category\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image?item.image:residential,alt:\"icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"prof\",children:item.trade_name})]})]});})})})});}return null;};var onError=function onError(status,clearSuggestions){console.log(\"Google Maps API returned error with status: \",status);clearSuggestions();};var validateForm=function validateForm(){return true;};var setItemSearch=function setItemSearch(item){setStateData(item);setSelectedTrade({});setSearchText((item===null||item===void 0?void 0:item.name)||\"\");};var bannerSearchClicked=function bannerSearchClicked(){var selected_address=selectedAddress;var selected_trade=selectedTrade;var selected_item=props===null||props===void 0?void 0:props.selectedItem;var props_trade=selected_item===null||selected_item===void 0?void 0:selected_item.selectedTrade;if(!(stateData===null||stateData===void 0?void 0:stateData._id)&&!(props_trade===null||props_trade===void 0?void 0:props_trade._id)){setShowToast(true,\"Please enter the valid search text\");return;}if(checkOnChange){setShowToast(true,\"Please select job type from the list\");return;}if(validateForm()){var _data$address;var _data={page:1,isFiltered:false,tradeId:[stateData===null||stateData===void 0?void 0:stateData._id],specializationId:[stateData===null||stateData===void 0?void 0:stateData.specializationsId]};if(Object.keys(selectedAddress).length){_data[\"location\"]={coordinates:[parseFloat(selected_address===null||selected_address===void 0?void 0:selected_address.lng),parseFloat(selected_address===null||selected_address===void 0?void 0:selected_address.lat)]};if(addressText){_data[\"address\"]=addressText&&Object.keys(suggestionSelected).length?JSON.stringify(suggestionSelected):\"\";}}else{delete _data.location;}if(moment(calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.startDate).isValid()){_data[\"from_date\"]=moment(calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.startDate).format(\"YYYY-MM-DD\");}else{delete _data.from_date;}if(moment(calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.endDate).isValid()){_data[\"to_date\"]=moment(calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.endDate).format(\"YYYY-MM-DD\");}else{delete _data.to_date;}if(props_trade===null||props_trade===void 0?void 0:props_trade._id){var _props_trade$speciali;_data[\"tradeId\"]=[props_trade._id];if(props_trade===null||props_trade===void 0?void 0:(_props_trade$speciali=props_trade.specialisations)===null||_props_trade$speciali===void 0?void 0:_props_trade$speciali.length){_data[\"specializationId\"]=props_trade.specialisations.map(function(item){if(item===null||item===void 0?void 0:item._id){return item===null||item===void 0?void 0:item._id;}return item;});}}else{if(selected_trade){if(Object.keys(selected_trade).length){var _selected_trade$speci;_data[\"tradeId\"]=[selected_trade._id];if(selected_trade===null||selected_trade===void 0?void 0:(_selected_trade$speci=selected_trade.specialisations)===null||_selected_trade$speci===void 0?void 0:_selected_trade$speci.length){_data[\"specializationId\"]=selected_trade.specialisations.map(function(item){return item._id;});}}}}if(!(_data===null||_data===void 0?void 0:_data.address)||!(_data===null||_data===void 0?void 0:(_data$address=_data.address)===null||_data$address===void 0?void 0:_data$address.length)){_data===null||_data===void 0?true:delete _data.address;}if(!localChanges){var _tradeListRedux$find,_JSON$parse,_JSON$parse2;props.postHomeSearchData(_data);var mData=_objectSpread(_objectSpread(_objectSpread({timeStamp:moengage.getCurrentTimeStamp(),category:(_tradeListRedux$find=tradeListRedux.find(function(i){return i._id===(_data===null||_data===void 0?void 0:_data.tradeId[0]);}))===null||_tradeListRedux$find===void 0?void 0:_tradeListRedux$find.trade_name},_data.address&&{location:\"\".concat((_JSON$parse=JSON.parse(_data.address))===null||_JSON$parse===void 0?void 0:_JSON$parse.mainText,\" \").concat((_JSON$parse2=JSON.parse(_data.address))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.secondaryText)}),(_data===null||_data===void 0?void 0:_data.from_date)&&{\"start date\":_data===null||_data===void 0?void 0:_data.from_date}),(_data===null||_data===void 0?void 0:_data.to_date)&&{\"end date\":_data===null||_data===void 0?void 0:_data.to_date});moengage.moE_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES,mData);mixPanel.mixP_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES,mData);}isHandleChanges(false);props.history.push({pathname:\"search-tradie-results\",state:{name:searchText,showOnlyTradeName:showOnlyTradeName,tradeId:_data.tradeId,specializations:_data.specializationId,location:Object.keys(selected_address).length?{coordinates:[selected_address===null||selected_address===void 0?void 0:selected_address.lng,selected_address===null||selected_address===void 0?void 0:selected_address.lat]}:null,calender:calenderRange1,address:addressText,suggestionSelected:suggestionSelected}});}};var filterFromAddress=function filterFromAddress(response){var city,state,country=null;for(var i=0;i<response.results[0].address_components.length;i++){for(var j=0;j<response.results[0].address_components[i].types.length;j++){switch(response.results[0].address_components[i].types[j]){case\"locality\":city=response.results[0].address_components[i].long_name;break;case\"administrative_area_level_1\":state=response.results[0].address_components[i].long_name;break;case\"country\":country=response.results[0].address_components[i].long_name;break;}}}return{city:city,state:state,country:country.toLowerCase()};};var getCurrentLocation=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _navigator,_navigator$permission;var itemToggle,local_position,position,long,lat,response,_filterFromAddress,city,state,country,_response$results,address;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(_navigator=navigator)===null||_navigator===void 0?void 0:(_navigator$permission=_navigator.permissions)===null||_navigator$permission===void 0?void 0:_navigator$permission.query({name:\"geolocation\"});case 2:itemToggle=_context2.sent;setLocationStatus(itemToggle.state);local_position=localStorage.getItem(\"position\");position=JSON.parse(local_position);if(!(position===null||position===void 0?void 0:position.length)){_context2.next=14;break;}long=position[0].toString();lat=position[1].toString();_context2.next=11;return Geocode.fromLatLng(lat,long);case 11:response=_context2.sent;_filterFromAddress=filterFromAddress(response),city=_filterFromAddress.city,state=_filterFromAddress.state,country=_filterFromAddress.country;if(response&&[\"australia\",\"au\"].includes(country)){if((response===null||response===void 0?void 0:response.results)&&Array.isArray(response.results)&&(response===null||response===void 0?void 0:(_response$results=response.results)===null||_response$results===void 0?void 0:_response$results.length)){address=response.results[0].formatted_address;setSelectedAddress({lat:lat,long:long});setAddressText(address);setInputFocus2(true);setInputFocus1(false);setInputFocus3(false);setCurrentLocations(true);}}else{if((itemToggle===null||itemToggle===void 0?void 0:itemToggle.state)!==\"denied\"){setShowToast(true,\"Uh Oh! We don't provide service currently in your location\");}}case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function getCurrentLocation(){return _ref3.apply(this,arguments);};}();var selected_trade=selectedTrade;var length_spec=0;if(props===null||props===void 0?void 0:props.selectedItem){var _sProps$selectedTrade;var sProps=props===null||props===void 0?void 0:props.selectedItem;if(Array.isArray(sProps===null||sProps===void 0?void 0:(_sProps$selectedTrade=sProps.selectedTrade)===null||_sProps$selectedTrade===void 0?void 0:_sProps$selectedTrade.specialisations)){var _sProps$selectedTrade2,_sProps$selectedTrade3;length_spec=sProps===null||sProps===void 0?void 0:(_sProps$selectedTrade2=sProps.selectedTrade)===null||_sProps$selectedTrade2===void 0?void 0:(_sProps$selectedTrade3=_sProps$selectedTrade2.specialisations)===null||_sProps$selectedTrade3===void 0?void 0:_sProps$selectedTrade3.length;}}else{var _selected_trade$speci2;length_spec=selected_trade===null||selected_trade===void 0?void 0:(_selected_trade$speci2=selected_trade.specialisations)===null||_selected_trade$speci2===void 0?void 0:_selected_trade$speci2.length;if(!length_spec){var _stateData$specializa;if(stateData===null||stateData===void 0?void 0:(_stateData$specializa=stateData.specializationsId)===null||_stateData$specializa===void 0?void 0:_stateData$specializa.length){length_spec=1;}}}var checkPlaceholder=function checkPlaceholder(calenderRange1){var fromDate=calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.startDate;var toDate=calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.endDate;var result=renderTimeWithCustomFormat(fromDate,toDate,\"\",[\"DD MMM\",\"DD MMM YYYY\"],\"When?\");if(!result){return\"When?\";}return result;};var custom_name=searchText;if(!checkOnChange){if(length_spec>1){custom_name=\"\".concat(custom_name,\" +\").concat(length_spec-1);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"home_search\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(props===null||props===void 0?void 0:props.handleChangeToggle){props.handleChangeToggle(false);}},className:\"modal_srch_close\",children:/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"close\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"search_wrapr \".concat(!length_spec?\"first_input\":\"\"),children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"categ_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",id:\"text-field-div\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:searchRef,placeholder:\"What jobs are you after?\",value:showOnlyTradeName?searchText:custom_name,onChange:function onChange(e){// isHandleChanges(true)\nsetOnChange(true);setSearchText(e.target.value.trimLeft());},autoComplete:\"none\"// readOnly={props?.selectedItem ? true : false}\n,onFocus:function onFocus(){setInputFocus1(true);setInputFocus2(false);setInputFocus3(false);}}),/*#__PURE__*/_jsx(\"div\",{className:\"border_eff\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/_jsx(\"img\",{src:Searchicon,alt:\"search\"})}),(searchText===null||searchText===void 0?void 0:searchText.length)&&inputFocus1?/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){// clear here\n// isHandleChanges(true)\nsetOnChange(false);setSearchText(\"\");setStateData({});setSelectedTrade({});}})}):null]}),!!errors.searchedJob&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.searchedJob})]}),!(searchText===null||searchText===void 0?void 0:searchText.length)&&inputFocus1?recentJobSearches():null,(searchText===null||searchText===void 0?void 0:searchText.length)>2&&inputFocus1?renderJobResult():null,/*#__PURE__*/_jsxs(\"li\",{className:\"loc_box\",style:{display:\"block\"},children:[/*#__PURE__*/_jsx(\"div\",{id:\"location-text-field-div\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(PlacesAutocomplete,{value:addressText,searchOptions:{componentRestrictions:{country:\"au\"},// types: [\"address\"]\ntypes:[\"(cities)\"]},onChange:function onChange(item){setAddressText(item);if(!addressText.length){setSelectedAddress({});}},shouldFetchSuggestions:(addressText===null||addressText===void 0?void 0:addressText.length)>2,onSelect:/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(address,placeId,suggestion){var _suggestion$formatted,_response$results2;var selected_address,response,_response$results$0$g,lat,lng;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log({address:address,placeId:placeId,suggestion:suggestion});selected_address=address;if(address.indexOf(\",\")){selected_address=address.split(\",\")[0];}setSuggestion(suggestion===null||suggestion===void 0?void 0:suggestion.formattedSuggestion);setAddressText(suggestion===null||suggestion===void 0?void 0:(_suggestion$formatted=suggestion.formattedSuggestion)===null||_suggestion$formatted===void 0?void 0:_suggestion$formatted.mainText);_context3.next=7;return Geocode.fromAddress(address);case 7:response=_context3.sent;console.log({selected_address:selected_address});if(response===null||response===void 0?void 0:(_response$results2=response.results)===null||_response$results2===void 0?void 0:_response$results2.length){_response$results$0$g=response.results[0].geometry.location,lat=_response$results$0$g.lat,lng=_response$results$0$g.lng;setSelectedAddress({lat:lat,lng:lng});setInputFocus2(false);}case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4,_x5){return _ref4.apply(this,arguments);};}(),highlightFirstSuggestion:true,onError:onError,debounce:0,children:function children(_ref5){var getInputProps=_ref5.getInputProps,suggestions=_ref5.suggestions,getSuggestionItemProps=_ref5.getSuggestionItemProps,loading=_ref5.loading;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},getInputProps({placeholder:\"Where?\",className:\"line-1\"})),{},{id:\"location-input-tag\",ref:locationRef,autoComplete:\"off\",onFocus:function onFocus(){setInputFocus2(true);setInputFocus1(false);setInputFocus3(false);}})),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/_jsx(\"img\",{src:Location,alt:\"location\"})}),inputFocus2&&(addressText===null||addressText===void 0?void 0:addressText.length)>2?/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){setAddressText(\"\");setSelectedAddress({});}})}):null]}),(suggestions===null||suggestions===void 0?void 0:suggestions.length)&&inputFocus2&&(addressText===null||addressText===void 0?void 0:addressText.length)>2?/*#__PURE__*/_jsx(\"div\",{className:\"custom_autosuggestion location\",id:\"autocomplete-dropdown-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row recent_search auto_loc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[!!errors.selectedMapLocation&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.selectedMapLocation}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),suggestions.map(function(suggestion){var className=\"autosuggestion_icon card loc name\";var style=suggestion.active?{backgroundColor:\"#fafafa\",cursor:\"pointer\"}:{backgroundColor:\"#ffffff\",cursor:\"pointer\"};return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getSuggestionItemProps(suggestion,{className:className,style:style})),{},{children:[/*#__PURE__*/_jsx(\"span\",{children:suggestion.formattedSuggestion.mainText}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:suggestion.formattedSuggestion.secondaryText})]}));})]})})}):inputFocus2&&!(suggestions===null||suggestions===void 0?void 0:suggestions.length)&&!Object.keys(selectedAddress).length?/*#__PURE__*/_jsx(\"div\",{style:{minHeight:\"50px\"},className:\"custom_autosuggestion location\",id:\"autocomplete-dropdown-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row recent_search auto_loc\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loc_suggestions\",children:\"No Result Found.\"})})})}):null]});}})})}),!!errors.selectedMapLocation&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.selectedMapLocation})]}),!(addressText===null||addressText===void 0?void 0:addressText.length)&&inputFocus2?/*#__PURE__*/_jsxs(\"div\",{className:\"custom_autosuggestion location\",id:\"current-location-search-div\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"location-btn\",onClick:getCurrentLocation,children:[/*#__PURE__*/_jsx(\"span\",{className:\"gps_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:icgps,alt:\"\"})}),\" Use my current location\"]}),locationStatus===\"denied\"&&/*#__PURE__*/_jsx(\"span\",{className:\"blocked_note\",children:\"You have blocked your location. To use this, change your location settings in browser.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row recent_search auto_loc\",children:[(props===null||props===void 0?void 0:(_props$recentLocation=props.recentLocationData)===null||_props$recentLocation===void 0?void 0:_props$recentLocation.length)>0&&/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Recent searches\"}),props===null||props===void 0?void 0:(_props$recentLocation2=props.recentLocationData)===null||_props$recentLocation2===void 0?void 0:_props$recentLocation2.map(function(item){var _item$address,_JSON$parse4,_JSON$parse5;return(item===null||item===void 0?void 0:(_item$address=item.address)===null||_item$address===void 0?void 0:_item$address.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",onClick:function onClick(){var _JSON$parse3,_item$location,_item$location2;setAddressText((_JSON$parse3=JSON.parse(item===null||item===void 0?void 0:item.address))===null||_JSON$parse3===void 0?void 0:_JSON$parse3.mainText);setSelectedAddress({lat:item===null||item===void 0?void 0:(_item$location=item.location)===null||_item$location===void 0?void 0:_item$location.coordinates[1],lng:item===null||item===void 0?void 0:(_item$location2=item.location)===null||_item$location2===void 0?void 0:_item$location2.coordinates[0]});setSuggestion(JSON.parse(item===null||item===void 0?void 0:item.address));},children:/*#__PURE__*/_jsxs(\"div\",{className:\"autosuggestion_icon card loc name\",children:[/*#__PURE__*/_jsx(\"span\",{children:(_JSON$parse4=JSON.parse(item===null||item===void 0?void 0:item.address))===null||_JSON$parse4===void 0?void 0:_JSON$parse4.mainText}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:(_JSON$parse5=JSON.parse(item===null||item===void 0?void 0:item.address))===null||_JSON$parse5===void 0?void 0:_JSON$parse5.secondaryText})]})});})]})]}):null,/*#__PURE__*/_jsx(\"li\",{className:\"date_box \".concat((calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.startDate)?\"date_value\":\"\"),style:{display:\"block\"},children:/*#__PURE__*/_jsxs(\"div\",{ref:calenderRef,className:\"custom_date_range\",id:\"date-range-div\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr calendar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"calender-input\",placeholder:checkPlaceholder(calenderRange1),autoComplete:\"none\",onFocus:function onFocus(){setInputFocus3(true);setInputFocus1(false);setInputFocus2(false);}}),(calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.startDate)&&inputFocus3&&/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){setCalenderRange1({startDate:\"\",endDate:\"\",key:\"selection1\"});}})})]}),inputFocus3?/*#__PURE__*/_jsx(\"div\",{className:\"custom_autosuggestion\",id:\"custom-date-range-div\",children:/*#__PURE__*/_jsx(DateRange,{onChange:handleCalenderRange,ranges:!moment(calenderRange1===null||calenderRange1===void 0?void 0:calenderRange1.startDate).isValid()?[{startDate:new Date(),endDate:new Date(),key:\"selection1\"}]:[calenderRange1],moveRangeOnFirstSelection:false,rangeColors:[\"#fee600\",\"#b5b5b5\"],showDateDisplay:false,showSelectionPreview:true,months:2,showPreview:true,minDate:new Date(),maxDate:moment().add(2,\"years\").toDate(),direction:\"horizontal\",fixedHeight:true})}):null]})}),/*#__PURE__*/_jsx(\"div\",{className:\"search_btn\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"fill_btn btn-effect\",onClick:bannerSearchClicked,children:/*#__PURE__*/_jsx(\"img\",{src:search,alt:\"search\"})})})]})})]});};var mapStateToProps=function mapStateToProps(state){return{searchJobListData:state.homeSearch.searchJobListData,recentSearchJobData:state.homeSearch.recentSearchJobData,homeSearchJobData:state.homeSearch.homeSearchJobData,tradeListData:state.auth.tradeListData,localChanges:state.jobs.localChanges,recentLocationData:state.homeSearch.recentLocationData};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({getSearchJobList:getSearchJobList,getRecentSearchList:getRecentSearchList,postHomeSearchData:postHomeSearchData,isHandleChanges:isHandleChanges,getRecentLocationList:getRecentLocationList},dispatch);};export default connect(mapStateToProps,mapDispatchToProps)(BannerSearch);/**\n\n    No-result found conditions\n    </div> : !loading || addressText?.length > 2 && !suggestions?.length && !enableCurrentLocation && !Object.keys(selectedAddress).length ? (\n\n **/","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/shared/bannerSearch.tsx"],"names":["React","useState","useEffect","useSelector","Constants","PlacesAutocomplete","DateRange","Searchicon","search","Location","cross","icgps","residential","close","connect","bindActionCreators","getSearchJobList","getRecentSearchList","postHomeSearchData","getRecentLocationList","isHandleChanges","useDetectClickOutside","moment","Geocode","setShowToast","deleteRecentSearch","renderTimeWithCustomFormat","moengage","mixPanel","MoEConstants","setApiKey","SocialAuth","GOOGLE_GEOCODE_KEY","setLanguage","setRegion","example_calender","startDate","endDate","key","useStateFromProp","initialValue","value","setValue","BannerSearch","props","props_selected","selectedItem","localChanges","checkOnChange","setOnChange","showOnlyTradeName","setShowOnlyTradeName","locationStatus","setLocationStatus","stateData","setStateData","searchText","setSearchText","addressText","setAddressText","recentLocation","setRecentLocation","selectedAddress","setSelectedAddress","enableCurrentLocation","setCurrentLocations","errors","setErrors","selectedTrade","setSelectedTrade","inputFocus1","setInputFocus1","inputFocus2","setInputFocus2","inputFocus3","setInputFocus3","calenderRange1","setCalenderRange1","suggestionSelected","setSuggestion","tradeListRedux","state","auth","tradeListData","handleOnOutsideSearch","handleOnOutsideLocation","handleOnOutsideCalender","addressRef","setAddressRef","searchRef","onTriggered","locationRef","locationRefClone","calenderRef","handleCalenderRange","item","selection1","console","log","recentLocationData","length","checkIfExist","_id","isLength","Object","keys","cleanRecentSearch","event","recentSearchId","stopPropagation","data","id","status","res","success","recentJobSearches","props_Clone","recentSearchJobData","slice","map","selected_address","history","push","pathname","name","tradeId","specializations","specializationsId","location","coordinates","lng","lat","calender","address","image","trade_name","selected_url","specialisations","item_spec","getItem","renderJobResult","searchJobListData","setItemSearch","onError","clearSuggestions","validateForm","bannerSearchClicked","selected_trade","selected_item","props_trade","page","isFiltered","specializationId","parseFloat","JSON","stringify","isValid","format","from_date","to_date","mData","timeStamp","getCurrentTimeStamp","category","find","i","parse","mainText","secondaryText","moE_SendEvent","SEARCHED_FOR_TRADIES","mixP_SendEvent","filterFromAddress","response","city","country","results","address_components","j","types","long_name","toLowerCase","getCurrentLocation","navigator","permissions","query","itemToggle","local_position","localStorage","position","long","toString","fromLatLng","includes","Array","isArray","formatted_address","length_spec","sProps","checkPlaceholder","fromDate","toDate","result","custom_name","handleChangeToggle","e","target","trimLeft","searchedJob","display","componentRestrictions","placeId","suggestion","indexOf","split","formattedSuggestion","fromAddress","geometry","getInputProps","suggestions","getSuggestionItemProps","loading","placeholder","className","selectedMapLocation","style","active","backgroundColor","cursor","minHeight","Date","add","mapStateToProps","homeSearch","homeSearchJobData","jobs","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Constants from \"../../utils/constants\";\n// @ts-ignore\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from \"react-places-autocomplete\";\nimport regex from \"../../utils/regex\";\n// @ts-ignore\nimport { format } from \"date-fns\";\n// @ts-ignore\nimport { DateRange } from \"react-date-range\";\nimport \"react-date-range/dist/styles.css\"; // main style file\nimport \"react-date-range/dist/theme/default.css\"; // theme css file\n\nimport Searchicon from \"../../assets/images/main-search.png\";\nimport search from \"../../assets/images/ic-search.png\";\nimport Location from \"../../assets/images/ic-location.png\";\nimport cross from \"../../assets/images/close-black.png\";\nimport icgps from \"../../assets/images/ic-gps.png\";\nimport residential from \"../../assets/images/ic-residential.png\";\nimport close from \"../../assets/images/icon-close-1.png\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport {\n  getSearchJobList,\n  getRecentSearchList,\n  postHomeSearchData,\n  getRecentLocationList,\n} from \"../../redux/homeSearch/actions\";\nimport { isHandleChanges } from \"../../redux/jobs/actions\";\n// @ts-ignore\nimport { useDetectClickOutside } from \"react-detect-click-outside\";\nimport moment from \"moment\";\nimport Geocode from \"react-geocode\";\nimport { setShowToast } from \"../../redux/common/actions\";\n\nimport { deleteRecentSearch } from \"../../redux/homeSearch/actions\";\n\nimport { renderTime, renderTimeWithCustomFormat } from \"../../utils/common\";\nimport { moengage, mixPanel } from \"../../services/analyticsTools\";\nimport { MoEConstants } from \"../../utils/constants\";\n\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\nGeocode.setLanguage(\"en\");\nGeocode.setRegion(\"au\");\n// Geocode?.setLocationType(\"ROOFTOP\");\n\ninterface PropsType {\n  history: any;\n  location?: any;\n  bannerData: any;\n  selectedItem: any;\n  selectedTrade: any;\n  current_address: any;\n  recentLocationData: Array<any>;\n\n  searchText: any;\n  stateData: any;\n  addressText: any;\n  selectedAddress: any;\n  isHandleChanges: (item: any) => void;\n  localChanges: boolean;\n  searchJobListData: Array<object>;\n  recentSearchJobData: Array<object>;\n  homeSearchJobData: Array<object>;\n  setBannerData: (data: any) => void;\n  getSearchJobList: (data: any) => void;\n  postHomeSearchData: (data: any) => void;\n  handleChangeToggle?: (data: any) => void;\n  getRecentSearchList?: () => void;\n  getRecentLocationList: () => void;\n}\n\nconst example_calender = { startDate: \"\", endDate: \"\", key: \"selection1\" };\n\nexport function useStateFromProp(initialValue: any) {\n  const [value, setValue] = useState(initialValue);\n\n  useEffect(() => setValue(initialValue), [initialValue]);\n\n  return [value, setValue];\n}\n\nconst BannerSearch = (props: PropsType) => {\n  let props_selected = props.selectedItem;\n  const {\n    selectedItem,\n    isHandleChanges,\n    localChanges,\n    getRecentSearchList,\n    getRecentLocationList,\n  } = props;\n\n  const [checkOnChange, setOnChange] = useState(false);\n  const [showOnlyTradeName, setShowOnlyTradeName] = useState(false);\n\n  const [locationStatus, setLocationStatus] = useState(null);\n  const [stateData, setStateData] = useState<any>(null);\n  const [searchText, setSearchText] = useState(\"\");\n  const [addressText, setAddressText] = useState<any>(\"\");\n  const [recentLocation, setRecentLocation] = useState<any>([]); // recentLocation\n  const [selectedAddress, setSelectedAddress] = useState({});\n  const [enableCurrentLocation, setCurrentLocations] = useState<boolean>(false);\n  const [errors, setErrors] = useState<any>({});\n  const [selectedTrade, setSelectedTrade] = useState({});\n\n  const [inputFocus1, setInputFocus1] = useState<boolean>(false);\n  const [inputFocus2, setInputFocus2] = useState<boolean>(false);\n  const [inputFocus3, setInputFocus3] = useState<boolean>(false);\n\n  const [calenderRange1, setCalenderRange1] = useState<any>(example_calender);\n\n  const [suggestionSelected, setSuggestion] = useState({});\n  const tradeListRedux = useSelector((state: any) => state.auth.tradeListData);\n\n  const handleOnOutsideSearch = () => {\n    setOnChange(false);\n    setInputFocus1(false);\n  };\n  const handleOnOutsideLocation = () => {\n    setInputFocus2(false);\n  };\n  const handleOnOutsideCalender = () => setInputFocus3(false);\n\n  const [addressRef, setAddressRef] = useState(\"\");\n\n  const searchRef = useDetectClickOutside({\n    onTriggered: handleOnOutsideSearch,\n  });\n  const locationRef = useDetectClickOutside({\n    onTriggered: () => {\n      // if (addressText?.length > 3) {\n      handleOnOutsideLocation();\n      // }\n    },\n  });\n  const locationRefClone = useDetectClickOutside({\n    onTriggered: () => {\n      // if (!addressText || addressText?.length < 2) {\n      // handleOnOutsideLocation()\n      // }\n    },\n  });\n  const calenderRef = useDetectClickOutside({\n    onTriggered: handleOnOutsideCalender,\n  });\n\n  const handleCalenderRange = (item: any) => {\n    setCalenderRange1(item.selection1);\n  };\n\n  useEffect(() => {\n    if (getRecentSearchList) {\n      getRecentSearchList();\n    }\n    if (getRecentLocationList) {\n      getRecentLocationList();\n    }\n    // getRecentLocationData();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"In local-changes\", { props: props.selectedItem });\n    return () => {\n      console.log(\"local-changes\", { props: props.selectedItem });\n    };\n  }, [props]);\n\n  useEffect(() => {\n    // if (props.recentLocationData?.length && JSON.stringify(props.recentLocationData[0]?.location?.coordinates) !== JSON.stringify(recentLocation[0]?.location?.coordinates)) {\n    //     getRecentLocationData();\n    // }\n  }, [props.recentLocationData, recentLocation]);\n\n  useEffect(() => {\n    if (searchText?.length > 2) {\n      props.getSearchJobList(searchText);\n    }\n    if (!searchText?.length) {\n      setSelectedTrade({});\n    }\n  }, [searchText]);\n\n  const checkIfExist = (_id: any) => {\n    if (selectedTrade) {\n      let isLength = Object.keys(selectedTrade).length;\n      if (isLength) {\n        let item: any = selectedTrade;\n        if (item?._id === _id) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  const cleanRecentSearch = async (event: any, recentSearchId: string) => {\n    event.stopPropagation();\n    const data = {\n      id: recentSearchId,\n      status: 0,\n    };\n    const res = await deleteRecentSearch(data);\n    if (res.success) {\n      if (getRecentSearchList) {\n        getRecentSearchList();\n      }\n    }\n  };\n\n  const recentJobSearches = () => {\n    let props_Clone: any = props;\n    let tradeListData = props_Clone.tradeListData;\n    return (\n      <>\n        <div className=\"custom_autosuggestion\" id=\"recent-job-search-div\">\n          {props?.recentSearchJobData?.length ? (\n            <React.Fragment>\n              <span className=\"sub_title\">Recent searches</span>\n              <div className=\"flex_row recent_search\">\n                {props.recentSearchJobData?.length > 0 &&\n                  props.recentSearchJobData?.slice(0, 4).map((item: any) => {\n                    return (\n                      <div\n                        className=\"flex_col_sm_3\"\n                        onClick={() => {\n                          let selected_address: any = selectedAddress;\n                          props.history.push({\n                            pathname: `search-tradie-results`,\n                            state: {\n                              name: item?.name,\n                              tradeId: [item?._id],\n                              specializations: [item?.specializationsId],\n                              location: Object.keys(selected_address).length\n                                ? {\n                                    coordinates: [\n                                      selected_address?.lng,\n                                      selected_address?.lat,\n                                    ],\n                                  }\n                                : null,\n                              calender: calenderRange1,\n                              address: addressText,\n                            },\n                          });\n                          // setItemSearch(item);\n                          // setSelectedTrade({});\n                        }}\n                      >\n                        <div className=\"card ico_txt_wrap\">\n                          <figure className=\"ico\">\n                            <img src={item?.image || residential} alt=\"icon\" />\n                          </figure>\n                          <div className=\"f_column\">\n                            <span>{item.name}</span>\n                            <span className=\"name\">{item.trade_name}</span>\n                          </div>\n                          <span\n                            className=\"remove_card\"\n                            onClick={(event) =>\n                              cleanRecentSearch(event, item.recentSearchId)\n                            }\n                          >\n                            <img src={close} alt=\"remove\" />\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  })}\n              </div>\n            </React.Fragment>\n          ) : null}\n\n          <div className=\"select_sphere recent_search\">\n            <span className=\"sub_title\">Categories</span>\n            <ul>\n              {tradeListData?.map(\n                ({\n                  _id,\n                  trade_name,\n                  selected_url,\n                  specialisations,\n                }: {\n                  _id: string;\n                  trade_name: string;\n                  selected_url: string;\n                  specialisations: [];\n                }) => (\n                  <li\n                    onClick={() => {\n                      let item_spec: any = specialisations;\n                      if (item_spec?.length) {\n                        let getItem = item_spec[0];\n                        if (getItem) {\n                          setStateData({\n                            image: selected_url,\n                            name: getItem?.name,\n                            specializationsId: getItem?._id,\n                            trade_name: trade_name,\n                            _id: _id,\n                          });\n                          setSearchText(trade_name);\n                        }\n                        setShowOnlyTradeName(true);\n                        setSelectedTrade({\n                          _id,\n                          trade_name,\n                          selected_url,\n                          specialisations,\n                        });\n                      }\n                    }}\n                    className={checkIfExist(_id) ? \"active\" : \"\"}\n                  >\n                    <figure>\n                      <img src={selected_url} alt=\"\" />\n                    </figure>\n                    <span className=\"name\">{trade_name}</span>\n                  </li>\n                )\n              )}\n            </ul>\n          </div>\n        </div>\n      </>\n    );\n  };\n\n  const renderJobResult = () => {\n    if (props?.searchJobListData?.length) {\n      return (\n        <div\n          className=\"custom_autosuggestion\"\n          id=\"fetched-custom-job-category-div\"\n        >\n          <div className=\"recent_search\">\n            <ul className=\"drop_data\">\n              {props.searchJobListData?.map((item: any) => {\n                return (\n                  <li\n                    onClick={() => {\n                      setItemSearch(item);\n                    }}\n                  >\n                    <figure className=\"category\">\n                      <img\n                        src={item.image ? item.image : residential}\n                        alt=\"icon\"\n                      />\n                    </figure>\n                    <div className=\"details\">\n                      <span className=\"name\">{item.name}</span>\n                      <span className=\"prof\">{item.trade_name}</span>\n                    </div>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const onError = (status: string, clearSuggestions: Function) => {\n    console.log(\"Google Maps API returned error with status: \", status);\n    clearSuggestions();\n  };\n\n  const validateForm = () => {\n    return true;\n  };\n\n  const setItemSearch = (item: any) => {\n    setStateData(item);\n    setSelectedTrade({});\n    setSearchText(item?.name || \"\");\n  };\n\n  const bannerSearchClicked = () => {\n    let selected_address: any = selectedAddress;\n    let selected_trade: any = selectedTrade;\n    let selected_item: any = props?.selectedItem;\n    let props_trade: any = selected_item?.selectedTrade;\n\n    if (!stateData?._id && !props_trade?._id) {\n      setShowToast(true, \"Please enter the valid search text\");\n      return;\n    }\n\n    if (checkOnChange) {\n      setShowToast(true, \"Please select job type from the list\");\n      return;\n    }\n\n    if (validateForm()) {\n      let data: any = {\n        page: 1,\n        isFiltered: false,\n        tradeId: [stateData?._id],\n        specializationId: [stateData?.specializationsId],\n      };\n\n      if (Object.keys(selectedAddress).length) {\n        data[\"location\"] = {\n          coordinates: [\n            parseFloat(selected_address?.lng),\n            parseFloat(selected_address?.lat),\n          ],\n        };\n        if (addressText) {\n          data[\"address\"] =\n            addressText && Object.keys(suggestionSelected).length\n              ? JSON.stringify(suggestionSelected)\n              : \"\";\n        }\n      } else {\n        delete data.location;\n      }\n\n      if (moment(calenderRange1?.startDate).isValid()) {\n        data[\"from_date\"] = moment(calenderRange1?.startDate).format(\n          \"YYYY-MM-DD\"\n        );\n      } else {\n        delete data.from_date;\n      }\n\n      if (moment(calenderRange1?.endDate).isValid()) {\n        data[\"to_date\"] = moment(calenderRange1?.endDate).format(\"YYYY-MM-DD\");\n      } else {\n        delete data.to_date;\n      }\n\n      if (props_trade?._id) {\n        data[\"tradeId\"] = [props_trade._id];\n        if (props_trade?.specialisations?.length) {\n          data[\"specializationId\"] = props_trade.specialisations.map(\n            (item: any) => {\n              if (item?._id) {\n                return item?._id;\n              }\n              return item;\n            }\n          );\n        }\n      } else {\n        if (selected_trade) {\n          if (Object.keys(selected_trade).length) {\n            data[\"tradeId\"] = [selected_trade._id];\n            if (selected_trade?.specialisations?.length) {\n              data[\"specializationId\"] = selected_trade.specialisations.map(\n                (item: any) => item._id\n              );\n            }\n          }\n        }\n      }\n\n      if (!data?.address || !data?.address?.length) {\n        delete data?.address;\n      }\n\n      if (!localChanges) {\n        props.postHomeSearchData(data);\n        const mData = {\n          timeStamp: moengage.getCurrentTimeStamp(),\n          category: tradeListRedux.find((i: any) => i._id === data?.tradeId[0])\n            ?.trade_name,\n          ...(data.address && {\n            location: `${JSON.parse(data.address)?.mainText} ${\n              JSON.parse(data.address)?.secondaryText\n            }`,\n          }),\n          //'length of hire': '',\n          ...(data?.from_date && { \"start date\": data?.from_date }),\n          ...(data?.to_date && { \"end date\": data?.to_date }),\n        };\n        moengage.moE_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES, mData);\n        mixPanel.mixP_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES, mData);\n      }\n      isHandleChanges(false);\n      props.history.push({\n        pathname: `search-tradie-results`,\n        state: {\n          name: searchText,\n          showOnlyTradeName: showOnlyTradeName,\n          tradeId: data.tradeId,\n          specializations: data.specializationId,\n          location: Object.keys(selected_address).length\n            ? { coordinates: [selected_address?.lng, selected_address?.lat] }\n            : null,\n          calender: calenderRange1,\n          address: addressText,\n          suggestionSelected: suggestionSelected,\n        },\n      });\n    }\n  };\n\n  const filterFromAddress = (response: any) => {\n    let city,\n      state,\n      country = null;\n    for (let i = 0; i < response.results[0].address_components.length; i++) {\n      for (\n        let j = 0;\n        j < response.results[0].address_components[i].types.length;\n        j++\n      ) {\n        switch (response.results[0].address_components[i].types[j]) {\n          case \"locality\":\n            city = response.results[0].address_components[i].long_name;\n            break;\n          case \"administrative_area_level_1\":\n            state = response.results[0].address_components[i].long_name;\n            break;\n          case \"country\":\n            country = response.results[0].address_components[i].long_name;\n            break;\n        }\n      }\n    }\n    return { city, state, country: country.toLowerCase() };\n  };\n\n  const getCurrentLocation = async () => {\n    let itemToggle: any = await navigator?.permissions?.query({\n      name: \"geolocation\",\n    });\n    setLocationStatus(itemToggle.state);\n    let local_position: any = localStorage.getItem(\"position\");\n    let position: any = JSON.parse(local_position);\n    if (position?.length) {\n      let long = position[0].toString();\n      let lat = position[1].toString();\n      let response: any = await Geocode.fromLatLng(lat, long);\n      const { city, state, country } = filterFromAddress(response);\n\n      if (response && [\"australia\", \"au\"].includes(country)) {\n        if (\n          response?.results &&\n          Array.isArray(response.results) &&\n          response?.results?.length\n        ) {\n          const address = response.results[0].formatted_address;\n          setSelectedAddress({ lat, long });\n          setAddressText(address);\n          setInputFocus2(true);\n          setInputFocus1(false);\n          setInputFocus3(false);\n          setCurrentLocations(true);\n        }\n      } else {\n        if (itemToggle?.state !== \"denied\") {\n          setShowToast(\n            true,\n            \"Uh Oh! We don't provide service currently in your location\"\n          );\n        }\n      }\n    }\n  };\n\n  let selected_trade: any = selectedTrade;\n  let length_spec = 0;\n\n  if (props?.selectedItem) {\n    let sProps = props?.selectedItem;\n    if (Array.isArray(sProps?.selectedTrade?.specialisations)) {\n      length_spec = sProps?.selectedTrade?.specialisations?.length;\n    }\n  } else {\n    length_spec = selected_trade?.specialisations?.length;\n    if (!length_spec) {\n      if (stateData?.specializationsId?.length) {\n        length_spec = 1;\n      }\n    }\n  }\n\n  const checkPlaceholder = (calenderRange1: any) => {\n    let fromDate: any = calenderRange1?.startDate;\n    let toDate: any = calenderRange1?.endDate;\n    let result = renderTimeWithCustomFormat(\n      fromDate,\n      toDate,\n      \"\",\n      [\"DD MMM\", \"DD MMM YYYY\"],\n      \"When?\"\n    );\n\n    if (!result) {\n      return \"When?\";\n    }\n\n    return result;\n  };\n\n  let custom_name = searchText;\n\n  if (!checkOnChange) {\n    if (length_spec > 1) {\n      custom_name = `${custom_name} +${length_spec - 1}`;\n    }\n  }\n\n  return (\n    <div className=\"home_search\">\n      <button\n        onClick={() => {\n          if (props?.handleChangeToggle) {\n            props.handleChangeToggle(false);\n          }\n        }}\n        className=\"modal_srch_close\"\n      >\n        <img src={close} alt=\"close\" />\n      </button>\n      <form className={`search_wrapr ${!length_spec ? \"first_input\" : \"\"}`}>\n        {/* first_input */}\n        <ul>\n          <li className=\"categ_box\">\n            <div className=\"text_field\" id=\"text-field-div\">\n              <input\n                type=\"text\"\n                ref={searchRef}\n                placeholder=\"What jobs are you after?\"\n                value={showOnlyTradeName ? searchText : custom_name}\n                onChange={(e) => {\n                  // isHandleChanges(true)\n                  setOnChange(true);\n                  setSearchText(e.target.value.trimLeft());\n                }}\n                autoComplete=\"none\"\n                // readOnly={props?.selectedItem ? true : false}\n                onFocus={() => {\n                  setInputFocus1(true);\n                  setInputFocus2(false);\n                  setInputFocus3(false);\n                }}\n              />\n              <div className=\"border_eff\"></div>\n              <span className=\"detect_icon_ltr\">\n                <img src={Searchicon} alt=\"search\" />\n              </span>\n              {searchText?.length && inputFocus1 ? (\n                <span className=\"detect_icon\">\n                  <img\n                    src={cross}\n                    alt=\"cross\"\n                    onClick={() => {\n                      // clear here\n                      // isHandleChanges(true)\n                      setOnChange(false);\n                      setSearchText(\"\");\n                      setStateData({});\n                      setSelectedTrade({});\n                    }}\n                  />\n                </span>\n              ) : null}\n            </div>\n            {!!errors.searchedJob && (\n              <span className=\"error_msg\">{errors.searchedJob}</span>\n            )}\n          </li>\n          {!searchText?.length && inputFocus1 ? recentJobSearches() : null}\n          {searchText?.length > 2 && inputFocus1 ? renderJobResult() : null}\n\n          {/* {'location search start here!'} */}\n          <li className=\"loc_box\" style={{ display: \"block\" }}>\n            <div id=\"location-text-field-div\">\n              <div>\n                <PlacesAutocomplete\n                  value={addressText}\n                  searchOptions={{\n                    componentRestrictions: {\n                      country: \"au\",\n                    },\n                    // types: [\"address\"]\n                    types: [\"(cities)\"],\n                  }}\n                  onChange={(item: any) => {\n                    setAddressText(item);\n                    if (!addressText.length) {\n                      setSelectedAddress({});\n                    }\n                  }}\n                  shouldFetchSuggestions={addressText?.length > 2}\n                  onSelect={async (\n                    address: string,\n                    placeId?: any,\n                    suggestion?: any\n                  ) => {\n                    console.log({ address, placeId, suggestion });\n                    let selected_address: any = address;\n                    if (address.indexOf(\",\")) {\n                      selected_address = address.split(\",\")[0];\n                    }\n                    setSuggestion(suggestion?.formattedSuggestion);\n                    setAddressText(suggestion?.formattedSuggestion?.mainText);\n                    let response = await Geocode.fromAddress(address);\n                    console.log({ selected_address });\n                    if (response?.results?.length) {\n                      const { lat, lng } =\n                        response.results[0].geometry.location;\n                      setSelectedAddress({ lat, lng });\n                      setInputFocus2(false);\n                    }\n                  }}\n                  highlightFirstSuggestion={true}\n                  onError={onError}\n                  debounce={0}\n                >\n                  {({\n                    getInputProps,\n                    suggestions,\n                    getSuggestionItemProps,\n                    loading,\n                  }: any) => (\n                    <div>\n                      <div className={`text_field`}>\n                        {/* className={`text_field ${addressText?.length > 2 ? '' : 'none'}`}> */}\n                        <input\n                          {...getInputProps({\n                            placeholder: \"Where?\",\n                            className: \"line-1\",\n                          })}\n                          id=\"location-input-tag\"\n                          ref={locationRef}\n                          autoComplete=\"off\"\n                          onFocus={() => {\n                            setInputFocus2(true);\n                            setInputFocus1(false);\n                            setInputFocus3(false);\n                          }}\n                        />\n                        <span className=\"detect_icon_ltr\">\n                          <img src={Location} alt=\"location\" />\n                        </span>\n\n                        {inputFocus2 && addressText?.length > 2 ? (\n                          <span className=\"detect_icon\">\n                            <img\n                              src={cross}\n                              alt=\"cross\"\n                              onClick={() => {\n                                setAddressText(\"\");\n                                setSelectedAddress({});\n                              }}\n                            />\n                          </span>\n                        ) : null}\n                      </div>\n\n                      {suggestions?.length &&\n                      inputFocus2 &&\n                      addressText?.length > 2 ? (\n                        <div\n                          className=\"custom_autosuggestion location\"\n                          id=\"autocomplete-dropdown-container\"\n                        >\n                          <div className=\"flex_row recent_search auto_loc\">\n                            <div className=\"flex_col_sm_4\">\n                              {!!errors.selectedMapLocation && (\n                                <span className=\"error_msg\">\n                                  {errors.selectedMapLocation}\n                                </span>\n                              )}\n                              {loading && <div>Loading...</div>}\n\n                              {suggestions.map((suggestion: any) => {\n                                const className =\n                                  \"autosuggestion_icon card loc name\";\n                                const style = suggestion.active\n                                  ? {\n                                      backgroundColor: \"#fafafa\",\n                                      cursor: \"pointer\",\n                                    }\n                                  : {\n                                      backgroundColor: \"#ffffff\",\n                                      cursor: \"pointer\",\n                                    };\n                                return (\n                                  <div\n                                    {...getSuggestionItemProps(suggestion, {\n                                      className,\n                                      style,\n                                    })}\n                                  >\n                                    <span>\n                                      {suggestion.formattedSuggestion.mainText}\n                                    </span>\n                                    <span className=\"name\">\n                                      {\n                                        suggestion.formattedSuggestion\n                                          .secondaryText\n                                      }\n                                    </span>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        </div>\n                      ) : inputFocus2 &&\n                        !suggestions?.length &&\n                        !Object.keys(selectedAddress).length ? (\n                        <div\n                          style={{ minHeight: \"50px\" }}\n                          className=\"custom_autosuggestion location\"\n                          id=\"autocomplete-dropdown-container\"\n                        >\n                          <div className=\"flex_row recent_search auto_loc\">\n                            <div className=\"flex_col_sm_4\">\n                              <div className=\"loc_suggestions\">\n                                {\"No Result Found.\"}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ) : null}\n                    </div>\n                  )}\n                </PlacesAutocomplete>\n              </div>\n            </div>\n            {!!errors.selectedMapLocation && (\n              <span className=\"error_msg\">{errors.selectedMapLocation}</span>\n            )}\n          </li>\n\n          {/* {'location search end here!'} */}\n\n          {!addressText?.length && inputFocus2 ? (\n            <div\n              className=\"custom_autosuggestion location\"\n              id=\"current-location-search-div\"\n            >\n              <span className=\"location-btn\" onClick={getCurrentLocation}>\n                <span className=\"gps_icon\">\n                  <img src={icgps} alt=\"\" />\n                </span>\n                {\" Use my current location\"}\n              </span>\n              {locationStatus === \"denied\" && (\n                <span className=\"blocked_note\">\n                  {\n                    \"You have blocked your location. To use this, change your location settings in browser.\"\n                  }\n                </span>\n              )}\n              <div className=\"flex_row recent_search auto_loc\">\n                {props?.recentLocationData?.length > 0 && (\n                  <span className=\"sub_title\">{\"Recent searches\"}</span>\n                )}\n                {props?.recentLocationData?.map((item: any) => {\n                  return (\n                    item?.address?.length > 0 && (\n                      <div\n                        className=\"flex_col_sm_4\"\n                        onClick={() => {\n                          setAddressText(JSON.parse(item?.address)?.mainText);\n                          setSelectedAddress({\n                            lat: item?.location?.coordinates[1],\n                            lng: item?.location?.coordinates[0],\n                          });\n                          setSuggestion(JSON.parse(item?.address));\n                        }}\n                      >\n                        <div className=\"autosuggestion_icon card loc name\">\n                          <span>{JSON.parse(item?.address)?.mainText}</span>\n                          <span className=\"name\">\n                            {JSON.parse(item?.address)?.secondaryText}\n                          </span>\n                        </div>\n                      </div>\n                    )\n                  );\n                })}\n              </div>\n            </div>\n          ) : null}\n          <li\n            className={`date_box ${\n              calenderRange1?.startDate ? \"date_value\" : \"\"\n            }`}\n            style={{ display: \"block\" }}\n          >\n            <div\n              ref={calenderRef}\n              className=\"custom_date_range\"\n              id=\"date-range-div\"\n            >\n              <div className=\"text_field\">\n                <span className=\"detect_icon_ltr calendar\"></span>\n                <input\n                  type=\"text\"\n                  id=\"calender-input\"\n                  placeholder={checkPlaceholder(calenderRange1)}\n                  autoComplete=\"none\"\n                  onFocus={() => {\n                    setInputFocus3(true);\n                    setInputFocus1(false);\n                    setInputFocus2(false);\n                  }}\n                />\n                {calenderRange1?.startDate && inputFocus3 && (\n                  <span className=\"detect_icon\">\n                    <img\n                      src={cross}\n                      alt=\"cross\"\n                      onClick={() => {\n                        setCalenderRange1({\n                          startDate: \"\",\n                          endDate: \"\",\n                          key: \"selection1\",\n                        });\n                      }}\n                    />\n                  </span>\n                )}\n              </div>\n              {/* {inputFocus3 && */}\n              {inputFocus3 ? (\n                <div\n                  className=\"custom_autosuggestion\"\n                  id=\"custom-date-range-div\"\n                >\n                  <DateRange\n                    onChange={handleCalenderRange}\n                    ranges={\n                      !moment(calenderRange1?.startDate).isValid()\n                        ? [\n                            {\n                              startDate: new Date(),\n                              endDate: new Date(),\n                              key: \"selection1\",\n                            },\n                          ]\n                        : [calenderRange1]\n                    }\n                    moveRangeOnFirstSelection={false}\n                    rangeColors={[\"#fee600\", \"#b5b5b5\"]}\n                    showDateDisplay={false}\n                    showSelectionPreview={true}\n                    months={2}\n                    showPreview={true}\n                    minDate={new Date()}\n                    maxDate={moment().add(2, \"years\").toDate()}\n                    direction=\"horizontal\"\n                    fixedHeight={true}\n                  />\n                </div>\n              ) : null}\n            </div>\n          </li>\n          <div className=\"search_btn\">\n            <button\n              type=\"button\"\n              className=\"fill_btn btn-effect\"\n              onClick={bannerSearchClicked}\n            >\n              <img src={search} alt=\"search\" />\n            </button>\n          </div>\n        </ul>\n      </form>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state: any) => {\n  return {\n    searchJobListData: state.homeSearch.searchJobListData,\n    recentSearchJobData: state.homeSearch.recentSearchJobData,\n    homeSearchJobData: state.homeSearch.homeSearchJobData,\n    tradeListData: state.auth.tradeListData,\n    localChanges: state.jobs.localChanges,\n    recentLocationData: state.homeSearch.recentLocationData,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return bindActionCreators(\n    {\n      getSearchJobList,\n      getRecentSearchList,\n      postHomeSearchData,\n      isHandleChanges,\n      getRecentLocationList,\n    },\n    dispatch\n  );\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BannerSearch);\n\n/**\n\n    No-result found conditions\n    </div> : !loading || addressText?.length > 2 && !suggestions?.length && !enableCurrentLocation && !Object.keys(selectedAddress).length ? (\n\n **/\n"]},"metadata":{},"sourceType":"module"}