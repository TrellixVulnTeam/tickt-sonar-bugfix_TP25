{"ast":null,"code":"import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{postHomeApplyJob}from\"../../../../redux/homeSearch/actions\";import{addQuote,addItem,updateItem,deleteItem,quoteByJobId}from\"../../../../redux/quotes/actions\";import NumberFormat from\"react-number-format\";import Modal from\"@material-ui/core/Modal\";import storageService from\"../../../../utils/storageService\";import Button from\"@material-ui/core/Button\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogTitle from\"@material-ui/core/DialogTitle\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogContentText from\"@material-ui/core/DialogContentText\";import deleteQuote from\"../../../../assets/images/ic-delete.png\";import cancel from\"../../../../assets/images/ic-cancel.png\";import{moengage,mixPanel}from\"../../../../services/analyticsTools\";import{MoEConstants}from\"../../../../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QuoteMark=function QuoteMark(props){var _props$location,_props$location$state;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Items=_useState2[0],setItems=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isEdit=_useState4[0],setEdit=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItemsAmt=_useState6[0],setTotalItemsAmt=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),quoteId=_useState8[0],setQuoteId=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),deleteItemModal=_useState10[0],setDeleteItemModal=_useState10[1];var _useState11=useState({item_number:1,description:\"\",price:0,quantity:0,totalAmount:0}),_useState12=_slicedToArray(_useState11,2),localQuote=_useState12[0],setLocalQuote=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isQuoteDialog=_useState14[0],setIsQuoteDialog=_useState14[1];var jobData=(_props$location=props.location)===null||_props$location===void 0?void 0:(_props$location$state=_props$location.state)===null||_props$location$state===void 0?void 0:_props$location$state.jobData;console.log(\"jobData: \",jobData);useEffect(function(){preFetch();},[]);console.log(\"Items: \",Items);var preFetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _props$location2,_props$location2$stat;var isItemsEditable,_props$location3,_props$location3$stat,_props$location3$stat2,_storageService$getIt,_res$data,_res$data$resultData$,_res$data$resultData$2,data,res,_res$data2,_res$data2$resultData,_res$data3,_res$data3$resultData,_items_,_items_2,items_,item_no;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isItemsEditable=((_props$location2=props.location)===null||_props$location2===void 0?void 0:(_props$location2$stat=_props$location2.state)===null||_props$location2$stat===void 0?void 0:_props$location2$stat.redirect_from)===\"appliedJobs\"?true:false;if(!isItemsEditable){_context.next=9;break;}data={jobId:(_props$location3=props.location)===null||_props$location3===void 0?void 0:(_props$location3$stat=_props$location3.state)===null||_props$location3$stat===void 0?void 0:(_props$location3$stat2=_props$location3$stat.jobData)===null||_props$location3$stat2===void 0?void 0:_props$location3$stat2.jobId,tradieId:(_storageService$getIt=storageService.getItem(\"userInfo\"))===null||_storageService$getIt===void 0?void 0:_storageService$getIt._id};_context.next=5;return quoteByJobId(data);case 5:res=_context.sent;if(res.success&&((_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$resultData$=_res$data.resultData[0])===null||_res$data$resultData$===void 0?void 0:(_res$data$resultData$2=_res$data$resultData$.quote_item)===null||_res$data$resultData$2===void 0?void 0:_res$data$resultData$2.length)){items_=(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$resultData=_res$data2.resultData[0])===null||_res$data2$resultData===void 0?void 0:_res$data2$resultData.quote_item;setItems(items_);setQuoteId((_res$data3=res.data)===null||_res$data3===void 0?void 0:(_res$data3$resultData=_res$data3.resultData[0])===null||_res$data3$resultData===void 0?void 0:_res$data3$resultData._id);item_no=((_items_=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_===void 0?void 0:_items_.item_number)?((_items_2=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_2===void 0?void 0:_items_2.item_number)+1:1;setLocalQuote(function(prev){return _objectSpread(_objectSpread({},prev),{},{item_number:item_no});});props.dataFetched(true);}else{props.dataFetched(false);}_context.next=10;break;case 9:props.dataFetched(true);case 10:case\"end\":return _context.stop();}}},_callee);}));return function preFetch(){return _ref.apply(this,arguments);};}();var deleteItem_=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){var data,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data={itemId:item===null||item===void 0?void 0:item._id};_context2.next=3;return deleteItem(data);case 3:res=_context2.sent;if(!res.success){_context2.next=8;break;}return _context2.abrupt(\"return\",true);case 8:return _context2.abrupt(\"return\",false);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteItem_(_x){return _ref2.apply(this,arguments);};}();var addItem_=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item){var _res$data4;var items_,data,res,_res$data5,_items_3,_items_4;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:items_=Items;data={quoteId:quoteId,item_number:item===null||item===void 0?void 0:item.item_number,description:item===null||item===void 0?void 0:item.description,price:item===null||item===void 0?void 0:item.price,quantity:item===null||item===void 0?void 0:item.quantity,totalAmount:item===null||item===void 0?void 0:item.totalAmount};_context3.next=4;return addItem(data);case 4:res=_context3.sent;if(res.success&&((_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.resultData)){items_.push((_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.resultData);setItems(items_);setLocalQuote({item_number:((_items_3=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_3===void 0?void 0:_items_3.item_number)?((_items_4=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_4===void 0?void 0:_items_4.item_number)+1:1,description:\"\",price:0,quantity:0,totalAmount:0});}case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function addItem_(_x2){return _ref3.apply(this,arguments);};}();var updateItem_=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(index,items){var newAmount,item,data,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:newAmount=totalItemsAmount(items);item=items[index];data={itemId:item===null||item===void 0?void 0:item._id,item_number:item===null||item===void 0?void 0:item.item_number,description:item===null||item===void 0?void 0:item.description,price:item===null||item===void 0?void 0:item.price,quantity:item===null||item===void 0?void 0:item.quantity,totalAmount:item===null||item===void 0?void 0:item.totalAmount,quoteId:quoteId,amount:newAmount};_context4.next=5;return updateItem(data);case 5:res=_context4.sent;if(!res.success){_context4.next=10;break;}return _context4.abrupt(\"return\",true);case 10:return _context4.abrupt(\"return\",false);case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function updateItem_(_x3,_x4){return _ref4.apply(this,arguments);};}();var moECalled=function moECalled(){var _jobData$jobMilestone;var mData={timeStamp:moengage.getCurrentTimeStamp(),category:jobData===null||jobData===void 0?void 0:jobData.tradeName,location:jobData===null||jobData===void 0?void 0:jobData.locationName,\"Number of milestone\":jobData===null||jobData===void 0?void 0:(_jobData$jobMilestone=jobData.jobMilestonesData)===null||_jobData$jobMilestone===void 0?void 0:_jobData$jobMilestone.length,Amount:totalItemsAmt};moengage.moE_SendEvent(MoEConstants.QUOTED_A_JOB,mData);mixPanel.mixP_SendEvent(MoEConstants.QUOTED_A_JOB,mData);};var applyJobClicked=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _props$location4,_props$location4$stat,_jobDetailsData$poste;var jobDetailsData,data,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:jobDetailsData=(_props$location4=props.location)===null||_props$location4===void 0?void 0:(_props$location4$stat=_props$location4.state)===null||_props$location4$stat===void 0?void 0:_props$location4$stat.jobData;data={jobId:jobDetailsData===null||jobDetailsData===void 0?void 0:jobDetailsData.jobId,builderId:jobDetailsData===null||jobDetailsData===void 0?void 0:(_jobDetailsData$poste=jobDetailsData.postedBy)===null||_jobDetailsData$poste===void 0?void 0:_jobDetailsData$poste.builderId,tradeId:jobDetailsData===null||jobDetailsData===void 0?void 0:jobDetailsData.tradeId,specializationId:jobDetailsData===null||jobDetailsData===void 0?void 0:jobDetailsData.specializationId};_context5.next=4;return postHomeApplyJob(data);case 4:res=_context5.sent;if(res.success){moECalled();props.history.push({pathname:\"/quote-job-success\",state:{builderName:props.builderName?props.builderName:\"Builder\"}});}case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function applyJobClicked(){return _ref5.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _props$location5,_props$location5$stat,_props$location5$stat2,_storageService$getIt2;var jobId,data,res,_props$location6,_props$location6$stat;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:jobId=(_props$location5=props.location)===null||_props$location5===void 0?void 0:(_props$location5$stat=_props$location5.state)===null||_props$location5$stat===void 0?void 0:(_props$location5$stat2=_props$location5$stat.jobData)===null||_props$location5$stat2===void 0?void 0:_props$location5$stat2.jobId;data={jobId:jobId,userId:(_storageService$getIt2=storageService.getItem(\"userInfo\"))===null||_storageService$getIt2===void 0?void 0:_storageService$getIt2._id,amount:totalItemsAmt,quote_item:Items};_context6.next=4;return addQuote(data);case 4:res=_context6.sent;if(res.success){if(((_props$location6=props.location)===null||_props$location6===void 0?void 0:(_props$location6$stat=_props$location6.state)===null||_props$location6$stat===void 0?void 0:_props$location6$stat.base_redirect)===\"newJobs\"){moECalled();props.history.push({pathname:\"/quote-job-success\",state:{builderName:props.builderName?props.builderName:\"Builder\"}});}else{applyJobClicked();}}case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function handleSubmit(){return _ref6.apply(this,arguments);};}();var handleChange=function handleChange(name,value){if(name===\"description\"&&value.length>250){return;}setLocalQuote(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,name===\"description\"?value:+value));});};var totalItemsAmount=function totalItemsAmount(items){var totalAmount=items.slice(1,items.length).reduce(function(a,b){return a+b.totalAmount;},Items[0].totalAmount);return totalAmount;};var calculateTotal=function calculateTotal(){if(Items===null||Items===void 0?void 0:Items.length){var totalAmt_=totalItemsAmount(Items);if(totalAmt_&&totalAmt_!==totalItemsAmt){setTotalItemsAmt(totalAmt_);}var _total=/*#__PURE__*/_jsx(NumberFormat,{value:totalAmt_,decimalScale:2,displayType:\"text\",thousandSeparator:true,isNumericString:true});return _total;}return\"$0\";};var saveAddItem=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var index,items_,item,isSuccess,_items_5,_props$location7,_props$location7$stat,_items_6,_item,_items_7,_items_8;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!isEditTrue){_context7.next=15;break;}index=isEdit;items_=Items;item=localQuote;item[\"totalAmount\"]=+item.quantity*+item.price;items_[isEdit]=item;isSuccess=true;if(!quoteId){_context7.next=11;break;}_context7.next=10;return updateItem_(index,items_);case 10:isSuccess=_context7.sent;case 11:if(isSuccess){setItems(items_);setEdit(null);setLocalQuote({item_number:((_items_5=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_5===void 0?void 0:_items_5.item_number)+1,description:\"\",price:0,quantity:0,totalAmount:0});}return _context7.abrupt(\"return\");case 15:_items_6=Items;_item=localQuote;_item[\"totalAmount\"]=+_item.quantity*+_item.price;if(!(((_props$location7=props.location)===null||_props$location7===void 0?void 0:(_props$location7$stat=_props$location7.state)===null||_props$location7$stat===void 0?void 0:_props$location7$stat.redirect_from)===\"appliedJobs\")){_context7.next=23;break;}_context7.next=21;return addItem_(_item);case 21:_context7.next=26;break;case 23:_items_6.push(_item);setItems(_items_6);setLocalQuote({item_number:((_items_7=_items_6[(_items_6===null||_items_6===void 0?void 0:_items_6.length)-1])===null||_items_7===void 0?void 0:_items_7.item_number)?((_items_8=_items_6[(_items_6===null||_items_6===void 0?void 0:_items_6.length)-1])===null||_items_8===void 0?void 0:_items_8.item_number)+1:1,description:\"\",price:0,quantity:0,totalAmount:0});case 26:if(isQuoteDialog){setIsQuoteDialog(false);}case 27:case\"end\":return _context7.stop();}}},_callee7);}));return function saveAddItem(){return _ref7.apply(this,arguments);};}();var handleQuoteDialog=function handleQuoteDialog(ans,hitApi){if(quoteId){setIsQuoteDialog(ans===\"yes\"?true:false);if(hitApi)saveAddItem();}else{saveAddItem();}};var item_number=localQuote.item_number;var description=localQuote.description;var price=localQuote.price;var qty=localQuote.quantity;var total_cal=+qty*+price;var total=total_cal===0?\"\":total_cal;var isEditTrue=isEdit!==null&&isEdit>-1?true:false;var callItemNo=function callItemNo(){var _Items,_Items2;if(localQuote===null||localQuote===void 0?void 0:localQuote._id){console.log(\"localQuote?._id-----------if\");return localQuote===null||localQuote===void 0?void 0:localQuote.item_number;}if(isEdit!==null){var _Items$isEdit;return(_Items$isEdit=Items[isEdit])===null||_Items$isEdit===void 0?void 0:_Items$isEdit.item_number;}console.log(\"Items---------else\");return((_Items=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items===void 0?void 0:_Items.item_number)?((_Items2=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items2===void 0?void 0:_Items2.item_number)+1:1;};var quoteValidate=function quoteValidate(){if((description===null||description===void 0?void 0:description.length)===0||qty===0||price===0){return true;}return false;};var deleteItemHandler=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var _filtered;var index,items_,filtered,length,id,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:index=isEdit;items_=Items;filtered=items_.filter(function(item,index){return index!==isEdit;});setItems(filtered);setEdit(null);length=(_filtered=filtered[(filtered===null||filtered===void 0?void 0:filtered.length)-1])===null||_filtered===void 0?void 0:_filtered.item_number;id=length>0?length+1:1;res=true;if(!quoteId){_context8.next=12;break;}_context8.next=11;return deleteItem_(items_[index]);case 11:res=_context8.sent;case 12:if(res){setLocalQuote({item_number:id,description:\"\",price:0,quantity:0,totalAmount:0});}setDeleteItemModal(false);case 14:case\"end\":return _context8.stop();}}},_callee8);}));return function deleteItemHandler(){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relate form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(isEditTrue){var _Items3,_Items4;setEdit(null);setLocalQuote({item_number:((_Items3=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items3===void 0?void 0:_Items3.item_number)?((_Items4=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items4===void 0?void 0:_Items4.item_number)+1:1,description:\"\",price:0,quantity:0,totalAmount:0});}else{props.history.goBack();}},className:\"back\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Quote for this job\"}),/*#__PURE__*/_jsx(_Fragment,{children:(Items===null||Items===void 0?void 0:Items.length)>0&&!isEditTrue?Items.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"change_req\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"edit_delete\",children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setEdit(index);setLocalQuote(item);},className:\"editdark\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_2\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Item\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Description\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Price\"})}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:item.item_number})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show_label line-1\",children:item.description})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:/*#__PURE__*/_jsx(NumberFormat,{value:item.totalAmount,displayType:\"text\",prefix:\"$ \",thousandSeparator:true,isNumericString:true})})})]})]})]});}):null}),props.isDataFetched&&/*#__PURE__*/_jsxs(\"div\",{className:\"change_req\",children:[isEditTrue&&Items.length>1&&/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setDeleteItemModal(true);},className:\"delete_quote\",children:[\"Delete\",/*#__PURE__*/_jsx(\"img\",{src:deleteQuote,alt:\"delete\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"inner_title\",children:\"\".concat(isEditTrue?\"Edit\":\"Add\",\" Item\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Item Number\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:callItemNo()})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:function onChange(e){return handleChange(\"description\",e.target.value.trimLeft());}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Price\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(NumberFormat,{value:price||\"\",decimalScale:2,allowNegative:false,className:\"foo\",placeholder:\"$100\",displayType:\"input\",thousandSeparator:true,isNumericString:true,prefix:\"$\",onValueChange:function onValueChange(values){var formattedValue=values.formattedValue,value=values.value;handleChange(\"price\",value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(NumberFormat,{value:qty||\"\",className:\"foo\",placeholder:\"10\",displayType:\"input\",thousandSeparator:true,isNumericString:true,onValueChange:function onValueChange(values){var formattedValue=values.formattedValue,value=values.value;handleChange(\"quantity\",value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Total\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(NumberFormat,{readOnly:true,value:total||\"\",decimalScale:2,allowNegative:false,className:\"foo\",placeholder:\"$1000\",displayType:\"input\",thousandSeparator:true,isNumericString:true,prefix:\"$\"})})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleQuoteDialog(\"yes\");},className:\"fill_btn w100per \".concat(quoteValidate()?\"disable_btn\":\"\"),children:\"\".concat(isEditTrue?\"Save\":\"Add\",\" Item\")})]}),/*#__PURE__*/_jsx(Modal,{className:\"custom_modal\",open:deleteItemModal,onClose:function onClose(){return setDeleteItemModal(false);},\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_wh confirmation\",\"data-aos\":\"zoom-in\",\"data-aos-delay\":\"30\",\"data-aos-duration\":\"1000\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"xs_sub_title\",children:\"Delete item confirmation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close_btn\",onClick:function onClick(){return setDeleteItemModal(false);},children:/*#__PURE__*/_jsx(\"img\",{src:cancel,alt:\"cancel\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal_message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you still want to delete item?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog_actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn btn-effect\",onClick:deleteItemHandler,children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"fill_grey_btn btn-effect\",onClick:function onClick(){return setDeleteItemModal(false);},children:\"No\"})]})]})}),/*#__PURE__*/_jsxs(Dialog,{open:isQuoteDialog// onClose={() => handleQuoteDialog}\n,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",className:\"xs_alert_dialog_title\",children:\"This quote will be send to builder\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:\"Are you sure you want to update quote?\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleQuoteDialog(\"no\",true);},color:\"primary\",children:\"Yes\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleQuoteDialog(\"no\");},color:\"primary\",children:\"No\"})]})]}),(Items===null||Items===void 0?void 0:Items.length)>0&&!isEditTrue&&/*#__PURE__*/_jsx(\"div\",{className:\"total_quote\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"fill_grey_btn\",children:[\"Total Quote: $\",calculateTotal()]})}),quoteId||!props.isDataFetched||isEditTrue?null:/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"fill_grey_btn quote_btn \".concat((Items===null||Items===void 0?void 0:Items.length)===0?\"disable_btn\":\"\"),children:\"Submit Quote\"})]});};export default QuoteMark;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/jobDashboard/components/quoteJobs/quoteMark.tsx"],"names":["React","useState","useEffect","postHomeApplyJob","addQuote","addItem","updateItem","deleteItem","quoteByJobId","NumberFormat","Modal","storageService","Button","Dialog","DialogActions","DialogTitle","DialogContent","DialogContentText","deleteQuote","cancel","moengage","mixPanel","MoEConstants","QuoteMark","props","Items","setItems","isEdit","setEdit","totalItemsAmt","setTotalItemsAmt","quoteId","setQuoteId","deleteItemModal","setDeleteItemModal","item_number","description","price","quantity","totalAmount","localQuote","setLocalQuote","isQuoteDialog","setIsQuoteDialog","jobData","location","state","console","log","preFetch","isItemsEditable","redirect_from","data","jobId","tradieId","getItem","_id","res","success","resultData","quote_item","length","items_","item_no","prev","dataFetched","deleteItem_","item","itemId","addItem_","push","updateItem_","index","items","newAmount","totalItemsAmount","amount","moECalled","mData","timeStamp","getCurrentTimeStamp","category","tradeName","locationName","jobMilestonesData","Amount","moE_SendEvent","QUOTED_A_JOB","mixP_SendEvent","applyJobClicked","jobDetailsData","builderId","postedBy","tradeId","specializationId","history","pathname","builderName","handleSubmit","userId","base_redirect","handleChange","name","value","slice","reduce","a","b","calculateTotal","totalAmt_","total","saveAddItem","isEditTrue","isSuccess","handleQuoteDialog","ans","hitApi","qty","total_cal","callItemNo","quoteValidate","deleteItemHandler","filtered","filter","id","goBack","map","isDataFetched","e","target","trimLeft","values","formattedValue"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { postHomeApplyJob } from \"../../../../redux/homeSearch/actions\";\nimport {\n  addQuote,\n  addItem,\n  updateItem,\n  deleteItem,\n  quoteByJobId,\n} from \"../../../../redux/quotes/actions\";\nimport { acceptDeclineJobInvitation } from \"../../../../redux/jobs/actions\";\nimport NumberFormat from \"react-number-format\";\nimport Modal from \"@material-ui/core/Modal\";\nimport storageService from \"../../../../utils/storageService\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\n\nimport deleteQuote from \"../../../../assets/images/ic-delete.png\";\nimport cancel from \"../../../../assets/images/ic-cancel.png\";\nimport { moengage, mixPanel } from \"../../../../services/analyticsTools\";\nimport { MoEConstants } from \"../../../../utils/constants\";\n\nconst QuoteMark = (props: any) => {\n  const [Items, setItems] = useState<Array<any>>([]);\n  const [isEdit, setEdit] = useState<any>(null);\n  const [totalItemsAmt, setTotalItemsAmt] = useState<number>(0);\n  const [quoteId, setQuoteId] = useState<string>(\"\");\n  const [deleteItemModal, setDeleteItemModal] = useState<boolean>(false);\n  const [localQuote, setLocalQuote] = useState<any>({\n    item_number: 1,\n    description: \"\",\n    price: 0,\n    quantity: 0,\n    totalAmount: 0,\n  });\n  const [isQuoteDialog, setIsQuoteDialog] = useState<boolean>(false);\n  var jobData = props.location?.state?.jobData;\n  console.log(\"jobData: \", jobData);\n\n  useEffect(() => {\n    preFetch();\n  }, []);\n\n  console.log(\"Items: \", Items);\n  const preFetch = async () => {\n    const isItemsEditable =\n      props.location?.state?.redirect_from === \"appliedJobs\" ? true : false;\n    if (isItemsEditable) {\n      const data: any = {\n        jobId: props.location?.state?.jobData?.jobId,\n        tradieId: storageService.getItem(\"userInfo\")?._id,\n      };\n      const res = await quoteByJobId(data);\n      if (res.success && res.data?.resultData[0]?.quote_item?.length) {\n        const items_ = res.data?.resultData[0]?.quote_item;\n        setItems(items_);\n        setQuoteId(res.data?.resultData[0]?._id);\n        let item_no = items_[items_?.length - 1]?.item_number\n          ? items_[items_?.length - 1]?.item_number + 1\n          : 1;\n        setLocalQuote((prev: any) => ({ ...prev, item_number: item_no }));\n        props.dataFetched(true);\n      } else {\n        props.dataFetched(false);\n      }\n    } else {\n      props.dataFetched(true);\n    }\n  };\n\n  const deleteItem_ = async (item: any) => {\n    const data = {\n      itemId: item?._id,\n    };\n    const res = await deleteItem(data);\n    if (res.success) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const addItem_ = async (item: any) => {\n    let items_ = Items;\n    const data = {\n      quoteId: quoteId,\n      item_number: item?.item_number,\n      description: item?.description,\n      price: item?.price,\n      quantity: item?.quantity,\n      totalAmount: item?.totalAmount,\n    };\n    const res = await addItem(data);\n    if (res.success && res.data?.resultData) {\n      items_.push(res.data?.resultData);\n      setItems(items_);\n      setLocalQuote({\n        item_number: items_[items_?.length - 1]?.item_number\n          ? items_[items_?.length - 1]?.item_number + 1\n          : 1,\n        description: \"\",\n        price: 0,\n        quantity: 0,\n        totalAmount: 0,\n      });\n    }\n  };\n\n  const updateItem_ = async (index: number, items: any) => {\n    const newAmount: number = totalItemsAmount(items);\n    const item = items[index];\n    const data = {\n      itemId: item?._id,\n      item_number: item?.item_number,\n      description: item?.description,\n      price: item?.price,\n      quantity: item?.quantity,\n      totalAmount: item?.totalAmount,\n      quoteId: quoteId,\n      amount: newAmount,\n    };\n    const res = await updateItem(data);\n    if (res.success) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const moECalled = () => {\n    const mData = {\n      timeStamp: moengage.getCurrentTimeStamp(),\n      category: jobData?.tradeName,\n      location: jobData?.locationName,\n      \"Number of milestone\": jobData?.jobMilestonesData?.length,\n      Amount: totalItemsAmt,\n    };\n    moengage.moE_SendEvent(MoEConstants.QUOTED_A_JOB, mData);\n    mixPanel.mixP_SendEvent(MoEConstants.QUOTED_A_JOB, mData);\n  };\n\n  const applyJobClicked = async () => {\n    const jobDetailsData: any = props.location?.state?.jobData;\n    const data = {\n      jobId: jobDetailsData?.jobId,\n      builderId: jobDetailsData?.postedBy?.builderId,\n      tradeId: jobDetailsData?.tradeId,\n      specializationId: jobDetailsData?.specializationId,\n    };\n    const res = await postHomeApplyJob(data);\n    if (res.success) {\n      moECalled();\n      props.history.push({\n        pathname: \"/quote-job-success\",\n        state: {\n          builderName: props.builderName ? props.builderName : \"Builder\",\n        },\n      });\n    }\n  };\n\n  const handleSubmit = async () => {\n    const jobId: string = props.location?.state?.jobData?.jobId;\n    const data: any = {\n      jobId: jobId,\n      userId: storageService.getItem(\"userInfo\")?._id,\n      amount: totalItemsAmt,\n      quote_item: Items,\n    };\n    const res: any = await addQuote(data);\n    if (res.success) {\n      if (props.location?.state?.base_redirect === \"newJobs\") {\n        moECalled();\n        props.history.push({\n          pathname: \"/quote-job-success\",\n          state: {\n            builderName: props.builderName ? props.builderName : \"Builder\",\n          },\n        });\n      } else {\n        applyJobClicked();\n      }\n    }\n  };\n\n  const handleChange = (name: any, value: any) => {\n    if (name === \"description\" && value.length > 250) {\n      return;\n    }\n    setLocalQuote((prev: any) => ({\n      ...prev,\n      [name]: name === \"description\" ? value : +value,\n    }));\n  };\n\n  const totalItemsAmount = (items: any) => {\n    let totalAmount = items.slice(1, items.length).reduce((a: any, b: any) => {\n      return a + b.totalAmount;\n    }, Items[0].totalAmount);\n    return totalAmount;\n  };\n\n  const calculateTotal = () => {\n    if (Items?.length) {\n      let totalAmt_ = totalItemsAmount(Items);\n      if (totalAmt_ && totalAmt_ !== totalItemsAmt) {\n        setTotalItemsAmt(totalAmt_);\n      }\n      const total = (\n        <NumberFormat\n          value={totalAmt_}\n          decimalScale={2}\n          displayType={\"text\"}\n          thousandSeparator={true}\n          isNumericString={true}\n        />\n      );\n      return total;\n    }\n    return `$0`;\n  };\n\n  const saveAddItem = async () => {\n    if (isEditTrue) {\n      let index = isEdit;\n      let items_ = Items;\n      let item: any = localQuote;\n      item[\"totalAmount\"] = +item.quantity * +item.price;\n      items_[isEdit] = item;\n      let isSuccess: boolean = true;\n      if (quoteId) {\n        isSuccess = await updateItem_(index, items_);\n      }\n      if (isSuccess) {\n        setItems(items_);\n        setEdit(null);\n        setLocalQuote({\n          item_number: items_[items_?.length - 1]?.item_number + 1,\n          description: \"\",\n          price: 0,\n          quantity: 0,\n          totalAmount: 0,\n        });\n      }\n      return;\n    } else {\n      let items_ = Items;\n      let item: any = localQuote;\n      item[\"totalAmount\"] = +item.quantity * +item.price;\n      if (props.location?.state?.redirect_from === \"appliedJobs\") {\n        await addItem_(item);\n      } else {\n        items_.push(item);\n        setItems(items_);\n        setLocalQuote({\n          item_number: items_[items_?.length - 1]?.item_number\n            ? items_[items_?.length - 1]?.item_number + 1\n            : 1,\n          description: \"\",\n          price: 0,\n          quantity: 0,\n          totalAmount: 0,\n        });\n      }\n    }\n    if (isQuoteDialog) {\n      setIsQuoteDialog(false);\n    }\n  };\n\n  const handleQuoteDialog = (ans?: string, hitApi?: boolean) => {\n    if (quoteId) {\n      setIsQuoteDialog(ans === \"yes\" ? true : false);\n      if (hitApi) saveAddItem();\n    } else {\n      saveAddItem();\n    }\n  };\n\n  let item_number = localQuote.item_number;\n  let description = localQuote.description;\n  let price: any = localQuote.price;\n  let qty: any = localQuote.quantity;\n  let total_cal = +qty * +price;\n  let total = total_cal === 0 ? \"\" : total_cal;\n  let isEditTrue = isEdit !== null && isEdit > -1 ? true : false;\n\n  const callItemNo = () => {\n    if (localQuote?._id) {\n      console.log(\"localQuote?._id-----------if\");\n      return localQuote?.item_number;\n    }\n    if (isEdit !== null) {\n      return Items[isEdit]?.item_number;\n    }\n    console.log(\"Items---------else\");\n    return Items[Items?.length - 1]?.item_number\n      ? Items[Items?.length - 1]?.item_number + 1\n      : 1;\n  };\n\n  const quoteValidate = () => {\n    if (description?.length === 0 || qty === 0 || price === 0) {\n      return true;\n    }\n    return false;\n  };\n\n  const deleteItemHandler = async () => {\n    let index = isEdit;\n    let items_ = Items;\n    let filtered = items_.filter((item: any, index: any) => index !== isEdit);\n    setItems(filtered);\n    setEdit(null);\n    let length = filtered[filtered?.length - 1]?.item_number;\n    let id = length > 0 ? length + 1 : 1;\n    let res: any = true;\n    if (quoteId) {\n      res = await deleteItem_(items_[index]);\n    }\n    if (res) {\n      setLocalQuote({\n        item_number: id,\n        description: \"\",\n        price: 0,\n        quantity: 0,\n        totalAmount: 0,\n      });\n    }\n    setDeleteItemModal(false);\n  };\n\n  return (\n    <div className=\"flex_col_sm_6\">\n      <div className=\"relate form_field\">\n        <button\n          onClick={() => {\n            if (isEditTrue) {\n              setEdit(null);\n              setLocalQuote({\n                item_number: Items[Items?.length - 1]?.item_number\n                  ? Items[Items?.length - 1]?.item_number + 1\n                  : 1,\n                description: \"\",\n                price: 0,\n                quantity: 0,\n                totalAmount: 0,\n              });\n            } else {\n              props.history.goBack();\n            }\n          }}\n          className=\"back\"\n        ></button>\n      </div>\n      <span className=\"sub_title\">{\"Quote for this job\"}</span>\n      <>\n        {Items?.length > 0 && !isEditTrue\n          ? Items.map((item: any, index: number) => (\n              <div className=\"change_req\">\n                <div className=\"edit_delete\">\n                  <span\n                    onClick={() => {\n                      setEdit(index);\n                      setLocalQuote(item);\n                    }}\n                    className=\"editdark\"\n                  ></span>\n                </div>\n                <div className=\"flex_row\">\n                  <div className=\"flex_col_sm_2\">\n                    <label className=\"form_label\">Item</label>\n                  </div>\n                  <div className=\"flex_col_sm_6\">\n                    <label className=\"form_label\">Description</label>\n                  </div>\n                  <div className=\"flex_col_sm_4\">\n                    <label className=\"form_label\">Price</label>\n                  </div>\n                  <>\n                    <div className=\"flex_col_sm_2\">\n                      <span className=\"show_label\">{item.item_number}</span>\n                    </div>\n                    <div className=\"flex_col_sm_6\">\n                      <span className=\"show_label line-1\">\n                        {item.description}\n                      </span>\n                    </div>\n                    <div className=\"flex_col_sm_4\">\n                      <span className=\"show_label\">\n                        <NumberFormat\n                          value={item.totalAmount}\n                          displayType={\"text\"}\n                          prefix={\"$ \"}\n                          thousandSeparator={true}\n                          isNumericString={true}\n                        />\n                      </span>\n                    </div>\n                  </>\n                </div>\n              </div>\n            ))\n          : null}\n      </>\n\n      {props.isDataFetched && (\n        <div className=\"change_req\">\n          {isEditTrue && Items.length > 1 && (\n            <span\n              onClick={() => setDeleteItemModal(true)}\n              className=\"delete_quote\"\n            >\n              {\"Delete\"}\n              <img src={deleteQuote} alt=\"delete\" />\n            </span>\n          )}\n          <span className=\"inner_title\">{`${\n            isEditTrue ? \"Edit\" : \"Add\"\n          } Item`}</span>\n          <div className=\"form_field\">\n            <label className=\"form_label\">{\"Item Number\"}</label>\n            <div className=\"text_field\">\n              <input type=\"number\" value={callItemNo()} />\n            </div>\n          </div>\n          <div className=\"form_field\">\n            <label className=\"form_label\">Description</label>\n            <div className=\"text_field\">\n              <textarea\n                value={description}\n                onChange={(e) =>\n                  handleChange(\"description\", e.target.value.trimLeft())\n                }\n              ></textarea>\n            </div>\n          </div>\n          <div className=\"form_field\">\n            <div className=\"flex_row\">\n              <div className=\"flex_col_sm_4\">\n                <label className=\"form_label\">Price</label>\n                <div className=\"text_field\">\n                  <NumberFormat\n                    value={price || \"\"}\n                    decimalScale={2}\n                    allowNegative={false}\n                    className=\"foo\"\n                    placeholder=\"$100\"\n                    displayType={\"input\"}\n                    thousandSeparator={true}\n                    isNumericString={true}\n                    prefix={\"$\"}\n                    onValueChange={(values) => {\n                      const { formattedValue, value } = values;\n                      handleChange(\"price\", value);\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"flex_col_sm_4\">\n                <label className=\"form_label\">Qty</label>\n                <div className=\"text_field\">\n                  <NumberFormat\n                    value={qty || \"\"}\n                    className=\"foo\"\n                    placeholder=\"10\"\n                    displayType={\"input\"}\n                    thousandSeparator={true}\n                    isNumericString={true}\n                    onValueChange={(values) => {\n                      const { formattedValue, value } = values;\n                      handleChange(\"quantity\", value);\n                    }}\n                  />\n                </div>\n              </div>\n              <div className=\"flex_col_sm_4\">\n                <label className=\"form_label\">Total</label>\n                <div className=\"text_field\">\n                  <NumberFormat\n                    readOnly\n                    value={total || \"\"}\n                    decimalScale={2}\n                    allowNegative={false}\n                    className=\"foo\"\n                    placeholder=\"$1000\"\n                    displayType={\"input\"}\n                    thousandSeparator={true}\n                    isNumericString={true}\n                    prefix={\"$\"}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n          <button\n            onClick={() => handleQuoteDialog(\"yes\")}\n            className={`fill_btn w100per ${\n              quoteValidate() ? \"disable_btn\" : \"\"\n            }`}\n          >\n            {`${isEditTrue ? \"Save\" : \"Add\"} Item`}\n          </button>\n        </div>\n      )}\n\n      <Modal\n        className=\"custom_modal\"\n        open={deleteItemModal}\n        onClose={() => setDeleteItemModal(false)}\n        aria-labelledby=\"simple-modal-title\"\n        aria-describedby=\"simple-modal-description\"\n      >\n        <div\n          className=\"custom_wh confirmation\"\n          data-aos=\"zoom-in\"\n          data-aos-delay=\"30\"\n          data-aos-duration=\"1000\"\n        >\n          <div className=\"heading\">\n            <span className=\"xs_sub_title\">{`Delete item confirmation`}</span>\n            <button\n              className=\"close_btn\"\n              onClick={() => setDeleteItemModal(false)}\n            >\n              <img src={cancel} alt=\"cancel\" />\n            </button>\n          </div>\n          <div className=\"modal_message\">\n            <p>Are you sure you still want to delete item?</p>\n          </div>\n          <div className=\"dialog_actions\">\n            <button className=\"fill_btn btn-effect\" onClick={deleteItemHandler}>\n              Yes\n            </button>\n            <button\n              className=\"fill_grey_btn btn-effect\"\n              onClick={() => setDeleteItemModal(false)}\n            >\n              No\n            </button>\n          </div>\n        </div>\n      </Modal>\n\n      <Dialog\n        open={isQuoteDialog}\n        // onClose={() => handleQuoteDialog}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\" className=\"xs_alert_dialog_title\">\n          {\"This quote will be send to builder\"}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {\"Are you sure you want to update quote?\"}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleQuoteDialog(\"no\", true)} color=\"primary\">\n            {\"Yes\"}\n          </Button>\n          <Button onClick={() => handleQuoteDialog(\"no\")} color=\"primary\">\n            {\"No\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* <Modal\n                className=\"custom_modal\"\n                open={isQuoteDialog}\n                onClose={() => handleQuoteDialog('no')}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n            >\n                <div className=\"custom_wh confirmation\" data-aos=\"zoom-in\" data-aos-delay=\"30\" data-aos-duration=\"1000\">\n                    <div className=\"heading\">\n                        <span className=\"xs_sub_title\">{'This quote will be send to builder'}</span>\n                        <button className=\"close_btn\" onClick={() => handleQuoteDialog('no')}>\n                            <img src={cancel} alt=\"cancel\" />\n                        </button>\n                    </div>\n                    <div className=\"modal_message\">\n                        <p>Are you sure you want to update quote?</p>\n                    </div>\n                    <div className=\"dialog_actions\">\n                        <button className=\"fill_btn btn-effect\" onClick={() => handleQuoteDialog('no', true)}>Yes</button>\n                        <button className=\"fill_grey_btn btn-effect\" onClick={() => handleQuoteDialog('no')}>No</button>\n                    </div>\n                </div>\n            </Modal> */}\n\n      {Items?.length > 0 && !isEditTrue && (\n        <div className=\"total_quote\">\n          <span className=\"fill_grey_btn\">\n            {`Total Quote: $`}\n            {calculateTotal()}\n          </span>\n        </div>\n      )}\n\n      {quoteId || !props.isDataFetched || isEditTrue ? null : (\n        <button\n          onClick={handleSubmit}\n          className={`fill_grey_btn quote_btn ${\n            Items?.length === 0 ? \"disable_btn\" : \"\"\n          }`}\n        >\n          {\"Submit Quote\"}\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default QuoteMark;\n"]},"metadata":{},"sourceType":"module"}