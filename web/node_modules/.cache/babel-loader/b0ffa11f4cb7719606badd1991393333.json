{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{addTemplate}from'../../../redux/jobs/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";//  ({ data, stepCompleted, handleStepComplete, handleStepBack }: Proptypes) => {\nvar SaveTemplate=function SaveTemplate(_ref){var data=_ref.data,milestones=_ref.milestones,stepCompleted=_ref.stepCompleted,handleCombineMileStones=_ref.handleCombineMileStones,handleStepForward=_ref.handleStepForward,handleStepComplete=_ref.handleStepComplete,handleStepBack=_ref.handleStepBack;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),templateName=_useState2[0],setTemplateName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var checkError=function checkError(){if(!(error===null||error===void 0?void 0:error.length)&&(templateName===null||templateName===void 0?void 0:templateName.length)){return false;}return true;};var handleContinue=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var filter_milestone,_yield$addTemplate,success,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(templateName===null||templateName===void 0?void 0:templateName.length){_context.next=3;break;}setError('Template name is required.');return _context.abrupt(\"return\");case 3:filter_milestone=milestones.filter(function(item){if(Object.keys(item).length){var _item$to_date,_item$from_date;if(!(item===null||item===void 0?void 0:(_item$to_date=item.to_date)===null||_item$to_date===void 0?void 0:_item$to_date.length)){delete item.to_date;}if(!(item===null||item===void 0?void 0:(_item$from_date=item.from_date)===null||_item$from_date===void 0?void 0:_item$from_date.length)||(item===null||item===void 0?void 0:item.from_date)===\"Invalid date\"){item===null||item===void 0?true:delete item.from_date;}return item;}});_context.next=6;return addTemplate({template_name:templateName,milestones:filter_milestone});case 6:_yield$addTemplate=_context.sent;success=_yield$addTemplate.success;data=_yield$addTemplate.data;if(success){handleCombineMileStones([]);handleStepForward(11);}case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleContinue(){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(value){if((templateName===null||templateName===void 0?void 0:templateName.length)&&(templateName===null||templateName===void 0?void 0:templateName.length)>50){setError('Maximum 50 characters are allowed.');}else{setError('');}setTemplateName(value.trimLeft().replace(/[^a-zA-Z|0-9 ]/g,\"\"));};console.log({error:error});return/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){handleStepForward(6);},className:\"back\"}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:\"Save as template\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"commn_para\",children:'Add template name. It will be stored in your profile'})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Template Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){handleChange(e.target.value);},value:templateName,type:\"text\",placeholder:\"This job...\",name:\"name\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleContinue,className:\"fill_btn full_btn btn-effect \".concat(checkError()?'disable_btn':''),children:'Save'})})]})})]})})});};export default SaveTemplate;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/saveTemplate.tsx"],"names":["React","useState","addTemplate","SaveTemplate","data","milestones","stepCompleted","handleCombineMileStones","handleStepForward","handleStepComplete","handleStepBack","templateName","setTemplateName","error","setError","checkError","length","handleContinue","filter_milestone","filter","item","Object","keys","to_date","from_date","template_name","success","handleChange","value","trimLeft","replace","console","log","e","target"],"mappings":"yeACA,MAAOA,CAAAA,KAAP,EAA2BC,QAA3B,KAA2C,OAA3C,CAEA,OAASC,WAAT,KAA4B,6BAA5B,C,wFAUA;AAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAoI,IAAjIC,CAAAA,IAAiI,MAAjIA,IAAiI,CAA3HC,UAA2H,MAA3HA,UAA2H,CAA/GC,aAA+G,MAA/GA,aAA+G,CAAhGC,uBAAgG,MAAhGA,uBAAgG,CAAvEC,iBAAuE,MAAvEA,iBAAuE,CAApDC,kBAAoD,MAApDA,kBAAoD,CAAhCC,cAAgC,MAAhCA,cAAgC,CACrJ,cAAwCT,QAAQ,CAAC,EAAD,CAAhD,wCAAOU,YAAP,eAAqBC,eAArB,eACA,eAA0BX,QAAQ,CAAC,EAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAI,EAACF,KAAD,SAACA,KAAD,iBAACA,KAAK,CAAEG,MAAR,IAAkBL,YAAlB,SAAkBA,YAAlB,iBAAkBA,YAAY,CAAEK,MAAhC,CAAJ,CAA4C,CACxC,MAAO,MAAP,CACH,CACD,MAAO,KAAP,CACH,CALD,CAOA,GAAMC,CAAAA,cAAc,2FAAG,2LAEdN,YAFc,SAEdA,YAFc,iBAEdA,YAAY,CAAEK,MAFA,yBAGfF,QAAQ,CAAC,4BAAD,CAAR,CAHe,wCAMfI,gBANe,CAMIb,UAAU,CAACc,MAAX,CAAkB,SAACC,IAAD,CAAe,CACpD,GAAIC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EAAkBJ,MAAtB,CAA8B,mCAC1B,GAAI,EAACI,IAAD,SAACA,IAAD,gCAACA,IAAI,CAAEG,OAAP,wCAAC,cAAeP,MAAhB,CAAJ,CAA4B,CACxB,MAAOI,CAAAA,IAAI,CAACG,OAAZ,CACH,CAED,GAAI,EAACH,IAAD,SAACA,IAAD,kCAACA,IAAI,CAAEI,SAAP,0CAAC,gBAAiBR,MAAlB,GAA4B,CAAAI,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEI,SAAN,IAAoB,cAApD,CAAoE,CACzDJ,IAAP,SAAOA,IAAP,qBAAOA,CAAAA,IAAI,CAAEI,SAAb,CACH,CAED,MAAOJ,CAAAA,IAAP,CACH,CACJ,CAZsB,CANJ,uBAoBWlB,CAAAA,WAAW,CAAC,CACtCuB,aAAa,CAAEd,YADuB,CAEtCN,UAAU,CAAEa,gBAF0B,CAAD,CApBtB,yCAoBbQ,OApBa,oBAoBbA,OApBa,CAoBJtB,IApBI,oBAoBJA,IApBI,CAwBnB,GAAIsB,OAAJ,CAAa,CACTnB,uBAAuB,CAAC,EAAD,CAAvB,CACAC,iBAAiB,CAAC,EAAD,CAAjB,CACH,CA3BkB,uDAAH,kBAAdS,CAAAA,cAAc,2CAApB,CA8BA,GAAMU,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAgB,CACjC,GAAI,CAAAjB,YAAY,OAAZ,EAAAA,YAAY,SAAZ,QAAAA,YAAY,CAAEK,MAAd,GAAwB,CAAAL,YAAY,OAAZ,EAAAA,YAAY,SAAZ,QAAAA,YAAY,CAAEK,MAAd,EAAuB,EAAnD,CAAuD,CACnDF,QAAQ,CAAC,oCAAD,CAAR,CACH,CAFD,IAEO,CACHA,QAAQ,CAAC,EAAD,CAAR,CACH,CACDF,eAAe,CAAEgB,KAAD,CAAQC,QAAR,GAAmBC,OAAnB,CAA2B,iBAA3B,CAA8C,EAA9C,CAAD,CAAf,CACH,CAPD,CASAC,OAAO,CAACC,GAAR,CAAY,CAAEnB,KAAK,CAALA,KAAF,CAAZ,EACA,mBACI,YAAK,SAAS,CAAC,aAAf,uBAEI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,kBAAf,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,eAAf,wBACI,aAAK,SAAS,CAAC,QAAf,wBACI,eAAQ,OAAO,CAAE,kBAAM,CAAEL,iBAAiB,CAAC,CAAD,CAAjB,CAAsB,CAA/C,CAAiD,SAAS,CAAC,MAA3D,EADJ,cAEI,aAAM,SAAS,CAAC,OAAhB,8BAFJ,GADJ,cAKI,UAAG,SAAS,CAAC,YAAb,UACK,sDADL,EALJ,GADJ,EADJ,EADJ,cAcI,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,eAAf,wBACI,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,SAAS,CAAC,YAAjB,2BADJ,cAEI,YAAK,SAAS,CAAC,YAAf,uBACI,cACI,QAAQ,CAAE,kBAACyB,CAAD,CAAO,CACbN,YAAY,CAACM,CAAC,CAACC,MAAF,CAASN,KAAV,CAAZ,CACH,CAHL,CAII,KAAK,CAAEjB,YAJX,CAKI,IAAI,CAAC,MALT,CAKgB,WAAW,CAAC,aAL5B,CAK0C,IAAI,CAAC,MAL/C,EADJ,EAFJ,cAUI,aAAM,SAAS,CAAC,WAAhB,UAA6BE,KAA7B,EAVJ,GADJ,cAaI,YAAK,SAAS,CAAC,YAAf,uBACI,eACI,OAAO,CAAEI,cADb,CAEI,SAAS,wCAAkCF,UAAU,GAAK,aAAL,CAAqB,EAAjE,CAFb,UAGK,MAHL,EADJ,EAbJ,GADJ,EAdJ,GADJ,EAFJ,EADJ,CA6CH,CAhGD,CAkGA,cAAeZ,CAAAA,YAAf","sourcesContent":["import { te } from 'date-fns/locale';\nimport React, { useEffect, useState } from 'react';\nimport { useStore } from 'react-redux';\nimport { addTemplate } from '../../../redux/jobs/actions'\ninterface Proptypes {\n    data: any;\n    milestones: any;\n    stepCompleted: Boolean;\n    handleStepComplete: (data: any) => void;\n    handleStepForward: (data: any) => void;\n    handleCombineMileStones: (data: any) => void;\n    handleStepBack: () => void;\n}\n//  ({ data, stepCompleted, handleStepComplete, handleStepBack }: Proptypes) => {\n\nconst SaveTemplate = ({ data, milestones, stepCompleted, handleCombineMileStones, handleStepForward, handleStepComplete, handleStepBack }: Proptypes) => {\n    const [templateName, setTemplateName] = useState('' as any);\n    const [error, setError] = useState('' as any);\n\n    const checkError = () => {\n        if (!error?.length && templateName?.length) {\n            return false;\n        }\n        return true;\n    }\n\n    const handleContinue = async () => {\n\n        if (!templateName?.length) {\n            setError('Template name is required.');\n            return\n        }\n        let filter_milestone = milestones.filter((item: any) => {\n            if (Object.keys(item).length) {\n                if (!item?.to_date?.length) {\n                    delete item.to_date;\n                }\n                \n                if (!item?.from_date?.length || item?.from_date === \"Invalid date\") {\n                    delete item?.from_date;\n                }\n\n                return item\n            }\n        });\n\n        let { success, data } = await addTemplate({\n            template_name: templateName,\n            milestones: filter_milestone\n        })\n        if (success) {\n            handleCombineMileStones([]);\n            handleStepForward(11);\n        }\n    }\n\n    const handleChange = (value: any) => {\n        if (templateName?.length && templateName?.length > 50) {\n            setError('Maximum 50 characters are allowed.');\n        } else {\n            setError('');\n        }\n        setTemplateName((value).trimLeft().replace(/[^a-zA-Z|0-9 ]/g, \"\"))\n    }\n\n    console.log({ error })\n    return (\n        <div className=\"app_wrapper\">\n\n            <div className=\"section_wrapper\">\n                <div className=\"custom_container\">\n                    <div className=\"form_field\">\n                        <div className=\"flex_row\">\n                            <div className=\"flex_col_sm_5\">\n                                <div className=\"relate\">\n                                    <button onClick={() => { handleStepForward(6) }} className=\"back\"></button>\n                                    <span className=\"title\">Save as template</span>\n                                </div>\n                                <p className=\"commn_para\">\n                                    {'Add template name. It will be stored in your profile'}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_5\">\n                            <div className=\"form_field\">\n                                <label className=\"form_label\">Template Name</label>\n                                <div className=\"text_field\">\n                                    <input\n                                        onChange={(e) => {\n                                            handleChange(e.target.value);\n                                        }}\n                                        value={templateName}\n                                        type=\"text\" placeholder=\"This job...\" name=\"name\" />\n                                </div>\n                                <span className=\"error_msg\">{error}</span>\n                            </div>\n                            <div className=\"form_field\">\n                                <button\n                                    onClick={handleContinue}\n                                    className={`fill_btn full_btn btn-effect ${checkError() ? 'disable_btn' : ''}`}>\n                                    {'Save'}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default SaveTemplate\n"]},"metadata":{},"sourceType":"module"}