{"ast":null,"code":"import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{profileTemplateList,getMileStoneByTempId}from'../../../../redux/jobs/actions';import moment from'moment';import noData from'../../../../assets/images/no-search-data.png';import JobMilestones from'./jobMilestones';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MileStoneTemplates=function MileStoneTemplates(props){var data=props.data,isLoading=props.isLoading,stepCompleted=props.stepCompleted,handleCombineMileStones=props.handleCombineMileStones,handleStepForward=props.handleStepForward;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),localFetch=_useState4[0],setLocalFetch=_useState4[1];var _useState5=useState({toggle:false,ItemId:''}),_useState6=_slicedToArray(_useState5,2),toggleJobMilestone=_useState6[0],setToggleJobMilestone=_useState6[1];var preFetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$profileTemplat,success,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return profileTemplateList();case 2:_yield$profileTemplat=_context.sent;success=_yield$profileTemplat.success;data=_yield$profileTemplat.data;if(success&&(data===null||data===void 0?void 0:data.length)){setList(data);setLocalFetch(true);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function preFetch(){return _ref.apply(this,arguments);};}();var formatMilestones=function formatMilestones(_ref2){var items=_ref2.items;var miles=items===null||items===void 0?void 0:items.milestones;if(miles===null||miles===void 0?void 0:miles.length){return miles.map(function(item){if(item===null||item===void 0?void 0:item.fromDate){item['fromDate']=moment(item===null||item===void 0?void 0:item.fromDate).format('MM-DD-YYYY');}if(item===null||item===void 0?void 0:item.toDate){item['toDate']=moment(item===null||item===void 0?void 0:item.toDate).format('MM-DD-YYYY');}return item;});}};var handleContinue=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$getMileStoneBy,success,data,_data$milestones,_props$data,to_date,from_date,selected_milestone,filter_milestones;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getMileStoneByTempId(id);case 2:_yield$getMileStoneBy=_context2.sent;success=_yield$getMileStoneBy.success;data=_yield$getMileStoneBy.data;if(success&&data){_props$data=props===null||props===void 0?void 0:props.data,to_date=_props$data.to_date,from_date=_props$data.from_date;selected_milestone=formatMilestones({items:data});filter_milestones=data===null||data===void 0?void 0:(_data$milestones=data.milestones)===null||_data$milestones===void 0?void 0:_data$milestones.map(function(item){var _item$toDate;return{from_date:moment(item===null||item===void 0?void 0:item.fromDate).format('MM-DD-YYYY'),to_date:(item===null||item===void 0?void 0:(_item$toDate=item.toDate)===null||_item$toDate===void 0?void 0:_item$toDate.length)?moment(item===null||item===void 0?void 0:item.toDate).format('MM-DD-YYYY'):'',milestone_name:item===null||item===void 0?void 0:item.milestoneName,recommended_hours:item===null||item===void 0?void 0:item.recommendedHours,isPhotoevidence:(item===null||item===void 0?void 0:item.isPhotoevidence)||false};});handleCombineMileStones(filter_milestones);handleStepForward(6);}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleContinue(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){preFetch();},[]);var backToScreen=function backToScreen(){setToggleJobMilestone(function(prev){return _objectSpread(_objectSpread({},prev),{},{toggle:false,ItemId:''});});};if(toggleJobMilestone===null||toggleJobMilestone===void 0?void 0:toggleJobMilestone.toggle){return/*#__PURE__*/_jsx(JobMilestones,{id:toggleJobMilestone===null||toggleJobMilestone===void 0?void 0:toggleJobMilestone.ItemId,backToScreen:backToScreen});}console.log({toggleJobMilestone:toggleJobMilestone});return/*#__PURE__*/_jsx(\"div\",{className:\"custom_container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:'Milestone Templates'})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_8\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"milestone_templates\",children:(list===null||list===void 0?void 0:list.length)?list.map(function(_ref4){var templateId=_ref4.templateId,templateName=_ref4.templateName,milestoneCount=_ref4.milestoneCount;return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){setToggleJobMilestone({toggle:true,ItemId:templateId});},children:[/*#__PURE__*/_jsxs(\"span\",{className:\"name\",children:[templateName,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"count\",children:[milestoneCount,/*#__PURE__*/_jsx(\"span\",{children:\"milestones\"})]})]});}):null})}),!isLoading&&!(list===null||list===void 0?void 0:list.length)?/*#__PURE__*/_jsxs(\"div\",{className:\"no_record  m-t-vh\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"no_img\",children:/*#__PURE__*/_jsx(\"img\",{src:noData,alt:\"data not found\"})}),/*#__PURE__*/_jsx(\"span\",{children:'No Data Found'})]}):null]})]})});};export default MileStoneTemplates;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieEditProfile/components/milestones/milestoneTemplates.tsx"],"names":["React","useEffect","useState","profileTemplateList","getMileStoneByTempId","moment","noData","JobMilestones","MileStoneTemplates","props","data","isLoading","stepCompleted","handleCombineMileStones","handleStepForward","list","setList","localFetch","setLocalFetch","toggle","ItemId","toggleJobMilestone","setToggleJobMilestone","preFetch","success","length","formatMilestones","items","miles","milestones","map","item","fromDate","format","toDate","handleContinue","id","to_date","from_date","selected_milestone","filter_milestones","milestone_name","milestoneName","recommended_hours","recommendedHours","isPhotoevidence","backToScreen","prev","console","log","templateId","templateName","milestoneCount"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport Constants from '../../../../utils/constants';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { profileTemplateList, getMileStoneByTempId } from '../../../../redux/jobs/actions';\nimport moment from 'moment';\nimport noData from '../../../../assets/images/no-search-data.png';\n\nimport JobMilestones from './jobMilestones';\n\ninterface Proptypes {\n    data: any;\n    isLoading: any,\n    stepCompleted: Boolean;\n    handleStepComplete: (data: any) => void;\n    handleStepForward: (data: any) => void;\n    handleCombineMileStones: (data: any) => void;\n    handleStepBack: () => void;\n}\n\nconst MileStoneTemplates = (props: Proptypes) => {\n    const { data, isLoading, stepCompleted, handleCombineMileStones, handleStepForward, } = props;\n    const [list, setList] = useState([]);\n    const [localFetch, setLocalFetch] = useState(false);\n    const [toggleJobMilestone, setToggleJobMilestone] = useState({ toggle: false, ItemId: '' });\n\n    const preFetch = async () => {\n        let { success, data } = await profileTemplateList();\n        if (success && data?.length) {\n            setList(data)\n            setLocalFetch(true)\n        }\n    }\n\n    const formatMilestones = ({ items }: any) => {\n        let miles: any = items?.milestones;\n        if (miles?.length) {\n            return miles.map((item: any) => {\n                if (item?.fromDate) {\n                    item['fromDate'] = moment(item?.fromDate).format('MM-DD-YYYY');\n                }\n\n                if (item?.toDate) {\n                    item['toDate'] = moment(item?.toDate).format('MM-DD-YYYY');\n                }\n\n                return item;\n            })\n        }\n    }\n\n    const handleContinue = async (id: any) => {\n        let { success, data } = await getMileStoneByTempId(id);\n\n        if (success && data) {\n            let { to_date, from_date } = props?.data;\n            let selected_milestone: any = formatMilestones({ items: data });\n\n            let filter_milestones = data?.milestones?.map((item: any) => ({\n                from_date: moment(item?.fromDate).format('MM-DD-YYYY'),\n                to_date: item?.toDate?.length ? moment(item?.toDate).format('MM-DD-YYYY') : '',\n                milestone_name: item?.milestoneName,\n                recommended_hours: item?.recommendedHours,\n                isPhotoevidence: item?.isPhotoevidence || false,\n            }))\n            handleCombineMileStones(filter_milestones);\n            handleStepForward(6);\n        }\n    }\n\n    useEffect(() => {\n        preFetch();\n    }, []);\n\n    const backToScreen = () => {\n        setToggleJobMilestone((prev: any) => ({ ...prev, toggle: false, ItemId: '' }));\n    }\n\n    if (toggleJobMilestone?.toggle) {\n        return (\n            <JobMilestones\n                id={toggleJobMilestone?.ItemId}\n                backToScreen={backToScreen}\n            />\n        )\n    }\n    console.log({ toggleJobMilestone })\n    return (\n        <div className=\"custom_container\">\n            <div className=\"form_field\">\n                <div className=\"flex_row\">\n                    <div className=\"flex_col_sm_12\">\n                        <div className=\"\">\n                            <span className=\"title\">{'Milestone Templates'}</span>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"flex_row\">\n                    <div className=\"flex_col_sm_8\">\n                        <ul className=\"milestone_templates\">\n                            {list?.length ?\n                                list.map(({ templateId, templateName, milestoneCount }: any) => (\n                                    <li onClick={() => {\n                                        setToggleJobMilestone({ toggle: true, ItemId: templateId });\n                                    }}>\n                                        <span className=\"name\">{templateName} </span>\n                                        <div className=\"count\">{milestoneCount}\n                                            <span>milestones</span>\n                                        </div>\n                                    </li>\n                                )) : null}\n                        </ul>\n                    </div>\n\n                    {!isLoading && !list?.length ? (\n                        <div className=\"no_record  m-t-vh\">\n                            <figure className=\"no_img\">\n                                <img src={noData} alt=\"data not found\" />\n                            </figure>\n                            <span>{'No Data Found'}</span>\n                        </div>\n                    ) : null}\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nexport default MileStoneTemplates;"]},"metadata":{},"sourceType":"module"}