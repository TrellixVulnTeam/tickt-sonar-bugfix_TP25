{"ast":null,"code":"import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';// @ts-ignore\nimport{DateRangePicker}from'../../../../plugins/react-date-range/dist/index';import'../../../../plugins/react-date-range/dist/styles.css';import'../../../../plugins/react-date-range/dist/theme/default.css';import{randomColors as getRandomColors}from'../../../../utils/common';import moment from'moment';import{setShowToast}from'../../../../redux/common/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var default_format='YYYY-MM-DD';var STRING_ERROR='Selected data is fully engage';var ChooseTimings=function ChooseTimings(_ref){var toggleCalenderTime=_ref.toggleCalenderTime,items=_ref.items;var _useState=useState({startDate:'',//new Date(),\nendDate:'',//new Date(),\nkey:'selection'}),_useState2=_slicedToArray(_useState,2),range=_useState2[0],setRange=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formattedDates=_useState4[0],setFormattedDates=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),localChanges=_useState8[0],setLocalChanges=_useState8[1];var handleChange=function handleChange(item){setRange(item.selection);handleCheck(item.selection);};var onMountCallable=function onMountCallable(){var count_times={};var randomColors=getRandomColors();var milestones=items;var filteredItems=milestones.filter(function(item){var to_date=item===null||item===void 0?void 0:item.to_date;var from_date=item===null||item===void 0?void 0:item.from_date;if(from_date){count_times[from_date]=0;}if(to_date){count_times[to_date]=0;}if(Object.keys(item).length&&(item===null||item===void 0?void 0:item.from_date)){return item;}var ifMatch=milestones.find(function(item_){if(item_.to_date===to_date&&from_date===item_.from_date){return item_;}});return ifMatch;});if(filteredItems===null||filteredItems===void 0?void 0:filteredItems.length){filteredItems.forEach(function(item,index){var to_date=item===null||item===void 0?void 0:item.to_date;var from_date=item===null||item===void 0?void 0:item.from_date;var color_index=index;if(index>500){// make random index from the limit 0 to 500.\n// if the index is greater than 500.\ncolor_index=Math.floor(Math.random()*500+1);}if(!to_date&&from_date){if(count_times[from_date]>-1){count_times[from_date]++;}var from_element=document.getElementsByClassName(\"color_\".concat(count_times[from_date],\"_\").concat(from_date));if(from_element){var element_from=from_element[0];if((from_element===null||from_element===void 0?void 0:from_element.length)>1){element_from=from_element[1];}if(element_from){element_from.classList.add(\"color_\".concat(color_index));}}}if(to_date&&from_date){if(count_times[from_date]>-1){count_times[from_date]++;}if(count_times[to_date]>-1){count_times[to_date]++;}// let colorbyIndex = randomColors[index];\nvar _from_element=document.getElementsByClassName(\"color_\".concat(count_times[from_date],\"_\").concat(from_date));if(_from_element){var _element_from=null;if((_from_element===null||_from_element===void 0?void 0:_from_element.length)>1){if(!_from_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')){_element_from=_from_element[0];}else{_element_from=_from_element[1];}}else{_element_from=_from_element[0];}if(_element_from){_element_from.classList.add(\"color_\".concat(color_index));}}var to_element=document.getElementsByClassName(\"color_\".concat(count_times[to_date],\"_\").concat(to_date));if(to_element){var element_to=null;if((to_element===null||to_element===void 0?void 0:to_element.length)>1){if(!to_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')){element_to=to_element[0];}else{element_to=to_element[1];}}else{element_to=to_element[0];}if(element_to){element_to.classList.add(\"color_\".concat(color_index));}}}});}};useEffect(function(){console.log('Did Mount');var interval=setInterval(function(){onMountCallable();},1500);return function(){console.log(\"clearing interval\");clearInterval(interval);};},[]);var handleCheck=function handleCheck(item){var from_date=moment(item.startDate).format(default_format);var to_date=moment(item.endDate).format(default_format);setFormattedDates({from_date:from_date,to_date:to_date});if(moment(from_date,default_format).isAfter(moment(to_date,default_format))){// isAfter\nsetError('finish date is greater then the start date.');}else{setError('');}};var checkBeforeExist=function checkBeforeExist(time,milestones_){var count_times={};var catch_boolean=true;var milestoneItems=items;milestoneItems.forEach(function(mile){var mile_start=mile.from_date;var mile_end=mile.to_date;var time_start=time.from_date;var time_end=time.to_date;if(count_times[mile_start]==undefined){count_times[mile_start]=1;}else{count_times[mile_start]=count_times[mile_start]+1;}if(count_times[mile_end]==undefined){count_times[mile_end]=1;}else{count_times[mile_end]=count_times[mile_end]+1;}if(count_times[mile_start]===4){if(mile_start==time_start||mile_start==time_end){setShowToast(true,STRING_ERROR);catch_boolean=false;}}else{if(count_times[time_start]===4){setShowToast(true,STRING_ERROR);catch_boolean=false;}}if(count_times[mile_end]===4){if(mile_end==time_start||mile_end==time_end){setShowToast(true,STRING_ERROR);catch_boolean=false;}}else{if(count_times[time_end]===4){setShowToast(true,STRING_ERROR);catch_boolean=false;}}});return catch_boolean;};var handleContinue=function handleContinue(){var moment_start=moment(range.startDate).format('MM-DD-YYYY');var moment_end=moment(range.endDate).format('MM-DD-YYYY');var timings={from_date:range.startDate!==''?moment_start:'',to_date:moment_start===moment_end||range.endDate===''?'':moment_end};var item_index=null;var isChecked=checkBeforeExist(timings);if(isChecked){toggleCalenderTime(range);}};var checkDisable=function checkDisable(){if((range===null||range===void 0?void 0:range.startDate)&&(range===null||range===void 0?void 0:range.startDate)!=='Invalid date'){return false;}return true;};return/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){toggleCalenderTime();},style:{zIndex:999},className:\"back\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){onMountCallable();},className:\"title\",children:'Timing'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"commn_para\",children:'Select a start and end date, or a due date.'})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(DateRangePicker,{ranges:[range],onChange:handleChange,months:2,direction:\"horizontal\",moveRangeOnFirstSelection:false,rangeColors:[\"#fee600\",\"#b5b5b5\"],showDateDisplay:false,showSelectionPreview:true,showPreview:true,fixedHeight:true,minDate:new Date()})}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg mtb-15\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn full_btn btn-effect \".concat(checkDisable()?'disable_btn':''),onClick:handleContinue,children:'Continue'})})]})})]});};export default ChooseTimings;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieEditProfile/components/milestones/chooseTimings.tsx"],"names":["React","useState","useEffect","DateRangePicker","randomColors","getRandomColors","moment","setShowToast","default_format","STRING_ERROR","ChooseTimings","toggleCalenderTime","items","startDate","endDate","key","range","setRange","formattedDates","setFormattedDates","error","setError","localChanges","setLocalChanges","handleChange","item","selection","handleCheck","onMountCallable","count_times","milestones","filteredItems","filter","to_date","from_date","Object","keys","length","ifMatch","find","item_","forEach","index","color_index","Math","floor","random","from_element","document","getElementsByClassName","element_from","classList","add","parentElement","contains","to_element","element_to","console","log","interval","setInterval","clearInterval","format","isAfter","checkBeforeExist","time","milestones_","catch_boolean","milestoneItems","mile","mile_start","mile_end","time_start","time_end","undefined","handleContinue","moment_start","moment_end","timings","item_index","isChecked","checkDisable","zIndex","Date"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n// @ts-ignore\nimport { DateRangePicker } from '../../../../plugins/react-date-range/dist/index';\nimport '../../../../plugins/react-date-range/dist/styles.css';\nimport '../../../../plugins/react-date-range/dist/theme/default.css';\n\nimport { randomColors as getRandomColors } from '../../../../utils/common'\nimport moment from 'moment';\nimport { setShowToast } from '../../../../redux/common/actions';\n\ninterface Proptypes {\n    items: any;\n    toggleCalenderTime: (data?: any) => void;\n}\n\nconst default_format = 'YYYY-MM-DD';\nconst STRING_ERROR = 'Selected data is fully engage';\nconst ChooseTimings = ({\n    toggleCalenderTime,\n    items \n}: Proptypes) => {\n    const [range, setRange] = useState<{ [index: string]: string | Date }>({\n        startDate: '', //new Date(),\n        endDate: '',//new Date(),\n        key: 'selection',\n    });\n    const [formattedDates, setFormattedDates] = useState({});\n    const [error, setError] = useState('');\n    const [localChanges, setLocalChanges] = useState(false);\n\n    const handleChange = (item: any) => {\n        setRange(item.selection);\n        handleCheck(item.selection);\n    };\n\n\n    const onMountCallable = () => {\n        let count_times: any = {};\n        let randomColors = getRandomColors();\n        let milestones = items;\n\n        let filteredItems = milestones.filter((item: any) => {\n            let to_date = item?.to_date;\n            let from_date = item?.from_date;\n\n            if (from_date) {\n                count_times[from_date] = 0;\n            }\n\n            if (to_date) {\n                count_times[to_date] = 0;\n            }\n\n            if (Object.keys(item).length && item?.from_date) {\n                return item;\n            }\n\n            let ifMatch = milestones.find((item_: any) => {\n                if (item_.to_date === to_date && from_date === item_.from_date) {\n                    return item_;\n                }\n            })\n\n            return ifMatch\n        });\n\n\n        if (filteredItems?.length) {\n            filteredItems.forEach((item: any, index: any) => {\n                let to_date = item?.to_date;\n                let from_date = item?.from_date;\n\n                let color_index = index;\n                if (index > 500) {\n                    // make random index from the limit 0 to 500.\n                    // if the index is greater than 500.\n                    color_index = Math.floor((Math.random() * 500) + 1);\n                }\n\n                if (!to_date && from_date) {\n                    if (count_times[from_date] > -1) {\n                        count_times[from_date]++;\n                    }\n\n                    let from_element: any = document.getElementsByClassName(`color_${count_times[from_date]}_${from_date}`);\n                    if (from_element) {\n                        let element_from = from_element[0];\n                        if (from_element?.length > 1) {\n                            element_from = from_element[1];\n                        }\n\n                        if (element_from) {\n                            element_from.classList.add(`color_${color_index}`);\n                        }\n                    }\n                }\n\n                if (to_date && from_date) {\n                    if (count_times[from_date] > -1) {\n                        count_times[from_date]++;\n                    }\n\n                    if (count_times[to_date] > -1) {\n                        count_times[to_date]++;\n                    }\n\n                    // let colorbyIndex = randomColors[index];\n                    let from_element: any = document.getElementsByClassName(`color_${count_times[from_date]}_${from_date}`);\n                    if (from_element) {\n                        let element_from = null;\n\n                        if (from_element?.length > 1) {\n                            if (!from_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')) {\n                                element_from = from_element[0];\n                            } else {\n                                element_from = from_element[1];\n                            }\n                        } else {\n                            element_from = from_element[0];\n                        }\n\n                        if (element_from) {\n                            element_from.classList.add(`color_${color_index}`)\n                        }\n                    }\n\n                    let to_element: any = document.getElementsByClassName(`color_${count_times[to_date]}_${to_date}`);\n                    if (to_element) {\n                        let element_to = null;\n                        if (to_element?.length > 1) {\n                            if (!to_element[0].parentElement.parentElement.classList.contains('rdrDayPassive')) {\n                                element_to = to_element[0];\n                            } else {\n                                element_to = to_element[1];\n                            }\n                        } else {\n                            element_to = to_element[0];\n                        }\n                        if (element_to) {\n                            element_to.classList.add(`color_${color_index}`);\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    useEffect(() => {\n        console.log('Did Mount')\n        const interval = setInterval(() => {\n            onMountCallable();\n         }, 1500);\n\n         return () => {\n           console.log(`clearing interval`);\n           clearInterval(interval);\n         };\n    }, [])\n\n    const handleCheck = (item: any) => {\n        let from_date = moment(item.startDate).format(default_format);\n        let to_date = moment(item.endDate).format(default_format);\n        setFormattedDates({ from_date, to_date });\n        if (moment(from_date, default_format).isAfter(moment(to_date, default_format))) { // isAfter\n            setError('finish date is greater then the start date.');\n        } else {\n            setError('');\n        }\n    }\n\n\n\n    const checkBeforeExist = (time: any, milestones_?: any) => {\n        let count_times: any = {};\n        let catch_boolean: boolean = true;\n        let milestoneItems: any = items;\n\n        milestoneItems.forEach((mile: any) => {\n\n            let mile_start = mile.from_date;\n            let mile_end = mile.to_date;\n\n            let time_start = time.from_date;\n            let time_end = time.to_date;\n\n\n            if (count_times[mile_start] == undefined) {\n                count_times[mile_start] = 1\n            } else {\n                count_times[mile_start] = count_times[mile_start] + 1;\n            }\n\n\n            if (count_times[mile_end] == undefined) {\n                count_times[mile_end] = 1\n            } else {\n                count_times[mile_end] = count_times[mile_end] + 1;\n            }\n\n            if (count_times[mile_start] === 4) {\n                if (mile_start == time_start || mile_start == time_end) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            } else {\n                if (count_times[time_start] === 4) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            }\n\n            if (count_times[mile_end] === 4) {\n                if (mile_end == time_start || mile_end == time_end) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            } else {\n                if (count_times[time_end] === 4) {\n                    setShowToast(true, STRING_ERROR);\n                    catch_boolean = false;\n                }\n            }\n\n\n        });\n\n        return catch_boolean;\n    }\n\n    const handleContinue = () => {\n        let moment_start = moment(range.startDate).format('MM-DD-YYYY')\n        let moment_end = moment(range.endDate).format('MM-DD-YYYY')\n        let timings = {\n            from_date: range.startDate !== '' ? moment_start : '',\n            to_date: (moment_start === moment_end || range.endDate === '') ? '' : moment_end\n        }\n\n        let item_index = null;\n  \n        let isChecked = checkBeforeExist(timings);\n        if (isChecked) {\n            toggleCalenderTime(range);\n        }\n    }\n\n    const checkDisable = () => {\n        if (range?.startDate && range?.startDate !== 'Invalid date') {\n            return false;\n        }\n        return true;\n    }\n\n    return (\n        <div className=\"custom_container\">\n            <div className=\"form_field\">\n                <div className=\"flex_row\">\n                    <div className=\"flex_col_sm_5\">\n                        <div className=\"relate\">\n                            <button\n                                onClick={() => {\n                                    toggleCalenderTime();\n                                }}\n                                style={{ zIndex: 999 }}\n                                className=\"back\">\n                            </button>\n                            <span\n                                onClick={() => {\n                                    onMountCallable();\n                                }}\n                                className=\"title\">\n                                {'Timing'}\n                            </span>\n                        </div>\n                        <p className=\"commn_para\">\n                            {'Select a start and end date, or a due date.'}\n                            {/* {\"if you tab the back arrow, you lose the `draft`. Can we save it ?\"} */}\n                            {/* {'Choose the start and finish day of your job'} */}\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div className=\"flex_row\">\n                <div className=\"flex_col_sm_8\">\n                    <div className=\"form_field\">\n                        <DateRangePicker\n                            ranges={[range]}\n                            onChange={handleChange}\n                            months={2}\n                            direction=\"horizontal\"\n                            moveRangeOnFirstSelection={false}\n                            rangeColors={[\"#fee600\", \"#b5b5b5\"]}\n                            showDateDisplay={false}\n                            showSelectionPreview={true}\n                            showPreview={true}\n                            fixedHeight={true}\n                            minDate={new Date()}\n                        />\n                    </div>\n                    <span className=\"error_msg mtb-15\">{error}</span>\n                    <div className=\"form_field\">\n                        <button\n                            className={`fill_btn full_btn btn-effect ${checkDisable() ? 'disable_btn' : ''}`}\n                            onClick={handleContinue}>\n                            {'Continue'}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ChooseTimings;\n"]},"metadata":{},"sourceType":"module"}