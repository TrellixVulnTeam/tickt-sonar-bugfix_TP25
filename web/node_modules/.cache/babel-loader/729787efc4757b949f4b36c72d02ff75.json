{"ast":null,"code":"import _toConsumableArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from'react';import{useHistory,useLocation}from'react-router-dom';import storageService from'../../utils/storageService';import dummy from'../../assets/images/u_placeholder.jpg';import searchIcon from'../../assets/images/main-search.png';import more from'../../assets/images/icon-direction-right.png';import loader from'../../assets/images/loader.gif';import noData from'../../assets/images/no-search-data.png';import moment from'moment';import{renderTime}from'../../utils/common';import{debounce}from'lodash';import InfiniteScroll from\"react-infinite-scroll-component\";import NumberFormat from'react-number-format';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PaymentHistory=function PaymentHistory(_ref){var isLoading=_ref.isLoading,searching=_ref.searching,paymentHistory=_ref.paymentHistory,paymentDetails=_ref.paymentDetails,getPaymentHistory=_ref.getPaymentHistory,getPaymentDetails=_ref.getPaymentDetails;var history=useHistory();var _useLocation=useLocation(),search=_useLocation.search;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),jobId=_useState2[0],setJobId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchActive=_useState6[0],setSearchActive=_useState6[1];var _useState7=useState({totalEarnings:0,totalJobs:0,revenueList:[]}),_useState8=_slicedToArray(_useState7,2),stateData=_useState8[0],setStateData=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrentPage=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),hasMore=_useState12[0],setHasMore=_useState12[1];useEffect(function(){var urlParams=new URLSearchParams(search);var jobId=urlParams.get('jobId');setJobId(jobId);if(!jobId){getPaymentHistory(currentPage,'',true);}else{getPaymentDetails(jobId);}},[search,getPaymentHistory,getPaymentDetails]);var searchPayementHistory=useCallback(debounce(function(searchQuery){return getPaymentHistory(1,searchQuery,false);},1000),[]);useEffect(function(){console.log({paymentHistory:paymentHistory});var totalEarnings=paymentHistory.totalEarnings,totalJobs=paymentHistory.totalJobs,revenue=paymentHistory.revenue;var newValues=(revenue===null||revenue===void 0?void 0:revenue.revenueList)||[];if(newValues===null||newValues===void 0?void 0:newValues.length){setStateData(function(prev){return{totalEarnings:totalEarnings,totalJobs:totalJobs,revenueList:currentPage>1?[].concat(_toConsumableArray(prev===null||prev===void 0?void 0:prev.revenueList),_toConsumableArray(newValues)):newValues};});}else{var _stateData$revenueLis;if(stateData===null||stateData===void 0?void 0:(_stateData$revenueLis=stateData.revenueList)===null||_stateData$revenueLis===void 0?void 0:_stateData$revenueLis.length){setHasMore(false);}}},[searchPayementHistory,paymentHistory]);var handleSearch=function handleSearch(_ref2){var value=_ref2.target.value;setStateData({totalEarnings:0,totalJobs:0,revenueList:[]});setCurrentPage(1);setHasMore(true);setSearchQuery(value);searchPayementHistory(value);};var userType=storageService.getItem('userType');var _ref3=stateData||{},_ref3$totalEarnings=_ref3.totalEarnings,totalEarnings=_ref3$totalEarnings===void 0?0:_ref3$totalEarnings,_ref3$totalJobs=_ref3.totalJobs,totalJobs=_ref3$totalJobs===void 0?0:_ref3$totalJobs,_ref3$revenueList=_ref3.revenueList,revenueList=_ref3$revenueList===void 0?[]:_ref3$revenueList;var _ref4=paymentDetails||{},status=_ref4.status,tradeId=_ref4.tradeId,specialization=_ref4.specialization,tradieId=_ref4.tradieId,tradieName=_ref4.tradieName,tradieImage=_ref4.tradieImage,builderId=_ref4.builderId,builderName=_ref4.builderName,builderImage=_ref4.builderImage,jobName=_ref4.jobName,from_date=_ref4.from_date,to_date=_ref4.to_date,totalEarning=_ref4.totalEarning,review=_ref4.review,rating=_ref4.rating,_ref4$milestones=_ref4.milestones,milestones=_ref4$milestones===void 0?[]:_ref4$milestones;if(isLoading){return null;}return jobId?/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"custom_container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"revenue_detail\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_8\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:function onClick(){return history.goBack();}}),/*#__PURE__*/_jsx(\"ul\",{className:\"total_count_card\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row center_flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"img_txt_wrap\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"job_img\",children:/*#__PURE__*/_jsx(\"img\",{src:(userType===1?builderImage:tradieImage)||dummy,alt:\"job-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inner_title\",children:jobName}),/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:status==='Active'?/*#__PURE__*/_jsx(\"label\",{children:status}):renderTime(from_date,to_date,'MM-DD-YYYY')})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5 text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:totalEarning})})]})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"milestones_check payment_check\",children:milestones.map(function(_ref5){var _id=_ref5._id,milestone_name=_ref5.milestone_name,milestoneEarning=_ref5.milestoneEarning,isPhotoevidence=_ref5.isPhotoevidence,from_date=_ref5.from_date,to_date=_ref5.to_date,status=_ref5.status;return/*#__PURE__*/_jsxs(\"li\",{className:status!=='Pending'&&status!=='Comming'?'check':'disabled',children:[/*#__PURE__*/_jsx(\"div\",{className:\"circle_stepper\",children:/*#__PURE__*/_jsx(\"span\",{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"f_spacebw\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"label\",{children:milestone_name}),isPhotoevidence&&/*#__PURE__*/_jsx(\"span\",{children:\"Photo evidence required\"}),/*#__PURE__*/_jsx(\"span\",{children:renderTime(from_date,to_date)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"xs_sub_title\",children:milestoneEarning})]})]},_id);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4 col_ruler\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:userType===1?'Posted by':'Tradesperson'}),/*#__PURE__*/_jsx(\"div\",{className:\"tradie_card posted_by \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user_wrap\",onClick:function onClick(){return history.push(\"/\".concat(userType===1?'builder':'tradie',\"-info?\").concat(userType===1?'builder':'trade',\"Id=\").concat(userType===1?builderId:tradieId));},children:[/*#__PURE__*/_jsx(\"figure\",{className:\"u_img\",children:/*#__PURE__*/_jsx(\"img\",{src:(userType===1?builderImage:tradieImage)||dummy,alt:\"img\",onError:function onError(e){var _e$target,_e$target2;if(e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.onerror){e.target.onerror=null;}if(e===null||e===void 0?void 0:(_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.src){e.target.src=dummy;}}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:userType===1?builderName:tradieName}),/*#__PURE__*/_jsxs(\"span\",{className:\"rating\",children:[rating?rating.toFixed(1):0,\" | \",review||0,\" reviews\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Job details\"}),/*#__PURE__*/_jsx(\"span\",{className:\"edit_icon\",title:\"More\",onClick:function onClick(){return history.push(\"/job-details-page?jobId=\".concat(jobId).concat(userType===1?\"&tradeId=\".concat(tradeId,\"&specializationId=\").concat(specialization===null||specialization===void 0?void 0:specialization[0]):''));},children:/*#__PURE__*/_jsx(\"img\",{src:more,alt:\"more\"})})]})]})]})})})})}):/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:function onClick(){return history.goBack();}}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:userType===1?'Payment history':'Transaction history'})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"total_count_card\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"revenue\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:userType===1?'Total earnings':'Total payment sent'}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:/*#__PURE__*/_jsx(NumberFormat,{value:totalEarnings&&(totalEarnings===null||totalEarnings===void 0?void 0:totalEarnings.toFixed(2))?totalEarnings===null||totalEarnings===void 0?void 0:totalEarnings.toFixed(2):totalEarnings,className:\"foo\",displayType:'text',thousandSeparator:true,prefix:'$'})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"job\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:\"Total Jobs\"}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:totalJobs})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row center_flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"xs_sub_title mb0\",children:\"Last jobs\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search_bar\".concat(searchActive?' active':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",value:searchQuery,onChange:handleSearch}),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr\",onClick:function onClick(){return setSearchActive(true);},children:/*#__PURE__*/_jsx(\"img\",{src:searchIcon,alt:\"search\"})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"last_jobs\",children:/*#__PURE__*/_jsx(\"div\",{id:\"table-scrollable\",className:\"table_wrap\",children:/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:revenueList===null||revenueList===void 0?void 0:revenueList.length,next:function next(){console.log('Here!!!');var cp=currentPage+1;setCurrentPage(function(prev){return prev+1;});// \ngetPaymentHistory(cp,'',true);},hasMore:hasMore,loader:/*#__PURE__*/_jsx(_Fragment,{}),children:/*#__PURE__*/_jsxs(\"table\",{cellPadding:\"0\",cellSpacing:\"0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"form_label\",children:\"Job\"})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"form_label\",children:\"Status\"})}),/*#__PURE__*/_jsxs(\"th\",{children:[\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"form_label\",children:[\"Hired \",userType===1?'by':'tradesperson']})]}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"form_label\",children:\"Start Date\"})}),/*#__PURE__*/_jsxs(\"th\",{children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"form_label\",children:\"Price\"})]})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:searching?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:5,children:/*#__PURE__*/_jsx(\"div\",{className:\"no_record\",children:/*#__PURE__*/_jsx(\"img\",{src:loader,alt:\"loader\",width:\"130px\"})})})}):!(revenueList===null||revenueList===void 0?void 0:revenueList.length)?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:5,children:/*#__PURE__*/_jsxs(\"div\",{className:\"no_record\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"no_img\",children:/*#__PURE__*/_jsx(\"img\",{src:noData,alt:\"data not found\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"No Data Found\"})]})})}):revenueList.map(function(_ref6){var _id=_ref6._id,jobId=_ref6.jobId,status=_ref6.status,jobName=_ref6.jobName,tradieName=_ref6.tradieName,tradieImage=_ref6.tradieImage,tradeName=_ref6.tradeName,builderName=_ref6.builderName,builderImage=_ref6.builderImage,from_date=_ref6.from_date,earning=_ref6.earning;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"img_txt_wrap\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"job_img\",children:/*#__PURE__*/_jsx(\"img\",{src:(userType===1?builderImage:tradieImage)||dummy,alt:\"job-img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",onClick:function onClick(){history.push(\"/payment-history?jobId=\".concat(jobId));},children:[/*#__PURE__*/_jsx(\"span\",{className:\"inner_title line-2\",children:tradeName}),/*#__PURE__*/_jsx(\"span\",{className:\"xs_head line-1\",children:jobName})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"inner_title line-3\",children:status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"inner_title line-3\",children:userType===1?builderName:tradieName})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"inner_title\",children:moment(from_date).format('DD.MM.YYYY')})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"inner_title\",children:earning})})]},_id);})})]})})})})]})})});};export default PaymentHistory;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/paymentHistory/paymentHistory.tsx"],"names":["useCallback","useEffect","useState","useHistory","useLocation","storageService","dummy","searchIcon","more","loader","noData","moment","renderTime","debounce","InfiniteScroll","NumberFormat","PaymentHistory","isLoading","searching","paymentHistory","paymentDetails","getPaymentHistory","getPaymentDetails","history","search","jobId","setJobId","searchQuery","setSearchQuery","searchActive","setSearchActive","totalEarnings","totalJobs","revenueList","stateData","setStateData","currentPage","setCurrentPage","hasMore","setHasMore","urlParams","URLSearchParams","get","searchPayementHistory","console","log","revenue","newValues","length","prev","handleSearch","value","target","userType","getItem","status","tradeId","specialization","tradieId","tradieName","tradieImage","builderId","builderName","builderImage","jobName","from_date","to_date","totalEarning","review","rating","milestones","goBack","map","_id","milestone_name","milestoneEarning","isPhotoevidence","push","e","onerror","src","toFixed","cp","tradeName","earning","format"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport storageService from '../../utils/storageService';\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport searchIcon from '../../assets/images/main-search.png';\nimport more from '../../assets/images/icon-direction-right.png';\nimport loader from '../../assets/images/loader.gif';\nimport noData from '../../assets/images/no-search-data.png';\nimport moment from 'moment';\nimport { renderTime } from '../../utils/common';\nimport { debounce } from 'lodash';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport NumberFormat from 'react-number-format';\n\ninterface Props {\n  isLoading: boolean,\n  searching: boolean,\n  paymentHistory: any;\n  paymentDetails: Array<any>;\n  getPaymentHistory: (page: number, search: string, init: boolean) => void;\n  getPaymentDetails: (jobId: string) => void;\n}\n\nconst PaymentHistory = ({\n  isLoading,\n  searching,\n  paymentHistory,\n  paymentDetails,\n  getPaymentHistory,\n  getPaymentDetails,\n}: Props) => {\n  const history = useHistory();\n  const { search } = useLocation();\n\n  const [jobId, setJobId] = useState<string | null>('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchActive, setSearchActive] = useState(false);\n\n  const [stateData, setStateData] = useState({\n    totalEarnings: 0,\n    totalJobs: 0,\n    revenueList: []\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(search);\n    const jobId = urlParams.get('jobId');\n    setJobId(jobId);\n\n    if (!jobId) {\n      getPaymentHistory(currentPage, '', true);\n    } else {\n      getPaymentDetails(jobId);\n    }\n  }, [search, getPaymentHistory, getPaymentDetails]);\n\n  const searchPayementHistory = useCallback(debounce((searchQuery) => getPaymentHistory(1, searchQuery, false), 1000), []);\n\n\n  useEffect(() => {\n    console.log({ paymentHistory })\n    const { totalEarnings, totalJobs, revenue } = paymentHistory;\n    let newValues = revenue?.revenueList || [];\n    if (newValues?.length) {\n      setStateData((prev: any) => ({\n        totalEarnings,\n        totalJobs,\n        revenueList: currentPage > 1 ? [...prev?.revenueList, ...newValues] : newValues\n      }));\n    } else {\n      if (stateData?.revenueList?.length) {\n        setHasMore(false);\n      }\n    }\n  }, [searchPayementHistory, paymentHistory]);\n\n  const handleSearch = ({ target: { value } }: any) => {\n    setStateData({\n      totalEarnings: 0,\n      totalJobs: 0,\n      revenueList: []\n    })\n    setCurrentPage(1);\n    setHasMore(true);\n    setSearchQuery(value);\n    searchPayementHistory(value);\n  };\n\n  const userType = storageService.getItem('userType');\n  const { totalEarnings = 0, totalJobs = 0, revenueList = [] } = stateData || {};\n  const { status, tradeId, specialization, tradieId, tradieName, tradieImage, builderId, builderName, builderImage, jobName, from_date, to_date, totalEarning, review, rating, milestones = [] }: any = paymentDetails || {};\n\n  if (isLoading) {\n    return null;\n  }\n\n  return jobId ? (\n    <div className=\"app_wrapper\">\n      <div className=\"section_wrapper\">\n        <div className=\"custom_container\">\n          <div className=\"revenue_detail\">\n            <div className=\"flex_row\">\n              <div className=\"flex_col_sm_8\">\n                <button className=\"back\" onClick={() => history.goBack()}></button>\n                <ul className=\"total_count_card\">\n                  <li>\n                    <div className=\"flex_row center_flex\">\n                      <div className=\"flex_col_sm_7\">\n                        <div className=\"img_txt_wrap\">\n                          <figure className=\"job_img\">\n                            <img src={(userType === 1 ? builderImage : tradieImage) || dummy} alt=\"job-img\" />\n                          </figure>\n                          <div className=\"details\">\n                            <span className=\"inner_title\">\n                              {jobName}\n                            </span>\n                            <span className=\"show_label\">{status === 'Active' ? <label>{status}</label> : renderTime(from_date, to_date, 'MM-DD-YYYY')}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex_col_sm_5 text-right\">\n                        <span className=\"sub_title\">{totalEarning}</span>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n                <div>\n                  <ul className=\"milestones_check payment_check\">\n                    {milestones.map(({ _id, milestone_name, milestoneEarning, isPhotoevidence, from_date, to_date, status }: any) => (\n                      <li\n                        key={_id}\n                        className={status !== 'Pending' && status !== 'Comming' ? 'check' : 'disabled'}\n                      >\n                        <div className=\"circle_stepper\">\n                          <span></span>\n                        </div>\n                        <div className=\"f_spacebw\">\n                          <div className=\"info\">\n                            <label>{milestone_name}</label>\n                            {isPhotoevidence && (\n                              <span>Photo evidence required</span>\n                            )}\n                            <span>\n                              {renderTime(from_date, to_date)}\n                            </span>\n                          </div>\n                          <span className=\"xs_sub_title\">{milestoneEarning}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n              <div className=\"flex_col_sm_4 col_ruler\">\n                <span className=\"sub_title\">{userType === 1 ? 'Posted by' : 'Tradesperson'}</span>\n                <div className=\"tradie_card posted_by \">\n                  {/* <a href=\"javascript:void(0)\" className=\"chat circle\"></a> */}\n                  <div className=\"user_wrap\" onClick={() => history.push(`/${userType === 1 ? 'builder' : 'tradie'}-info?${userType === 1 ? 'builder' : 'trade'}Id=${userType === 1 ? builderId : tradieId}`)}>\n                    <figure className=\"u_img\">\n                      <img\n                        src={(userType === 1 ? builderImage : tradieImage) || dummy}\n                        alt=\"img\"\n                        onError={(e: any) => {\n                          if (e?.target?.onerror) {\n                            e.target.onerror = null;\n                          }\n                          if (e?.target?.src) {\n                            e.target.src = dummy;\n                          }\n                        }}\n                      />\n                    </figure>\n                    <div className=\"details\">\n                      <span className=\"name\">{userType === 1 ? builderName : tradieName}</span>\n                      <span className=\"rating\">{rating ? rating.toFixed(1) : 0} | {review || 0} reviews</span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"relate\">\n                  <span className=\"sub_title\">Job details</span>\n                  <span className=\"edit_icon\" title=\"More\" onClick={() => history.push(`/job-details-page?jobId=${jobId}${userType === 1 ? `&tradeId=${tradeId}&specializationId=${specialization?.[0]}` : ''}`)}>\n                    <img src={more} alt=\"more\" />\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ) : (\n    <div className=\"app_wrapper\">\n      <div className=\"section_wrapper\">\n        <div className=\"custom_container\">\n          <div className=\"relate\">\n            <button className=\"back\" onClick={() => history.goBack()}></button>\n            <span className=\"title\">{userType === 1 ? 'Payment history' : 'Transaction history'}</span>\n          </div>\n          <ul className=\"total_count_card\">\n            <li className=\"revenue\">\n              <span className=\"show_label\">{userType === 1 ? 'Total earnings' : 'Total payment sent'}</span>\n              {/* <span className=\"title\">${totalEarnings && totalEarnings?.toFixed(2) ? totalEarnings?.toFixed(2) : totalEarnings}</span> */}\n              <span className=\"title\">\n                <NumberFormat\n                  value={totalEarnings && totalEarnings?.toFixed(2) ? totalEarnings?.toFixed(2) : totalEarnings}\n                  className=\"foo\"\n                  displayType={'text'}\n                  thousandSeparator={true}\n                  prefix={'$'}\n                />\n              </span>\n            </li>\n            <li className=\"job\">\n              <span className=\"show_label\">Total Jobs</span>\n              <span className=\"title\">{totalJobs}</span>\n            </li>\n          </ul>\n          <div className=\"flex_row center_flex\">\n            <div className=\"flex_col_sm_2\">\n              <span className=\"xs_sub_title mb0\">Last jobs</span>\n            </div>\n            <div className=\"flex_col_sm_4\">\n              <div className={`search_bar${searchActive ? ' active' : ''}`}>\n                <input type=\"text\" placeholder=\"Search\" value={searchQuery} onChange={handleSearch} />\n                <span className=\"detect_icon_ltr\" onClick={() => setSearchActive(true)}>\n                  <img src={searchIcon} alt=\"search\" />\n                </span>\n              </div>\n            </div>\n          </div>\n          <div className=\"last_jobs\">\n\n\n            <div id=\"table-scrollable\" className=\"table_wrap\">\n              <InfiniteScroll\n                dataLength={revenueList?.length}\n                next={() => {\n                  console.log('Here!!!');\n                  let cp = currentPage + 1;\n                  setCurrentPage((prev: any) => prev + 1);\n                  // \n                  getPaymentHistory(cp, '', true);\n                }}\n                hasMore={hasMore}\n                loader={<></>}>\n                <table cellPadding=\"0\" cellSpacing=\"0\">\n                  <thead>\n                    <tr>\n                      <th><span className=\"form_label\">Job</span></th>\n                      <th><span className=\"form_label\">Status</span></th>\n                      <th> <span className=\"form_label\">Hired {userType === 1 ? 'by' : 'tradesperson'}</span></th>\n                      <th><span className=\"form_label\">Start Date</span></th>\n                      <th> <span className=\"form_label\">Price</span></th>\n                    </tr>\n                  </thead>\n                  <tbody >\n\n\n                    {searching ? (\n                      <tr>\n                        <td colSpan={5}>\n                          <div className=\"no_record\">\n                            <img src={loader} alt=\"loader\" width=\"130px\" />\n                          </div>\n                        </td>\n                      </tr>\n                    ) : !revenueList?.length ? (\n                      <tr>\n                        <td colSpan={5}>\n                          <div className=\"no_record\">\n                            <figure className=\"no_img\">\n                              <img src={noData} alt=\"data not found\" />\n                            </figure>\n                            <span>No Data Found</span>\n                          </div>\n                        </td>\n                      </tr>\n                    ) : revenueList.map(({\n                      _id,\n                      jobId,\n                      status,\n                      jobName,\n                      tradieName,\n                      tradieImage,\n                      tradeName,\n                      builderName,\n                      builderImage,\n                      from_date,\n                      earning\n                    }: any) => (\n                      <tr key={_id}>\n                        <td>\n                          <div className=\"img_txt_wrap\">\n                            <figure className=\"job_img\">\n                              <img src={(userType === 1 ? builderImage : tradieImage) || dummy} alt=\"job-img\" />\n                            </figure>\n                            <div className=\"details\" onClick={() => { history.push(`/payment-history?jobId=${jobId}`); }}>\n                              <span className=\"inner_title line-2\">\n                                {tradeName}\n                              </span>\n                              <span className=\"xs_head line-1\">\n                                {jobName}\n                              </span>\n                            </div>\n                          </div>\n                        </td>\n                        <td><span className=\"inner_title line-3\">{status}</span></td>\n                        <td><span className=\"inner_title line-3\">{userType === 1 ? builderName : tradieName}</span></td>\n                        <td><span className=\"inner_title\">{moment(from_date).format('DD.MM.YYYY')}</span></td>\n                        {/* <td><span className=\"inner_title\">{renderTime(from_date, to_date)}</span></td> */}\n                        <td><span className=\"inner_title\">{earning}</span></td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </InfiniteScroll>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentHistory;\n"]},"metadata":{},"sourceType":"module"}