{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/home/builderHome/builderHome.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Banner from \"./components/banner\";\nimport Constants from \"../../../utils/constants\";\nimport Geocode from \"react-geocode\";\nimport { withRouter } from \"react-router\";\nimport { setShowToast } from \"../../../redux/common/actions\";\nimport TradieHome from \"../../shared/tradieHome\";\nimport JobTypes from \"./components/jobTypes\";\nimport axios from \"axios\";\nimport dummy from \"../../../assets/images/u_placeholder.jpg\";\nimport * as moment from \"moment\";\nimport \"moment-timezone\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\n\nconst setKey = () => {\n  localStorage.setItem(\"toastLocation\", \"true\");\n};\n\nconst getKey = () => {\n  return localStorage.getItem(\"toastLocation\");\n};\n\nvar responseElement = {};\n\nconst BuilderHome = props => {\n  _s();\n\n  var _home_data$popular_tr, _home_data$popular_tr2;\n\n  let {\n    callTradeList,\n    getRecentSearchList,\n    setHomeBuilder,\n    builderHome,\n    tradeListData,\n    tradieHomeData,\n    getClearJobs\n  } = props;\n  const [addressItem, setAddressItem] = useState();\n  const [position, setPosition] = useState({});\n  const [stateData, setStateData] = useState({});\n  const [force, forceUpdate] = useState({});\n\n  const fetchItems = async (latitude, longitude) => {\n    // Get address from latitude & longitude.\n    try {\n      let response = await Geocode.fromLatLng(latitude.toString(), longitude.toString());\n\n      if (response) {\n        const address = response.results[0].formatted_address;\n        setAddressItem(address);\n      }\n    } catch (err) {\n      console.log({\n        err\n      });\n    }\n  };\n\n  const checkPermission = async () => {\n    var _navigator, _navigator$permission;\n\n    const showPosition = async position => {\n      let {\n        latitude,\n        longitude\n      } = position.coords; // const jobType = { lat: latitude, long: longitude, jobType: '', tradie: true };\n\n      localStorage.setItem(\"position\", `[${longitude},${latitude}]`);\n      setPosition({\n        lat: latitude,\n        long: longitude\n      }); // console.log({ jobType }, '--------------!!!');\n\n      console.log(\"fetch In If condition\");\n      await fetchByLatLong({\n        lat: latitude,\n        long: longitude\n      }); // Get address from latitude & longitude.\n\n      await fetchItems(latitude.toString(), longitude.toString());\n    };\n\n    const postionError = async error => {\n      // const jobType = { lat: '-37.8136', long: '144.9631', jobType: '', tradie: true };\n      console.log(\"fetch In Else condition\");\n      await fetchByLatLong({\n        lat: \"-37.8136\",\n        long: \"144.9631\"\n      }); // setHomeBuilder(jobType);\n\n      setPosition({\n        lat: \"-37.8136\",\n        long: \"144.9631\"\n      });\n      localStorage.setItem(\"position\", \"[-37.8136, 144.9631]\"); // await fetchItems('-37.8136', '144.9631');\n    };\n\n    let permission = await ((_navigator = navigator) === null || _navigator === void 0 ? void 0 : (_navigator$permission = _navigator.permissions) === null || _navigator$permission === void 0 ? void 0 : _navigator$permission.query({\n      name: \"geolocation\"\n    }));\n\n    if ((permission === null || permission === void 0 ? void 0 : permission.state) === \"denied\") {\n      if (getKey() !== \"true\") {\n        setShowToast(true, \"Please enable the location permission from the browser settings so that Tickt App can access your location\");\n        setKey();\n      }\n    }\n\n    navigator.geolocation.getCurrentPosition(showPosition, postionError);\n  };\n\n  useEffect(() => {\n    getRecentSearchList();\n    callTradeList();\n    checkPermission();\n    getClearJobs();\n  }, []);\n\n  const fetchByLatLong = async data => {\n    let url = `${process.env.REACT_APP_BASE_URL}/v1/home?lat=${data.lat}&long=${data.long}`;\n    let item = localStorage.getItem(\"jwtToken\");\n\n    try {\n      let response = await axios({\n        url,\n        method: \"get\",\n        headers: {\n          Authorization: JSON.parse(item),\n          timezone: moment.tz.guess()\n        }\n      });\n\n      if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n        let data = response === null || response === void 0 ? void 0 : response.data;\n        responseElement = data === null || data === void 0 ? void 0 : data.result;\n      }\n    } catch (err) {\n      console.log({\n        err\n      });\n    }\n  };\n\n  let home_data = responseElement;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app_wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(Banner, { ...props,\n      current_address: addressItem,\n      position: position\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), \"mncbdbjmjd\", /*#__PURE__*/_jsxDEV(JobTypes, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TradieHome, {\n      data: home_data === null || home_data === void 0 ? void 0 : home_data.saved_tradespeople,\n      title: \"Saved tradespeople\",\n      length: 3,\n      redirectPath: \"/saved-tradespeople\",\n      history: props === null || props === void 0 ? void 0 : props.history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), (home_data === null || home_data === void 0 ? void 0 : (_home_data$popular_tr = home_data.popular_tradespeople) === null || _home_data$popular_tr === void 0 ? void 0 : _home_data$popular_tr.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section_wrapper bg_gray\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"custom_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"title\",\n          children: \"Popular tradespeople\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"popular_tradies\",\n          children: home_data === null || home_data === void 0 ? void 0 : (_home_data$popular_tr2 = home_data.popular_tradespeople) === null || _home_data$popular_tr2 === void 0 ? void 0 : _home_data$popular_tr2.map((item, index) => {\n            var _item$trade$, _item$trade$2;\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              \"data-aos\": \"flip-right\",\n              \"data-aos-delay\": \"200\",\n              onClick: () => {\n                // setShowToast(true,'Under development');\n                if ((props === null || props === void 0 ? void 0 : props.history) && (item === null || item === void 0 ? void 0 : item._id)) {\n                  var _props$history;\n\n                  props === null || props === void 0 ? void 0 : (_props$history = props.history) === null || _props$history === void 0 ? void 0 : _props$history.push(`tradie-info?tradeId=${item === null || item === void 0 ? void 0 : item._id}&hideInvite=${false}`);\n                }\n              },\n              \"data-aos-duration\": \"1000\",\n              children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n                className: \"tradies_img\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.user_image || dummy,\n                  alt: \"tradies-img\",\n                  onError: e => {\n                    let e_ = e;\n                    e_.target.src = dummy;\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"name\",\n                children: item === null || item === void 0 ? void 0 : item.firstName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"post\",\n                children: (item === null || item === void 0 ? void 0 : item.trade) && Array.isArray(item === null || item === void 0 ? void 0 : item.trade) && (item === null || item === void 0 ? void 0 : item.trade[0]) && (item === null || item === void 0 ? void 0 : (_item$trade$ = item.trade[0]) === null || _item$trade$ === void 0 ? void 0 : _item$trade$.trade_name) ? item === null || item === void 0 ? void 0 : (_item$trade$2 = item.trade[0]) === null || _item$trade$2 === void 0 ? void 0 : _item$trade$2.trade_name : \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 23\n              }, this)]\n            }, `${item.firstName}item${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"fill_grey_btn full_btn m-tb40 view_more\",\n          onClick: () => {\n            var _props$history2;\n\n            // setShowToast(true, 'Under development');\n            if ((props === null || props === void 0 ? void 0 : props.history) && (props === null || props === void 0 ? void 0 : (_props$history2 = props.history) === null || _props$history2 === void 0 ? void 0 : _props$history2.push)) {\n              props === null || props === void 0 ? void 0 : props.history.push({\n                pathname: \"/popular-tradespeople\",\n                state: {\n                  data: home_data === null || home_data === void 0 ? void 0 : home_data.popular_tradespeople,\n                  title: \"Popular tradespeople\",\n                  popular: true,\n                  history: null //props?.history\n\n                }\n              });\n            }\n          },\n          children: \"View all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TradieHome, {\n      data: home_data === null || home_data === void 0 ? void 0 : home_data.recomended_tradespeople,\n      title: \"Recommended tradespeople\",\n      redirectPath: \"/recommended-tradespeople\",\n      length: 9,\n      history: props === null || props === void 0 ? void 0 : props.history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TradieHome, {\n      data: home_data === null || home_data === void 0 ? void 0 : home_data.mostViewed_tradespeople,\n      title: \"Most Viewed tradespeople\",\n      redirectPath: \"/most-viewed-tradespeople\",\n      length: 9,\n      history: props === null || props === void 0 ? void 0 : props.history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n_s(BuilderHome, \"rYoeQi8y4k8S/Y3to5ccfDauHr4=\");\n\n_c = BuilderHome;\nexport default _c2 = withRouter(BuilderHome);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BuilderHome\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/home/builderHome/builderHome.tsx"],"names":["React","useState","useEffect","Banner","Constants","Geocode","withRouter","setShowToast","TradieHome","JobTypes","axios","dummy","moment","setApiKey","SocialAuth","GOOGLE_GEOCODE_KEY","setKey","localStorage","setItem","getKey","getItem","responseElement","BuilderHome","props","callTradeList","getRecentSearchList","setHomeBuilder","builderHome","tradeListData","tradieHomeData","getClearJobs","addressItem","setAddressItem","position","setPosition","stateData","setStateData","force","forceUpdate","fetchItems","latitude","longitude","response","fromLatLng","toString","address","results","formatted_address","err","console","log","checkPermission","showPosition","coords","lat","long","fetchByLatLong","postionError","error","permission","navigator","permissions","query","name","state","geolocation","getCurrentPosition","data","url","process","env","REACT_APP_BASE_URL","item","method","headers","Authorization","JSON","parse","timezone","tz","guess","status","result","home_data","saved_tradespeople","history","popular_tradespeople","length","map","index","_id","push","user_image","e","e_","target","src","firstName","trade","Array","isArray","trade_name","pathname","title","popular","recomended_tradespeople","mostViewed_tradespeople"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Banner from \"./components/banner\";\nimport Constants from \"../../../utils/constants\";\nimport Geocode from \"react-geocode\";\nimport { withRouter } from \"react-router\";\nimport { setShowToast } from \"../../../redux/common/actions\";\nimport TradieHome from \"../../shared/tradieHome\";\nimport JobTypes from \"./components/jobTypes\";\nimport axios from \"axios\";\nimport dummy from \"../../../assets/images/u_placeholder.jpg\";\nimport * as moment from \"moment\";\nimport \"moment-timezone\";\n\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\n\nconst setKey = () => {\n  localStorage.setItem(\"toastLocation\", \"true\");\n};\n\nconst getKey = () => {\n  return localStorage.getItem(\"toastLocation\");\n};\nvar responseElement: any = {};\nconst BuilderHome = (props: any) => {\n  let {\n    callTradeList,\n    getRecentSearchList,\n    setHomeBuilder,\n    builderHome,\n    tradeListData,\n    tradieHomeData,\n    getClearJobs,\n  } = props;\n  const [addressItem, setAddressItem] = useState();\n  const [position, setPosition] = useState<any>({});\n  const [stateData, setStateData] = useState({});\n\n  const [force, forceUpdate] = useState({});\n\n  const fetchItems = async (latitude: any, longitude: any) => {\n    // Get address from latitude & longitude.\n    try {\n      let response = await Geocode.fromLatLng(\n        latitude.toString(),\n        longitude.toString()\n      );\n      if (response) {\n        const address = response.results[0].formatted_address;\n        setAddressItem(address);\n      }\n    } catch (err) {\n      console.log({ err });\n    }\n  };\n\n  const checkPermission = async () => {\n    const showPosition = async (position: any) => {\n      let { latitude, longitude } = position.coords;\n      // const jobType = { lat: latitude, long: longitude, jobType: '', tradie: true };\n      localStorage.setItem(\"position\", `[${longitude},${latitude}]`);\n      setPosition({ lat: latitude, long: longitude });\n      // console.log({ jobType }, '--------------!!!');\n      console.log(\"fetch In If condition\");\n      await fetchByLatLong({ lat: latitude, long: longitude });\n\n      // Get address from latitude & longitude.\n      await fetchItems(latitude.toString(), longitude.toString());\n    };\n\n    const postionError = async (error: any) => {\n      // const jobType = { lat: '-37.8136', long: '144.9631', jobType: '', tradie: true };\n      console.log(\"fetch In Else condition\");\n      await fetchByLatLong({ lat: \"-37.8136\", long: \"144.9631\" });\n      // setHomeBuilder(jobType);\n      setPosition({ lat: \"-37.8136\", long: \"144.9631\" });\n      localStorage.setItem(\"position\", \"[-37.8136, 144.9631]\");\n      // await fetchItems('-37.8136', '144.9631');\n    };\n\n    let permission: any = await navigator?.permissions?.query({\n      name: \"geolocation\",\n    });\n    if (permission?.state === \"denied\") {\n      if (getKey() !== \"true\") {\n        setShowToast(\n          true,\n          \"Please enable the location permission from the browser settings so that Tickt App can access your location\"\n        );\n        setKey();\n      }\n    }\n    navigator.geolocation.getCurrentPosition(showPosition, postionError);\n  };\n\n  useEffect(() => {\n    getRecentSearchList();\n    callTradeList();\n    checkPermission();\n    getClearJobs();\n  }, []);\n  const fetchByLatLong = async (data: any) => {\n    let url: string = `${process.env.REACT_APP_BASE_URL}/v1/home?lat=${data.lat}&long=${data.long}`;\n    let item: any = localStorage.getItem(\"jwtToken\");\n    try {\n      let response = await axios({\n        url,\n        method: \"get\",\n        headers: {\n          Authorization: JSON.parse(item),\n          timezone: moment.tz.guess(),\n        },\n      });\n\n      if (response?.status === 200) {\n        let data: any = response?.data;\n        responseElement = data?.result;\n      }\n    } catch (err) {\n      console.log({ err });\n    }\n  };\n\n  let home_data: any = responseElement;\n\n  return (\n    <div className=\"app_wrapper\">\n      <Banner {...props} current_address={addressItem} position={position} />\n      mncbdbjmjd\n      <JobTypes {...props} />\n      <TradieHome\n        data={home_data?.saved_tradespeople}\n        title={\"Saved tradespeople\"}\n        length={3}\n        redirectPath={\"/saved-tradespeople\"}\n        history={props?.history}\n      />\n      {home_data?.popular_tradespeople?.length > 0 && (\n        <div className=\"section_wrapper bg_gray\">\n          <div className=\"custom_container\">\n            <span className=\"title\">{\"Popular tradespeople\"}</span>\n            <ul className=\"popular_tradies\">\n              {home_data?.popular_tradespeople?.map(\n                (item: any, index: number) => {\n                  return (\n                    <li\n                      key={`${item.firstName}item${index}`}\n                      data-aos=\"flip-right\"\n                      data-aos-delay=\"200\"\n                      onClick={() => {\n                        // setShowToast(true,'Under development');\n                        if (props?.history && item?._id) {\n                          props?.history?.push(\n                            `tradie-info?tradeId=${\n                              item?._id\n                            }&hideInvite=${false}`\n                          );\n                        }\n                      }}\n                      data-aos-duration=\"1000\"\n                    >\n                      <figure className=\"tradies_img\">\n                        <img\n                          src={item.user_image || dummy}\n                          alt=\"tradies-img\"\n                          onError={(e: any) => {\n                            let e_: any = e;\n                            e_.target.src = dummy;\n                          }}\n                        />\n                      </figure>\n                      <span className=\"name\">{item?.firstName}</span>\n                      <span className=\"post\">\n                        {item?.trade &&\n                        Array.isArray(item?.trade) &&\n                        item?.trade[0] &&\n                        item?.trade[0]?.trade_name\n                          ? item?.trade[0]?.trade_name\n                          : \"\"}\n                      </span>\n                    </li>\n                  );\n                }\n              )}\n            </ul>\n            <button\n              className=\"fill_grey_btn full_btn m-tb40 view_more\"\n              onClick={() => {\n                // setShowToast(true, 'Under development');\n                if (props?.history && props?.history?.push) {\n                  props?.history.push({\n                    pathname: \"/popular-tradespeople\",\n                    state: {\n                      data: home_data?.popular_tradespeople,\n                      title: \"Popular tradespeople\",\n                      popular: true,\n                      history: null, //props?.history\n                    },\n                  });\n                }\n              }}\n            >\n              {\"View all\"}\n            </button>\n          </div>\n        </div>\n      )}\n      <TradieHome\n        data={home_data?.recomended_tradespeople}\n        title={\"Recommended tradespeople\"}\n        redirectPath={\"/recommended-tradespeople\"}\n        length={9}\n        history={props?.history}\n      />\n      <TradieHome\n        data={home_data?.mostViewed_tradespeople}\n        title={\"Most Viewed tradespeople\"}\n        redirectPath={\"/most-viewed-tradespeople\"}\n        length={9}\n        history={props?.history}\n      />\n    </div>\n  );\n};\n\nexport default withRouter(BuilderHome);\n"]},"metadata":{},"sourceType":"module"}