{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/jobDashboard/components/reviewBuilder/reviewBuilder.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\n// @ts-ignore\nimport ReactStars from \"react-rating-stars-component\";\nimport { reviewBuilder, getJobDetails } from '../../../../redux/jobs/actions';\nimport { setShowToast } from '../../../../redux/common/actions';\nimport { renderTime } from '../../../../utils/common';\nimport dummy from '../../../../assets/images/u_placeholder.jpg';\nimport more from '../../../../assets/images/icon-direction-right.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ReviewBuilder = props => {\n  _s();\n\n  var _item$postedBy3, _item$builderData3, _item$builderData4, _item$builderData5, _item$postedBy4;\n\n  const [reviewBuilderData, setReviewBuilderData] = useState({\n    rating: 0,\n    review: ''\n  });\n  const [item, setItem] = useState('');\n  const [isParam, setIsParam] = useState(false);\n  useEffect(() => {\n    var _URLSearchParams, _props$location;\n\n    const jobId = (_URLSearchParams = new URLSearchParams((_props$location = props.location) === null || _props$location === void 0 ? void 0 : _props$location.search)) === null || _URLSearchParams === void 0 ? void 0 : _URLSearchParams.get('jobId');\n\n    (async () => {\n      var _props$location2, _props$location2$stat;\n\n      if (jobId) {\n        const res = await getJobDetails(jobId);\n\n        if (res.success) {\n          setItem(res.data);\n          setIsParam(true);\n        }\n      } else if (props === null || props === void 0 ? void 0 : (_props$location2 = props.location) === null || _props$location2 === void 0 ? void 0 : (_props$location2$stat = _props$location2.state) === null || _props$location2$stat === void 0 ? void 0 : _props$location2$stat.item) {\n        var _props$location3, _props$location3$stat;\n\n        setItem(props === null || props === void 0 ? void 0 : (_props$location3 = props.location) === null || _props$location3 === void 0 ? void 0 : (_props$location3$stat = _props$location3.state) === null || _props$location3$stat === void 0 ? void 0 : _props$location3$stat.item);\n      }\n\n      ;\n    })();\n  }, []);\n  console.log(props, \"props data\", item, \"item\");\n\n  const ratingChanged = newRating => {\n    console.log(newRating);\n    setReviewBuilderData(prevdata => ({ ...prevdata,\n      rating: newRating\n    }));\n  };\n\n  const handleChange = e => {\n    if (e.target.value.trim().length <= 250) {\n      setReviewBuilderData(prevdata => ({ ...prevdata,\n        review: e.target.value\n      }));\n    }\n  };\n\n  const submitReviewClicked = async () => {\n    if (reviewBuilderData.rating === 0) {\n      setShowToast(true, 'Star rating is required');\n      return;\n    } // if (reviewBuilderData.review.trim().length < 1) {\n    //     setShowToast(true, 'Review text is required');\n    //     return;\n    // }\n\n\n    if (reviewBuilderData.rating > 0) {\n      var _item$postedBy, _item$builderData;\n\n      let data = {\n        jobId: item === null || item === void 0 ? void 0 : item.jobId,\n        builderId: isParam ? item === null || item === void 0 ? void 0 : (_item$postedBy = item.postedBy) === null || _item$postedBy === void 0 ? void 0 : _item$postedBy.builderId : item === null || item === void 0 ? void 0 : (_item$builderData = item.builderData) === null || _item$builderData === void 0 ? void 0 : _item$builderData.builderId,\n        rating: reviewBuilderData.rating,\n        review: reviewBuilderData.review.trim()\n      };\n      if (!data.review) delete data.review;\n      const response = await reviewBuilder(data);\n\n      if (response === null || response === void 0 ? void 0 : response.success) {\n        var _props$history;\n\n        props === null || props === void 0 ? void 0 : (_props$history = props.history) === null || _props$history === void 0 ? void 0 : _props$history.push('/builder-review-submitted');\n      }\n    }\n  };\n\n  const jobClickHandler = () => {\n    props.history.push(`/job-details-page?jobId=${item === null || item === void 0 ? void 0 : item.jobId}&tradeId=${item === null || item === void 0 ? void 0 : item.tradeId}&specializationId=${item === null || item === void 0 ? void 0 : item.specializationId}`);\n  };\n\n  const builderClicked = () => {\n    var _item$postedBy2, _item$builderData2;\n\n    props.history.push(`/builder-info?builderId=${isParam ? (_item$postedBy2 = item.postedBy) === null || _item$postedBy2 === void 0 ? void 0 : _item$postedBy2.builderId : (_item$builderData2 = item.builderData) === null || _item$builderData2 === void 0 ? void 0 : _item$builderData2.builderId}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"detail_col\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex_row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex_col_sm_6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relate\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back\",\n            onClick: () => {\n              var _props$history2;\n\n              return props === null || props === void 0 ? void 0 : (_props$history2 = props.history) === null || _props$history2 === void 0 ? void 0 : _props$history2.goBack();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"xs_sub_title\",\n            children: item === null || item === void 0 ? void 0 : item.jobName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_field\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sub_title\",\n            children: \"Review completed job\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inner_title\",\n          children: \"Rate this builder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_field\",\n          children: /*#__PURE__*/_jsxDEV(ReactStars, {\n            count: 5,\n            onChange: ratingChanged,\n            size: 55,\n            isHalf: true,\n            emptyIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"far fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 40\n            }, this),\n            halfIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star-half-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 39\n            }, this),\n            fullIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-star\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 39\n            }, this),\n            activeColor: \"#fee600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form_label\",\n            children: \"Comment (optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text_field\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Thanks..\",\n              maxLength: 250,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_field\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"fill_btn full_btn btn-effect\",\n            onClick: submitReviewClicked,\n            children: \"Leave review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex_col_sm_6 col_ruler\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relate\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sub_title\",\n            children: \"Job details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"edit_icon\",\n            title: \"More\",\n            onClick: jobClickHandler,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: more,\n              alt: \"more\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tradie_card posted_by view_more \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user_wrap\",\n            onClick: () => builderClicked(),\n            children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n              className: \"u_img\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: isParam ? (_item$postedBy3 = item.postedBy) === null || _item$postedBy3 === void 0 ? void 0 : _item$postedBy3.builderImage : ((_item$builderData3 = item.builderData) === null || _item$builderData3 === void 0 ? void 0 : _item$builderData3.builderImage) ? (_item$builderData4 = item.builderData) === null || _item$builderData4 === void 0 ? void 0 : _item$builderData4.builderImage : dummy,\n                alt: \"traide-img\",\n                onError: e => {\n                  var _e$target, _e$target2;\n\n                  if (e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.onerror) {\n                    e.target.onerror = null;\n                  }\n\n                  if (e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.src) {\n                    e.target.src = dummy;\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"details\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"name\",\n                children: ((_item$builderData5 = item.builderData) === null || _item$builderData5 === void 0 ? void 0 : _item$builderData5.builderName) || ((_item$postedBy4 = item.postedBy) === null || _item$postedBy4 === void 0 ? void 0 : _item$postedBy4.builderName)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"prof\",\n                children: item === null || item === void 0 ? void 0 : item.jobName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"prof\",\n                children: renderTime(item === null || item === void 0 ? void 0 : item.fromDate, item === null || item === void 0 ? void 0 : item.toDate)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ReviewBuilder, \"HKKWt7Xoem2y9z4pNLIpD9XBCXg=\");\n\n_c = ReviewBuilder;\nexport default ReviewBuilder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReviewBuilder\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/jobDashboard/components/reviewBuilder/reviewBuilder.tsx"],"names":["useState","useEffect","ReactStars","reviewBuilder","getJobDetails","setShowToast","renderTime","dummy","more","ReviewBuilder","props","reviewBuilderData","setReviewBuilderData","rating","review","item","setItem","isParam","setIsParam","jobId","URLSearchParams","location","search","get","res","success","data","state","console","log","ratingChanged","newRating","prevdata","handleChange","e","target","value","trim","length","submitReviewClicked","builderId","postedBy","builderData","response","history","push","jobClickHandler","tradeId","specializationId","builderClicked","goBack","jobName","builderImage","onerror","src","builderName","fromDate","toDate"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport moment from 'moment';\n// @ts-ignore\nimport ReactStars from \"react-rating-stars-component\";\nimport {\n    reviewBuilder,\n    getJobDetails,\n} from '../../../../redux/jobs/actions';\nimport { setShowToast } from '../../../../redux/common/actions';\nimport { renderTime } from '../../../../utils/common';\n\nimport dummy from '../../../../assets/images/u_placeholder.jpg';\nimport more from '../../../../assets/images/icon-direction-right.png';\n\ninterface Proptypes {\n    history: any,\n    location: any,\n}\nconst ReviewBuilder = (props: Proptypes) => {\n    const [reviewBuilderData, setReviewBuilderData] = useState({\n        rating: 0,\n        review: '',\n    });\n    const [item, setItem] = useState<any>('');\n    const [isParam, setIsParam] = useState<boolean>(false);\n\n    useEffect(() => {\n        const jobId: any = new URLSearchParams(props.location?.search)?.get('jobId');\n        (async () => {\n            if (jobId) {\n                const res = await getJobDetails(jobId);\n                if (res.success) {\n                    setItem(res.data);\n                    setIsParam(true);\n                }\n            } else if (props?.location?.state?.item) {\n                setItem(props?.location?.state?.item);\n            };\n        })();\n    }, []);\n    console.log(props, \"props data\", item, \"item\");\n\n    const ratingChanged = (newRating: number) => {\n        console.log(newRating);\n        setReviewBuilderData((prevdata: any) => ({ ...prevdata, rating: newRating }))\n    };\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.value.trim().length <= 250) {\n            setReviewBuilderData((prevdata: any) => ({ ...prevdata, review: e.target.value }))\n        }\n    }\n\n    const submitReviewClicked = async () => {\n        if (reviewBuilderData.rating === 0) {\n            setShowToast(true, 'Star rating is required');\n            return;\n        }\n        // if (reviewBuilderData.review.trim().length < 1) {\n        //     setShowToast(true, 'Review text is required');\n        //     return;\n        // }\n        if (reviewBuilderData.rating > 0) {\n            let data: any = {\n                jobId: item?.jobId,\n                builderId: isParam ? item?.postedBy?.builderId : item?.builderData?.builderId,\n                rating: reviewBuilderData.rating,\n                review: reviewBuilderData.review.trim()\n            }\n            if (!data.review) delete data.review;\n            const response = await reviewBuilder(data);\n            if (response?.success) {\n                props?.history?.push('/builder-review-submitted')\n            }\n        }\n    }\n\n    const jobClickHandler = () => {\n        props.history.push(`/job-details-page?jobId=${item?.jobId}&tradeId=${item?.tradeId}&specializationId=${item?.specializationId}`);\n    }\n\n    const builderClicked = () => {\n        props.history.push(`/builder-info?builderId=${isParam ? item.postedBy?.builderId : item.builderData?.builderId}`);\n    }\n\n    return (\n        <div className=\"detail_col\">\n            <div className=\"flex_row\">\n                <div className=\"flex_col_sm_6\">\n                    <div className=\"relate\">\n                        <button className=\"back\" onClick={() => props?.history?.goBack()}></button>\n                        <span className=\"xs_sub_title\">{item?.jobName}</span>\n                    </div>\n                    <div className=\"form_field\">\n                        <span className=\"sub_title\">Review completed job</span>\n                    </div>\n                    <span className=\"inner_title\">Rate this builder</span>\n                    <div className=\"form_field\">\n                        <ReactStars\n                            count={5}\n                            onChange={ratingChanged}\n                            size={55}\n                            isHalf={true}\n                            emptyIcon={<i className=\"far fa-star\"></i>}\n                            halfIcon={<i className=\"fa fa-star-half-alt\"></i>}\n                            fullIcon={<i className=\"fa fa-star\"></i>}\n                            activeColor=\"#fee600\"\n                        />\n                    </div>\n                    <div className=\"form_field\">\n                        <label className=\"form_label\">Comment (optional)</label>\n                        <div className=\"text_field\">\n                            <input type=\"text\" placeholder=\"Thanks..\" maxLength={250} onChange={handleChange} />\n                        </div>\n                    </div>\n                    <div className=\"form_field\">\n                        <button className=\"fill_btn full_btn btn-effect\" onClick={submitReviewClicked}>Leave review</button>\n                    </div>\n                </div>\n                <div className=\"flex_col_sm_6 col_ruler\">\n                    <div className=\"relate\">\n                        <span className=\"sub_title\">Job details</span>\n                        <span className=\"edit_icon\" title=\"More\" onClick={jobClickHandler}>\n                            <img src={more} alt=\"more\" />\n                        </span>\n                    </div>\n                    <div className=\"tradie_card posted_by view_more \">\n                        <div className=\"user_wrap\" onClick={() => builderClicked()}>\n                            <figure className=\"u_img\">\n                                <img\n                                    src={isParam ? item.postedBy?.builderImage : item.builderData?.builderImage ? item.builderData?.builderImage : dummy}\n                                    alt=\"traide-img\"\n                                    onError={(e: any) => {\n                                        if (e?.target?.onerror) {\n                                            e.target.onerror = null;\n                                        }\n                                        if (e?.target?.src) {\n                                            e.target.src = dummy;\n                                        }\n                                    }}\n                                />\n                            </figure>\n                            <div className=\"details\">\n                                <span className=\"name\">{item.builderData?.builderName || item.postedBy?.builderName}</span>\n                                <span className=\"prof\">{item?.jobName}</span>\n                                <span className=\"prof\">{renderTime(item?.fromDate, item?.toDate)}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ReviewBuilder;\n"]},"metadata":{},"sourceType":"module"}