{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{setShowToast}from'../../../redux/common/actions';import{onFileUpload}from'../../../redux/auth/actions';import removeFile from'../../../assets/images/icon-close-1.png';import jpegFile from'../../../assets/images/jpeg.png';import jpgFile from'../../../assets/images/jpg.png';import pngFile from'../../../assets/images/png.png';import pdfFile from'../../../assets/images/pdf.png';import docFile from'../../../assets/images/doc.png';import noData from'../../../assets/images/no-search-data.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddQualification=function AddQualification(props){var _props$tradeListData$;var _useState=useState(props.qualification),_useState2=_slicedToArray(_useState,2),qualification=_useState2[0],setQualification=_useState2[1];var changeHandler=function changeHandler(id){setQualification(function(prevData){var newData=_toConsumableArray(prevData);var item=newData.find(function(i){return i.qualification_id===id;});var itemIndex=newData.indexOf(item);if(!item){newData.push({qualification_id:id,url:''});}else{newData.splice(itemIndex,1);}return newData;});};var onFileChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,id){var _newFile$type;var newData,item,formData,newFile,fileType,docTypes,selectedFileSize,res,_item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newData=_toConsumableArray(qualification);item=newData.find(function(i){return i.qualification_id===id;});if(item){_context.next=4;break;}return _context.abrupt(\"return\");case 4:formData=new FormData();newFile=e.target.files[0];fileType=newFile===null||newFile===void 0?void 0:(_newFile$type=newFile.type)===null||_newFile$type===void 0?void 0:_newFile$type.split('/')[1];docTypes=[\"jpeg\",\"jpg\",\"png\",\"pdf\",\"msword\",\"doc\",\"docx\"];selectedFileSize=(newFile===null||newFile===void 0?void 0:newFile.size)/1024/1024;if(!(docTypes.indexOf(fileType)<0||selectedFileSize>10)){_context.next=12;break;}alert('The file must be in proper format or size');return _context.abrupt(\"return\");case 12:formData.append('file',newFile);_context.next=15;return onFileUpload(formData);case 15:res=_context.sent;if(res.success){_item=newData.find(function(i){return i.qualification_id===id;});_item.url=res.imgUrl;console.log(newData,'image upload done');setQualification(newData);}case 17:case\"end\":return _context.stop();}}},_callee);}));return function onFileChange(_x,_x2){return _ref.apply(this,arguments);};}();var removeFileHandler=function removeFileHandler(id){var newData=_toConsumableArray(qualification);var item=newData.find(function(i){return i.qualification_id===id;});item.url='';setQualification(newData);};var onSubmit=function onSubmit(e){e.preventDefault();var newData=_toConsumableArray(qualification);var item=newData.find(function(i){return i.url==='';});var itemIndex=newData.indexOf(item);console.log(qualification,item,itemIndex,'okk');if(!qualification.length){setShowToast(true,\"Please add at least one qualification\");}else if(itemIndex>=0){setShowToast(true,\"Please upload all selected documents\");}else{props.updateSteps(props.step+1,{qualification:qualification});}};var onSkipQualification=function onSkipQualification(e){e.preventDefault();var qualification=[];props.updateSteps(props.step+1,{qualification:qualification});};var qualificationList=(_props$tradeListData$=props.tradeListData.find(function(i){return i._id===props.trade;}))===null||_props$tradeListData$===void 0?void 0:_props$tradeListData$.qualifications;var fileDetails=function fileDetails(item){var fileArray=item.url.replace(/^.*[\\\\\\/]/,'').split('.');var type=fileArray[1].toLowerCase();switch(type){case\"jpeg\":return{fileName:fileArray[0],fileType:jpegFile};case\"jpg\":return{fileName:fileArray[0],fileType:jpgFile};case\"png\":return{fileName:fileArray[0],fileType:pngFile};case\"pdf\":return{fileName:fileArray[0],fileType:pdfFile};case\"doc\":return{fileName:fileArray[0],fileType:docFile};case\"docx\":return{fileName:fileArray[0],fileType:docFile};default:return null;}};return/*#__PURE__*/_jsx(\"div\",{className:\"form_wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"choose_qf\",children:qualificationList?qualificationList===null||qualificationList===void 0?void 0:qualificationList.map(function(item){var isChecked=qualification.find(function(i){return i.qualification_id===item._id;});var docDetails=(isChecked===null||isChecked===void 0?void 0:isChecked.url)&&fileDetails(isChecked);return/*#__PURE__*/_jsxs(\"div\",{className:\"f_spacebw\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"filter-type filled-in\",type:\"checkbox\",checked:isChecked?true:false,name:item.name,id:item.name,onChange:function onChange(){return changeHandler(item._id);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:item.name,children:item.name})]}),(isChecked===null||isChecked===void 0?void 0:isChecked.url)?/*#__PURE__*/_jsxs(\"div\",{className:\"file_upload_box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:function onClick(){return removeFileHandler(item._id);},children:/*#__PURE__*/_jsx(\"img\",{src:removeFile})}),/*#__PURE__*/_jsx(\"span\",{className:\"file_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:docDetails===null||docDetails===void 0?void 0:docDetails.fileType})}),/*#__PURE__*/_jsx(\"div\",{className:\"file_details\",children:/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:docDetails===null||docDetails===void 0?void 0:docDetails.fileName})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"upload_doc\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"upload_btn \".concat(!isChecked?\"disable\":\"\"),htmlFor:item.name+'upload',children:\"Upload\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"none\",id:item.name+'upload',accept:\"image/jpeg,image/jpg,image/png,application/pdf,application/msword,.doc\",disabled:!!isChecked?false:true,onChange:function onChange(e){return onFileChange(e,item._id);}})]})]},item._id);}):/*#__PURE__*/_jsx(\"li\",{className:\"no_data\",children:/*#__PURE__*/_jsx(\"img\",{src:noData,alt:\"no-data\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn btn-effect\",children:\"Next\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"link\",onClick:onSkipQualification,children:\"Skip\"})})]})});};export default AddQualification;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/signup/components/addQualification.tsx"],"names":["useState","setShowToast","onFileUpload","removeFile","jpegFile","jpgFile","pngFile","pdfFile","docFile","noData","AddQualification","props","qualification","setQualification","changeHandler","id","prevData","newData","item","find","i","qualification_id","itemIndex","indexOf","push","url","splice","onFileChange","e","formData","FormData","newFile","target","files","fileType","type","split","docTypes","selectedFileSize","size","alert","append","res","success","imgUrl","console","log","removeFileHandler","onSubmit","preventDefault","length","updateSteps","step","onSkipQualification","qualificationList","tradeListData","_id","trade","qualifications","fileDetails","fileArray","replace","toLowerCase","fileName","map","isChecked","docDetails","name"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { setShowToast } from '../../../redux/common/actions';\nimport { onFileUpload } from '../../../redux/auth/actions';\n\nimport removeFile from '../../../assets/images/icon-close-1.png';\nimport jpegFile from '../../../assets/images/jpeg.png';\nimport jpgFile from '../../../assets/images/jpg.png';\nimport pngFile from '../../../assets/images/png.png';\nimport pdfFile from '../../../assets/images/pdf.png';\nimport docFile from '../../../assets/images/doc.png';\nimport noData from '../../../assets/images/no-search-data.png';\n\ninterface Propstype {\n    updateSteps: (num: number, data: any) => void,\n    step: number,\n    tradeListData: Array<any>,\n    trade: string,\n    qualification: Array<any>\n}\n\nconst AddQualification = (props: Propstype) => {\n    const [qualification, setQualification] = useState(props.qualification);\n\n    const changeHandler = (id: string) => {\n        setQualification((prevData: Array<any>) => {\n            const newData = [...prevData];\n            const item = newData.find(i => i.qualification_id === id)\n            const itemIndex = newData.indexOf(item);\n            if (!item) {\n                newData.push({ qualification_id: id, url: '' });\n            } else {\n                newData.splice(itemIndex, 1);\n            }\n            return newData;\n        })\n    }\n\n    const onFileChange = async (e: any, id: string) => {\n        const newData = [...qualification];\n        const item = newData.find(i => i.qualification_id === id)\n        if (!item) {\n            return\n        }\n        const formData = new FormData();\n        const newFile = e.target.files[0]\n        var fileType = newFile?.type?.split('/')[1]\n        const docTypes: Array<any> = [\"jpeg\", \"jpg\", \"png\", \"pdf\", \"msword\", \"doc\", \"docx\"]\n        var selectedFileSize = newFile?.size / 1024 / 1024;\n        if (docTypes.indexOf(fileType) < 0 || (selectedFileSize > 10)) {\n            alert('The file must be in proper format or size')\n            return;\n        }\n        formData.append('file', newFile);\n        const res = await onFileUpload(formData)\n        if (res.success) {\n            const item = newData.find(i => i.qualification_id === id)\n            item.url = res.imgUrl\n            console.log(newData, 'image upload done')\n            setQualification(newData)\n        }\n    }\n\n    const removeFileHandler = (id: string) => {\n        const newData = [...qualification];\n        const item = newData.find(i => i.qualification_id === id)\n        item.url = ''\n        setQualification(newData)\n    }\n\n    const onSubmit = (e: any) => {\n        e.preventDefault();\n        const newData = [...qualification];\n        const item = newData.find(i => i.url === '')\n        const itemIndex = newData.indexOf(item);\n        console.log(qualification, item, itemIndex, 'okk');\n        if (!qualification.length) {\n            setShowToast(true, \"Please add at least one qualification\");\n        } else if (itemIndex >= 0) {\n            setShowToast(true, \"Please upload all selected documents\");\n        } else {\n            props.updateSteps(props.step + 1, { qualification });\n        }\n    }\n\n    const onSkipQualification = (e: any) => {\n        e.preventDefault();\n        const qualification: Array<any> = []\n        props.updateSteps(props.step + 1, { qualification });\n    }\n\n    const qualificationList = props.tradeListData.find(i => i._id === props.trade)?.qualifications\n\n    const fileDetails = (item: any) => {\n        var fileArray = item.url.replace(/^.*[\\\\\\/]/, '').split('.');\n        const type = fileArray[1].toLowerCase();\n        switch (type) {\n            case \"jpeg\":\n                return { fileName: fileArray[0], fileType: jpegFile };\n            case \"jpg\":\n                return { fileName: fileArray[0], fileType: jpgFile };\n            case \"png\":\n                return { fileName: fileArray[0], fileType: pngFile };\n            case \"pdf\":\n                return { fileName: fileArray[0], fileType: pdfFile };\n            case \"doc\":\n                return { fileName: fileArray[0], fileType: docFile };\n            case \"docx\":\n                return { fileName: fileArray[0], fileType: docFile };\n            default:\n                return null;\n        }\n    }\n\n    return (\n        <div className=\"form_wrapper\">\n            <form onSubmit={onSubmit}>\n                <div className=\"choose_qf\">\n                    {qualificationList ? qualificationList?.map((item: any) => {\n                        const isChecked = qualification.find((i: any) => i.qualification_id === item._id);\n                        const docDetails = isChecked?.url && fileDetails(isChecked);\n                        return (\n                            <div className=\"f_spacebw\" key={item._id}>\n                                <div className=\"checkbox_wrap agree_check\">\n                                    <input className=\"filter-type filled-in\" type=\"checkbox\"\n                                        checked={isChecked ? true : false} name={item.name} id={item.name}\n                                        onChange={() => changeHandler(item._id)} />\n                                    <label htmlFor={item.name}>{item.name}</label>\n                                </div>\n                                {isChecked?.url ?\n                                    (<div className=\"file_upload_box\">\n                                        <span className=\"close\" onClick={() => removeFileHandler(item._id)}>\n                                            <img src={removeFile} />\n                                        </span>\n                                        <span className=\"file_icon\">\n                                            <img src={docDetails?.fileType} />\n                                        </span>\n                                        <div className=\"file_details\">\n                                            <span className=\"name\">{docDetails?.fileName}</span>\n                                        </div>\n                                    </div>) :\n                                    (<div className=\"upload_doc\">\n                                        <label className={`upload_btn ${!isChecked ? \"disable\" : \"\"}`} htmlFor={item.name + 'upload'}>Upload</label>\n                                        <input type=\"file\" className=\"none\" id={item.name + 'upload'}\n                                            accept=\"image/jpeg,image/jpg,image/png,application/pdf,application/msword,.doc\"\n                                            disabled={!!isChecked ? false : true} onChange={(e) => onFileChange(e, item._id)} />\n                                    </div>)}\n                            </div>\n                        )\n                    }) : <li className='no_data'>\n                        <img src={noData} alt=\"no-data\" />\n                    </li>}\n                </div>\n\n                <div className=\"form_field\">\n                    <button className=\"fill_btn btn-effect\">Next</button>\n                </div>\n                <div className=\"form_field text-center\">\n                    <a className=\"link\" onClick={onSkipQualification}>Skip</a>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default AddQualification\n"]},"metadata":{},"sourceType":"module"}