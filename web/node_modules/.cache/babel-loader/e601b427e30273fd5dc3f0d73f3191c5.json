{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieEditProfile/components/digitalIdVerification.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { setShowToast } from '../../../redux/common/actions'; //@ts-ignore\n\nimport FsLightbox from 'fslightbox-react';\nimport { uploadStripeDocument } from '../../../redux/profile/actions';\nimport { useHistory } from 'react-router-dom';\nimport addMedia from \"../../../assets/images/add-image.png\";\nimport close from '../../../assets/images/icon-close-1.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst imageFormats = [\"jpeg\", \"jpg\", \"png\"];\n\nconst LodgeDispute = props => {\n  _s();\n\n  var _Object$keys7, _Object$keys8, _Object$keys9, _Object$keys10;\n\n  const [frontPhotoId, setFrontPhotoId] = useState({});\n  const [backPhotoId, setBackPhotoId] = useState({});\n  const [formData] = useState(new FormData());\n  const [toggler, setToggler] = useState(false);\n  const [selectedSlide, setSelectSlide] = useState(1);\n  const history = useHistory();\n\n  const removeFromItem = type => {\n    if (type === 'frontId') {\n      formData.delete('stripeAccountId');\n      formData.delete('frontPhotoIDUpload');\n      setFrontPhotoId({});\n    }\n\n    if (type === 'backId') {\n      formData.delete('backPhotoIDUpload');\n      setBackPhotoId({});\n    }\n  };\n\n  const onFileChange = async e => {\n    var _newFile$type, _newFile$type$split$, _Object$keys, _Object$keys2;\n\n    const newFile = e.target.files[0];\n    var fileType = newFile === null || newFile === void 0 ? void 0 : (_newFile$type = newFile.type) === null || _newFile$type === void 0 ? void 0 : (_newFile$type$split$ = _newFile$type.split('/')[1]) === null || _newFile$type$split$ === void 0 ? void 0 : _newFile$type$split$.toLowerCase();\n    var selectedFileSize = (newFile === null || newFile === void 0 ? void 0 : newFile.size) / 1024 / 1024; // size in mib\n\n    if (imageFormats.indexOf(fileType) < 0 || selectedFileSize > 10) {\n      setShowToast(true, \"The file must be in proper format or size\");\n      return;\n    }\n\n    if (imageFormats.includes(fileType) && selectedFileSize > 10) {\n      // image validations\n      setShowToast(true, \"The image file size must be below 10 mb\");\n      return;\n    }\n\n    const data = {\n      localURL: URL.createObjectURL(newFile)\n    };\n\n    if (((_Object$keys = Object.keys(frontPhotoId)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) === 0) {\n      formData.append('stripeAccountId', props.stripeAccountId);\n      formData.append('frontPhotoIDUpload', newFile);\n      setFrontPhotoId(data);\n    } else if (((_Object$keys2 = Object.keys(backPhotoId)) === null || _Object$keys2 === void 0 ? void 0 : _Object$keys2.length) === 0) {\n      formData.append('backPhotoIDUpload', newFile);\n      setBackPhotoId(data);\n    }\n  };\n\n  const checkErrors = () => {\n    var _Object$keys3, _Object$keys4;\n\n    return ((_Object$keys3 = Object.keys(frontPhotoId)) === null || _Object$keys3 === void 0 ? void 0 : _Object$keys3.length) && ((_Object$keys4 = Object.keys(backPhotoId)) === null || _Object$keys4 === void 0 ? void 0 : _Object$keys4.length) ? false : true;\n  };\n\n  const handleSubmit = async () => {\n    const res = await uploadStripeDocument(formData);\n\n    if (res.success && props.redirect_from === 'mark-milestone' && props.markMilestoneVerif) {\n      setShowToast(true, res.msg);\n      props.markMilestoneVerif('verifSuccess');\n      return;\n    } else if (res.success) {\n      history.push('/id-verification-success');\n    }\n  };\n\n  const renderFilteredItems = () => {\n    var _Object$keys5, _Object$keys6;\n\n    let sources = [];\n    let types = [];\n\n    if (((_Object$keys5 = Object.keys(frontPhotoId)) === null || _Object$keys5 === void 0 ? void 0 : _Object$keys5.length) > 0) {\n      sources.push(frontPhotoId.localURL);\n      types.push('image');\n    }\n\n    if (((_Object$keys6 = Object.keys(backPhotoId)) === null || _Object$keys6 === void 0 ? void 0 : _Object$keys6.length) > 0) {\n      sources.push(backPhotoId.localURL);\n      types.push('image');\n    }\n\n    return {\n      sources,\n      types\n    };\n  };\n\n  const {\n    sources,\n    types\n  } = renderFilteredItems();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex_row\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex_col_sm_8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relate\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            if (props.redirect_from === 'mark-milestone' && props.markMilestoneVerif) {\n              props.markMilestoneVerif('backStep');\n            } else if (props.setIdVerifClicked) props.setIdVerifClicked(false);\n          },\n          className: \"back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"xs_sub_title\",\n          children: 'Add your ID photo'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"commn_para\",\n        children: \"Please add image of Front & Back side of your ID.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FsLightbox, {\n        toggler: toggler,\n        slide: selectedSlide,\n        sources: sources,\n        types: types,\n        onClose: () => setSelectSlide(1)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex_col_sm_12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload_img_video\",\n        children: [((_Object$keys7 = Object.keys(frontPhotoId)) === null || _Object$keys7 === void 0 ? void 0 : _Object$keys7.length) > 0 && /*#__PURE__*/_jsxDEV(\"figure\", {\n          className: \"img_video\",\n          onClick: () => {\n            setToggler(prev => !prev);\n            setSelectSlide(1);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            title: 'front-photo-id',\n            src: frontPhotoId.localURL,\n            alt: \"media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            onClick: e => {\n              e.stopPropagation();\n              removeFromItem('frontId');\n            },\n            src: close,\n            alt: \"remove\",\n            className: \"remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }, this), ((_Object$keys8 = Object.keys(backPhotoId)) === null || _Object$keys8 === void 0 ? void 0 : _Object$keys8.length) > 0 && /*#__PURE__*/_jsxDEV(\"figure\", {\n          className: \"img_video\",\n          onClick: () => {\n            setToggler(prev => !prev);\n            setSelectSlide(2);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            title: 'back-photo-id',\n            src: backPhotoId.localURL,\n            alt: \"media\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            onClick: e => {\n              e.stopPropagation();\n              removeFromItem('backId');\n            },\n            src: close,\n            alt: \"remove\",\n            className: \"remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }, this), ((_Object$keys9 = Object.keys(frontPhotoId)) === null || _Object$keys9 === void 0 ? void 0 : _Object$keys9.length) && ((_Object$keys10 = Object.keys(backPhotoId)) === null || _Object$keys10 === void 0 ? void 0 : _Object$keys10.length) ? null : /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"upload_media\",\n            htmlFor: \"upload_img_video\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: addMedia,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: onFileChange,\n            type: \"file\",\n            accept: \"image/png,image/jpg,image/jpeg\",\n            style: {\n              display: \"none\"\n            },\n            id: \"upload_img_video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        className: `fill_btn full_btn btn-effect ${checkErrors() ? 'disable_btn' : ''}`,\n        children: 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LodgeDispute, \"gzChDsk+OcAS+IErRTWd4EoMv8I=\", false, function () {\n  return [useHistory];\n});\n\n_c = LodgeDispute;\nexport default LodgeDispute;\n\nvar _c;\n\n$RefreshReg$(_c, \"LodgeDispute\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieEditProfile/components/digitalIdVerification.tsx"],"names":["React","useState","setShowToast","FsLightbox","uploadStripeDocument","useHistory","addMedia","close","imageFormats","LodgeDispute","props","frontPhotoId","setFrontPhotoId","backPhotoId","setBackPhotoId","formData","FormData","toggler","setToggler","selectedSlide","setSelectSlide","history","removeFromItem","type","delete","onFileChange","e","newFile","target","files","fileType","split","toLowerCase","selectedFileSize","size","indexOf","includes","data","localURL","URL","createObjectURL","Object","keys","length","append","stripeAccountId","checkErrors","handleSubmit","res","success","redirect_from","markMilestoneVerif","msg","push","renderFilteredItems","sources","types","setIdVerifClicked","prev","stopPropagation","display"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { setShowToast } from '../../../redux/common/actions';\n//@ts-ignore\nimport FsLightbox from 'fslightbox-react';\nimport { uploadStripeDocument } from '../../../redux/profile/actions';\nimport { useHistory } from 'react-router-dom';\n\nimport addMedia from \"../../../assets/images/add-image.png\";\nimport close from '../../../assets/images/icon-close-1.png';\n\nconst imageFormats: Array<string> = [\"jpeg\", \"jpg\", \"png\"];\ninterface Props {\n    setIdVerifClicked?: (data: boolean) => void;\n    markMilestoneVerif?: (data: any) => void;\n    stripeAccountId: string;\n    redirect_from?: string\n}\n\nconst LodgeDispute = (props: Props) => {\n    const [frontPhotoId, setFrontPhotoId] = useState<any>({});\n    const [backPhotoId, setBackPhotoId] = useState<any>({});\n    const [formData] = useState<any>(new FormData());\n\n    const [toggler, setToggler] = useState(false);\n    const [selectedSlide, setSelectSlide] = useState(1);\n    const history = useHistory();\n\n    const removeFromItem = (type: string) => {\n        if (type === 'frontId') {\n            formData.delete('stripeAccountId');\n            formData.delete('frontPhotoIDUpload');\n            setFrontPhotoId({});\n        }\n        if (type === 'backId') {\n            formData.delete('backPhotoIDUpload');\n            setBackPhotoId({});\n        }\n    }\n\n    const onFileChange = async (e: any) => {\n        const newFile = e.target.files[0];\n        var fileType = (newFile?.type?.split('/')[1])?.toLowerCase();\n        var selectedFileSize = newFile?.size / 1024 / 1024; // size in mib\n\n        if (imageFormats.indexOf(fileType) < 0 || (selectedFileSize > 10)) {\n            setShowToast(true, \"The file must be in proper format or size\")\n            return;\n        }\n\n        if (imageFormats.includes(fileType) && selectedFileSize > 10) { // image validations\n            setShowToast(true, \"The image file size must be below 10 mb\")\n            return;\n        }\n\n        const data = {\n            localURL: URL.createObjectURL(newFile),\n        }\n        if (Object.keys(frontPhotoId)?.length === 0) {\n            formData.append('stripeAccountId', props.stripeAccountId);\n            formData.append('frontPhotoIDUpload', newFile);\n            setFrontPhotoId(data);\n        } else if (Object.keys(backPhotoId)?.length === 0) {\n            formData.append('backPhotoIDUpload', newFile);\n            setBackPhotoId(data);\n        }\n    }\n\n    const checkErrors = () => {\n        return (Object.keys(frontPhotoId)?.length && Object.keys(backPhotoId)?.length) ? false : true;\n    }\n\n    const handleSubmit = async () => {\n        const res = await uploadStripeDocument(formData);\n        if (res.success && props.redirect_from === 'mark-milestone' && props.markMilestoneVerif) {\n            setShowToast(true, res.msg);\n            props.markMilestoneVerif('verifSuccess');\n            return;\n        } else if (res.success) {\n            history.push('/id-verification-success');\n        }\n    }\n\n    const renderFilteredItems = () => {\n        let sources: any = [];\n        let types: any = [];\n\n        if (Object.keys(frontPhotoId)?.length > 0) {\n            sources.push(frontPhotoId.localURL);\n            types.push('image');\n        }\n\n        if (Object.keys(backPhotoId)?.length > 0) {\n            sources.push(backPhotoId.localURL);\n            types.push('image');\n        }\n\n        return { sources, types };\n    }\n\n    const { sources, types } = renderFilteredItems();\n    return (\n        <div className=\"flex_row\">\n            <div className=\"flex_col_sm_8\">\n                <div className=\"relate\">\n                    <button\n                        onClick={() => {\n                            if (props.redirect_from === 'mark-milestone' && props.markMilestoneVerif) {\n                                props.markMilestoneVerif('backStep');\n                            } else if (props.setIdVerifClicked) props.setIdVerifClicked(false);\n                        }}\n                        className=\"back\"></button>\n                    <span className=\"xs_sub_title\">\n                        {'Add your ID photo'}\n                    </span>\n                </div>\n                {/* <span className=\"sub_title\">Lodge dispute</span> */}\n                <p className=\"commn_para\">Please add image of Front & Back side of your ID.</p>\n\n                <FsLightbox\n                    toggler={toggler}\n                    slide={selectedSlide}\n                    sources={sources}\n                    types={types}\n                    onClose={() => setSelectSlide(1)}\n                />\n            </div>\n\n            <div className=\"flex_col_sm_12\">\n                <div className=\"upload_img_video\">\n                    {Object.keys(frontPhotoId)?.length > 0 &&\n                        <figure className=\"img_video\" onClick={() => {\n                            setToggler((prev: boolean) => !prev);\n                            setSelectSlide(1);\n                        }}>\n                            <img title={'front-photo-id'} src={frontPhotoId.localURL} alt=\"media\" />\n                            <img\n                                onClick={(e) => { e.stopPropagation(); removeFromItem('frontId'); }}\n                                src={close} alt=\"remove\" className=\"remove\" />\n                        </figure>\n                    }\n                    {Object.keys(backPhotoId)?.length > 0 &&\n                        <figure className=\"img_video\" onClick={() => {\n                            setToggler((prev: boolean) => !prev);\n                            setSelectSlide(2);\n                        }}>\n                            <img title={'back-photo-id'} src={backPhotoId.localURL} alt=\"media\" />\n                            <img\n                                onClick={(e) => { e.stopPropagation(); removeFromItem('backId') }}\n                                src={close} alt=\"remove\" className=\"remove\" />\n                        </figure>\n                    }\n\n                    {(Object.keys(frontPhotoId)?.length && Object.keys(backPhotoId)?.length) ? null : (\n                        <React.Fragment>\n                            <label className=\"upload_media\" htmlFor=\"upload_img_video\">\n                                <img src={addMedia} alt=\"\" />\n                            </label>\n                            <input\n                                onChange={onFileChange}\n                                type=\"file\"\n                                accept=\"image/png,image/jpg,image/jpeg\"\n                                style={{ display: \"none\" }}\n                                id=\"upload_img_video\"\n                            />\n                        </React.Fragment>\n                    )}\n                </div>\n                <button\n                    onClick={handleSubmit}\n                    className={`fill_btn full_btn btn-effect ${checkErrors() ? 'disable_btn' : ''}`}>\n                    {'Submit'}\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default LodgeDispute;"]},"metadata":{},"sourceType":"module"}