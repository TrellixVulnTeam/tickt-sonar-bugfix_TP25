{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{createPassword}from'../../redux/auth/actions';import CreatePassword from'./components/createPassword';import SuccessPage from'./components/successPage';import ResetPassword from'./components/resetPassword';// import VerifyPhoneNumber from './components/verifyPhoneNumber';\nimport AuthParent from'../../common/auth/authParent';import VerifyEmail from'./components/EmailVerification';import{jsx as _jsx}from\"react/jsx-runtime\";var DATA=[{title:'Reset Password'},{title:'Verify your email'},{title:'Create password'}];var ForgetPassword=function ForgetPassword(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),steps=_useState2[0],setSteps=_useState2[1];var _useState3=useState({mobileNumber:'',email:''}),_useState4=_slicedToArray(_useState3,2),loginData=_useState4[0],setLoginData=_useState4[1];var updateSteps=function updateSteps(step,newData){setSteps(step);if(newData){setLoginData(function(prevData){return _objectSpread(_objectSpread({},prevData),newData);});}};var backButtonHandler=function backButtonHandler(){var minStep=1;if(steps===1){var _props$history;if(props.showModal){props.modalUpdateSteps(0);return;}return props===null||props===void 0?void 0:(_props$history=props.history)===null||_props$history===void 0?void 0:_props$history.push('/login');}if(steps===3){minStep=2;}setSteps(steps-minStep);};var onResetPassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(password){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_objectSpread(_objectSpread({},loginData),password);console.log({data:data});delete data.mobileNumber;_context.next=5;return createPassword(data);case 5:res=_context.sent;if(res.success){setSteps(4);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function onResetPassword(_x){return _ref.apply(this,arguments);};}();console.log({loginData:loginData});var renderPages=function renderPages(){switch(steps){// case 1:\n//     return <ResetPassword updateSteps={updateSteps} history={props.history} step={steps} mobileNumber={loginData.mobileNumber} />\n// case 2:\n//     return <VerifyPhoneNumber updateSteps={updateSteps} history={props.history} step={steps} mobileNumber={loginData.mobileNumber} />\ncase 1:return/*#__PURE__*/_jsx(ResetPassword,{updateSteps:updateSteps,history:props.history,step:steps});case 2:return/*#__PURE__*/_jsx(VerifyEmail,{updateSteps:updateSteps,history:props.history,step:steps,email:loginData.email});case 3:return/*#__PURE__*/_jsx(CreatePassword,{onResetPassword:onResetPassword});case 4:return/*#__PURE__*/_jsx(SuccessPage,{history:props.history,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps});default:return null;}};var header=DATA[steps-1];return header?/*#__PURE__*/_jsx(AuthParent,{sliderType:\"login\",backButtonHandler:backButtonHandler,hideProgres:true,header:header,steps:steps,history:props.history,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps,children:renderPages()}):renderPages();};export default ForgetPassword;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/forgetPassword/forgetPassword.tsx"],"names":["React","useState","createPassword","CreatePassword","SuccessPage","ResetPassword","AuthParent","VerifyEmail","DATA","title","ForgetPassword","props","steps","setSteps","mobileNumber","email","loginData","setLoginData","updateSteps","step","newData","prevData","backButtonHandler","minStep","showModal","modalUpdateSteps","history","push","onResetPassword","password","data","console","log","res","success","renderPages","setShowModal","header"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { createPassword } from '../../redux/auth/actions';\nimport CreatePassword from './components/createPassword';\nimport SuccessPage from './components/successPage';\nimport ResetPassword from './components/resetPassword';\n// import VerifyPhoneNumber from './components/verifyPhoneNumber';\nimport AuthParent from '../../common/auth/authParent';\nimport VerifyEmail from './components/EmailVerification';\n\ninterface Propstype {\n    history: any,\n    showModal?: boolean,\n    setShowModal: (data: any) => void,\n    updateSteps?: (data: any) => void,\n    modalUpdateSteps: (data: any) => void,\n}\n\nconst DATA = [\n    { title: 'Reset Password' },\n    { title: 'Verify your email' },\n    { title: 'Create password' },\n]\n\nconst ForgetPassword = (props: Propstype) => {\n    const [steps, setSteps] = useState(1);\n    const [loginData, setLoginData] = useState({\n        mobileNumber: '',\n        email:''\n    })\n\n    const updateSteps = (step: number, newData?: any) => {\n        setSteps(step);\n        if (newData) {\n            setLoginData((prevData: any) => ({ ...prevData, ...newData }))\n        }\n    }\n\n    const backButtonHandler = () => {\n        let minStep = 1;\n        if (steps === 1) {\n            if(props.showModal){\n                props.modalUpdateSteps(0);\n                return;\n            }\n            return props?.history?.push('/login')\n        }\n        if (steps === 3) {\n            minStep = 2\n        }\n        setSteps(steps - minStep)\n    }\n\n    const onResetPassword = async (password: any) => {\n        const data = { ...loginData, ...password }\n        console.log({data})\n        delete data.mobileNumber;\n        const res = await createPassword(data);\n        if (res.success) {\n            setSteps(4);\n        }\n    }\n    console.log({loginData})\n    const renderPages = () => {\n        switch (steps) {\n            // case 1:\n            //     return <ResetPassword updateSteps={updateSteps} history={props.history} step={steps} mobileNumber={loginData.mobileNumber} />\n            // case 2:\n            //     return <VerifyPhoneNumber updateSteps={updateSteps} history={props.history} step={steps} mobileNumber={loginData.mobileNumber} />\n            case 1:\n                return <ResetPassword updateSteps={updateSteps} history={props.history} step={steps} />\n            case 2:\n                return <VerifyEmail updateSteps={updateSteps} history={props.history} step={steps} email={loginData.email} />\n            case 3:\n                return <CreatePassword onResetPassword={onResetPassword} />\n            case 4:\n                return <SuccessPage history={props.history} showModal={props.showModal} setShowModal={props.setShowModal} modalUpdateSteps={props.modalUpdateSteps} />\n            default: return null\n        }\n    }\n\n    const header = DATA[steps - 1];\n\n    return header ? (\n        <AuthParent sliderType='login' backButtonHandler={backButtonHandler} hideProgres header={header} steps={steps} history={props.history} showModal={props.showModal} setShowModal={props.setShowModal} modalUpdateSteps={props.modalUpdateSteps}>{renderPages()}</AuthParent>\n    ) : renderPages()\n}\n\nexport default ForgetPassword"]},"metadata":{},"sourceType":"module"}