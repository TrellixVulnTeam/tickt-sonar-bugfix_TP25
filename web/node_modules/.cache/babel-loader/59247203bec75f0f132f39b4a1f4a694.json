{"ast":null,"code":"import _toConsumableArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import SearchFilters from\"./searchFilters\";import noData from\"../../assets/images/no-search-data.png\";// import BannerSearch from '../shared/bannerSearch'\nimport BannerSearchProps from\"../shared/bannerSearchProps\";import TradieBox from\"../shared/tradieBox\";import moment from\"moment\";import InfiniteScroll from\"react-infinite-scroll-component\";import{moengage,mixPanel}from\"../../services/analyticsTools\";import{MoEConstants}from\"../../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchResultTradie=function SearchResultTradie(props){var _props$history,_props$history$locati,_props$history$locati2;var location=useLocation();var _useState=useState(location.state),_useState2=_slicedToArray(_useState,2),stateData=_useState2[0],setStateData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),specialiZationName=_useState4[0],setSpecialiZationName=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isToggle=_useState6[0],setToggleSearch=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),localInfo=_useState8[0],setLocalInfo=_useState8[1];// localInfo\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),localData=_useState12[0],setLocalData=_useState12[1];var _useState13=useState(1),_useState14=_slicedToArray(_useState13,2),currentPage=_useState14[0],setCurrentPage=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),hasMore=_useState16[0],setHasMore=_useState16[1];var _useState17=useState({sortByFilterClicked:false,tradeId:[],sortChanged:false,specializationId:[],specializationName:[],allSpecializationClicked:false}),_useState18=_slicedToArray(_useState17,2),sortByFilter=_useState18[0],setSortByFilter=_useState18[1];var homeSearchJobData=props.homeSearchJobData;// props here.\nuseEffect(function(){var _props$location,_props$location$state,_stateData$calender,_stateData$calender3,_stateData$specializa,_data$address,_props$tradeListData$,_JSON$parse,_JSON$parse2;props.getRecentSearchList();var data={page:1,isFiltered:false};if(stateData===null||stateData===void 0?void 0:stateData.tradeId){data[\"tradeId\"]=stateData===null||stateData===void 0?void 0:stateData.tradeId;}if(stateData===null||stateData===void 0?void 0:stateData.specializations){data[\"specializationId\"]=stateData===null||stateData===void 0?void 0:stateData.specializations;data[\"specializationId\"]=specialiZationName;}// tradeId: stateData?.tradeId,\n// specializationId: stateData?.specializations,\nif(stateData===null||stateData===void 0?void 0:stateData.location){data[\"location\"]=stateData===null||stateData===void 0?void 0:stateData.location;}if(props===null||props===void 0?void 0:(_props$location=props.location)===null||_props$location===void 0?void 0:(_props$location$state=_props$location.state)===null||_props$location$state===void 0?void 0:_props$location$state.suggestionSelected){var _props$location2,_props$location2$stat;data[\"address\"]=JSON.stringify(props===null||props===void 0?void 0:(_props$location2=props.location)===null||_props$location2===void 0?void 0:(_props$location2$stat=_props$location2.state)===null||_props$location2$stat===void 0?void 0:_props$location2$stat.suggestionSelected);}if(stateData===null||stateData===void 0?void 0:(_stateData$calender=stateData.calender)===null||_stateData$calender===void 0?void 0:_stateData$calender.startDate){var _stateData$calender2;data[\"from_date\"]=moment(stateData===null||stateData===void 0?void 0:(_stateData$calender2=stateData.calender)===null||_stateData$calender2===void 0?void 0:_stateData$calender2.startDate).format(\"YYYY-MM-DD\");}if(stateData===null||stateData===void 0?void 0:(_stateData$calender3=stateData.calender)===null||_stateData$calender3===void 0?void 0:_stateData$calender3.endDate){var _stateData$calender4;data[\"to_date\"]=moment(stateData===null||stateData===void 0?void 0:(_stateData$calender4=stateData.calender)===null||_stateData$calender4===void 0?void 0:_stateData$calender4.endDate).format(\"YYYY-MM-DD\");}var spec_count=stateData===null||stateData===void 0?void 0:(_stateData$specializa=stateData.specializations)===null||_stateData$specializa===void 0?void 0:_stateData$specializa.length;if(!(data===null||data===void 0?void 0:data.address)||!(data===null||data===void 0?void 0:(_data$address=data.address)===null||_data$address===void 0?void 0:_data$address.length)){data===null||data===void 0?true:delete data.address;}setLocalInfo({name:stateData===null||stateData===void 0?void 0:stateData.name,// count: spec_count === 1 ? 0 : spec_count,\ncount:0,tradeId:data.tradeId,specializationId:data.specializationId,specializationName:data.specialiZationName,location:data.location,doingLocalChanges:false,suggestionSelected:stateData===null||stateData===void 0?void 0:stateData.suggestionSelected});if(data===null||data===void 0?void 0:data.address){return;}// if (!stateData?.suggestionSelected || (data?.location?.coordinates && Array.isArray(data?.location?.coordinates) && data?.location?.coordinates?.length)) {\nprops.postHomeSearchData(data);var mData=_objectSpread(_objectSpread(_objectSpread({timeStamp:moengage.getCurrentTimeStamp(),category:props===null||props===void 0?void 0:(_props$tradeListData$=props.tradeListData.find(function(i){return i._id===(data===null||data===void 0?void 0:data.tradeId[0]);}))===null||_props$tradeListData$===void 0?void 0:_props$tradeListData$.trade_name},data.address&&{location:\"\".concat((_JSON$parse=JSON.parse(data.address))===null||_JSON$parse===void 0?void 0:_JSON$parse.mainText,\" \").concat((_JSON$parse2=JSON.parse(data.address))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.secondaryText)}),(data===null||data===void 0?void 0:data.from_date)&&{\"start date\":data===null||data===void 0?void 0:data.from_date}),(data===null||data===void 0?void 0:data.to_date)&&{\"end date\":data===null||data===void 0?void 0:data.to_date});moengage.moE_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES,mData);mixPanel.mixP_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES,mData);// }\n},[]);var getTitleInfo=function getTitleInfo(info){setLocalInfo(info);};var checkIfExist=function checkIfExist(data){if(data&&Array.isArray(data)&&(data===null||data===void 0?void 0:data.length)){var element_id=data[0].tradieId;var response=localData.find(function(item){return item.tradieId===element_id;});if(response){return true;}return false;}return false;};var filterChangeHandler=function filterChangeHandler(id,name,newName){if(name===\"jobTypes\"){if(sortByFilter.jobTypes[0]==id){setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{jobTypes:[]});});}else{setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{jobTypes:[id]});});}}else if(name===\"specializationId\"){setSortByFilter(function(prevData){var _prevData$specializat;var newData=[];var newNameData=[];if(Array.isArray(prevData.specializationId)&&(prevData===null||prevData===void 0?void 0:(_prevData$specializat=prevData.specializationId)===null||_prevData$specializat===void 0?void 0:_prevData$specializat.length)){newData=_toConsumableArray(prevData.specializationId);newNameData=_toConsumableArray(prevData.specializationName);}// if (\n//   Array.isArray(prevData.specializationName) &&\n//   prevData?.specializationName?.length\n// ) {\n//   newNameData = [...prevData.specializationName];\n// }\nif(sortByFilter.allSpecializationClicked){newData=[];newNameData=[];}var itemIndex=newData.indexOf(id);var itemnameIndex=newData.indexOf(newName);if(newData.indexOf(id)<0){newData.push(id);newNameData.push(newName);}else{newData.splice(itemIndex,1);newNameData.splice(itemIndex,1);}// if (newData.indexOf(newName) < 0) {\n//   newNameData.push(newName);\n// } else {\n//   newNameData.splice(itemnameIndex, 1);\n// }\nsetSpecialiZationName(newNameData);return _objectSpread(_objectSpread({},prevData),{},{specializationId:newData,specializationName:newNameData,allSpecializationClicked:false});});}else if(name==\"categories\"){if(sortByFilter.tradeId.length&&sortByFilter.tradeId[0]==id){setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{tradeId:[],specializationId:[],allSpecializationClicked:false});});}else{setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{tradeId:[id],specializationId:[],specializationName:[],allSpecializationClicked:false});});}}else if(name==\"All Clicked\"){setSpecialiZationName([]);if(sortByFilter.allSpecializationClicked){setSpecialiZationName([]);setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{allSpecializationClicked:false,specializationId:[],specializationName:[]});});}else{var newSpecialization=id.map(function(_ref){var _id=_ref._id;return _id;});setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{allSpecializationClicked:true,specializationId:newSpecialization});});}}else if(name==\"Clear All\"){setSortByFilter(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{allSpecializationClicked:false,jobTypes:[],specializationId:[],specializationName:[],tradeId:[]});});}};useEffect(function(){var _local_info$tradeId,_local_info_tradeId,_localTradeId;var newProps=homeSearchJobData;var propsPage=1;var propsTradeId=\"\";var localTradeId=\"\";var local_info=localInfo;var local_info_tradeId=\"\";if((local_info===null||local_info===void 0?void 0:local_info.tradeId)&&Array.isArray(local_info===null||local_info===void 0?void 0:local_info.tradeId)&&(local_info===null||local_info===void 0?void 0:(_local_info$tradeId=local_info.tradeId)===null||_local_info$tradeId===void 0?void 0:_local_info$tradeId.length)){local_info_tradeId=local_info===null||local_info===void 0?void 0:local_info.tradeId[0];}if(!hasMore){setHasMore(function(prev){return!prev;});}if(homeSearchJobData&&Array.isArray(homeSearchJobData)&&(homeSearchJobData===null||homeSearchJobData===void 0?void 0:homeSearchJobData.length)){var _homeSearchJobData$,_homeSearchJobData$$t,_homeSearchJobData$2;propsTradeId=(_homeSearchJobData$=homeSearchJobData[0])===null||_homeSearchJobData$===void 0?void 0:(_homeSearchJobData$$t=_homeSearchJobData$.tradeData[0])===null||_homeSearchJobData$$t===void 0?void 0:_homeSearchJobData$$t.tradeId;propsPage=(_homeSearchJobData$2=homeSearchJobData[0])===null||_homeSearchJobData$2===void 0?void 0:_homeSearchJobData$2.page;}if(localData&&Array.isArray(localData)&&(localData===null||localData===void 0?void 0:localData.length)){var _localData$,_localData$$tradeData;localTradeId=(_localData$=localData[0])===null||_localData$===void 0?void 0:(_localData$$tradeData=_localData$.tradeData[0])===null||_localData$$tradeData===void 0?void 0:_localData$$tradeData.tradeId;}var cp=currentPage*10;if(!((_local_info_tradeId=local_info_tradeId)===null||_local_info_tradeId===void 0?void 0:_local_info_tradeId.length)&&((_localTradeId=localTradeId)===null||_localTradeId===void 0?void 0:_localTradeId.length)){getTitleInfo({name:\"\",count:0,tradeId:[],specializationId:[],location:null,doingLocalChanges:false,suggestionSelected:\"\"});}if(propsPage){var _local_info_tradeId2,_localTradeId2;if(((_local_info_tradeId2=local_info_tradeId)===null||_local_info_tradeId2===void 0?void 0:_local_info_tradeId2.length)&&((_localTradeId2=localTradeId)===null||_localTradeId2===void 0?void 0:_localTradeId2.length)){var _propsTradeId;if(!((_propsTradeId=propsTradeId)===null||_propsTradeId===void 0?void 0:_propsTradeId.length)&&local_info_tradeId===localTradeId){return;}}if(propsPage===1&&currentPage===1){setLocalData(newProps);setCurrentPage(propsPage);}else if(propsPage>1&&currentPage>1&&currentPage===propsPage){if(!checkIfExist(newProps)){setLocalData(function(prev){return[].concat(_toConsumableArray(prev),_toConsumableArray(newProps));});}}else if(propsPage===1&&currentPage>1){setLocalData(newProps);setCurrentPage(propsPage);}else{var _local_info_tradeId3,_localTradeId3,_propsTradeId2;if(!((_local_info_tradeId3=local_info_tradeId)===null||_local_info_tradeId3===void 0?void 0:_local_info_tradeId3.length)&&((_localTradeId3=localTradeId)===null||_localTradeId3===void 0?void 0:_localTradeId3.length)&&((_propsTradeId2=propsTradeId)===null||_propsTradeId2===void 0?void 0:_propsTradeId2.length)){if(localTradeId===propsTradeId){setLocalData(newProps);setCurrentPage(propsPage);}}}}},[homeSearchJobData]);var handleChangeToggle=function handleChangeToggle(value){setToggleSearch(value);};// let homeSearchJobData: any = props.homeSearchJobData;\nvar local_info=localInfo;var isLoading=props.isLoading;console.log(specialiZationName,\"bchdbchjdbcjdcbjdbcjdcbjdc=========================================\");return/*#__PURE__*/_jsxs(\"div\",{className:\"app_wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top_search \".concat(isToggle?\"active\":\"\"),children:/*#__PURE__*/_jsx(BannerSearchProps,_objectSpread(_objectSpread({},props),{},{tradeListData:props.tradeListData,showOnlyTradeName:(_props$history=props.history)===null||_props$history===void 0?void 0:(_props$history$locati=_props$history.location)===null||_props$history$locati===void 0?void 0:(_props$history$locati2=_props$history$locati.state)===null||_props$history$locati2===void 0?void 0:_props$history$locati2.showOnlyTradeName,getTitleInfo:getTitleInfo,localInfo:localInfo,handleChangeToggle:handleChangeToggle}))}),/*#__PURE__*/_jsx(\"div\",{className:\"search_result\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row mob_srch_option\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6 text-right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setToggleSearch(true);},className:\"fill_grey_btn btn-effect\",children:\"Modify Search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"result_heading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_8\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"title\",children:[console.log(specialiZationName.length,\"specialiZationName.length\"),specialiZationName.length?\"\".concat(specialiZationName[0],\" \").concat((local_info===null||local_info===void 0?void 0:local_info.count)>1?\"+\".concat((local_info===null||local_info===void 0?void 0:local_info.count)-1):\"\"):(local_info===null||local_info===void 0?void 0:local_info.name)||\"\",/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:\"\".concat((localData===null||localData===void 0?void 0:localData.length)||0,\" result(s)\")})]}),/*#__PURE__*/_jsx(SearchFilters,_objectSpread(_objectSpread({},props),{},{localInfo:localInfo,getTitleInfo:getTitleInfo,filterChangeHandler:filterChangeHandler,sortByFilter:sortByFilter,setSortByFilter:setSortByFilter}))]})})}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:localData===null||localData===void 0?void 0:localData.length,next:function next(){if((localData===null||localData===void 0?void 0:localData.length)<currentPage*10){// setHasMore(false);\n}else{var _local_info$tradeId2,_local_info$specializ,_props$location3,_props$location3$stat,_props$location4,_props$location4$stat;var cp=currentPage+1;setCurrentPage(function(prev){return prev+1;});var _local_info=localInfo;var data={page:cp,isFiltered:false};if(_local_info===null||_local_info===void 0?void 0:_local_info.location){data[\"location\"]=_local_info===null||_local_info===void 0?void 0:_local_info.location;}if(_local_info===null||_local_info===void 0?void 0:(_local_info$tradeId2=_local_info.tradeId)===null||_local_info$tradeId2===void 0?void 0:_local_info$tradeId2.length){data[\"tradeId\"]=_local_info===null||_local_info===void 0?void 0:_local_info.tradeId;}if(_local_info===null||_local_info===void 0?void 0:(_local_info$specializ=_local_info.specializationId)===null||_local_info$specializ===void 0?void 0:_local_info$specializ.length){data[\"specializationId\"]=_local_info===null||_local_info===void 0?void 0:_local_info.specializationId;}if((props===null||props===void 0?void 0:(_props$location3=props.location)===null||_props$location3===void 0?void 0:(_props$location3$stat=_props$location3.state)===null||_props$location3$stat===void 0?void 0:_props$location3$stat.suggestionSelected)&&(props===null||props===void 0?void 0:(_props$location4=props.location)===null||_props$location4===void 0?void 0:(_props$location4$stat=_props$location4.state)===null||_props$location4$stat===void 0?void 0:_props$location4$stat.suggestionSelected)!==\"{}\"){var _props$location5,_props$location5$stat;data[\"address\"]=JSON.stringify(props===null||props===void 0?void 0:(_props$location5=props.location)===null||_props$location5===void 0?void 0:(_props$location5$stat=_props$location5.state)===null||_props$location5$stat===void 0?void 0:_props$location5$stat.suggestionSelected);}if(_local_info===null||_local_info===void 0?void 0:_local_info.from_date){data[\"from_date\"]=_local_info===null||_local_info===void 0?void 0:_local_info.from_date;}if(_local_info===null||_local_info===void 0?void 0:_local_info.to_date){data[\"to_date\"]=_local_info===null||_local_info===void 0?void 0:_local_info.to_date;}if((_local_info===null||_local_info===void 0?void 0:_local_info.sortBy)>0){data[\"sortBy\"]=_local_info===null||_local_info===void 0?void 0:_local_info.sortBy;}if(!(data===null||data===void 0?void 0:data.hasOwnProperty(\"specializationId\"))){data[\"isFiltered\"]=true;}props.postHomeSearchData(data);}},hasMore:hasMore,loader:/*#__PURE__*/_jsx(_Fragment,{}),className:\"flex_row tradies_row\",children:(localData===null||localData===void 0?void 0:localData.length)?localData.map(function(item,index){return/*#__PURE__*/_jsx(TradieBox,{item:item,index:index});}):!isLoading&&!(localData===null||localData===void 0?void 0:localData.length)?/*#__PURE__*/_jsxs(\"div\",{className:\"no_record\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"no_img\",children:/*#__PURE__*/_jsx(\"img\",{src:noData,alt:\"data not found\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"No Data Found\"})]}):null})]})})})]});};export default SearchResultTradie;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/searchTradieResult/searchResultTradie.tsx"],"names":["useState","useEffect","useLocation","SearchFilters","noData","BannerSearchProps","TradieBox","moment","InfiniteScroll","moengage","mixPanel","MoEConstants","SearchResultTradie","props","location","state","stateData","setStateData","specialiZationName","setSpecialiZationName","isToggle","setToggleSearch","localInfo","setLocalInfo","loading","setLoading","localData","setLocalData","currentPage","setCurrentPage","hasMore","setHasMore","sortByFilterClicked","tradeId","sortChanged","specializationId","specializationName","allSpecializationClicked","sortByFilter","setSortByFilter","homeSearchJobData","getRecentSearchList","data","page","isFiltered","specializations","suggestionSelected","JSON","stringify","calender","startDate","format","endDate","spec_count","length","address","name","count","doingLocalChanges","postHomeSearchData","mData","timeStamp","getCurrentTimeStamp","category","tradeListData","find","i","_id","trade_name","parse","mainText","secondaryText","from_date","to_date","moE_SendEvent","SEARCHED_FOR_TRADIES","mixP_SendEvent","getTitleInfo","info","checkIfExist","Array","isArray","element_id","tradieId","response","item","filterChangeHandler","id","newName","jobTypes","prevData","newData","newNameData","itemIndex","indexOf","itemnameIndex","push","splice","newSpecialization","map","newProps","propsPage","propsTradeId","localTradeId","local_info","local_info_tradeId","prev","tradeData","cp","handleChangeToggle","value","isLoading","console","log","history","showOnlyTradeName","sortBy","hasOwnProperty","index"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport SearchFilters from \"./searchFilters\";\nimport noData from \"../../assets/images/no-search-data.png\";\nimport closeMap from \"../../assets/images/close-white.png\";\n// import BannerSearch from '../shared/bannerSearch'\nimport BannerSearchProps from \"../shared/bannerSearchProps\";\nimport TradieBox from \"../shared/tradieBox\";\nimport moment from \"moment\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { addListener } from \"process\";\nimport { moengage, mixPanel } from \"../../services/analyticsTools\";\nimport { MoEConstants } from \"../../utils/constants\";\nimport JobTypeList from \"../home/tradieHome/components/jobTypeList\";\n\nconst SearchResultTradie = (props: any) => {\n  const location: any = useLocation();\n\n  const [stateData, setStateData] = useState(location.state);\n  const [specialiZationName, setSpecialiZationName] = useState<any>([]);\n  const [isToggle, setToggleSearch] = useState(false);\n  const [localInfo, setLocalInfo] = useState({}); // localInfo\n  const [loading, setLoading] = useState(false);\n  const [localData, setLocalData] = useState<any>([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const [sortByFilter, setSortByFilter] = useState<any>({\n    sortByFilterClicked: false,\n    tradeId: [],\n    sortChanged: false,\n    specializationId: [],\n    specializationName: [],\n    allSpecializationClicked: false,\n  });\n\n  const { homeSearchJobData } = props; // props here.\n\n  useEffect(() => {\n    props.getRecentSearchList();\n\n    let data: any = {\n      page: 1,\n      isFiltered: false,\n    };\n\n    if (stateData?.tradeId) {\n      data[\"tradeId\"] = stateData?.tradeId;\n    }\n\n    if (stateData?.specializations) {\n      data[\"specializationId\"] = stateData?.specializations;\n      data[\"specializationId\"] = specialiZationName;\n    }\n    // tradeId: stateData?.tradeId,\n    // specializationId: stateData?.specializations,\n\n    if (stateData?.location) {\n      data[\"location\"] = stateData?.location;\n    }\n\n    if (props?.location?.state?.suggestionSelected) {\n      data[\"address\"] = JSON.stringify(\n        props?.location?.state?.suggestionSelected\n      );\n    }\n\n    if (stateData?.calender?.startDate) {\n      data[\"from_date\"] = moment(stateData?.calender?.startDate).format(\n        \"YYYY-MM-DD\"\n      );\n    }\n    if (stateData?.calender?.endDate) {\n      data[\"to_date\"] = moment(stateData?.calender?.endDate).format(\n        \"YYYY-MM-DD\"\n      );\n    }\n    let spec_count: any = stateData?.specializations?.length;\n\n    if (!data?.address || !data?.address?.length) {\n      delete data?.address;\n    }\n\n    setLocalInfo({\n      name: stateData?.name,\n      // count: spec_count === 1 ? 0 : spec_count,\n      count: 0,\n      tradeId: data.tradeId,\n      specializationId: data.specializationId,\n      specializationName: data.specialiZationName,\n      location: data.location,\n      doingLocalChanges: false,\n      suggestionSelected: stateData?.suggestionSelected,\n    });\n\n    if (data?.address) {\n      return;\n    }\n\n    // if (!stateData?.suggestionSelected || (data?.location?.coordinates && Array.isArray(data?.location?.coordinates) && data?.location?.coordinates?.length)) {\n    props.postHomeSearchData(data);\n    const mData = {\n      timeStamp: moengage.getCurrentTimeStamp(),\n      category: props?.tradeListData.find(\n        (i: any) => i._id === data?.tradeId[0]\n      )?.trade_name,\n      ...(data.address && {\n        location: `${JSON.parse(data.address)?.mainText} ${\n          JSON.parse(data.address)?.secondaryText\n        }`,\n      }),\n      //'length of hire': '',\n      ...(data?.from_date && { \"start date\": data?.from_date }),\n      ...(data?.to_date && { \"end date\": data?.to_date }),\n    };\n    moengage.moE_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES, mData);\n    mixPanel.mixP_SendEvent(MoEConstants.SEARCHED_FOR_TRADIES, mData);\n    // }\n  }, []);\n\n  const getTitleInfo = (info: any) => {\n    setLocalInfo(info);\n  };\n\n  const checkIfExist = (data: any) => {\n    if (data && Array.isArray(data) && data?.length) {\n      let element_id = data[0].tradieId;\n      let response = localData.find(\n        (item: any) => item.tradieId === element_id\n      );\n      if (response) {\n        return true;\n      }\n      return false;\n    }\n    return false;\n  };\n  const filterChangeHandler = (id: any, name: string, newName?: string) => {\n    if (name === \"jobTypes\") {\n      if (sortByFilter.jobTypes[0] == id) {\n        setSortByFilter((prevData: any) => ({ ...prevData, jobTypes: [] }));\n      } else {\n        setSortByFilter((prevData: any) => ({ ...prevData, jobTypes: [id] }));\n      }\n    } else if (name === \"specializationId\") {\n      setSortByFilter((prevData: any) => {\n        var newData: any = [];\n        var newNameData: any = [];\n        if (\n          Array.isArray(prevData.specializationId) &&\n          prevData?.specializationId?.length\n        ) {\n          newData = [...prevData.specializationId];\n          newNameData = [...prevData.specializationName];\n        }\n\n        // if (\n        //   Array.isArray(prevData.specializationName) &&\n        //   prevData?.specializationName?.length\n        // ) {\n        //   newNameData = [...prevData.specializationName];\n        // }\n        if (sortByFilter.allSpecializationClicked) {\n          newData = [];\n          newNameData = [];\n        }\n        const itemIndex = newData.indexOf(id);\n        const itemnameIndex = newData.indexOf(newName);\n        if (newData.indexOf(id) < 0) {\n          newData.push(id);\n          newNameData.push(newName);\n        } else {\n          newData.splice(itemIndex, 1);\n          newNameData.splice(itemIndex, 1);\n        }\n        // if (newData.indexOf(newName) < 0) {\n        //   newNameData.push(newName);\n        // } else {\n        //   newNameData.splice(itemnameIndex, 1);\n        // }\n\n        setSpecialiZationName(newNameData);\n        return {\n          ...prevData,\n          specializationId: newData,\n          specializationName: newNameData,\n          allSpecializationClicked: false,\n        };\n      });\n    } else if (name == \"categories\") {\n      if (sortByFilter.tradeId.length && sortByFilter.tradeId[0] == id) {\n        setSortByFilter((prevData: any) => ({\n          ...prevData,\n          tradeId: [],\n          specializationId: [],\n          allSpecializationClicked: false,\n        }));\n      } else {\n        setSortByFilter((prevData: any) => ({\n          ...prevData,\n          tradeId: [id],\n          specializationId: [],\n          specializationName: [],\n          allSpecializationClicked: false,\n        }));\n      }\n    } else if (name == \"All Clicked\") {\n      setSpecialiZationName([]);\n      if (sortByFilter.allSpecializationClicked) {\n        setSpecialiZationName([]);\n        setSortByFilter((prevData: any) => ({\n          ...prevData,\n          allSpecializationClicked: false,\n          specializationId: [],\n          specializationName: [],\n        }));\n      } else {\n        const newSpecialization = id.map(({ _id }: { _id: string }) => {\n          return _id;\n        });\n        setSortByFilter((prevData: any) => ({\n          ...prevData,\n          allSpecializationClicked: true,\n          specializationId: newSpecialization,\n        }));\n      }\n    } else if (name == \"Clear All\") {\n      setSortByFilter((prevData: any) => ({\n        ...prevData,\n        allSpecializationClicked: false,\n        jobTypes: [],\n        specializationId: [],\n        specializationName: [],\n        tradeId: [],\n      }));\n    }\n  };\n  useEffect(() => {\n    let newProps = homeSearchJobData;\n    let propsPage = 1;\n    let propsTradeId = \"\";\n    let localTradeId = \"\";\n    let local_info: any = localInfo;\n    let local_info_tradeId = \"\";\n    if (\n      local_info?.tradeId &&\n      Array.isArray(local_info?.tradeId) &&\n      local_info?.tradeId?.length\n    ) {\n      local_info_tradeId = local_info?.tradeId[0];\n    }\n\n    if (!hasMore) {\n      setHasMore((prev: any) => !prev);\n    }\n\n    if (\n      homeSearchJobData &&\n      Array.isArray(homeSearchJobData) &&\n      homeSearchJobData?.length\n    ) {\n      propsTradeId = homeSearchJobData[0]?.tradeData[0]?.tradeId;\n      propsPage = homeSearchJobData[0]?.page;\n    }\n\n    if (localData && Array.isArray(localData) && localData?.length) {\n      localTradeId = localData[0]?.tradeData[0]?.tradeId;\n    }\n\n    let cp = currentPage * 10;\n\n    if (!local_info_tradeId?.length && localTradeId?.length) {\n      getTitleInfo({\n        name: \"\",\n        count: 0,\n        tradeId: [],\n        specializationId: [],\n        location: null,\n        doingLocalChanges: false,\n        suggestionSelected: \"\",\n      });\n    }\n\n    if (propsPage) {\n      if (local_info_tradeId?.length && localTradeId?.length) {\n        if (!propsTradeId?.length && local_info_tradeId === localTradeId) {\n          return;\n        }\n      }\n\n      if (propsPage === 1 && currentPage === 1) {\n        setLocalData(newProps);\n        setCurrentPage(propsPage);\n      } else if (\n        propsPage > 1 &&\n        currentPage > 1 &&\n        currentPage === propsPage\n      ) {\n        if (!checkIfExist(newProps)) {\n          setLocalData((prev: any) => [...prev, ...newProps]);\n        }\n      } else if (propsPage === 1 && currentPage > 1) {\n        setLocalData(newProps);\n        setCurrentPage(propsPage);\n      } else {\n        if (\n          !local_info_tradeId?.length &&\n          localTradeId?.length &&\n          propsTradeId?.length\n        ) {\n          if (localTradeId === propsTradeId) {\n            setLocalData(newProps);\n            setCurrentPage(propsPage);\n          }\n        }\n      }\n    }\n  }, [homeSearchJobData]);\n\n  const handleChangeToggle = (value: any) => {\n    setToggleSearch(value);\n  };\n\n  // let homeSearchJobData: any = props.homeSearchJobData;\n  let local_info: any = localInfo;\n  let isLoading: any = props.isLoading;\n  console.log(\n    specialiZationName,\n    \"bchdbchjdbcjdcbjdbcjdcbjdc=========================================\"\n  );\n  return (\n    <div className=\"app_wrapper\">\n      <div className={`top_search ${isToggle ? \"active\" : \"\"}`}>\n        <BannerSearchProps\n          {...props}\n          tradeListData={props.tradeListData}\n          showOnlyTradeName={props.history?.location?.state?.showOnlyTradeName}\n          getTitleInfo={getTitleInfo}\n          localInfo={localInfo}\n          handleChangeToggle={handleChangeToggle}\n        />\n      </div>\n      <div className=\"search_result\">\n        <div className=\"section_wrapper\">\n          <div className=\"custom_container\">\n            <div className=\"flex_row mob_srch_option\">\n              <div className=\"flex_col_sm_6\"></div>\n              <div className=\"flex_col_sm_6 text-right\">\n                <button\n                  onClick={() => {\n                    setToggleSearch(true);\n                  }}\n                  className=\"fill_grey_btn btn-effect\"\n                >\n                  Modify Search\n                </button>\n              </div>\n            </div>\n\n            <div className=\"result_heading\">\n              <div className=\"flex_row\">\n                <div className=\"flex_col_sm_8\">\n                  <span className=\"title\">\n                    {console.log(\n                      specialiZationName.length,\n                      \"specialiZationName.length\"\n                    )}\n                    {specialiZationName.length\n                      ? `${specialiZationName[0]} ${\n                          local_info?.count > 1\n                            ? `+${local_info?.count - 1}`\n                            : \"\"\n                        }`\n                      : local_info?.name || \"\"}\n                    <span className=\"count\">\n                      {`${localData?.length || 0} result(s)`}\n                    </span>\n                  </span>\n                  <SearchFilters\n                    {...props}\n                    localInfo={localInfo}\n                    getTitleInfo={getTitleInfo}\n                    filterChangeHandler={filterChangeHandler}\n                    sortByFilter={sortByFilter}\n                    setSortByFilter={setSortByFilter}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <InfiniteScroll\n              dataLength={localData?.length}\n              next={() => {\n                if (localData?.length < currentPage * 10) {\n                  // setHasMore(false);\n                } else {\n                  let cp = currentPage + 1;\n                  setCurrentPage((prev: any) => prev + 1);\n                  let local_info: any = localInfo;\n\n                  let data: any = {\n                    page: cp,\n                    isFiltered: false,\n                  };\n\n                  if (local_info?.location) {\n                    data[\"location\"] = local_info?.location;\n                  }\n\n                  if (local_info?.tradeId?.length) {\n                    data[\"tradeId\"] = local_info?.tradeId;\n                  }\n\n                  if (local_info?.specializationId?.length) {\n                    data[\"specializationId\"] = local_info?.specializationId;\n                  }\n\n                  if (\n                    props?.location?.state?.suggestionSelected &&\n                    props?.location?.state?.suggestionSelected !== \"{}\"\n                  ) {\n                    data[\"address\"] = JSON.stringify(\n                      props?.location?.state?.suggestionSelected\n                    );\n                  }\n\n                  if (local_info?.from_date) {\n                    data[\"from_date\"] = local_info?.from_date;\n                  }\n\n                  if (local_info?.to_date) {\n                    data[\"to_date\"] = local_info?.to_date;\n                  }\n\n                  if (local_info?.sortBy > 0) {\n                    data[\"sortBy\"] = local_info?.sortBy;\n                  }\n\n                  if (!data?.hasOwnProperty(\"specializationId\")) {\n                    data[\"isFiltered\"] = true;\n                  }\n\n                  props.postHomeSearchData(data);\n                }\n              }}\n              hasMore={hasMore}\n              loader={<></>}\n              className=\"flex_row tradies_row\"\n            >\n              {localData?.length ? (\n                localData.map((item: any, index: number) => (\n                  <TradieBox item={item} index={index} />\n                ))\n              ) : !isLoading && !localData?.length ? (\n                <div className=\"no_record\">\n                  <figure className=\"no_img\">\n                    <img src={noData} alt=\"data not found\" />\n                  </figure>\n                  <span>{\"No Data Found\"}</span>\n                </div>\n              ) : null}\n            </InfiniteScroll>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchResultTradie;\n"]},"metadata":{},"sourceType":"module"}