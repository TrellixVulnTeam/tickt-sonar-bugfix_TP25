{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{checkMobileNumber}from'../../../redux/auth/actions';import Constants from'../../../utils/constants';import regex from'../../../utils/regex';import{setShowToast}from'../../../redux/common/actions';import NumberFormat from\"react-number-format\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PhoneNumber=function PhoneNumber(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState(props.mobileNumber),_useState4=_slicedToArray(_useState3,2),mobileNumb=_useState4[0],setMobileNumb=_useState4[1];var changeHandler=function changeHandler(e){var inputVal=e.target.value.replaceAll(' ','');console.log(inputVal,inputVal.length,mobileNumb,\"okok\");if(regex.numeric.test(inputVal)||!inputVal){if(inputVal.length===3){if(inputVal.length==mobileNumb.replaceAll(' ','').length){inputVal=inputVal.slice(0,2);setMobileNumb(inputVal);return;}else if(inputVal.length<mobileNumb.replaceAll(' ','').length){inputVal=inputVal.slice(0,3);setMobileNumb(inputVal);return;}}if(inputVal.length>=3&&inputVal.length<6){inputVal=inputVal.slice(0,3)+\" \"+inputVal.slice(3,inputVal.length);setMobileNumb(inputVal);return;}if(inputVal.length===6){console.log(\"OK\");if(inputVal.length==mobileNumb.replaceAll(' ','').length){inputVal=inputVal.slice(0,3)+\" \"+inputVal.slice(3,5);}else if(inputVal.length<mobileNumb.replaceAll(' ','').length){inputVal=inputVal.slice(0,3)+\" \"+inputVal.slice(3,6);}else{inputVal=inputVal.slice(0,3)+\" \"+inputVal.slice(3,6)+\" \";}setMobileNumb(inputVal);return;}if(inputVal.length>6){inputVal=inputVal.slice(0,3)+\" \"+inputVal.slice(3,6)+\" \"+inputVal.slice(6,inputVal.length);}setMobileNumb(inputVal);}// const key = inputVal.charCodeAt(inputVal.length - 1)\n// if ((key == NaN || inputVal == \"\") && mobileNumber.length === 1) {\n//     setMobileNumber('');\n//     return;\n// }\n// if ((key > 47 && key < 58) || key === 8) {\n//     e.preventDefault();\n//     setMobileNumber(e.target.value)\n// }\n};var validateForm=function validateForm(){var newErrors={};if(!mobileNumb){newErrors.mobileNumber=Constants.errorStrings.phoneNumberEmpty;}else{var phoneRegex=new RegExp(regex.mobile);if(!phoneRegex.test(mobileNumb.replaceAll(' ',''))){newErrors.mobileNumber=Constants.errorStrings.phoneNumberErr;}}setErrors(newErrors);return!Object.keys(newErrors).length;};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,mobileNumber;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!validateForm()){_context.next=7;break;}_context.next=4;return checkMobileNumber(mobileNumb.replaceAll(' ',''));case 4:res=_context.sent;(res===null||res===void 0?void 0:res.isProfileCompleted)&&setShowToast(true,res.message);if(!res.isProfileCompleted&&res.success){mobileNumber=mobileNumb.replaceAll(' ','');props.updateSteps(props.step+1,{mobileNumber:mobileNumber});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"form_wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Phone Number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(NumberFormat,{type:\"text\",className:\"detect_input_ltr\",placeholder:\"400 123 456\",value:mobileNumb,onValueChange:function onValueChange(_ref2){var value=_ref2.value;setMobileNumb(value);},format:\"### ### ###\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr\",children:\"+61\"})]}),!!errors.mobileNumber&&/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:errors.mobileNumber})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn btn-effect\",children:\"Next\"})})]})});};export default PhoneNumber;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/signup/components/phoneNumber.tsx"],"names":["React","useState","checkMobileNumber","Constants","regex","setShowToast","NumberFormat","PhoneNumber","props","errors","setErrors","mobileNumber","mobileNumb","setMobileNumb","changeHandler","e","inputVal","target","value","replaceAll","console","log","length","numeric","test","slice","validateForm","newErrors","errorStrings","phoneNumberEmpty","phoneRegex","RegExp","mobile","phoneNumberErr","Object","keys","onSubmit","preventDefault","res","isProfileCompleted","message","success","updateSteps","step"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { checkMobileNumber } from '../../../redux/auth/actions';\nimport Constants from '../../../utils/constants';\nimport regex from '../../../utils/regex';\nimport { setShowToast } from '../../../redux/common/actions';\nimport NumberFormat from \"react-number-format\";\ninterface Propstype {\n    updateSteps: (num: number, data: any) => void\n    step: number\n    history?: any\n    mobileNumber: any,\n}\n\nconst PhoneNumber = (props: Propstype) => {\n    const [errors, setErrors] = useState<any>({});\n    const [mobileNumb, setMobileNumb] = useState<any>(props.mobileNumber)\n\n    const changeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let inputVal = e.target.value.replaceAll(' ', '');\n        console.log(inputVal, inputVal.length, mobileNumb, \"okok\")\n\n        if (regex.numeric.test(inputVal) || !inputVal) {\n            if (inputVal.length === 3) {\n                if (inputVal.length == mobileNumb.replaceAll(' ', '').length) {\n                    inputVal = inputVal.slice(0, 2);\n                    setMobileNumb(inputVal);\n                    return;\n                } else if (inputVal.length < mobileNumb.replaceAll(' ', '').length) {\n                    inputVal = inputVal.slice(0, 3);\n                    setMobileNumb(inputVal);\n                    return;\n                }\n            }\n\n            if (inputVal.length >= 3 && inputVal.length < 6) {\n                inputVal = inputVal.slice(0, 3) + \" \" + inputVal.slice(3, inputVal.length);\n                setMobileNumb(inputVal);\n                return;\n            }\n\n            if (inputVal.length === 6) {\n                console.log(\"OK\")\n                if (inputVal.length == mobileNumb.replaceAll(' ', '').length) {\n                    inputVal = inputVal.slice(0, 3) + \" \" + inputVal.slice(3, 5);\n                } else if (inputVal.length < mobileNumb.replaceAll(' ', '').length) {\n                    inputVal = inputVal.slice(0, 3) + \" \" + inputVal.slice(3, 6);\n                } else {\n                    inputVal = inputVal.slice(0, 3) + \" \" + inputVal.slice(3, 6) + \" \";\n                }\n                setMobileNumb(inputVal);\n                return;\n            }\n            if (inputVal.length > 6) {\n                inputVal = inputVal.slice(0, 3) + \" \" + inputVal.slice(3, 6) + \" \" + inputVal.slice(6, inputVal.length);\n            }\n            setMobileNumb(inputVal)\n        }\n        // const key = inputVal.charCodeAt(inputVal.length - 1)\n        // if ((key == NaN || inputVal == \"\") && mobileNumber.length === 1) {\n        //     setMobileNumber('');\n        //     return;\n        // }\n        // if ((key > 47 && key < 58) || key === 8) {\n        //     e.preventDefault();\n        //     setMobileNumber(e.target.value)\n        // }\n    }\n\n    const validateForm = () => {\n        const newErrors: any = {};\n        if (!mobileNumb) {\n            newErrors.mobileNumber = Constants.errorStrings.phoneNumberEmpty;\n        } else {\n            const phoneRegex = new RegExp(regex.mobile);\n            if (!phoneRegex.test(mobileNumb.replaceAll(' ', ''))) {\n                newErrors.mobileNumber = Constants.errorStrings.phoneNumberErr\n            }\n        }\n        setErrors(newErrors);\n        return !Object.keys(newErrors).length;\n    }\n\n    const onSubmit = async (e: any) => {\n        e.preventDefault();\n        if (validateForm()) {\n            const res: any = await checkMobileNumber(mobileNumb.replaceAll(' ', ''))\n            res?.isProfileCompleted && setShowToast(true, res.message);\n            if (!res.isProfileCompleted && res.success) {\n                const mobileNumber = mobileNumb.replaceAll(' ', '');\n                props.updateSteps(props.step + 1, { mobileNumber })\n            }\n        }\n    }\n\n    return (\n        <div className=\"form_wrapper\">\n            <form onSubmit={onSubmit}>\n                <div className=\"form_field\">\n                    <label className=\"form_label\">Phone Number</label>\n                    <div className=\"text_field\">\n                        {/* <input type=\"text\" className=\"detect_input_ltr\" placeholder=\"400 123 456\" value={mobileNumb} onChange={changeHandler} maxLength={11} /> */}\n                        <NumberFormat\n                            type=\"text\"\n                            className=\"detect_input_ltr\"\n                            placeholder=\"400 123 456\"\n                            value={mobileNumb}\n                            onValueChange={({ value }) => {\n                                setMobileNumb(value);\n                            }}\n                            format=\"### ### ###\"\n                        />\n                        <span className=\"detect_icon_ltr\">+61</span>\n                    </div>\n                    {!!errors.mobileNumber && <span className=\"error_msg\">{errors.mobileNumber}</span>}\n                </div>\n\n                <div className=\"form_field\">\n                    <button className=\"fill_btn btn-effect\">Next</button>\n                </div>\n            </form>\n\n        </div>\n    )\n}\n\nexport default PhoneNumber\n\n"]},"metadata":{},"sourceType":"module"}