{"ast":null,"code":"import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from'react';import PostNewJob from'./components/postNewJob';import JobType from'./components/jobType';import AddLocation from'./components/addLocation';import Payment from'./components/payment';import ChooseTiming from'./components/chooseTiming';import ChooseTimingMileStone from'./components/chooseTimingMileStone';import AddMilestone from'./components/addMilestone';import JobMilestones from'./components/jobMilestones';import SaveTemplate from'./components/saveTemplate';import TemplateSavedSuccess from'./components/templateSavedSucess';import JobPostedSuccess from'./components/jobPostedSuccess';import UploadMedia from'./components/uploadMedia';import MileStoneTemplates from'./components/milestoneTemplates';import JobDetails from'./components/jobDetails';import EditMilestone from'./components/editMileStone';import{callCategories,republishJob,getOpenJobDetails}from'../../redux/jobs/actions';import moment from'moment';import{setShowToast}from'../../redux/common/actions';import{useHistory}from'react-router-dom';import templateImage from'../../assets/images/job-posted-bg.jpg';import{randomColors as getRandomColors}from'../../utils/common';import{jsx as _jsx}from\"react/jsx-runtime\";var PostJob=function PostJob(props){var history=useHistory();var callTradeList=props.callTradeList,isLoading=props.isLoading,tradeListData=props.tradeListData,updateMileStoneIndex=props.updateMileStoneIndex,updateMileStoneTimings=props.updateMileStoneTimings,updateDetailScreen=props.updateDetailScreen,editMilestoneTiming=props.editMilestoneTiming,editDetailPage=props.editDetailPage,builderProfile=props.builderProfile,editMilestoneId=props.editMilestoneId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),randomColors=_useState2[0],setRandomColors=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categoriesData=_useState4[0],setCategoriesData=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),step=_useState6[0],setStep=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),stepsCompleted=_useState8[0],setStepsCompleted=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];console.log('data: ',data);var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),editMileStone=_useState12[0],setEditMileStone=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),milestones=_useState14[0],setMileStones=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),forceupdate=_useState16[0],setForceUpdate=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),jobId=_useState18[0],setJobId=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),jobUpdateParam=_useState20[0],setJobUpdateParam=_useState20[1];var getCategories=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$callCategories,categoriesData,colors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callCategories();case 2:_yield$callCategories=_context.sent;categoriesData=_yield$callCategories.categories;setCategoriesData(categoriesData);colors=getRandomColors();setRandomColors(colors);case 7:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(function(){getCategories();callTradeList();},[getCategories,callTradeList,milestones]);var getJobDetails=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(jobId,updateOpen){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:res=null;if(!updateOpen){_context2.next=7;break;}_context2.next=4;return getOpenJobDetails(jobId);case 4:res=_context2.sent;_context2.next=10;break;case 7:_context2.next=9;return republishJob(jobId);case 9:res=_context2.sent;case 10:if(res.success){setData(_objectSpread(_objectSpread({},res.data),{},{specialization:res.data.specialization.map(function(_ref3){var specializationId=_ref3.specializationId;return specializationId;}),categories:res.data.categories.map(function(_ref4){var categoryId=_ref4.categoryId;return categoryId;}),job_type:res.data.job_type.map(function(_ref5){var jobTypeId=_ref5.jobTypeId;return jobTypeId;}),amount:\"\".concat(res.data.amount)}));setMileStones(res.data.milestones.map(function(_ref6){var milestone_name=_ref6.milestone_name,isPhotoevidence=_ref6.isPhotoevidence,recommended_hours=_ref6.recommended_hours,from_date=_ref6.from_date,to_date=_ref6.to_date;return{milestone_name:milestone_name,isPhotoevidence:isPhotoevidence,recommended_hours:recommended_hours,from_date:moment(new Date(from_date)).format('MM-DD-YYYY'),to_date:moment(new Date(to_date)).format('MM-DD-YYYY')};}));setStepsCompleted([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]);}case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}(),[]);useEffect(function(){var _history$location;var params=new URLSearchParams((_history$location=history.location)===null||_history$location===void 0?void 0:_history$location.search);var jobId=params.get('jobId')||'';// this param is missing in the case of re-publish.\nvar update=params.get('update')||'';if(jobId&&update!==\"true\"){if(jobId){setJobId(jobId);getJobDetails(jobId);}}else{if(update==\"true\"){setJobUpdateParam(true);getJobDetails(jobId,true);}}},[getJobDetails,history.location]);var clearParentStates=function clearParentStates(){setData({});setMileStones([]);setStepsCompleted([]);};var handleStepComplete=function handleStepComplete(stepData){setData(function(prevData){return _objectSpread(_objectSpread({},prevData),stepData);});setStepsCompleted(function(prevSteps){return prevSteps.concat(step);});setStep(function(prevStep){return prevStep+1;});};var handleStepJustUpdate=function handleStepJustUpdate(stepData,goto){setData(function(prevData){return _objectSpread(_objectSpread({},prevData),stepData);});if(goto===true){handleStepForward(14);}if(goto!==true&&goto>0){handleStepForward(goto);}};var newMileStoneScreen=function newMileStoneScreen(index){var milestone_clone=milestones;if(!milestone_clone[index]){milestone_clone[index]={};}setMileStones(milestone_clone);Array.isArray(forceupdate)?setForceUpdate({}):setForceUpdate([]);};var handleStepMileStone=function handleStepMileStone(data,index){var milestone_clone=milestones;milestone_clone[index]['milestone_name']=data.milestone_name;milestone_clone[index]['isPhotoevidence']=data.isPhotoevidence;milestone_clone[index]['recommended_hours']=data.recommended_hours;setMileStones(milestone_clone);Array.isArray(forceupdate)?setForceUpdate({}):setForceUpdate([]);};var addTimeToMileStone=function addTimeToMileStone(time,index,skip){var default_format='MM-DD-YYYY';var milestone_clone=milestones;var checkIsValid=true;if(!skip&&(milestone_clone===null||milestone_clone===void 0?void 0:milestone_clone.length)){var filter_milestone=milestone_clone.filter(function(item_mile,index_mile){return index_mile!==index;});var count_times={};if(filter_milestone===null||filter_milestone===void 0?void 0:filter_milestone.length)filter_milestone.forEach(function(mile){var msw=moment(mile.from_date,default_format).isValid();var mew=moment(mile.to_date,default_format).isValid();var tsw=moment(time.from_date,default_format).isValid();var tew=moment(time.to_date,default_format).isValid();var mile_start=mile.from_date;var mile_end=mile.to_date;var time_start=time.from_date;var time_end=time.to_date;if(count_times[mile_start]==undefined){count_times[mile_start]=1;}else{count_times[mile_start]=count_times[mile_start]+1;}if(count_times[mile_end]==undefined){count_times[mile_end]=1;}else{count_times[mile_end]=count_times[mile_end]+1;}if(count_times[mile_start]===4){console.log('Inside ---',{ms:mile_start==time_start});if(mile_start==time_start||mile_start==time_end){console.log('Inside - 1 ---');setShowToast(true,'Selected start data is fully engage');return;}}if(count_times[mile_end]===4){if(mile_end==time_start||mile_end==time_end){setShowToast(true,'Selected end data is fully engage');return;}}if(msw&&mew){if(tsw&&tew){// let checkIfSame = moment(time_start, default_format).isSame(moment(mile_start, default_format)) && moment(time_end, default_format).isSame(moment(mile_end, default_format));\n// if (checkIfSame) {\n//     checkIsValid = false;\n// }\n// if (!checkIfSame) {\n//     if (\n//         moment(time_start, default_format).isSameOrAfter(moment(mile_start, default_format)) &&\n//         moment(time_start, default_format).isSameOrBefore(moment(mile_end, default_format))\n//     ) {\n//         checkIsValid = false;\n//     }\n//     if (\n//         moment(time_end, default_format).isSameOrAfter(moment(mile_start, default_format)) &&\n//         moment(time_end, default_format).isSameOrBefore(moment(mile_end, default_format))\n//     ) {\n//         checkIsValid = false;\n//     }\n// }\n}//     if (!tew) {\n//         // if (moment(time_start, default_format).isSameOrAfter(moment(mile_start, default_format)) && moment(time_start, default_format).isSameOrBefore(moment(mile_start, default_format))) {\n//         //     checkIsValid = false;\n//         // }\n}// here conditions\n});}if(!checkIsValid){setShowToast(true,'Please add unique date');return;}milestone_clone[index]['from_date']=time.from_date;milestone_clone[index]['to_date']=time.to_date;setMileStones(milestone_clone);Array.isArray(forceupdate)?setForceUpdate({}):setForceUpdate([]);};var handleCombineMileStones=function handleCombineMileStones(item){var milestone_clone=milestones;var data_clone=data;milestone_clone=item;data_clone['milestones']=item;setMileStones(milestone_clone);setData(data_clone);};var removeMilestoneByIndex=function removeMilestoneByIndex(index){var milestone_clone=milestones;var data_clone=data;milestone_clone.splice(index,1);data_clone['milestones']=milestone_clone;setMileStones(milestone_clone);setData(data_clone);Array.isArray(forceupdate)?setForceUpdate({}):setForceUpdate([]);};var handleStepBack=function handleStepBack(){return setStep(function(prevStep){return prevStep-1;});};var handleStepForward=function handleStepForward(step,edit_item){if(!step){setStep(function(prevStep){return prevStep+1;});setEditMileStone(0);}else{if(edit_item){setStep(step);setEditMileStone(edit_item);Array.isArray(forceupdate)?setForceUpdate({}):setForceUpdate([]);}setStep(step);}};console.log({data:data});var page;switch(step){case 1:page=/*#__PURE__*/_jsx(PostNewJob,{data:data,jobUpdateParam:jobUpdateParam,handleStepForward:handleStepForward,handleStepJustUpdate:handleStepJustUpdate,editDetailPage:editDetailPage,stepCompleted:stepsCompleted.includes(1),handleStepComplete:handleStepComplete});break;case 2:page=/*#__PURE__*/_jsx(JobType,{categories:tradeListData,jobTypes:categoriesData,handleStepJustUpdate:handleStepJustUpdate,editDetailPage:editDetailPage,data:data,stepCompleted:stepsCompleted.includes(2),handleStepComplete:handleStepComplete,handleStepForward:handleStepForward,handleStepBack:handleStepBack});break;case 3:page=/*#__PURE__*/_jsx(AddLocation,{data:data,stepCompleted:stepsCompleted.includes(3),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack});break;case 4:page=/*#__PURE__*/_jsx(Payment,{data:data,stepCompleted:stepsCompleted.includes(4),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack});break;case 5:page=/*#__PURE__*/_jsx(ChooseTiming,{data:data,milestones:milestones,stepCompleted:stepsCompleted.includes(5),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack});break;case 6:page=/*#__PURE__*/_jsx(JobMilestones,{data:data,milestones:milestones,handleStepJustUpdate:handleStepJustUpdate,editDetailPage:editDetailPage,editMileStone:editMilestoneId,editMilestoneTiming:editMilestoneTiming,removeMilestoneByIndex:removeMilestoneByIndex,handleStepForward:handleStepForward,stepCompleted:stepsCompleted.includes(6),handleCombineMileStones:handleCombineMileStones,updateMileStoneIndex:updateMileStoneIndex,newMileStoneScreen:newMileStoneScreen,updateMileStoneTimings:updateMileStoneTimings,handleStepComplete:handleStepComplete,handleStepBack:handleStepBack});break;case 7:page=/*#__PURE__*/_jsx(AddMilestone,{data:data,milestones:milestones,newMileStoneScreen:newMileStoneScreen,handleStepForward:handleStepForward,stepCompleted:stepsCompleted.includes(7),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack,removeMilestoneByIndex:removeMilestoneByIndex,updateMileStoneIndex:updateMileStoneIndex,handleStepMileStone:handleStepMileStone});break;case 8:page=/*#__PURE__*/_jsx(ChooseTimingMileStone,{data:data,randomColors:randomColors,addTimeToMileStone:addTimeToMileStone,editMileStone:editMilestoneId,editMilestoneTiming:editMilestoneTiming,updateMileStoneTimings:updateMileStoneTimings,milestones:milestones,handleStepMileStone:handleStepMileStone,handleStepForward:handleStepForward,stepCompleted:stepsCompleted.includes(8),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack});break;case 9:page=/*#__PURE__*/_jsx(MileStoneTemplates,_objectSpread(_objectSpread({},props),{},{data:data,handleCombineMileStones:handleCombineMileStones,stepCompleted:stepsCompleted.includes(9),handleStepComplete:handleStepComplete,handleStepForward:handleStepForward,handleStepBack:handleStepBack}));break;case 10:page=/*#__PURE__*/_jsx(SaveTemplate,{data:data,milestones:milestones,handleCombineMileStones:handleCombineMileStones,stepCompleted:stepsCompleted.includes(10),handleStepComplete:handleStepComplete,handleStepForward:handleStepForward,handleStepBack:handleStepBack});break;case 11:page=/*#__PURE__*/_jsx(TemplateSavedSuccess,{data:data,handleStepForward:handleStepForward,stepCompleted:stepsCompleted.includes(11),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack});break;case 12:page=/*#__PURE__*/_jsx(JobPostedSuccess,{history:props.history,data:data,templateImage:templateImage,editDetailPage:editDetailPage,stepCompleted:stepsCompleted.includes(12),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack,handleStepForward:handleStepForward});break;case 13:page=/*#__PURE__*/_jsx(UploadMedia,{data:data,stepCompleted:stepsCompleted.includes(13),handleStepComplete:handleStepComplete,handleStepForward:handleStepForward,handleStepBack:handleStepBack});break;case 14:page=/*#__PURE__*/_jsx(JobDetails,{data:data,milestones:milestones,categories:tradeListData,jobTypes:categoriesData,builderProfile:builderProfile,clearParentStates:clearParentStates,stepCompleted:stepsCompleted.includes(14),handleStepComplete:handleStepComplete,handleStepForward:handleStepForward,handleStepBack:handleStepBack,updateDetailScreen:updateDetailScreen,jobId:jobId});break;case 15:page=/*#__PURE__*/_jsx(EditMilestone,{data:data,milestones:milestones,editMileStone:editMilestoneId,editMilestoneTiming:editMilestoneTiming,addTimeToMileStone:addTimeToMileStone,newMileStoneScreen:newMileStoneScreen,handleStepForward:handleStepForward,stepCompleted:stepsCompleted.includes(15),handleStepComplete:handleStepComplete,handleStepBack:handleStepBack,handleStepMileStone:handleStepMileStone});break;default:page=null;}return/*#__PURE__*/_jsx(\"div\",{children:page});};export default PostJob;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/postJob.tsx"],"names":["useCallback","useEffect","useState","PostNewJob","JobType","AddLocation","Payment","ChooseTiming","ChooseTimingMileStone","AddMilestone","JobMilestones","SaveTemplate","TemplateSavedSuccess","JobPostedSuccess","UploadMedia","MileStoneTemplates","JobDetails","EditMilestone","callCategories","republishJob","getOpenJobDetails","moment","setShowToast","useHistory","templateImage","randomColors","getRandomColors","PostJob","props","history","callTradeList","isLoading","tradeListData","updateMileStoneIndex","updateMileStoneTimings","updateDetailScreen","editMilestoneTiming","editDetailPage","builderProfile","editMilestoneId","setRandomColors","categoriesData","setCategoriesData","step","setStep","stepsCompleted","setStepsCompleted","data","setData","console","log","editMileStone","setEditMileStone","milestones","setMileStones","forceupdate","setForceUpdate","jobId","setJobId","jobUpdateParam","setJobUpdateParam","getCategories","categories","colors","getJobDetails","updateOpen","res","success","specialization","map","specializationId","categoryId","job_type","jobTypeId","amount","milestone_name","isPhotoevidence","recommended_hours","from_date","to_date","Date","format","params","URLSearchParams","location","search","get","update","clearParentStates","handleStepComplete","stepData","prevData","prevSteps","concat","prevStep","handleStepJustUpdate","goto","handleStepForward","newMileStoneScreen","index","milestone_clone","Array","isArray","handleStepMileStone","addTimeToMileStone","time","skip","default_format","checkIsValid","length","filter_milestone","filter","item_mile","index_mile","count_times","forEach","mile","msw","isValid","mew","tsw","tew","mile_start","mile_end","time_start","time_end","undefined","ms","handleCombineMileStones","item","data_clone","removeMilestoneByIndex","splice","handleStepBack","edit_item","page","includes"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport PostNewJob from './components/postNewJob';\nimport JobType from './components/jobType';\nimport AddLocation from './components/addLocation';\nimport Payment from './components/payment';\nimport ChooseTiming from './components/chooseTiming';\nimport ChooseTimingMileStone from './components/chooseTimingMileStone';\nimport AddMilestone from './components/addMilestone';\nimport JobMilestones from './components/jobMilestones';\nimport SaveTemplate from './components/saveTemplate';\nimport TemplateSavedSuccess from './components/templateSavedSucess';\nimport JobPostedSuccess from './components/jobPostedSuccess';\nimport UploadMedia from './components/uploadMedia';\nimport MileStoneTemplates from './components/milestoneTemplates';\nimport JobDetails from './components/jobDetails';\nimport EditMilestone from './components/editMileStone';\nimport { callCategories, republishJob, getOpenJobDetails } from '../../redux/jobs/actions';\nimport moment from 'moment';\nimport { setShowToast } from '../../redux/common/actions';\nimport { useHistory } from 'react-router-dom';\n\nimport templateImage from '../../assets/images/job-posted-bg.jpg';\n\nimport { randomColors as getRandomColors } from '../../utils/common'\n\ninterface Proptypes {\n    callTradeList: () => void;\n    tradeListData: Array<any>;\n    editMilestoneId: any;\n    editMilestoneTiming: any;\n    editDetailPage: any;\n    isLoading: any,\n    history: any,\n    builderProfile: any,\n    updateMileStoneIndex: (data: any) => void;\n    updateMileStoneTimings: (data: any) => void;\n    updateDetailScreen: (data: any) => void;\n}\n\nconst PostJob = (props: Proptypes) => {\n    const history = useHistory();\n\n    const {\n        callTradeList,\n        isLoading,\n        tradeListData,\n        updateMileStoneIndex,\n        updateMileStoneTimings,\n        updateDetailScreen,\n        editMilestoneTiming,\n        editDetailPage,\n        builderProfile,\n        editMilestoneId } = props;\n\n    const [randomColors, setRandomColors] = useState();\n    const [categoriesData, setCategoriesData] = useState([]);\n    const [step, setStep] = useState(1);\n    const [stepsCompleted, setStepsCompleted] = useState<Array<number>>([]);\n    const [data, setData] = useState({});\n    console.log('data: ', data);\n    const [editMileStone, setEditMileStone] = useState(0 as number);\n    const [milestones, setMileStones] = useState([]);\n    const [forceupdate, setForceUpdate] = useState({});\n    const [jobId, setJobId] = useState('');\n\n    const [jobUpdateParam, setJobUpdateParam] = useState(false);\n\n    const getCategories = useCallback(async () => {\n        const { categories: categoriesData } = await callCategories();\n        setCategoriesData(categoriesData);\n        let colors = getRandomColors();\n        setRandomColors(colors);\n    }, []);\n\n    useEffect(() => {\n        getCategories();\n        callTradeList();\n    }, [getCategories, callTradeList, milestones]);\n\n    const getJobDetails = useCallback(async (jobId: string, updateOpen?: boolean) => {\n        let res = null;\n\n        if (updateOpen) {\n            res = await getOpenJobDetails(jobId);\n        } else {\n            res = await republishJob(jobId);\n        }\n\n        if (res.success) {\n            setData({\n                ...res.data,\n                specialization: res.data.specialization.map(({ specializationId }: { specializationId: string }) => specializationId),\n                categories: res.data.categories.map(({ categoryId }: { categoryId: string }) => categoryId),\n                job_type: res.data.job_type.map(({ jobTypeId }: { jobTypeId: string }) => jobTypeId),\n                amount: `${res.data.amount}`,\n            });\n            setMileStones(res.data.milestones.map(({ milestone_name, isPhotoevidence, recommended_hours, from_date, to_date }: { milestone_name: string, isPhotoevidence: boolean, recommended_hours: string, from_date: string, to_date: string }) => ({\n                milestone_name,\n                isPhotoevidence,\n                recommended_hours,\n                from_date: moment(new Date(from_date)).format('MM-DD-YYYY'),\n                to_date: moment(new Date(to_date)).format('MM-DD-YYYY'),\n            })));\n            setStepsCompleted([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]);\n        }\n    }, []);\n\n    useEffect(() => {\n        const params = new URLSearchParams(history.location?.search);\n        const jobId: any = params.get('jobId') || '';\n        // this param is missing in the case of re-publish.\n        const update: any = params.get('update') || '';\n\n        if (jobId && update !== \"true\") {\n            if (jobId) {\n                setJobId(jobId);\n                getJobDetails(jobId);\n            }\n        } else {\n            if(update == \"true\"){\n                setJobUpdateParam(true);\n                getJobDetails(jobId, true);\n            }\n        }\n    }, [getJobDetails, history.location]);\n\n    const clearParentStates = () => {\n        setData({});\n        setMileStones([]);\n        setStepsCompleted([]);\n    }\n\n    const handleStepComplete = (stepData: any) => {\n        setData((prevData) => ({\n            ...prevData,\n            ...stepData\n        }))\n        setStepsCompleted((prevSteps) => prevSteps.concat(step));\n        setStep((prevStep) => prevStep + 1);\n    };\n\n    const handleStepJustUpdate = (stepData: any, goto?: any) => {\n        setData((prevData) => ({\n            ...prevData,\n            ...stepData\n        }));\n\n        if (goto === true) {\n            handleStepForward(14);\n        }\n\n        if (goto !== true && goto > 0) {\n            handleStepForward(goto)\n        }\n    }\n\n    const newMileStoneScreen = (index: any) => {\n        let milestone_clone: any = milestones;\n        if (!milestone_clone[index]) {\n            milestone_clone[index] = {}\n        }\n        setMileStones(milestone_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const handleStepMileStone = (data: any, index: any) => {\n        let milestone_clone: any = milestones;\n        milestone_clone[index]['milestone_name'] = data.milestone_name;\n        milestone_clone[index]['isPhotoevidence'] = data.isPhotoevidence;\n        milestone_clone[index]['recommended_hours'] = data.recommended_hours;\n        setMileStones(milestone_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const addTimeToMileStone = (time: any, index: any, skip: any) => {\n        const default_format = 'MM-DD-YYYY';\n        let milestone_clone: any = milestones;\n        let checkIsValid: any = true;\n\n        if (!skip && milestone_clone?.length) {\n            let filter_milestone: any = milestone_clone.filter((item_mile: any, index_mile: any) => index_mile !== index);\n            let count_times: any = {};\n            if (filter_milestone?.length)\n\n                filter_milestone.forEach((mile: any) => {\n                    let msw = moment(mile.from_date, default_format).isValid();\n                    let mew = moment(mile.to_date, default_format).isValid();\n\n                    let tsw = moment(time.from_date, default_format).isValid();\n                    let tew = moment(time.to_date, default_format).isValid();\n\n                    let mile_start = mile.from_date;\n                    let mile_end = mile.to_date;\n\n                    let time_start = time.from_date;\n                    let time_end = time.to_date;\n\n\n                    if (count_times[mile_start] == undefined) {\n                        count_times[mile_start] = 1\n                    } else {\n                        count_times[mile_start] = count_times[mile_start] + 1;\n                    }\n\n\n                    if (count_times[mile_end] == undefined) {\n                        count_times[mile_end] = 1\n                    } else {\n                        count_times[mile_end] = count_times[mile_end] + 1;\n                    }\n\n                    if (count_times[mile_start] === 4) {\n                        console.log('Inside ---', {\n                            ms: mile_start == time_start\n                        })\n                        if (mile_start == time_start || mile_start == time_end) {\n                            console.log('Inside - 1 ---')\n                            setShowToast(true, 'Selected start data is fully engage');\n                            return\n                        }\n                    }\n\n                    if (count_times[mile_end] === 4) {\n                        if (mile_end == time_start || mile_end == time_end) {\n                            setShowToast(true, 'Selected end data is fully engage');\n                            return\n                        }\n                    }\n\n\n                    if (msw && mew) {\n                        if (tsw && tew) {\n                            // let checkIfSame = moment(time_start, default_format).isSame(moment(mile_start, default_format)) && moment(time_end, default_format).isSame(moment(mile_end, default_format));\n\n                            // if (checkIfSame) {\n                            //     checkIsValid = false;\n                            // }\n\n                            // if (!checkIfSame) {\n                            //     if (\n                            //         moment(time_start, default_format).isSameOrAfter(moment(mile_start, default_format)) &&\n                            //         moment(time_start, default_format).isSameOrBefore(moment(mile_end, default_format))\n                            //     ) {\n                            //         checkIsValid = false;\n                            //     }\n\n                            //     if (\n                            //         moment(time_end, default_format).isSameOrAfter(moment(mile_start, default_format)) &&\n                            //         moment(time_end, default_format).isSameOrBefore(moment(mile_end, default_format))\n                            //     ) {\n                            //         checkIsValid = false;\n                            //     }\n                            // }\n                        }\n\n                        //     if (!tew) {\n                        //         // if (moment(time_start, default_format).isSameOrAfter(moment(mile_start, default_format)) && moment(time_start, default_format).isSameOrBefore(moment(mile_start, default_format))) {\n                        //         //     checkIsValid = false;\n                        //         // }\n                    }\n                    // here conditions\n                })\n        }\n\n\n        if (!checkIsValid) {\n            setShowToast(true, 'Please add unique date');\n            return;\n        }\n\n        milestone_clone[index]['from_date'] = time.from_date;\n        milestone_clone[index]['to_date'] = time.to_date;\n        setMileStones(milestone_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const handleCombineMileStones = (item: any) => {\n        let milestone_clone: any = milestones;\n        let data_clone: any = data;\n        milestone_clone = item;\n        data_clone['milestones'] = item;\n        setMileStones(milestone_clone);\n        setData(data_clone);\n    }\n\n    const removeMilestoneByIndex = (index: any) => {\n        let milestone_clone: any = milestones;\n        let data_clone: any = data;\n        milestone_clone.splice(index, 1);\n        data_clone['milestones'] = milestone_clone;\n        setMileStones(milestone_clone);\n        setData(data_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const handleStepBack = () => setStep((prevStep) => prevStep - 1);\n    const handleStepForward = (step: any, edit_item?: number) => {\n        if (!step) {\n            setStep((prevStep) => prevStep + 1)\n            setEditMileStone(0);\n        } else {\n            if (edit_item) {\n                setStep(step)\n                setEditMileStone(edit_item);\n                Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n            }\n            setStep(step);\n        }\n    };\n    console.log({ data });\n    let page;\n    switch (step) {\n        case 1:\n            page = (\n                <PostNewJob\n                    data={data}\n                    jobUpdateParam={jobUpdateParam}\n                    handleStepForward={handleStepForward}\n                    handleStepJustUpdate={handleStepJustUpdate}\n                    editDetailPage={editDetailPage}\n                    stepCompleted={stepsCompleted.includes(1)}\n                    handleStepComplete={handleStepComplete}\n                />\n            );\n            break;\n        case 2:\n            page = (\n                <JobType\n                    categories={tradeListData}\n                    jobTypes={categoriesData}\n                    handleStepJustUpdate={handleStepJustUpdate}\n                    editDetailPage={editDetailPage}\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(2)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 3:\n            page = (\n                <AddLocation\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(3)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 4:\n            page = (\n                <Payment\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(4)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 5:\n            page = (\n                <ChooseTiming\n                    data={data}\n                    milestones={milestones}\n                    stepCompleted={stepsCompleted.includes(5)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 6:\n            page = (\n                <JobMilestones\n                    data={data}\n                    milestones={milestones}\n                    handleStepJustUpdate={handleStepJustUpdate}\n                    editDetailPage={editDetailPage}\n                    editMileStone={editMilestoneId}\n                    editMilestoneTiming={editMilestoneTiming}\n                    removeMilestoneByIndex={removeMilestoneByIndex}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(6)}\n                    handleCombineMileStones={handleCombineMileStones}\n                    updateMileStoneIndex={updateMileStoneIndex}\n                    newMileStoneScreen={newMileStoneScreen}\n                    updateMileStoneTimings={updateMileStoneTimings}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 7:\n            page = (\n                <AddMilestone\n                    data={data}\n                    milestones={milestones}\n                    newMileStoneScreen={newMileStoneScreen}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(7)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                    removeMilestoneByIndex={removeMilestoneByIndex}\n                    updateMileStoneIndex={updateMileStoneIndex}\n                    handleStepMileStone={handleStepMileStone}\n                />)\n            break;\n        case 8:\n            page = (\n                <ChooseTimingMileStone\n                    data={data}\n                    randomColors={randomColors}\n                    addTimeToMileStone={addTimeToMileStone}\n                    editMileStone={editMilestoneId}\n                    editMilestoneTiming={editMilestoneTiming}\n                    updateMileStoneTimings={updateMileStoneTimings}\n                    milestones={milestones}\n                    handleStepMileStone={handleStepMileStone}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(8)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            )\n            break;\n        case 9:\n            page = (\n                <MileStoneTemplates\n                    {...props}\n                    data={data}\n                    handleCombineMileStones={handleCombineMileStones}\n                    stepCompleted={stepsCompleted.includes(9)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />\n            )\n            break;\n        case 10:\n            page = (\n                <SaveTemplate\n                    data={data}\n                    milestones={milestones}\n                    handleCombineMileStones={handleCombineMileStones}\n                    stepCompleted={stepsCompleted.includes(10)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />)\n            break;\n        case 11:\n            page = (\n                <TemplateSavedSuccess\n                    data={data}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(11)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />)\n            break;\n        case 12:\n            page = (\n                <JobPostedSuccess\n                    history={props.history}\n                    data={data}\n                    templateImage={templateImage}\n                    editDetailPage={editDetailPage}\n                    stepCompleted={stepsCompleted.includes(12)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                    handleStepForward={handleStepForward}\n                />)\n            break;\n        case 13:\n            page = (\n                <UploadMedia\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(13)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />)\n            break;\n        case 14:\n            page = (\n                <JobDetails\n                    data={data}\n                    milestones={milestones}\n                    categories={tradeListData}\n                    jobTypes={categoriesData}\n                    builderProfile={builderProfile}\n                    clearParentStates={clearParentStates}\n                    stepCompleted={stepsCompleted.includes(14)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                    updateDetailScreen={updateDetailScreen}\n                    jobId={jobId}\n                />\n            )\n            break;\n        case 15:\n            page = (\n                <EditMilestone\n                    data={data}\n                    milestones={milestones}\n                    editMileStone={editMilestoneId}\n                    editMilestoneTiming={editMilestoneTiming}\n                    addTimeToMileStone={addTimeToMileStone}\n                    newMileStoneScreen={newMileStoneScreen}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(15)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                    handleStepMileStone={handleStepMileStone}\n                />\n            )\n            break;\n        default:\n            page = null;\n    }\n\n    return <div>{page}</div>;\n};\n\nexport default PostJob;\n"]},"metadata":{},"sourceType":"module"}