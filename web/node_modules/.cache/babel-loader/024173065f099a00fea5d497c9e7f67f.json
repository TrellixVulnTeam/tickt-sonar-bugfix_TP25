{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/builderJobDasboard/components/markMilestones.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport dummy from '../../../assets/images/u_placeholder.jpg';\nimport editIconBlue from '../../../assets/images/ic-edit-blue.png';\nimport more from '../../../assets/images/icon-direction-right.png';\nimport MilestoneApprove from './milestoneApprove';\nimport { withRouter } from 'react-router-dom';\nimport { getMilestoneList, getMilestoneDetails } from '../../../redux/homeSearch/actions';\nimport { renderTime } from '../../../utils/common';\nimport EditMilestones from './editMilestones/index';\nimport CancelJobs from './cancelJobs/cancelJob';\nimport LodgeDispute from './lodgeDispute/lodgeDispute';\nimport storageService from '../../../utils/storageService';\nimport noDataFound from '../../../assets/images/no-search-data.png';\nimport SeeDetailsComponents from './seeDetails';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MarkMilestones = props => {\n  _s();\n\n  var _item_details$milesto, _item_details$milesto2, _dataItems, _item_details$tradie, _item_details$tradie2, _item_details$tradie3, _item_details$tradie4;\n\n  let resetStateLocal = props === null || props === void 0 ? void 0 : props.resetStateLocal;\n  let listData = props === null || props === void 0 ? void 0 : props.listData;\n  let selectedIndex = props === null || props === void 0 ? void 0 : props.selectedIndex;\n  let enableEditMilestone = props === null || props === void 0 ? void 0 : props.enableEditMilestone;\n  let enableLodgeDispute = props === null || props === void 0 ? void 0 : props.enableLodgeDispute;\n  let enableCancelJob = props === null || props === void 0 ? void 0 : props.enableCancelJob;\n  let pathname = `${props.location.pathname}${props.location.search}`;\n  const [enableApprove, setEnableApprove] = useState(false);\n  const [itemDetails, setDetails] = useState(null);\n  const [showError, setShowError] = useState(false);\n  const [selectedMilestoneIndex, setMilestoneIndex] = useState(null);\n  const [selectedMile, setMilestone] = useState(null);\n  const [expandItem, setExpandItem] = useState({});\n  const [toggleSeeDetails, setSeeDetails] = useState(false);\n  const [toggleItem, setToggleItem] = useState({\n    edit: false,\n    cancel: false,\n    lodge: false\n  });\n\n  const backToScreen = () => {\n    preFetch();\n    setEnableApprove(false);\n    setSeeDetails(false);\n  };\n\n  let selectedItem = null;\n\n  if (listData === null || listData === void 0 ? void 0 : listData.length) {\n    selectedItem = listData[selectedIndex];\n  }\n\n  useEffect(() => {\n    let UrlParams = new URLSearchParams(props.location.search);\n    let isForce = UrlParams.get('force');\n    let active = UrlParams.get('active');\n    let jobId = UrlParams.get('jobId');\n    let markMilestone = UrlParams.get('markMilestone');\n\n    if (isForce) {\n      props.history.replace(`${props.location.pathname}?active=${active}&jobId=${jobId}&markMilestone=${markMilestone}`);\n      props.recallHeaderNotification(true);\n      preFetch();\n    }\n  }, [props]);\n  useEffect(() => {\n    fetchMilestoneDetail();\n  }, [selectedMilestoneIndex]);\n\n  const fetchMilestoneDetail = async () => {\n    if (selectedMilestoneIndex && Object.keys(selectedMilestoneIndex).length) {\n      const {\n        milestoneId,\n        jobId\n      } = selectedMilestoneIndex;\n\n      if (milestoneId && jobId) {\n        let response = await getMilestoneDetails({\n          milestoneId,\n          jobId\n        });\n        console.log({\n          response\n        });\n\n        if (response.success) {\n          setMilestone(response.data);\n\n          if ((selectedMilestoneIndex === null || selectedMilestoneIndex === void 0 ? void 0 : selectedMilestoneIndex.type) === \"detail\") {\n            setSeeDetails(true);\n          } else {\n            setEnableApprove(true);\n          }\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    preFetch();\n  }, []);\n  useEffect(() => {\n    if (Object.keys(expandItem).length === 0) {\n      preFetch();\n    }\n  }, [expandItem]);\n  useEffect(() => {\n    if (enableEditMilestone) {\n      setToggleItem({\n        edit: true,\n        cancel: false,\n        lodge: false\n      });\n    }\n\n    if (enableLodgeDispute) {\n      setToggleItem({\n        edit: false,\n        cancel: false,\n        lodge: true\n      });\n    }\n\n    if (enableCancelJob) {\n      setToggleItem({\n        edit: false,\n        cancel: true,\n        lodge: false\n      });\n    }\n  }, [enableEditMilestone, enableLodgeDispute, enableCancelJob]);\n\n  const classChecks = (isActive, isPrevDone) => {\n    if (isActive === 1 && isPrevDone === false) {\n      return 'active';\n    } else if (isActive === 2 && isPrevDone === false) {\n      return 'check';\n    } else if (isActive === 1 && isPrevDone === 2) {\n      return 'active';\n    } else if (isActive === 2 && isPrevDone === 2) {\n      return 'check';\n    } else {\n      return 'disable';\n    }\n  };\n\n  const preFetch = async () => {\n    var _selectedItem;\n\n    let jobId = (_selectedItem = selectedItem) === null || _selectedItem === void 0 ? void 0 : _selectedItem.jobId;\n\n    if (getMilestoneList && jobId) {\n      const res = await getMilestoneList(jobId);\n\n      if (res.success) {\n        var _res$data, _res$data$milestones;\n\n        if (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$milestones = _res$data.milestones) === null || _res$data$milestones === void 0 ? void 0 : _res$data$milestones.length) {\n          var _res$data2, _res$data2$milestones;\n\n          res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : (_res$data2$milestones = _res$data2.milestones) === null || _res$data2$milestones === void 0 ? void 0 : _res$data2$milestones.forEach((item, index) => {\n            if (index === 0) {\n              const isActive = item === null || item === void 0 ? void 0 : item.status;\n              let isPrevDone = false;\n              isPrevDone = false;\n              let result = classChecks(isActive, isPrevDone);\n\n              if ([\"check\", \"active\"].includes(result)) {\n                setExpandItem({\n                  [item === null || item === void 0 ? void 0 : item.milestoneId]: true\n                });\n              }\n            }\n          });\n        }\n\n        setDetails(res.data);\n        setShowError(false);\n      } else {\n        if ((res === null || res === void 0 ? void 0 : res.status) === 404) {\n          setShowError(true);\n        }\n      }\n    }\n  };\n\n  const redirectToInfo = ({\n    jobId,\n    status,\n    tradieId\n  }) => {\n    console.log({\n      jobId\n    });\n    let props_ = props; // let urlEncode: any = window.btoa(`?jobId=${jobId}&status=${status}&tradieId=${tradieId}&edit=true&activeType=active&hide_dipute=${item_detail?.dispute}`)\n\n    let urlEncode = `?jobId=${jobId}&status=${status}&tradieId=${tradieId}&edit=true&activeType=active&hide_dipute=${item_detail === null || item_detail === void 0 ? void 0 : item_detail.dispute}`;\n    props_.history.push(`/job-detail?${urlEncode}`);\n  };\n\n  let item_details = itemDetails;\n\n  if (enableApprove) {\n    return /*#__PURE__*/_jsxDEV(MilestoneApprove, {\n      resetStateLocal: resetStateLocal,\n      backToScreen: backToScreen,\n      data: {\n        selectedMile,\n        selectedMilestoneIndex,\n        selectedItem,\n        itemDetails\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (toggleSeeDetails) {\n    return /*#__PURE__*/_jsxDEV(SeeDetailsComponents, {\n      resetStateLocal: resetStateLocal,\n      backToScreen: backToScreen,\n      data: {\n        selectedMile,\n        selectedMilestoneIndex,\n        selectedItem,\n        itemDetails\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this);\n  }\n\n  const backTab = name => {\n    setToggleItem(prev => ({ ...prev,\n      [name]: false\n    }));\n    setExpandItem({});\n  };\n\n  if (toggleItem === null || toggleItem === void 0 ? void 0 : toggleItem.edit) {\n    let details = itemDetails;\n\n    if (details && selectedItem) {\n      var _Object$keys;\n\n      if (details && ((_Object$keys = Object.keys(details)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) && Object.keys(selectedItem).length) {\n        return /*#__PURE__*/_jsxDEV(EditMilestones, {\n          details: details,\n          item: selectedItem,\n          backTab: backTab\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this);\n      }\n    }\n  }\n\n  if (toggleItem === null || toggleItem === void 0 ? void 0 : toggleItem.lodge) {\n    return /*#__PURE__*/_jsxDEV(LodgeDispute, {\n      item: selectedItem,\n      backTab: backTab\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (toggleItem === null || toggleItem === void 0 ? void 0 : toggleItem.cancel) {\n    return /*#__PURE__*/_jsxDEV(CancelJobs, {\n      item: selectedItem,\n      backTab: backTab\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this);\n  }\n\n  let item_detail = itemDetails;\n  let item_status = false;\n\n  if (item_details === null || item_details === void 0 ? void 0 : (_item_details$milesto = item_details.milestones) === null || _item_details$milesto === void 0 ? void 0 : _item_details$milesto.length) {\n    let isExist = item_details === null || item_details === void 0 ? void 0 : item_details.milestones.find(item => item.status === 1);\n\n    if (isExist) {\n      item_status = true;\n    }\n  }\n\n  let dataItems = [];\n\n  if (item_details === null || item_details === void 0 ? void 0 : (_item_details$milesto2 = item_details.milestones) === null || _item_details$milesto2 === void 0 ? void 0 : _item_details$milesto2.length) {\n    dataItems = item_details === null || item_details === void 0 ? void 0 : item_details.milestones;\n  }\n\n  console.log({\n    selectedItem\n  });\n\n  if (showError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex_row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex_col_sm_6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex_col_sm_8 relative\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back\",\n            onClick: () => {\n              resetStateLocal();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no_record  m-t-vh\",\n        children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n          className: \"no_img\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: noDataFound,\n            alt: \"data not found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: 'This tradesperson is no longer available.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: ['please contact admin.', \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex_row\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex_col_sm_6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relate\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back\",\n          onClick: () => {\n            // times\n            resetStateLocal();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"xs_sub_title\",\n          children: item_detail && Object.keys(item_detail).length ? item_detail.jobName : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"dot_menu\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: editIconBlue,\n            alt: \"edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit_menu\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => {\n                  setToggleItem({\n                    edit: true,\n                    lodge: false,\n                    cancel: false\n                  });\n                },\n                className: \"icon edit_line\",\n                children: 'Edit Milestone'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 37\n              }, this), !(item_detail === null || item_detail === void 0 ? void 0 : item_detail.dispute) && /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => {\n                  setToggleItem(prev => ({ ...prev,\n                    lodge: true\n                  }));\n                },\n                className: \"icon lodge\",\n                children: 'Lodge dispute'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => {\n                  setToggleItem(prev => ({ ...prev,\n                    cancel: true\n                  }));\n                },\n                className: \"icon delete\",\n                children: \"Cancel job\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: () => {\n          props.history.replace(`/jobs?${Math.random()}=${Math.random()}`);\n        },\n        className: \"sub_title\",\n        children: 'Job Milestones'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"commn_para\",\n        children: \"Your job point of contact has indicated they want to be notified when you reach the following milestones. Tap the milestone and Submit when a milestone is completed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"milestones_check\",\n        children: (_dataItems = dataItems) === null || _dataItems === void 0 ? void 0 : _dataItems.map(({\n          milestoneId,\n          milestoneName,\n          isPhotoevidence,\n          status,\n          fromDate,\n          toDate\n        }, index) => {\n          const isActive = status;\n          let isPrevDone = false;\n\n          if (index === 0) {\n            isPrevDone = false;\n          } else {\n            isPrevDone = dataItems[index - 1].status;\n          }\n\n          console.log({\n            isActive,\n            isPrevDone,\n            index,\n            expandItem\n          });\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: classChecks(isActive, isPrevDone),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                setExpandItem(prev => ({ ...prev,\n                  [milestoneId]: prev[milestoneId] === undefined ? true : !prev[milestoneId]\n                }));\n              },\n              className: \"circle_stepper\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"info\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: milestoneName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 37\n              }, this), isPhotoevidence && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: 'Photo evidence required'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: renderTime(fromDate, toDate)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 37\n              }, this), [\"check\"].includes(classChecks(isActive, isPrevDone)) && expandItem[milestoneId] ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"fill_btn full_btn btn-effect\",\n                style: {\n                  backgroundColor: '#DFE5EF'\n                },\n                onClick: e => {\n                  e.stopPropagation();\n                  setMilestoneIndex({\n                    index,\n                    milestoneId,\n                    type: 'detail',\n                    jobId: item_details === null || item_details === void 0 ? void 0 : item_details.jobId\n                  });\n                },\n                children: 'See Details'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 41\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 33\n            }, this), [\"active\"].includes(classChecks(isActive, isPrevDone)) && expandItem[milestoneId] ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"fill_btn full_btn btn-effect\",\n              onClick: () => {\n                setMilestoneIndex({\n                  index,\n                  milestoneId,\n                  type: 'approve',\n                  jobId: item_details === null || item_details === void 0 ? void 0 : item_details.jobId\n                });\n              },\n              children: 'Check and Approve'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 37\n            }, this) : null]\n          }, milestoneId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex_col_sm_6 col_ruler\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sub_title\",\n        children: \"Tradesperson\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          var _props$history;\n\n          props === null || props === void 0 ? void 0 : (_props$history = props.history) === null || _props$history === void 0 ? void 0 : _props$history.push(`tradie-info?tradeId=${item_details === null || item_details === void 0 ? void 0 : item_details.tradieId}&hideInvite=true&active=true&jobId=${item_details === null || item_details === void 0 ? void 0 : item_details.jobId}`);\n        },\n        className: \"tradie_card posted_by\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: e => {\n            var _storageService$getIt;\n\n            e.stopPropagation();\n            props.history.push({\n              pathname: `/chat`,\n              state: {\n                tradieId: item_details === null || item_details === void 0 ? void 0 : item_details.tradieId,\n                builderId: (_storageService$getIt = storageService.getItem('userInfo')) === null || _storageService$getIt === void 0 ? void 0 : _storageService$getIt._id,\n                jobId: item_details === null || item_details === void 0 ? void 0 : item_details.jobId,\n                jobName: item_details === null || item_details === void 0 ? void 0 : item_details.jobName\n              }\n            });\n          },\n          className: \"chat circle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user_wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n            className: \"u_img\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: (item_details === null || item_details === void 0 ? void 0 : (_item_details$tradie = item_details.tradie) === null || _item_details$tradie === void 0 ? void 0 : _item_details$tradie.tradieImage) || dummy,\n              alt: \"traide-img\",\n              onError: e => {\n                var _e$target, _e$target2;\n\n                if (e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.onerror) {\n                  e.target.onerror = null;\n                }\n\n                if (e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.src) {\n                  e.target.src = dummy;\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"name\",\n              children: (item_details === null || item_details === void 0 ? void 0 : (_item_details$tradie2 = item_details.tradie) === null || _item_details$tradie2 === void 0 ? void 0 : _item_details$tradie2.tradieName) || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 29\n            }, this), (item_details === null || item_details === void 0 ? void 0 : item_details.tradie) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rating\",\n              children: [(item_details === null || item_details === void 0 ? void 0 : (_item_details$tradie3 = item_details.tradie) === null || _item_details$tradie3 === void 0 ? void 0 : _item_details$tradie3.ratings) || 0, \" | \", (item_details === null || item_details === void 0 ? void 0 : (_item_details$tradie4 = item_details.tradie) === null || _item_details$tradie4 === void 0 ? void 0 : _item_details$tradie4.reviews) || 0, \" reviews\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relate\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"sub_title\",\n          children: 'Job details'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"edit_icon\",\n          title: \"More\",\n          onClick: () => {\n            let {\n              jobId,\n              tradeId,\n              specializationId,\n              tradieId,\n              status\n            } = selectedItem;\n            redirectToInfo({\n              jobId,\n              status,\n              tradieId\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: more,\n            alt: \"more\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 272,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MarkMilestones, \"9HfhcMkCWrLKcxSQn43OotKC3BQ=\");\n\n_c = MarkMilestones;\nexport default _c2 = withRouter(MarkMilestones);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MarkMilestones\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/builderJobDasboard/components/markMilestones.tsx"],"names":["React","useState","useEffect","dummy","editIconBlue","more","MilestoneApprove","withRouter","getMilestoneList","getMilestoneDetails","renderTime","EditMilestones","CancelJobs","LodgeDispute","storageService","noDataFound","SeeDetailsComponents","MarkMilestones","props","resetStateLocal","listData","selectedIndex","enableEditMilestone","enableLodgeDispute","enableCancelJob","pathname","location","search","enableApprove","setEnableApprove","itemDetails","setDetails","showError","setShowError","selectedMilestoneIndex","setMilestoneIndex","selectedMile","setMilestone","expandItem","setExpandItem","toggleSeeDetails","setSeeDetails","toggleItem","setToggleItem","edit","cancel","lodge","backToScreen","preFetch","selectedItem","length","UrlParams","URLSearchParams","isForce","get","active","jobId","markMilestone","history","replace","recallHeaderNotification","fetchMilestoneDetail","Object","keys","milestoneId","response","console","log","success","data","type","classChecks","isActive","isPrevDone","res","milestones","forEach","item","index","status","result","includes","redirectToInfo","tradieId","props_","urlEncode","item_detail","dispute","push","item_details","backTab","name","prev","details","item_status","isExist","find","dataItems","jobName","Math","random","map","milestoneName","isPhotoevidence","fromDate","toDate","undefined","backgroundColor","e","stopPropagation","state","builderId","getItem","_id","tradie","tradieImage","target","onerror","src","tradieName","ratings","reviews","tradeId","specializationId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport dummy from '../../../assets/images/u_placeholder.jpg';\nimport editIconBlue from '../../../assets/images/ic-edit-blue.png';\nimport more from '../../../assets/images/icon-direction-right.png';\nimport MilestoneApprove from './milestoneApprove';\nimport { withRouter } from 'react-router-dom';\nimport {\n    getMilestoneList,\n    getMilestoneDetails\n} from '../../../redux/homeSearch/actions';\nimport { renderTime } from '../../../utils/common';\nimport EditMilestones from './editMilestones/index';\nimport CancelJobs from './cancelJobs/cancelJob'\nimport LodgeDispute from './lodgeDispute/lodgeDispute';\nimport storageService from '../../../utils/storageService';\nimport noDataFound from '../../../assets/images/no-search-data.png';\nimport SeeDetailsComponents from './seeDetails';\n\ninterface Mile {\n    milestoneId: any,\n    milestoneName: any,\n    isPhotoevidence: any,\n    status: any,\n    fromDate: any,\n    toDate: any,\n    enableEditMilestone: boolean,\n    enableLodgeDispute: boolean,\n    enableCancelJob: boolean\n}\n\nconst MarkMilestones = (props: any) => {\n\n    let resetStateLocal = props?.resetStateLocal;\n    let listData = props?.listData;\n    let selectedIndex = props?.selectedIndex;\n    let enableEditMilestone = props?.enableEditMilestone;\n    let enableLodgeDispute = props?.enableLodgeDispute;\n    let enableCancelJob = props?.enableCancelJob;\n    let pathname = `${props.location.pathname}${props.location.search}`;\n\n    const [enableApprove, setEnableApprove] = useState(false);\n    const [itemDetails, setDetails] = useState(null);\n    const [showError, setShowError] = useState(false);\n    const [selectedMilestoneIndex, setMilestoneIndex] = useState<any>(null);\n    const [selectedMile, setMilestone] = useState(null);\n    const [expandItem, setExpandItem] = useState<any>({});\n\n    const [toggleSeeDetails, setSeeDetails] = useState(false);\n    const [toggleItem, setToggleItem] = useState<{ [index: string]: boolean }>({ edit: false, cancel: false, lodge: false });\n\n    const backToScreen = () => {\n        preFetch();\n        setEnableApprove(false);\n        setSeeDetails(false);\n    }\n\n    let selectedItem: any = null;\n    if (listData?.length) {\n        selectedItem = listData[selectedIndex];\n    }\n\n    useEffect(() => {\n        let UrlParams = new URLSearchParams(props.location.search);\n        let isForce = UrlParams.get('force');\n        let active = UrlParams.get('active');\n        let jobId = UrlParams.get('jobId');\n        let markMilestone = UrlParams.get('markMilestone');\n        if (isForce) {\n            props.history.replace(`${props.location.pathname}?active=${active}&jobId=${jobId}&markMilestone=${markMilestone}`);\n            props.recallHeaderNotification(true);\n            preFetch();\n        }\n    }, [props]);\n\n    useEffect(() => {\n        fetchMilestoneDetail();\n    }, [selectedMilestoneIndex]);\n\n    const fetchMilestoneDetail = async () => {\n        if (selectedMilestoneIndex && Object.keys(selectedMilestoneIndex).length) {\n            const { milestoneId, jobId } = selectedMilestoneIndex;\n            if (milestoneId && jobId) {\n                let response: any = await getMilestoneDetails({ milestoneId, jobId });\n                console.log({ response })\n                if (response.success) {\n                    setMilestone(response.data);\n                    if (selectedMilestoneIndex?.type === \"detail\") {\n                        setSeeDetails(true);\n                    } else {\n                        setEnableApprove(true);\n                    }\n                }\n            }\n        }\n    }\n\n    useEffect(() => {\n        preFetch();\n    }, []);\n\n    useEffect(() => {\n        if (Object.keys(expandItem).length === 0) {\n            preFetch();\n        }\n    }, [expandItem]);\n\n    useEffect(() => {\n        if (enableEditMilestone) {\n            setToggleItem({\n                edit: true, cancel: false, lodge: false\n            })\n        }\n\n        if (enableLodgeDispute) {\n            setToggleItem({\n                edit: false, cancel: false, lodge: true\n            })\n        }\n\n        if (enableCancelJob) {\n            setToggleItem({\n                edit: false, cancel: true, lodge: false\n            })\n        }\n    }, [enableEditMilestone, enableLodgeDispute, enableCancelJob])\n\n\n    const classChecks = (isActive: any, isPrevDone: any) => {\n        if (isActive === 1 && isPrevDone === false) {\n            return 'active';\n        } else if (isActive === 2 && isPrevDone === false) {\n            return 'check';\n        } else if (isActive === 1 && isPrevDone === 2) {\n            return 'active';\n        } else if (isActive === 2 && isPrevDone === 2) {\n            return 'check';\n        } else {\n            return 'disable'\n        }\n    }\n\n    const preFetch = async () => {\n        let jobId = selectedItem?.jobId;\n        if (getMilestoneList && jobId) {\n            const res: any = await getMilestoneList(jobId);\n            if (res.success) {\n                if (res?.data?.milestones?.length) {\n                    res?.data?.milestones?.forEach((item: any, index: any) => {\n                        if (index === 0) {\n                            const isActive = item?.status;\n                            let isPrevDone: any = false;\n                            isPrevDone = false;\n                            let result = classChecks(isActive, isPrevDone);\n                            if ([\"check\", \"active\"].includes(result)) {\n                                setExpandItem({\n                                    [item?.milestoneId]: true\n                                });\n                            }\n                        }\n                    })\n                }\n                setDetails(res.data);\n                setShowError(false)\n            } else {\n                if (res?.status === 404) {\n                    setShowError(true)\n                }\n            }\n        }\n    }\n\n    const redirectToInfo = ({ jobId, status, tradieId }: any) => {\n        console.log({ jobId });\n        let props_: any = props;\n        // let urlEncode: any = window.btoa(`?jobId=${jobId}&status=${status}&tradieId=${tradieId}&edit=true&activeType=active&hide_dipute=${item_detail?.dispute}`)\n        let urlEncode: any = `?jobId=${jobId}&status=${status}&tradieId=${tradieId}&edit=true&activeType=active&hide_dipute=${item_detail?.dispute}`;\n        props_.history.push(`/job-detail?${urlEncode}`);\n    }\n\n    let item_details: any = itemDetails;\n    if (enableApprove) {\n        return (\n            <MilestoneApprove\n                resetStateLocal={resetStateLocal}\n                backToScreen={backToScreen}\n                data={{ selectedMile, selectedMilestoneIndex, selectedItem, itemDetails }}\n            />)\n    }\n\n    if (toggleSeeDetails) {\n        return (\n            <SeeDetailsComponents\n                resetStateLocal={resetStateLocal}\n                backToScreen={backToScreen}\n                data={{ selectedMile, selectedMilestoneIndex, selectedItem, itemDetails }}\n            />\n        )\n    }\n\n    const backTab = (name: string) => {\n        setToggleItem((prev: any) => ({ ...prev, [name]: false }));\n        setExpandItem({});\n    }\n\n    if (toggleItem?.edit) {\n        let details: any = itemDetails;\n        if (details && selectedItem) {\n            if (details && Object.keys(details)?.length && Object.keys(selectedItem).length) {\n                return (\n                    <EditMilestones\n                        details={details}\n                        item={selectedItem}\n                        backTab={backTab}\n                    />\n                )\n            }\n        }\n    }\n\n    if (toggleItem?.lodge) {\n        return (\n            <LodgeDispute item={selectedItem} backTab={backTab} />\n        )\n    }\n\n    if (toggleItem?.cancel) {\n        return (\n            <CancelJobs item={selectedItem} backTab={backTab} />\n        )\n    }\n\n    let item_detail: any = itemDetails;\n    let item_status = false;\n    if (item_details?.milestones?.length) {\n        let isExist = item_details?.milestones.find((item: any) => item.status === 1);\n        if (isExist) {\n            item_status = true;\n        }\n    }\n    let dataItems: any = [];\n    if (item_details?.milestones?.length) {\n        dataItems = item_details?.milestones;\n    }\n    console.log({ selectedItem })\n\n    if (showError) {\n        return (\n            <div className=\"flex_row\">\n                <div className=\"flex_col_sm_6\">\n                    <div className=\"flex_col_sm_8 relative\">\n                        <button\n                            className=\"back\"\n                            onClick={() => {\n                                resetStateLocal();\n                            }}></button>\n                    </div>\n                </div>\n\n\n                <div className=\"no_record  m-t-vh\">\n                    <figure className=\"no_img\">\n                        <img src={noDataFound} alt=\"data not found\" />\n                    </figure>\n                    <span>{'This tradesperson is no longer available.'}</span>\n                    <span>{'please contact admin.'} </span>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"flex_row\">\n            <div className=\"flex_col_sm_6\">\n                <div className=\"relate\">\n                    <button\n                        className=\"back\"\n                        onClick={() => {\n                            // times\n                            resetStateLocal();\n                        }}\n                    ></button>\n                    <span className=\"xs_sub_title\">\n                        {item_detail && Object.keys(item_detail).length ? item_detail.jobName : ''}\n                    </span>\n\n                    <span className=\"dot_menu\">\n                        <img src={editIconBlue} alt=\"edit\" />\n                        <div className=\"edit_menu\">\n                            <ul>\n                                {/* {!selectedItem?.quoteJob && ( */}\n                                {(\n                                    <li\n                                        onClick={() => { setToggleItem({ edit: true, lodge: false, cancel: false }) }}\n                                        className=\"icon edit_line\">\n                                        {'Edit Milestone'}\n                                    </li>\n                                )}\n\n                                {!item_detail?.dispute && (\n                                    <li\n                                        onClick={() => { setToggleItem((prev: any) => ({ ...prev, lodge: true })) }}\n                                        className=\"icon lodge\">\n                                        {'Lodge dispute'}\n                                    </li>\n                                )}\n\n                                <li\n                                    onClick={() => { setToggleItem((prev: any) => ({ ...prev, cancel: true })) }}\n                                    className=\"icon delete\">Cancel job</li>\n                            </ul>\n                        </div>\n                    </span>\n\n\n                </div>\n                <span\n                    onClick={() => {\n                        props.history.replace(`/jobs?${Math.random()}=${Math.random()}`)\n                    }}\n                    className=\"sub_title\">\n                    {'Job Milestones'}\n                </span>\n                <p className=\"commn_para\">\n                    {\"Your job point of contact has indicated they want to be notified when you reach the following milestones. Tap the milestone and Submit when a milestone is completed\"}\n                </p>\n\n                <ul className=\"milestones_check\">\n                    {dataItems?.map(({\n                        milestoneId,\n                        milestoneName,\n                        isPhotoevidence,\n                        status,\n                        fromDate,\n                        toDate,\n                    }: Mile,\n                        index: number\n                    ) => {\n                        const isActive = status;\n                        let isPrevDone: any = false;\n                        if (index === 0) {\n                            isPrevDone = false;\n                        } else {\n                            isPrevDone = dataItems[index - 1].status;\n                        }\n                        console.log({ isActive, isPrevDone, index, expandItem })\n                        return (\n                            <li\n                                key={milestoneId}\n                                className={classChecks(isActive, isPrevDone)}>\n                                <div\n                                    onClick={() => {\n                                        setExpandItem((prev: any) => ({\n                                            ...prev,\n                                            [milestoneId]: prev[milestoneId] === undefined ? true : !prev[milestoneId]\n                                        }));\n                                    }}\n                                    className=\"circle_stepper\">\n                                    <span></span>\n                                </div>\n                                <div className=\"info\">\n                                    <label>{milestoneName}</label>\n                                    {isPhotoevidence && (\n                                        <span>{'Photo evidence required'}</span>\n                                    )}\n                                    <span>\n                                        {renderTime(fromDate, toDate)}\n                                    </span>\n\n                                    {[\"check\"].includes(classChecks(isActive, isPrevDone)) && expandItem[milestoneId] ? (\n                                        <button\n                                            className=\"fill_btn full_btn btn-effect\"\n                                            style={{ backgroundColor: '#DFE5EF' }}\n                                            onClick={(e) => {\n                                                e.stopPropagation();\n                                                setMilestoneIndex({\n                                                    index,\n                                                    milestoneId,\n                                                    type: 'detail',\n                                                    jobId: item_details?.jobId\n                                                });\n                                            }}>\n                                            {'See Details'}\n                                        </button>\n                                    ) : null}\n                                </div>\n\n                                {[\"active\"].includes(classChecks(isActive, isPrevDone)) && expandItem[milestoneId] ? (\n                                    <button\n                                        className=\"fill_btn full_btn btn-effect\"\n                                        onClick={() => {\n                                            setMilestoneIndex({\n                                                index,\n                                                milestoneId,\n                                                type: 'approve',\n                                                jobId: item_details?.jobId\n                                            });\n                                        }}>\n                                        {'Check and Approve'}\n                                    </button>\n                                ) : null}\n                            </li>\n                        );\n                    }\n                    )}\n                </ul>\n            </div>\n            <div className=\"flex_col_sm_6 col_ruler\">\n                <span className=\"sub_title\">Tradesperson</span>\n\n                <div\n                    onClick={() => {\n                        props?.history?.push(`tradie-info?tradeId=${item_details?.tradieId}&hideInvite=true&active=true&jobId=${item_details?.jobId}`);\n                    }}\n                    className=\"tradie_card posted_by\">\n                    <span\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            props.history.push({\n                                pathname: `/chat`,\n                                state: {\n                                    tradieId: item_details?.tradieId,\n                                    builderId: storageService.getItem('userInfo')?._id,\n                                    jobId: item_details?.jobId,\n                                    jobName: item_details?.jobName\n                                }\n                            })\n                        }}\n                        className=\"chat circle\" />\n                    <div className=\"user_wrap\">\n                        <figure className=\"u_img\">\n                            <img\n                                src={item_details?.tradie?.tradieImage || dummy}\n                                alt=\"traide-img\"\n                                onError={(e: any) => {\n                                    if (e?.target?.onerror) {\n                                        e.target.onerror = null;\n                                    }\n                                    if (e?.target?.src) {\n                                        e.target.src = dummy;\n                                    }\n                                }}\n                            />\n                        </figure>\n                        <div className=\"details\">\n                            <span className=\"name\">{item_details?.tradie?.tradieName || ''}</span>\n                            {/* <span className=\"prof\">Project Manager</span> */}\n                            {item_details?.tradie && (\n                                <span className=\"rating\">\n                                    {item_details?.tradie?.ratings || 0} | {item_details?.tradie?.reviews || 0} reviews\n                                </span>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"relate\">\n                    <span className=\"sub_title\">\n                        {'Job details'}\n                    </span>\n                    <span\n                        className=\"edit_icon\"\n                        title=\"More\"\n                        onClick={() => {\n                            let { jobId, tradeId, specializationId, tradieId, status } = selectedItem;\n                            redirectToInfo({ jobId, status, tradieId })\n                        }}>\n                        <img src={more} alt=\"more\" />\n                    </span>\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nexport default withRouter(MarkMilestones)\n"]},"metadata":{},"sourceType":"module"}