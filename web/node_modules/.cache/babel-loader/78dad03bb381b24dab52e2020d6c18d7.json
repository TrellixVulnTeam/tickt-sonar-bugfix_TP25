{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/postJob.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport PostNewJob from './components/postNewJob';\nimport JobType from './components/jobType';\nimport AddLocation from './components/addLocation';\nimport Payment from './components/payment';\nimport ChooseTiming from './components/chooseTiming';\nimport ChooseTimingMileStone from './components/chooseTimingMileStone';\nimport AddMilestone from './components/addMilestone';\nimport JobMilestones from './components/jobMilestones';\nimport SaveTemplate from './components/saveTemplate';\nimport TemplateSavedSuccess from './components/templateSavedSucess';\nimport JobPostedSuccess from './components/jobPostedSuccess';\nimport UploadMedia from './components/uploadMedia';\nimport MileStoneTemplates from './components/milestoneTemplates';\nimport JobDetails from './components/jobDetails';\nimport EditMilestone from './components/editMileStone';\nimport { callCategories, republishJob, getOpenJobDetails } from '../../redux/jobs/actions';\nimport moment from 'moment';\nimport { setShowToast } from '../../redux/common/actions';\nimport { useHistory } from 'react-router-dom';\nimport templateImage from '../../assets/images/job-posted-bg.jpg';\nimport { randomColors as getRandomColors } from '../../utils/common';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PostJob = props => {\n  _s();\n\n  const history = useHistory();\n  const {\n    callTradeList,\n    tradeListData,\n    updateMileStoneIndex,\n    updateMileStoneTimings,\n    updateDetailScreen,\n    editMilestoneTiming,\n    editDetailPage,\n    builderProfile,\n    editMilestoneId\n  } = props;\n  const [randomColors, setRandomColors] = useState();\n  const [categoriesData, setCategoriesData] = useState([]);\n  const [step, setStep] = useState(1);\n  const [stepsCompleted, setStepsCompleted] = useState([]);\n  const [data, setData] = useState({});\n  const [milestones, setMileStones] = useState([]);\n  const [forceupdate, setForceUpdate] = useState({});\n  const [jobId, setJobId] = useState('');\n  const [jobUpdateParam, setJobUpdateParam] = useState(false);\n  const getCategories = useCallback(async () => {\n    const {\n      categories: categoriesData\n    } = await callCategories();\n    setCategoriesData(categoriesData);\n    let colors = getRandomColors();\n    setRandomColors(colors);\n  }, []);\n  useEffect(() => {\n    getCategories();\n    callTradeList();\n  }, [getCategories, callTradeList, milestones]);\n  const getJobDetails = useCallback(async (jobId, updateOpen) => {\n    let res = null;\n\n    if (updateOpen) {\n      res = await getOpenJobDetails(jobId);\n    } else {\n      res = await republishJob(jobId);\n    }\n\n    if (res.success) {\n      setData({ ...res.data,\n        specialization: res.data.specialization.map(({\n          specializationId\n        }) => specializationId),\n        categories: res.data.categories.map(({\n          categoryId\n        }) => categoryId),\n        job_type: res.data.job_type.map(({\n          jobTypeId\n        }) => jobTypeId),\n        amount: `${res.data.amount}`\n      });\n      setMileStones(res.data.milestones.map(({\n        milestone_name,\n        isPhotoevidence,\n        recommended_hours,\n        from_date,\n        to_date\n      }) => ({\n        milestone_name,\n        isPhotoevidence,\n        recommended_hours,\n        from_date: moment(new Date(from_date)).format('MM-DD-YYYY'),\n        to_date: moment(new Date(to_date)).format('MM-DD-YYYY')\n      })));\n      setStepsCompleted([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]);\n    }\n  }, []);\n  useEffect(() => {\n    var _history$location;\n\n    const params = new URLSearchParams((_history$location = history.location) === null || _history$location === void 0 ? void 0 : _history$location.search);\n    const jobId = params.get('jobId') || ''; // this param is missing in the case of re-publish.\n\n    const update = params.get('update') || '';\n\n    if (jobId && update !== \"true\") {\n      if (jobId) {\n        setJobId(jobId);\n        getJobDetails(jobId);\n      }\n    } else {\n      if (update == \"true\") {\n        setJobUpdateParam(true);\n        getJobDetails(jobId, true);\n      }\n    }\n  }, [getJobDetails, history.location]);\n\n  const clearParentStates = () => {\n    setData({});\n    setMileStones([]);\n    setStepsCompleted([]);\n  };\n\n  const handleStepComplete = stepData => {\n    setData(prevData => ({ ...prevData,\n      ...stepData\n    }));\n    setStepsCompleted(prevSteps => prevSteps.concat(step));\n    setStep(prevStep => prevStep + 1);\n  };\n\n  const handleStepJustUpdate = (stepData, goto) => {\n    setData(prevData => ({ ...prevData,\n      ...stepData\n    }));\n\n    if (goto === true) {\n      handleStepForward(14);\n    }\n\n    if (goto !== true && goto > 0) {\n      handleStepForward(goto);\n    }\n  };\n\n  const newMileStoneScreen = index => {\n    let milestone_clone = milestones;\n\n    if (!milestone_clone[index]) {\n      milestone_clone[index] = {};\n    }\n\n    setMileStones(milestone_clone);\n    Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n  };\n\n  const handleStepMileStone = (data, index) => {\n    let milestone_clone = milestones;\n    milestone_clone[index]['milestone_name'] = data.milestone_name;\n    milestone_clone[index]['isPhotoevidence'] = data.isPhotoevidence;\n    milestone_clone[index]['recommended_hours'] = data.recommended_hours;\n    setMileStones(milestone_clone);\n    Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n  };\n\n  const addTimeToMileStone = (time, index, skip) => {\n    const default_format = 'MM-DD-YYYY';\n    let milestone_clone = milestones;\n    let checkIsValid = true;\n\n    if (!skip && (milestone_clone === null || milestone_clone === void 0 ? void 0 : milestone_clone.length)) {\n      let filter_milestone = milestone_clone.filter((item_mile, index_mile) => index_mile !== index);\n      let count_times = {};\n      if (filter_milestone === null || filter_milestone === void 0 ? void 0 : filter_milestone.length) filter_milestone.forEach(mile => {\n        let msw = moment(mile.from_date, default_format).isValid();\n        let mew = moment(mile.to_date, default_format).isValid();\n        let tsw = moment(time.from_date, default_format).isValid();\n        let tew = moment(time.to_date, default_format).isValid();\n        let mile_start = mile.from_date;\n        let mile_end = mile.to_date;\n        let time_start = time.from_date;\n        let time_end = time.to_date;\n\n        if (count_times[mile_start] == undefined) {\n          count_times[mile_start] = 1;\n        } else {\n          count_times[mile_start] = count_times[mile_start] + 1;\n        }\n\n        if (count_times[mile_end] == undefined) {\n          count_times[mile_end] = 1;\n        } else {\n          count_times[mile_end] = count_times[mile_end] + 1;\n        }\n\n        if (count_times[mile_start] === 4) {\n          console.log('Inside ---', {\n            ms: mile_start == time_start\n          });\n\n          if (mile_start == time_start || mile_start == time_end) {\n            console.log('Inside - 1 ---');\n            setShowToast(true, 'Selected start data is fully engage');\n            return;\n          }\n        }\n\n        if (count_times[mile_end] === 4) {\n          if (mile_end == time_start || mile_end == time_end) {\n            setShowToast(true, 'Selected end data is fully engage');\n            return;\n          }\n        }\n      });\n    }\n\n    if (!checkIsValid) {\n      setShowToast(true, 'Please add unique date');\n      return;\n    }\n\n    milestone_clone[index]['from_date'] = time.from_date;\n    milestone_clone[index]['to_date'] = time.to_date;\n    setMileStones(milestone_clone);\n    Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n  };\n\n  const handleCombineMileStones = item => {\n    let milestone_clone = milestones;\n    let data_clone = data;\n    milestone_clone = item;\n    data_clone['milestones'] = item;\n    setMileStones(milestone_clone);\n    setData(data_clone);\n  };\n\n  const removeMilestoneByIndex = index => {\n    let milestone_clone = milestones;\n    let data_clone = data;\n    milestone_clone.splice(index, 1);\n    data_clone['milestones'] = milestone_clone;\n    setMileStones(milestone_clone);\n    setData(data_clone);\n    Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n  };\n\n  const handleStepBack = () => setStep(prevStep => prevStep - 1);\n\n  const handleStepForward = (step, edit_item) => {\n    if (!step) {\n      setStep(prevStep => prevStep + 1);\n    } else {\n      if (edit_item) {\n        setStep(step);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n      }\n\n      setStep(step);\n    }\n  };\n\n  console.log({\n    data\n  });\n  let page;\n\n  switch (step) {\n    case 1:\n      page = /*#__PURE__*/_jsxDEV(PostNewJob, {\n        data: data,\n        jobUpdateParam: jobUpdateParam,\n        handleStepForward: handleStepForward,\n        handleStepJustUpdate: handleStepJustUpdate,\n        editDetailPage: editDetailPage,\n        stepCompleted: stepsCompleted.includes(1),\n        handleStepComplete: handleStepComplete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 2:\n      page = /*#__PURE__*/_jsxDEV(JobType, {\n        categories: tradeListData,\n        jobTypes: categoriesData,\n        handleStepJustUpdate: handleStepJustUpdate,\n        editDetailPage: editDetailPage,\n        data: data,\n        stepCompleted: stepsCompleted.includes(2),\n        handleStepComplete: handleStepComplete,\n        handleStepForward: handleStepForward,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 3:\n      page = /*#__PURE__*/_jsxDEV(AddLocation, {\n        data: data,\n        stepCompleted: stepsCompleted.includes(3),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 4:\n      page = /*#__PURE__*/_jsxDEV(Payment, {\n        data: data,\n        stepCompleted: stepsCompleted.includes(4),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 5:\n      page = /*#__PURE__*/_jsxDEV(ChooseTiming, {\n        data: data,\n        milestones: milestones,\n        stepCompleted: stepsCompleted.includes(5),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 6:\n      page = /*#__PURE__*/_jsxDEV(JobMilestones, {\n        data: data,\n        milestones: milestones,\n        handleStepJustUpdate: handleStepJustUpdate,\n        editDetailPage: editDetailPage,\n        editMileStone: editMilestoneId,\n        editMilestoneTiming: editMilestoneTiming,\n        removeMilestoneByIndex: removeMilestoneByIndex,\n        handleStepForward: handleStepForward,\n        stepCompleted: stepsCompleted.includes(6),\n        handleCombineMileStones: handleCombineMileStones,\n        updateMileStoneIndex: updateMileStoneIndex,\n        newMileStoneScreen: newMileStoneScreen,\n        updateMileStoneTimings: updateMileStoneTimings,\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 7:\n      page = /*#__PURE__*/_jsxDEV(AddMilestone, {\n        data: data,\n        milestones: milestones,\n        newMileStoneScreen: newMileStoneScreen,\n        handleStepForward: handleStepForward,\n        stepCompleted: stepsCompleted.includes(7),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack,\n        removeMilestoneByIndex: removeMilestoneByIndex,\n        updateMileStoneIndex: updateMileStoneIndex,\n        handleStepMileStone: handleStepMileStone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 8:\n      page = /*#__PURE__*/_jsxDEV(ChooseTimingMileStone, {\n        data: data,\n        randomColors: randomColors,\n        addTimeToMileStone: addTimeToMileStone,\n        editMileStone: editMilestoneId,\n        editMilestoneTiming: editMilestoneTiming,\n        updateMileStoneTimings: updateMileStoneTimings,\n        milestones: milestones,\n        handleStepMileStone: handleStepMileStone,\n        handleStepForward: handleStepForward,\n        stepCompleted: stepsCompleted.includes(8),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 9:\n      page = /*#__PURE__*/_jsxDEV(MileStoneTemplates, { ...props,\n        data: data,\n        handleCombineMileStones: handleCombineMileStones,\n        stepCompleted: stepsCompleted.includes(9),\n        handleStepComplete: handleStepComplete,\n        handleStepForward: handleStepForward,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 10:\n      page = /*#__PURE__*/_jsxDEV(SaveTemplate, {\n        data: data,\n        milestones: milestones,\n        handleCombineMileStones: handleCombineMileStones,\n        stepCompleted: stepsCompleted.includes(10),\n        handleStepComplete: handleStepComplete,\n        handleStepForward: handleStepForward,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 11:\n      page = /*#__PURE__*/_jsxDEV(TemplateSavedSuccess, {\n        data: data,\n        handleStepForward: handleStepForward,\n        stepCompleted: stepsCompleted.includes(11),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 12:\n      page = /*#__PURE__*/_jsxDEV(JobPostedSuccess, {\n        history: props.history,\n        data: data,\n        templateImage: templateImage,\n        editDetailPage: editDetailPage,\n        stepCompleted: stepsCompleted.includes(12),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack,\n        handleStepForward: handleStepForward\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 13:\n      page = /*#__PURE__*/_jsxDEV(UploadMedia, {\n        data: data,\n        stepCompleted: stepsCompleted.includes(13),\n        handleStepComplete: handleStepComplete,\n        handleStepForward: handleStepForward,\n        handleStepBack: handleStepBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 14:\n      page = /*#__PURE__*/_jsxDEV(JobDetails, {\n        data: data,\n        milestones: milestones,\n        categories: tradeListData,\n        jobTypes: categoriesData,\n        builderProfile: builderProfile,\n        clearParentStates: clearParentStates,\n        stepCompleted: stepsCompleted.includes(14),\n        handleStepComplete: handleStepComplete,\n        handleStepForward: handleStepForward,\n        handleStepBack: handleStepBack,\n        updateDetailScreen: updateDetailScreen,\n        jobId: jobId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }, this);\n      break;\n\n    case 15:\n      page = /*#__PURE__*/_jsxDEV(EditMilestone, {\n        data: data,\n        milestones: milestones,\n        editMileStone: editMilestoneId,\n        editMilestoneTiming: editMilestoneTiming,\n        addTimeToMileStone: addTimeToMileStone,\n        newMileStoneScreen: newMileStoneScreen,\n        handleStepForward: handleStepForward,\n        stepCompleted: stepsCompleted.includes(15),\n        handleStepComplete: handleStepComplete,\n        handleStepBack: handleStepBack,\n        handleStepMileStone: handleStepMileStone\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 17\n      }, this);\n      break;\n\n    default:\n      page = null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: page\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 489,\n    columnNumber: 12\n  }, this);\n};\n\n_s(PostJob, \"H+OYXGT8e/epqGJHZPLB7cmQM6I=\", false, function () {\n  return [useHistory];\n});\n\n_c = PostJob;\nexport default PostJob;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostJob\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/postJob.tsx"],"names":["useCallback","useEffect","useState","PostNewJob","JobType","AddLocation","Payment","ChooseTiming","ChooseTimingMileStone","AddMilestone","JobMilestones","SaveTemplate","TemplateSavedSuccess","JobPostedSuccess","UploadMedia","MileStoneTemplates","JobDetails","EditMilestone","callCategories","republishJob","getOpenJobDetails","moment","setShowToast","useHistory","templateImage","randomColors","getRandomColors","PostJob","props","history","callTradeList","tradeListData","updateMileStoneIndex","updateMileStoneTimings","updateDetailScreen","editMilestoneTiming","editDetailPage","builderProfile","editMilestoneId","setRandomColors","categoriesData","setCategoriesData","step","setStep","stepsCompleted","setStepsCompleted","data","setData","milestones","setMileStones","forceupdate","setForceUpdate","jobId","setJobId","jobUpdateParam","setJobUpdateParam","getCategories","categories","colors","getJobDetails","updateOpen","res","success","specialization","map","specializationId","categoryId","job_type","jobTypeId","amount","milestone_name","isPhotoevidence","recommended_hours","from_date","to_date","Date","format","params","URLSearchParams","location","search","get","update","clearParentStates","handleStepComplete","stepData","prevData","prevSteps","concat","prevStep","handleStepJustUpdate","goto","handleStepForward","newMileStoneScreen","index","milestone_clone","Array","isArray","handleStepMileStone","addTimeToMileStone","time","skip","default_format","checkIsValid","length","filter_milestone","filter","item_mile","index_mile","count_times","forEach","mile","msw","isValid","mew","tsw","tew","mile_start","mile_end","time_start","time_end","undefined","console","log","ms","handleCombineMileStones","item","data_clone","removeMilestoneByIndex","splice","handleStepBack","edit_item","page","includes"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport PostNewJob from './components/postNewJob';\nimport JobType from './components/jobType';\nimport AddLocation from './components/addLocation';\nimport Payment from './components/payment';\nimport ChooseTiming from './components/chooseTiming';\nimport ChooseTimingMileStone from './components/chooseTimingMileStone';\nimport AddMilestone from './components/addMilestone';\nimport JobMilestones from './components/jobMilestones';\nimport SaveTemplate from './components/saveTemplate';\nimport TemplateSavedSuccess from './components/templateSavedSucess';\nimport JobPostedSuccess from './components/jobPostedSuccess';\nimport UploadMedia from './components/uploadMedia';\nimport MileStoneTemplates from './components/milestoneTemplates';\nimport JobDetails from './components/jobDetails';\nimport EditMilestone from './components/editMileStone';\nimport { callCategories, republishJob, getOpenJobDetails } from '../../redux/jobs/actions';\nimport moment from 'moment';\nimport { setShowToast } from '../../redux/common/actions';\nimport { useHistory } from 'react-router-dom';\n\nimport templateImage from '../../assets/images/job-posted-bg.jpg';\n\nimport { randomColors as getRandomColors } from '../../utils/common'\n\ninterface Proptypes {\n    callTradeList: () => void;\n    tradeListData: Array<any>;\n    editMilestoneId: any;\n    editMilestoneTiming: any;\n    editDetailPage: any;\n    isLoading: any,\n    history: any,\n    builderProfile: any,\n    updateMileStoneIndex: (data: any) => void;\n    updateMileStoneTimings: (data: any) => void;\n    updateDetailScreen: (data: any) => void;\n}\n\nconst PostJob = (props: Proptypes) => {\n    const history = useHistory();\n\n    const {\n        callTradeList,\n        tradeListData,\n        updateMileStoneIndex,\n        updateMileStoneTimings,\n        updateDetailScreen,\n        editMilestoneTiming,\n        editDetailPage,\n        builderProfile,\n        editMilestoneId } = props;\n\n    const [randomColors, setRandomColors] = useState();\n    const [categoriesData, setCategoriesData] = useState([]);\n    const [step, setStep] = useState(1);\n    const [stepsCompleted, setStepsCompleted] = useState<Array<number>>([]);\n    const [data, setData] = useState({});\n    const [milestones, setMileStones] = useState([]);\n    const [forceupdate, setForceUpdate] = useState({});\n    const [jobId, setJobId] = useState('');\n\n    const [jobUpdateParam, setJobUpdateParam] = useState(false);\n\n    const getCategories = useCallback(async () => {\n        const { categories: categoriesData } = await callCategories();\n        setCategoriesData(categoriesData);\n        let colors = getRandomColors();\n        setRandomColors(colors);\n    }, []);\n\n    useEffect(() => {\n        getCategories();\n        callTradeList();\n    }, [getCategories, callTradeList, milestones]);\n\n    const getJobDetails = useCallback(async (jobId: string, updateOpen?: boolean) => {\n        let res = null;\n\n        if (updateOpen) {\n            res = await getOpenJobDetails(jobId);\n        } else {\n            res = await republishJob(jobId);\n        }\n\n        if (res.success) {\n            setData({\n                ...res.data,\n                specialization: res.data.specialization.map(({ specializationId }: { specializationId: string }) => specializationId),\n                categories: res.data.categories.map(({ categoryId }: { categoryId: string }) => categoryId),\n                job_type: res.data.job_type.map(({ jobTypeId }: { jobTypeId: string }) => jobTypeId),\n                amount: `${res.data.amount}`,\n            });\n            setMileStones(res.data.milestones.map(({ milestone_name, isPhotoevidence, recommended_hours, from_date, to_date }: { milestone_name: string, isPhotoevidence: boolean, recommended_hours: string, from_date: string, to_date: string }) => ({\n                milestone_name,\n                isPhotoevidence,\n                recommended_hours,\n                from_date: moment(new Date(from_date)).format('MM-DD-YYYY'),\n                to_date: moment(new Date(to_date)).format('MM-DD-YYYY'),\n            })));\n            setStepsCompleted([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]);\n        }\n    }, []);\n\n    useEffect(() => {\n        const params = new URLSearchParams(history.location?.search);\n        const jobId: any = params.get('jobId') || '';\n        // this param is missing in the case of re-publish.\n        const update: any = params.get('update') || '';\n\n        if (jobId && update !== \"true\") {\n            if (jobId) {\n                setJobId(jobId);\n                getJobDetails(jobId);\n            }\n        } else {\n            if(update == \"true\"){\n                setJobUpdateParam(true);\n                getJobDetails(jobId, true);\n            }\n        }\n    }, [getJobDetails, history.location]);\n\n    const clearParentStates = () => {\n        setData({});\n        setMileStones([]);\n        setStepsCompleted([]);\n    }\n\n    const handleStepComplete = (stepData: any) => {\n        setData((prevData) => ({\n            ...prevData,\n            ...stepData\n        }))\n        setStepsCompleted((prevSteps) => prevSteps.concat(step));\n        setStep((prevStep) => prevStep + 1);\n    };\n\n    const handleStepJustUpdate = (stepData: any, goto?: any) => {\n        setData((prevData) => ({\n            ...prevData,\n            ...stepData\n        }));\n\n        if (goto === true) {\n            handleStepForward(14);\n        }\n\n        if (goto !== true && goto > 0) {\n            handleStepForward(goto)\n        }\n    }\n\n    const newMileStoneScreen = (index: any) => {\n        let milestone_clone: any = milestones;\n        if (!milestone_clone[index]) {\n            milestone_clone[index] = {}\n        }\n        setMileStones(milestone_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const handleStepMileStone = (data: any, index: any) => {\n        let milestone_clone: any = milestones;\n        milestone_clone[index]['milestone_name'] = data.milestone_name;\n        milestone_clone[index]['isPhotoevidence'] = data.isPhotoevidence;\n        milestone_clone[index]['recommended_hours'] = data.recommended_hours;\n        setMileStones(milestone_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const addTimeToMileStone = (time: any, index: any, skip: any) => {\n        const default_format = 'MM-DD-YYYY';\n        let milestone_clone: any = milestones;\n        let checkIsValid: any = true;\n\n        if (!skip && milestone_clone?.length) {\n            let filter_milestone: any = milestone_clone.filter((item_mile: any, index_mile: any) => index_mile !== index);\n            let count_times: any = {};\n            if (filter_milestone?.length)\n\n                filter_milestone.forEach((mile: any) => {\n                    let msw = moment(mile.from_date, default_format).isValid();\n                    let mew = moment(mile.to_date, default_format).isValid();\n\n                    let tsw = moment(time.from_date, default_format).isValid();\n                    let tew = moment(time.to_date, default_format).isValid();\n\n                    let mile_start = mile.from_date;\n                    let mile_end = mile.to_date;\n\n                    let time_start = time.from_date;\n                    let time_end = time.to_date;\n\n\n                    if (count_times[mile_start] == undefined) {\n                        count_times[mile_start] = 1\n                    } else {\n                        count_times[mile_start] = count_times[mile_start] + 1;\n                    }\n\n\n                    if (count_times[mile_end] == undefined) {\n                        count_times[mile_end] = 1\n                    } else {\n                        count_times[mile_end] = count_times[mile_end] + 1;\n                    }\n\n                    if (count_times[mile_start] === 4) {\n                        console.log('Inside ---', {\n                            ms: mile_start == time_start\n                        })\n                        if (mile_start == time_start || mile_start == time_end) {\n                            console.log('Inside - 1 ---')\n                            setShowToast(true, 'Selected start data is fully engage');\n                            return\n                        }\n                    }\n\n                    if (count_times[mile_end] === 4) {\n                        if (mile_end == time_start || mile_end == time_end) {\n                            setShowToast(true, 'Selected end data is fully engage');\n                            return\n                        }\n                    }\n\n\n                 \n\n                })\n        }\n\n\n        if (!checkIsValid) {\n            setShowToast(true, 'Please add unique date');\n            return;\n        }\n\n        milestone_clone[index]['from_date'] = time.from_date;\n        milestone_clone[index]['to_date'] = time.to_date;\n        setMileStones(milestone_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const handleCombineMileStones = (item: any) => {\n        let milestone_clone: any = milestones;\n        let data_clone: any = data;\n        milestone_clone = item;\n        data_clone['milestones'] = item;\n        setMileStones(milestone_clone);\n        setData(data_clone);\n    }\n\n    const removeMilestoneByIndex = (index: any) => {\n        let milestone_clone: any = milestones;\n        let data_clone: any = data;\n        milestone_clone.splice(index, 1);\n        data_clone['milestones'] = milestone_clone;\n        setMileStones(milestone_clone);\n        setData(data_clone);\n        Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n    }\n\n    const handleStepBack = () => setStep((prevStep) => prevStep - 1);\n    const handleStepForward = (step: any, edit_item?: number) => {\n        if (!step) {\n            setStep((prevStep) => prevStep + 1)\n        } else {\n            if (edit_item) {\n                setStep(step)\n                Array.isArray(forceupdate) ? setForceUpdate({}) : setForceUpdate([]);\n            }\n            setStep(step);\n        }\n    };\n    console.log({ data });\n    let page;\n    switch (step) {\n        case 1:\n            page = (\n                <PostNewJob\n                    data={data}\n                    jobUpdateParam={jobUpdateParam}\n                    handleStepForward={handleStepForward}\n                    handleStepJustUpdate={handleStepJustUpdate}\n                    editDetailPage={editDetailPage}\n                    stepCompleted={stepsCompleted.includes(1)}\n                    handleStepComplete={handleStepComplete}\n                />\n            );\n            break;\n        case 2:\n            page = (\n                <JobType\n                    categories={tradeListData}\n                    jobTypes={categoriesData}\n                    handleStepJustUpdate={handleStepJustUpdate}\n                    editDetailPage={editDetailPage}\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(2)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 3:\n            page = (\n                <AddLocation\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(3)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 4:\n            page = (\n                <Payment\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(4)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 5:\n            page = (\n                <ChooseTiming\n                    data={data}\n                    milestones={milestones}\n                    stepCompleted={stepsCompleted.includes(5)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 6:\n            page = (\n                <JobMilestones\n                    data={data}\n                    milestones={milestones}\n                    handleStepJustUpdate={handleStepJustUpdate}\n                    editDetailPage={editDetailPage}\n                    editMileStone={editMilestoneId}\n                    editMilestoneTiming={editMilestoneTiming}\n                    removeMilestoneByIndex={removeMilestoneByIndex}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(6)}\n                    handleCombineMileStones={handleCombineMileStones}\n                    updateMileStoneIndex={updateMileStoneIndex}\n                    newMileStoneScreen={newMileStoneScreen}\n                    updateMileStoneTimings={updateMileStoneTimings}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            );\n            break;\n        case 7:\n            page = (\n                <AddMilestone\n                    data={data}\n                    milestones={milestones}\n                    newMileStoneScreen={newMileStoneScreen}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(7)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                    removeMilestoneByIndex={removeMilestoneByIndex}\n                    updateMileStoneIndex={updateMileStoneIndex}\n                    handleStepMileStone={handleStepMileStone}\n                />)\n            break;\n        case 8:\n            page = (\n                <ChooseTimingMileStone\n                    data={data}\n                    randomColors={randomColors}\n                    addTimeToMileStone={addTimeToMileStone}\n                    editMileStone={editMilestoneId}\n                    editMilestoneTiming={editMilestoneTiming}\n                    updateMileStoneTimings={updateMileStoneTimings}\n                    milestones={milestones}\n                    handleStepMileStone={handleStepMileStone}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(8)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />\n            )\n            break;\n        case 9:\n            page = (\n                <MileStoneTemplates\n                    {...props}\n                    data={data}\n                    handleCombineMileStones={handleCombineMileStones}\n                    stepCompleted={stepsCompleted.includes(9)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />\n            )\n            break;\n        case 10:\n            page = (\n                <SaveTemplate\n                    data={data}\n                    milestones={milestones}\n                    handleCombineMileStones={handleCombineMileStones}\n                    stepCompleted={stepsCompleted.includes(10)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />)\n            break;\n        case 11:\n            page = (\n                <TemplateSavedSuccess\n                    data={data}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(11)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                />)\n            break;\n        case 12:\n            page = (\n                <JobPostedSuccess\n                    history={props.history}\n                    data={data}\n                    templateImage={templateImage}\n                    editDetailPage={editDetailPage}\n                    stepCompleted={stepsCompleted.includes(12)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                    handleStepForward={handleStepForward}\n                />)\n            break;\n        case 13:\n            page = (\n                <UploadMedia\n                    data={data}\n                    stepCompleted={stepsCompleted.includes(13)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                />)\n            break;\n        case 14:\n            page = (\n                <JobDetails\n                    data={data}\n                    milestones={milestones}\n                    categories={tradeListData}\n                    jobTypes={categoriesData}\n                    builderProfile={builderProfile}\n                    clearParentStates={clearParentStates}\n                    stepCompleted={stepsCompleted.includes(14)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepForward={handleStepForward}\n                    handleStepBack={handleStepBack}\n                    updateDetailScreen={updateDetailScreen}\n                    jobId={jobId}\n                />\n            )\n            break;\n        case 15:\n            page = (\n                <EditMilestone\n                    data={data}\n                    milestones={milestones}\n                    editMileStone={editMilestoneId}\n                    editMilestoneTiming={editMilestoneTiming}\n                    addTimeToMileStone={addTimeToMileStone}\n                    newMileStoneScreen={newMileStoneScreen}\n                    handleStepForward={handleStepForward}\n                    stepCompleted={stepsCompleted.includes(15)}\n                    handleStepComplete={handleStepComplete}\n                    handleStepBack={handleStepBack}\n                    handleStepMileStone={handleStepMileStone}\n                />\n            )\n            break;\n        default:\n            page = null;\n    }\n\n    return <div>{page}</div>;\n};\n\nexport default PostJob;\n"]},"metadata":{},"sourceType":"module"}