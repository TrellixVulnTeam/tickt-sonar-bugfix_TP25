{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable jsx-a11y/anchor-is-valid */import{useState,useEffect}from\"react\";import{useLocation,withRouter,useHistory}from\"react-router-dom\";import Joyride from\"react-joyride\";import Modal from\"@material-ui/core/Modal\";import Menu from\"@material-ui/core/Menu\";import MenuItem from\"@material-ui/core/MenuItem\";import storageService from\"../../utils/storageService\";import AuthModal from\"../auth/authModal\";import Urls,{urlFor}from\"../../network/Urls\";import{useDispatch}from\"react-redux\";import{setLoading,setShowNotification}from\"../../redux/common/actions\";import{messaging,deleteToken,signOut,getFirebaseInboxDataForUnreadMsgCount}from\"../../services/firebase\";import{onNotificationClick,formatNotificationTime}from\"../../utils/common\";import{getNotificationList}from\"../../redux/homeSearch/actions\";import{markNotifAsRead}from\"../../redux/auth/actions\";import{moengage,mixPanel}from\"../../services/analyticsTools\";import{MoEConstants}from\"../../utils/constants\";import moment from\"moment\";import _ from\"lodash\";import colorLogo from\"../../assets/images/ic-logo-yellow.png\";import menu from\"../../assets/images/menu-line-white.svg\";import bell from\"../../assets/images/ic-notification.png\";import cancel from\"../../assets/images/ic-cancel.png\";import dummy from\"../../assets/images/u_placeholder.jpg\";import profile from\"../../assets/images/ic-profile.png\";import revenue from\"../../assets/images/ic-revenue.png\";import guide from\"../../assets/images/ic-tutorial.png\";import savedJobs from\"../../assets/images/ic-job.png\";import noNotification from\"../../assets/images/no-notifications.png\";import skipBtn from\"../../assets/images/skip.png\";import backBtn from\"../../assets/images/back.png\";import nextBtn from\"../../assets/images/next.png\";import doneBtn from\"../../assets/images/check-mark.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DISABLE_HEADER=[\"/signup\",\"/login\",\"/reset-password\",\"/404\",\"/email-updated-successfully\",\"/change-password-success\"];var Header=function Header(props){var _notificationData$lis3,_notificationData$lis4,_notificationData$lis5;var window_=window;var dispatch=useDispatch();var _useLocation=useLocation(),pathname=_useLocation.pathname;var history=useHistory();var type=storageService.getItem(\"userType\");var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userType=_useState2[0],setUserType=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),anchorEl=_useState4[0],setAnchorEl=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),anchorElNotif=_useState6[0],setAnchorElNotif=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showModal=_useState8[0],setShowModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showHeader=_useState10[0],setShowHeader=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),toggleMenu=_useState12[0],setToggleMenu=_useState12[1];var _useState13=useState(\"discover\"),_useState14=_slicedToArray(_useState13,2),activeLink=_useState14[0],setActiveLink=_useState14[1];var _useState15=useState({count:0,list:[],unreadCount:0}),_useState16=_slicedToArray(_useState15,2),notificationData=_useState16[0],setNotificationData=_useState16[1];var _useState17=useState(1),_useState18=_slicedToArray(_useState17,2),notificationPgNo=_useState18[0],setNotificationPgNo=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),hasMoreNotif=_useState20[0],setHasMoreNotif=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),isIntercom=_useState22[0],setIntercom=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),startTour=_useState24[0],setStartTour=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isFalse=_useState26[0],setIsFalse=_useState26[1];var forceUpdate=useForceUpdate();var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),activeTarget=_useState28[0],setActiveTarget=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),logoutClicked=_useState30[0],setLogoutClicked=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),profileData=_useState32[0],setProfileData=_useState32[1];var _useState33=useState(),_useState34=_slicedToArray(_useState33,2),unreadMessages=_useState34[0],setUnreadMessages=_useState34[1];function useForceUpdate(){var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),value=_useState36[0],setValue=_useState36[1];// integer state\nreturn function(){return setValue(function(value){return value+Math.random();});};// update the state to force render\n}var onMessageListner=function onMessageListner(){if(messaging){messaging.onMessage(function(payload){var _payload$data;console.log(\"hi#######%%%%%%%%%%\",payload);console.log(\"firebase notification received inside header : \",payload);var title=payload.data.title;var options={body:payload.data.notificationText};var notifications=new Notification(title,options);notifications.onclick=function(event){console.log(\"event: \",event);event.preventDefault();// prevent the browser from focusing the Notification's tab\nwindow.open(\"http://localhost:3000/active-jobs\",\"_self\");};setShowNotification(true,payload);if(((_payload$data=payload.data)===null||_payload$data===void 0?void 0:_payload$data.notificationType)!==\"25\"){setNotificationData(function(prevData){var newPayLoad=_objectSpread({},payload.data);newPayLoad.read=0;var newPushList=_toConsumableArray(prevData.list);newPushList.unshift(newPayLoad);return _objectSpread(_objectSpread({},prevData),{},{unreadCount:prevData.unreadCount+1,list:newPushList});});}});}};var onUpdateofInbox=function onUpdateofInbox(res){var unreadMessagesCount=0;res.map(function(item){unreadMessagesCount=unreadMessagesCount+item.unreadMessages;});setUnreadMessages(unreadMessagesCount);};useEffect(function(){getFirebaseInboxDataForUnreadMsgCount(onUpdateofInbox);});var callNotificationList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(resetUnreadNotif,isInit){var _notificationData$lis,_notificationData$lis2;var res1,_res1$data,_result$list,result,notifList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(((_notificationData$lis=notificationData.list)===null||_notificationData$lis===void 0?void 0:_notificationData$lis.length)>0&&((_notificationData$lis2=notificationData.list)===null||_notificationData$lis2===void 0?void 0:_notificationData$lis2.length)>(notificationData===null||notificationData===void 0?void 0:notificationData.count))){_context.next=3;break;}setHasMoreNotif(false);return _context.abrupt(\"return\");case 3:_context.next=5;return getNotificationList(resetUnreadNotif?1:notificationPgNo,resetUnreadNotif&&isInit?false:resetUnreadNotif?true:false);case 5:res1=_context.sent;if(res1.success){result=(_res1$data=res1.data)===null||_res1$data===void 0?void 0:_res1$data.result;if((result===null||result===void 0?void 0:(_result$list=result.list)===null||_result$list===void 0?void 0:_result$list.length)<10){setHasMoreNotif(false);}notifList=resetUnreadNotif||isInit?result===null||result===void 0?void 0:result.list:[].concat(_toConsumableArray(notificationData.list),_toConsumableArray(result===null||result===void 0?void 0:result.list));setNotificationData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{count:result===null||result===void 0?void 0:result.count,list:notifList,unreadCount:result===null||result===void 0?void 0:result.unreadCount});});if(resetUnreadNotif){handleClose(\"notification\");setNotificationPgNo(2);}else{setNotificationPgNo(notificationPgNo+1);}if(props.recallHeaderNotif){props.recallHeaderNotification(false);}}case 7:case\"end\":return _context.stop();}}},_callee);}));return function callNotificationList(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){var _URLSearchParams,_props$location;onMessageListner();setActiveLink(\"discover\");setUserType(storageService.getItem(\"userType\"));callOnPathChange();var pushNotifId=(_URLSearchParams=new URLSearchParams((_props$location=props.location)===null||_props$location===void 0?void 0:_props$location.search))===null||_URLSearchParams===void 0?void 0:_URLSearchParams.get(\"pushNotifId\");if(pushNotifId){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return markNotifAsRead({notificationId:pushNotifId});case 2:res=_context2.sent;if(res.success){callNotificationList(true,true);}case 4:case\"end\":return _context2.stop();}}},_callee2);}))();}},[]);var callOnPathChange=function callOnPathChange(){var _props$tradeListData;if(userType&&!DISABLE_HEADER.includes(pathname)&&pathname!==\"guest-user\"){callNotificationList(true,true);if(userType===1){if(!profileData||profileData&&!_.isEqual(props.tradieProfileData,profileData)){props.callTradieProfileData();}}else if(userType===2){if(!profileData||profileData&&!_.isEqual(props.builderProfile,profileData)){props.getProfileBuilder();}}}if(DISABLE_HEADER.includes(pathname)){setShowHeader(false);}else{setShowHeader(true);}setUserType(storageService.getItem(\"userType\"));if(((_props$tradeListData=props.tradeListData)===null||_props$tradeListData===void 0?void 0:_props$tradeListData.length)===0){props.callTradeList();}};useEffect(function(){var _Object$keys,_Object$keys2;if(props.tradieProfileData&&((_Object$keys=Object.keys(props.tradieProfileData))===null||_Object$keys===void 0?void 0:_Object$keys.length)){setProfileData(props.tradieProfileData);}if(props.builderProfile&&((_Object$keys2=Object.keys(props.builderProfile))===null||_Object$keys2===void 0?void 0:_Object$keys2.length)){setProfileData(props.builderProfile);}},[props.tradieProfileData,props.builderProfile]);useEffect(function(){if((props===null||props===void 0?void 0:props.builderProfile)&&Object.keys(props===null||props===void 0?void 0:props.builderProfile).length&&!isIntercom){setIntercom(true);setHidden();}if((props===null||props===void 0?void 0:props.tradieProfileData)&&Object.keys(props===null||props===void 0?void 0:props.tradieProfileData).length&&!isIntercom){setIntercom(true);setHidden();}},[props]);var setHidden=function setHidden(){var data=storageService.getItem(\"userInfo\");if(data){if(!Object.values(data).includes([\"\"])){if(window_.Intercom){// window_.Intercom('shutdown');\nwindow_.Intercom(\"update\",{app_id:\"tvbm4bhr\",name:data.userName,email:data.email,user_id:data._id});}}else{forceUpdate();setIsFalse(true);callOnPathChange();}}};useEffect(function(){if(pathname===\"/login\"){// window_.Intercom('hide');\n}if(pathname===\"/\"){var _props$location2,_props$location2$stat;setActiveLink(\"discover\");setHidden();if((props===null||props===void 0?void 0:(_props$location2=props.location)===null||_props$location2===void 0?void 0:(_props$location2$stat=_props$location2.state)===null||_props$location2$stat===void 0?void 0:_props$location2$stat.path)===\"/signup\"){setStartTour(true);props.history.replace(\"/\");}}if([\"/jobs\",\"/active-jobs\",\"/applied-jobs\",\"/past-jobs\",\"/new-jobs\",\"/approved-milestones\",\"/mark-milestone\",\"/review-builder\"].includes(pathname)){setActiveLink(\"jobs\");setHidden();}if(pathname===\"/post-new-job\"){setActiveLink(\"post\");setHidden();}if(pathname===\"/chat\"){setActiveLink(\"chat\");setHidden();}if([\"/builder-info\",\"/saved-tradespeople\",\"/search-tradie-results\"].includes(pathname)){setHidden();}},[pathname]);useEffect(function(){callOnPathChange();},[pathname,userType,isFalse]);useEffect(function(){if(props.recallHeaderNotif){callOnPathChange();}},[props.recallHeaderNotif]);useEffect(function(){if(startTour){document.body.classList.add(\"no-scroll\");}else{document.body.classList.remove(\"no-scroll\");}},[startTour]);var handleClick=function handleClick(event,type){if(type===\"notification\"){setAnchorElNotif(event.currentTarget);}else{setAnchorEl(event.currentTarget);}};var handleClose=function handleClose(type){if(type===\"notification\"){setAnchorElNotif(null);}else{setAnchorEl(null);}};var logoutHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _storageService$getIt;var response,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLogoutClicked(false);setLoading(true);_context3.next=4;return fetch(urlFor(\"\".concat(Urls.logout,\"?deviceId=\").concat((_storageService$getIt=storageService.getItem(\"userInfo\"))===null||_storageService$getIt===void 0?void 0:_storageService$getIt.deviceId)),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:storageService.getItem(\"jwtToken\"),timezone:moment.tz.guess()}});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:res=_context3.sent;setLoading(false);if(res.status_code===200){moengage.moE_SendEvent(MoEConstants.LOG_OUT,{success_status:true,current_page:pathname});mixPanel.mixP_SendEvent(MoEConstants.LOG_OUT,{success_status:true,current_page:pathname});signOut();deleteToken();moengage.moE_LogoutEvent();}dispatch({type:\"USER_LOGGED_OUT\"});storageService.clearAll();history.push(\"/login\");case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function logoutHandler(){return _ref3.apply(this,arguments);};}();var postClicked=function postClicked(){setToggleMenu(false);setActiveLink(\"post\");history.push(\"/post-new-job\");};var chatClicked=function chatClicked(){setToggleMenu(false);if(userType===1||userType===2){setActiveLink(\"chat\");history.push(\"/chat\");}};var jobClick=function jobClick(){setToggleMenu(false);if(userType===1){setActiveLink(\"jobs\");history.push(\"/active-jobs\");}else if(userType===2){setActiveLink(\"jobs\");history.push(\"/jobs\");}};var renderByType=function renderByType(_ref4){var name=_ref4.name;if(userType===1||userType===2){return profileData===null||profileData===void 0?void 0:profileData[name];}};var handleCallback=function handleCallback(state){var action=state.action,target=state.step.target;var width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;setActiveTarget(target);if(action===\"reset\"){setStartTour(false);}else if(action===\"start\"&&width<=650){setToggleMenu(true);}if(target===\".tour-profile\"&&toggleMenu){setToggleMenu(false);}};var tradieTour=[{target:\".tour-discover a\",content:\"Hi \".concat(renderByType({name:\"userName\"}),\", here is your go-to for finding new jobs.\"),disableBeacon:true},{target:\".tour-jobs a\",content:\"Here you can find all your active jobs and keep on top of milestones!\"},{target:\".tour-chat a\",content:\"Chat with builders about job requirements\"},{target:\".tour-profile\",content:\"Manage your profile and settings\"},{target:\".tour-notifications\",content:\"Check notifications and stay on the front foot\"}];var builderTour=[{target:\".tour-discover a\",content:\"Hi \".concat(renderByType({name:\"userName\"}),\", here is your go-to for finding tradespeople.\"),disableBeacon:true},{target:\".tour-jobs a\",content:\"Here you can find all your active jobs and keep on top of milestones!\"},{target:\".tour-post a\",content:\"Here you can post a new job\"},{target:\".tour-chat a\",content:\"Your chats for job and tradespeople are here\"},{target:\".tour-profile\",content:\"Manage your profile and settings\"},{target:\".tour-notifications\",content:\"Check notifications and stay on the front foot\"}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Joyride,{run:startTour,showProgress:true,continuous:true,showSkipButton:true,scrollToFirstStep:true,spotlightPadding:activeTarget===\".tour-notifications\"?12:0,disableOverlayClose:true,disableCloseOnEsc:true,steps:userType===1?tradieTour:builderTour,styles:{options:{zIndex:2000},overlay:{background:\"#00000099\"}},floaterProps:{hideArrow:true},tooltipComponent:function tooltipComponent(_ref5){var continuous=_ref5.continuous,index=_ref5.index,step=_ref5.step,backProps=_ref5.backProps,skipProps=_ref5.skipProps,primaryProps=_ref5.primaryProps,tooltipProps=_ref5.tooltipProps,isLastStep=_ref5.isLastStep,size=_ref5.size;return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({className:\"tour-tooltip\"},tooltipProps),{},{children:[/*#__PURE__*/_jsx(\"div\",{className:\"tour-tooltip-content\",children:step.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"tour-tooltip-footer\",children:[/*#__PURE__*/_jsx(\"button\",_objectSpread(_objectSpread({className:\"\"},skipProps),{},{title:\"Skip\",children:/*#__PURE__*/_jsx(\"img\",{src:skipBtn,alt:\"skip\",className:\"skip\"})})),index>0&&/*#__PURE__*/_jsx(\"button\",_objectSpread(_objectSpread({className:\"\"},backProps),{},{title:\"Back\",children:/*#__PURE__*/_jsx(\"img\",{src:backBtn,alt:\"back\"})})),continuous&&/*#__PURE__*/ // <button className=\"\" {...primaryProps} title={isLastStep ? 'Done' : 'Next'}>\n//     {isLastStep ? 'Done' : 'Next'} {step.showProgress && `(${index + 1}/${size})`}\n// </button>\n_jsxs(\"button\",_objectSpread(_objectSpread({className:\"\"},primaryProps),{},{title:isLastStep?\"Done\":\"Next\",children:[isLastStep?/*#__PURE__*/_jsx(\"img\",{src:doneBtn,alt:\"done\"}):/*#__PURE__*/_jsx(\"img\",{src:nextBtn,alt:\"next\"}),/*#__PURE__*/_jsx(\"span\",{children:step.showProgress&&\"(\".concat(index+1,\"/\").concat(size,\")\")})]}))]})]}));},callback:handleCallback}),showHeader&&/*#__PURE__*/_jsx(\"header\",{id:\"header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"custom_container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_headrow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"brand_wrap\",children:/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){if(userType===0){return;}if(pathname===\"/\"){window.scrollTo({top:0,left:0,behavior:\"smooth\"});return;}setActiveLink(\"discover\");setToggleMenu(false);props.history.push(\"/\");},src:colorLogo,alt:\"logo\"})})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"center_nav \".concat(toggleMenu?\"active\":\"\"),children:[/*#__PURE__*/_jsx(\"li\",{className:\"tour-discover\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){if(userType===1||userType===2){setActiveLink(\"discover\");history.push(\"/\");}else{return;}},className:startTour?activeTarget===\".tour-discover a\"?\"active\":\"\":activeLink===\"discover\"?\"active\":\"\",children:\"Discover\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"tour-jobs\",children:/*#__PURE__*/_jsx(\"a\",{className:startTour?activeTarget===\".tour-jobs a\"?\"active\":\"\":activeLink===\"jobs\"?\"active\":\"\",onClick:jobClick,children:\"Jobs\"})}),userType===2&&/*#__PURE__*/_jsx(\"li\",{className:\"tour-post\",children:/*#__PURE__*/_jsx(\"a\",{className:startTour?activeTarget===\".tour-post a\"?\"active\":\"\":activeLink===\"post\"?\"active\":\"\",onClick:postClicked,children:\"Post\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"tour-chat\",children:/*#__PURE__*/_jsxs(\"a\",{className:startTour?activeTarget===\".tour-chat a\"?\"active\":\"\":activeLink===\"chat\"?\"active\":\"\",onClick:chatClicked,children:[\"Chat\",unreadMessages!==0?/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(unreadMessages?\"unreadCountBadge\":\"\"),children:unreadMessages}):\"\"]})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"side_nav\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"mob_nav\",children:/*#__PURE__*/_jsx(\"img\",{src:menu,alt:\"menu\",onClick:function onClick(){setToggleMenu(!toggleMenu);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_notification\",children:[storageService.getItem(\"jwtToken\")&&/*#__PURE__*/_jsx(\"div\",{className:\"notification_bell\",onClick:function onClick(event){return handleClick(event,\"notification\");},children:/*#__PURE__*/_jsxs(\"figure\",{className:\"bell tour-notifications\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(notificationData.unreadCount?\"badge\":\"\"),children:notificationData.unreadCount||\"\"}),/*#__PURE__*/_jsx(\"img\",{src:bell,alt:\"notify\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user_profile\",children:[storageService.getItem(\"jwtToken\")&&/*#__PURE__*/_jsx(\"figure\",{className:\"tour-profile\",\"aria-controls\":\"simple-menu\",\"aria-haspopup\":\"true\",onClick:function onClick(event){return handleClick(event,\"profile\");},children:/*#__PURE__*/_jsx(\"img\",{src:renderByType({name:\"userImage\"})||dummy,alt:\"profile-img\"})}),/*#__PURE__*/_jsxs(Menu,{className:\"sub_menu\",id:\"simple-menu\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:function onClose(){return handleClose(\"profile\");},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:renderByType({name:\"userName\"})}),/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){handleClose(\"pofile\");history.push(\"/\".concat(props.userType===1?\"tradie\":\"builder\",\"-info?\").concat(props.userType===1?\"trade\":\"builder\",\"Id=\").concat(renderByType({name:\"userId\"})));},children:/*#__PURE__*/_jsxs(\"span\",{className:\"setting_icon\",children:[/*#__PURE__*/_jsx(\"img\",{src:profile,alt:\"profile\"}),\"My Profile\"]})}),[1,2].includes(props.userType)&&/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){handleClose(\"profile\");history.push(\"/payment-history\");},children:/*#__PURE__*/_jsxs(\"span\",{className:\"setting_icon\",children:[/*#__PURE__*/_jsx(\"img\",{src:revenue,alt:\"revenue\"}),props.userType===1?\"Payment history\":\"Transaction history\"]})}),[1,2].includes(props.userType)&&/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){handleClose(\"profile\");history.push(props.userType===1?\"/saved-jobs\":\"/saved-tradespeople\");},children:/*#__PURE__*/_jsxs(\"span\",{className:\"setting_icon\",children:[/*#__PURE__*/_jsx(\"img\",{src:savedJobs,alt:\"savedJobs\"}),\"Saved \".concat(props.userType===1?\"jobs\":\"tradespeople\")]})}),[1,2].includes(props.userType)&&/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){handleClose(\"profile\");setStartTour(true);},children:/*#__PURE__*/_jsxs(\"span\",{className:\"setting_icon\",children:[/*#__PURE__*/_jsx(\"img\",{src:guide,alt:\"guide\"}),\"App Guide\"]})}),/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){handleClose(\"profile\");setLogoutClicked(true);},children:/*#__PURE__*/_jsx(\"span\",{className:\"setting_icon logout\",children:\"Logout\"})})]}),/*#__PURE__*/_jsx(Modal,{className:\"custom_modal\",open:logoutClicked,onClose:function onClose(){return setLogoutClicked(false);},\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_wh confirmation\",\"data-aos\":\"zoom-in\",\"data-aos-delay\":\"30\",\"data-aos-duration\":\"1000\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"xs_sub_title\",children:\"Logout Confirmation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close_btn\",onClick:function onClick(){return setLogoutClicked(false);},children:/*#__PURE__*/_jsx(\"img\",{src:cancel,alt:\"cancel\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal_message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to logout?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog_actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn btn-effect\",onClick:logoutHandler,children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"fill_grey_btn btn-effect\",onClick:function onClick(){return setLogoutClicked(false);},children:\"No\"})]})]})}),/*#__PURE__*/_jsxs(Menu,{className:\"sub_menu notifications\",id:\"simple-menu\",anchorEl:anchorElNotif,keepMounted:true,open:Boolean(anchorElNotif),onClose:function onClose(){return handleClose(\"notification\");},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Notifications\"}),/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"link mark_all\",onClick:function onClick(){if(notificationData.unreadCount===0){handleClose(\"notification\");return;}callNotificationList(true);},children:\"Mark all as read\"})]}),((_notificationData$lis3=notificationData.list)===null||_notificationData$lis3===void 0?void 0:_notificationData$lis3.length)>0&&notificationData.list.map(function(item){return/*#__PURE__*/_jsx(MenuItem,{className:\"\".concat(item.read?\"\":\"unread\"),onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _history$location,_history$location2;var url1,url2,res,_window$location;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:handleClose(\"notification\");url1=onNotificationClick(item);url2=((_history$location=history.location)===null||_history$location===void 0?void 0:_history$location.pathname)+((_history$location2=history.location)===null||_history$location2===void 0?void 0:_history$location2.search);if(!(item.read===0)){_context4.next=13;break;}if(!((item===null||item===void 0?void 0:item.notificationType)===13||url1===url2&&(item===null||item===void 0?void 0:item.notificationType)===9)){_context4.next=10;break;}_context4.next=7;return markNotifAsRead({notificationId:item===null||item===void 0?void 0:item._id});case 7:_context4.t0=_context4.sent;_context4.next=11;break;case 10:_context4.t0=markNotifAsRead({notificationId:item===null||item===void 0?void 0:item._id});case 11:res=_context4.t0;if((item===null||item===void 0?void 0:item.notificationType)===13&&(res===null||res===void 0?void 0:res.success)){callNotificationList(true,true);}case 13:if(!(url1===url2&&item.read===0||url1===url2&&(item===null||item===void 0?void 0:item.notificationType)==9)){_context4.next=16;break;}(_window$location=window.location)===null||_window$location===void 0?void 0:_window$location.reload();return _context4.abrupt(\"return\");case 16:props.history.push(url1);case 17:case\"end\":return _context4.stop();}}},_callee4);})),children:/*#__PURE__*/_jsxs(\"div\",{className:\"notif\",children:[/*#__PURE__*/_jsxs(\"figure\",{className:\"not_img\",children:[/*#__PURE__*/_jsx(\"img\",{src:(item===null||item===void 0?void 0:item.image)||dummy,alt:\"img\"}),/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(item.read?\"\":\"dot\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"span\",{title:item.title,className:\"who line-1\",children:item.title}),/*#__PURE__*/_jsx(\"span\",{title:item.notificationText,className:\"line-1\",children:item.notificationText})]}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:formatNotificationTime(item===null||item===void 0?void 0:item.updatedAt,\"day\")})]})});}),hasMoreNotif&&((_notificationData$lis4=notificationData.list)===null||_notificationData$lis4===void 0?void 0:_notificationData$lis4.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"more_notif\",onClick:function onClick(){return callNotificationList();},children:/*#__PURE__*/_jsx(\"a\",{className:\"link\",children:\"View more\"})}),(notificationData===null||notificationData===void 0?void 0:(_notificationData$lis5=notificationData.list)===null||_notificationData$lis5===void 0?void 0:_notificationData$lis5.length)===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"no_notification\",children:[/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{src:noNotification,alt:\"no-notifications\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"No Notifications\"})]})// <div className=\"no_record\">\n//   <figure>\n//     <figure className=\"no_img\">\n//       <img src={notification} alt=\"data not found\" />\n//     </figure>\n//   </figure>\n//   <span className=\"empty_screen_text\">\n//     You don't have any notification yet.\n//   </span>\n//   <span className=\"notification_subtext\">\n//     Explore our local network\n//   </span>\n//   <button\n//     className=\"empty_screen_button\"\n//     onClick={() => history.push(\"/\")}\n//   >\n//     Search tradespeople\n//   </button>\n// </div>\n]})]})]}),!storageService.getItem(\"jwtToken\")&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"active\",onClick:function onClick(){return setShowModal(!showModal);},children:\"Log in\"})}),/*#__PURE__*/_jsx(AuthModal,{showModal:showModal,setShowModal:setShowModal,history:props.history,firstTimePopup:true,children:props.children})]})]})})})]});};export default withRouter(Header);","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/common/header/header.tsx"],"names":["useState","useEffect","useLocation","withRouter","useHistory","Joyride","Modal","Menu","MenuItem","storageService","AuthModal","Urls","urlFor","useDispatch","setLoading","setShowNotification","messaging","deleteToken","signOut","getFirebaseInboxDataForUnreadMsgCount","onNotificationClick","formatNotificationTime","getNotificationList","markNotifAsRead","moengage","mixPanel","MoEConstants","moment","_","colorLogo","bell","cancel","dummy","profile","revenue","guide","savedJobs","noNotification","skipBtn","backBtn","nextBtn","doneBtn","DISABLE_HEADER","Header","props","window_","window","dispatch","pathname","history","type","getItem","userType","setUserType","anchorEl","setAnchorEl","anchorElNotif","setAnchorElNotif","showModal","setShowModal","showHeader","setShowHeader","toggleMenu","setToggleMenu","activeLink","setActiveLink","count","list","unreadCount","notificationData","setNotificationData","notificationPgNo","setNotificationPgNo","hasMoreNotif","setHasMoreNotif","isIntercom","setIntercom","startTour","setStartTour","isFalse","setIsFalse","forceUpdate","useForceUpdate","activeTarget","setActiveTarget","logoutClicked","setLogoutClicked","profileData","setProfileData","unreadMessages","setUnreadMessages","value","setValue","Math","random","onMessageListner","onMessage","payload","console","log","title","data","options","body","notificationText","notifications","Notification","onclick","event","preventDefault","open","notificationType","prevData","newPayLoad","read","newPushList","unshift","onUpdateofInbox","res","unreadMessagesCount","map","item","callNotificationList","resetUnreadNotif","isInit","length","res1","success","result","notifList","handleClose","recallHeaderNotif","recallHeaderNotification","callOnPathChange","pushNotifId","URLSearchParams","location","search","get","notificationId","includes","isEqual","tradieProfileData","callTradieProfileData","builderProfile","getProfileBuilder","tradeListData","callTradeList","Object","keys","setHidden","values","Intercom","app_id","name","userName","email","user_id","_id","state","path","replace","document","classList","add","remove","handleClick","currentTarget","logoutHandler","fetch","logout","deviceId","method","headers","Authorization","timezone","tz","guess","response","json","status_code","moE_SendEvent","LOG_OUT","success_status","current_page","mixP_SendEvent","moE_LogoutEvent","clearAll","push","postClicked","chatClicked","jobClick","renderByType","handleCallback","action","target","step","width","innerWidth","documentElement","clientWidth","tradieTour","content","disableBeacon","builderTour","zIndex","overlay","background","hideArrow","continuous","index","backProps","skipProps","primaryProps","tooltipProps","isLastStep","size","showProgress","scrollTo","top","left","behavior","menu","Boolean","vertical","horizontal","url1","url2","reload","image","updatedAt","children"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport { useState, useEffect } from \"react\";\nimport { useLocation, withRouter, useHistory } from \"react-router-dom\";\nimport Joyride from \"react-joyride\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport storageService from \"../../utils/storageService\";\nimport AuthModal from \"../auth/authModal\";\nimport Urls, { urlFor } from \"../../network/Urls\";\nimport { useDispatch } from \"react-redux\";\nimport { setLoading, setShowNotification } from \"../../redux/common/actions\";\nimport {\n  messaging,\n  deleteToken,\n  signOut,\n  getFirebaseInboxDataForUnreadMsgCount,\n} from \"../../services/firebase\";\nimport {\n  onNotificationClick,\n  formatNotificationTime,\n} from \"../../utils/common\";\nimport { getNotificationList } from \"../../redux/homeSearch/actions\";\nimport { markNotifAsRead } from \"../../redux/auth/actions\";\nimport { moengage, mixPanel } from \"../../services/analyticsTools\";\nimport { MoEConstants } from \"../../utils/constants\";\n\nimport moment from \"moment\";\nimport _ from \"lodash\";\n\nimport colorLogo from \"../../assets/images/ic-logo-yellow.png\";\nimport menu from \"../../assets/images/menu-line-white.svg\";\nimport bell from \"../../assets/images/ic-notification.png\";\nimport cancel from \"../../assets/images/ic-cancel.png\";\nimport dummy from \"../../assets/images/u_placeholder.jpg\";\nimport profile from \"../../assets/images/ic-profile.png\";\nimport revenue from \"../../assets/images/ic-revenue.png\";\nimport guide from \"../../assets/images/ic-tutorial.png\";\nimport savedJobs from \"../../assets/images/ic-job.png\";\nimport notification from \"../../assets/images/notification.png\";\n\nimport noNotification from \"../../assets/images/no-notifications.png\";\n\nimport skipBtn from \"../../assets/images/skip.png\";\nimport backBtn from \"../../assets/images/back.png\";\nimport nextBtn from \"../../assets/images/next.png\";\nimport doneBtn from \"../../assets/images/check-mark.png\";\n\nconst DISABLE_HEADER = [\n  \"/signup\",\n  \"/login\",\n  \"/reset-password\",\n  \"/404\",\n  \"/email-updated-successfully\",\n  \"/change-password-success\",\n];\n\nconst Header = (props: any) => {\n  let window_: any = window;\n  const dispatch = useDispatch();\n  let { pathname } = useLocation();\n  let history = useHistory();\n  let type = storageService.getItem(\"userType\");\n\n  const [userType, setUserType] = useState(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [anchorElNotif, setAnchorElNotif] = useState(null);\n  const [showModal, setShowModal] = useState<boolean>(false);\n  const [showHeader, setShowHeader] = useState<boolean>(false);\n  const [toggleMenu, setToggleMenu] = useState(false);\n  const [activeLink, setActiveLink] = useState(\"discover\");\n  const [notificationData, setNotificationData] = useState<any>({\n    count: 0,\n    list: [],\n    unreadCount: 0,\n  });\n  const [notificationPgNo, setNotificationPgNo] = useState<number>(1);\n  const [hasMoreNotif, setHasMoreNotif] = useState<boolean>(true);\n  const [isIntercom, setIntercom] = useState(false);\n  const [startTour, setStartTour] = useState(false);\n  const [isFalse, setIsFalse] = useState(false);\n  const forceUpdate = useForceUpdate();\n  const [activeTarget, setActiveTarget] = useState(\"\");\n  const [logoutClicked, setLogoutClicked] = useState(false);\n  const [profileData, setProfileData] = useState(\"\");\n  const [unreadMessages, setUnreadMessages] = useState<Number>();\n\n  function useForceUpdate() {\n    const [value, setValue] = useState(0); // integer state\n\n    return () => setValue((value) => value + Math.random()); // update the state to force render\n  }\n\n  const onMessageListner = () => {\n    if (messaging) {\n      messaging.onMessage((payload: any) => {\n        console.log(\"hi#######%%%%%%%%%%\", payload);\n        console.log(\"firebase notification received inside header : \", payload);\n        const title = payload.data.title;\n        const options = {\n          body: payload.data.notificationText,\n        };\n        var notifications = new Notification(title, options);\n        notifications.onclick = function (event) {\n          console.log(\"event: \", event);\n          event.preventDefault(); // prevent the browser from focusing the Notification's tab\n          window.open(\"http://localhost:3000/active-jobs\", \"_self\");\n        };\n\n        setShowNotification(true, payload);\n        if (payload.data?.notificationType !== \"25\") {\n          setNotificationData((prevData: any) => {\n            let newPayLoad = { ...payload.data };\n            newPayLoad.read = 0;\n            let newPushList = [...prevData.list];\n            newPushList.unshift(newPayLoad);\n            return {\n              ...prevData,\n              unreadCount: prevData.unreadCount + 1,\n              list: newPushList,\n            };\n          });\n        }\n      });\n    }\n  };\n  const onUpdateofInbox = (res: any) => {\n    let unreadMessagesCount: any = 0;\n    res.map((item: any) => {\n      unreadMessagesCount = unreadMessagesCount + item.unreadMessages;\n    });\n    setUnreadMessages(unreadMessagesCount);\n  };\n  useEffect(() => {\n    getFirebaseInboxDataForUnreadMsgCount(onUpdateofInbox);\n  });\n\n  const callNotificationList = async (\n    resetUnreadNotif?: boolean,\n    isInit?: boolean\n  ) => {\n    if (\n      notificationData.list?.length > 0 &&\n      notificationData.list?.length > notificationData?.count\n    ) {\n      setHasMoreNotif(false);\n      return;\n    }\n    const res1 = await getNotificationList(\n      resetUnreadNotif ? 1 : notificationPgNo,\n      resetUnreadNotif && isInit ? false : resetUnreadNotif ? true : false\n    );\n    if (res1.success) {\n      const result = res1.data?.result;\n      if (result?.list?.length < 10) {\n        setHasMoreNotif(false);\n      }\n      const notifList: any =\n        resetUnreadNotif || isInit\n          ? result?.list\n          : [...notificationData.list, ...result?.list];\n\n      setNotificationData((prevData: any) => ({\n        ...prevData,\n        count: result?.count,\n        list: notifList,\n        unreadCount: result?.unreadCount,\n      }));\n      if (resetUnreadNotif) {\n        handleClose(\"notification\");\n        setNotificationPgNo(2);\n      } else {\n        setNotificationPgNo(notificationPgNo + 1);\n      }\n      if (props.recallHeaderNotif) {\n        props.recallHeaderNotification(false);\n      }\n    }\n  };\n  useEffect(() => {\n    onMessageListner();\n    setActiveLink(\"discover\");\n    setUserType(storageService.getItem(\"userType\"));\n    callOnPathChange();\n\n    const pushNotifId = new URLSearchParams(props.location?.search)?.get(\n      \"pushNotifId\"\n    );\n    if (pushNotifId) {\n      (async () => {\n        const res: any = await markNotifAsRead({ notificationId: pushNotifId });\n        if (res.success) {\n          callNotificationList(true, true);\n        }\n      })();\n    }\n  }, []);\n\n  const callOnPathChange = () => {\n    if (\n      userType &&\n      !DISABLE_HEADER.includes(pathname) &&\n      pathname !== \"guest-user\"\n    ) {\n      callNotificationList(true, true);\n      if (userType === 1) {\n        if (\n          !profileData ||\n          (profileData && !_.isEqual(props.tradieProfileData, profileData))\n        ) {\n          props.callTradieProfileData();\n        }\n      } else if (userType === 2) {\n        if (\n          !profileData ||\n          (profileData && !_.isEqual(props.builderProfile, profileData))\n        ) {\n          props.getProfileBuilder();\n        }\n      }\n    }\n    if (DISABLE_HEADER.includes(pathname)) {\n      setShowHeader(false);\n    } else {\n      setShowHeader(true);\n    }\n    setUserType(storageService.getItem(\"userType\"));\n    if (props.tradeListData?.length === 0) {\n      props.callTradeList();\n    }\n  };\n\n  useEffect(() => {\n    if (\n      props.tradieProfileData &&\n      Object.keys(props.tradieProfileData)?.length\n    ) {\n      setProfileData(props.tradieProfileData);\n    }\n    if (props.builderProfile && Object.keys(props.builderProfile)?.length) {\n      setProfileData(props.builderProfile);\n    }\n  }, [props.tradieProfileData, props.builderProfile]);\n\n  useEffect(() => {\n    if (\n      props?.builderProfile &&\n      Object.keys(props?.builderProfile).length &&\n      !isIntercom\n    ) {\n      setIntercom(true);\n      setHidden();\n    }\n    if (\n      props?.tradieProfileData &&\n      Object.keys(props?.tradieProfileData).length &&\n      !isIntercom\n    ) {\n      setIntercom(true);\n      setHidden();\n    }\n  }, [props]);\n\n  const setHidden = () => {\n    let data: any = storageService.getItem(\"userInfo\");\n    if (data) {\n      if (!Object.values(data).includes([\"\"])) {\n        if (window_.Intercom) {\n          // window_.Intercom('shutdown');\n          window_.Intercom(\"update\", {\n            app_id: \"tvbm4bhr\",\n            name: data.userName,\n            email: data.email,\n            user_id: data._id,\n          });\n        }\n      } else {\n        forceUpdate();\n        setIsFalse(true);\n        callOnPathChange();\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (pathname === \"/login\") {\n      // window_.Intercom('hide');\n    }\n    if (pathname === \"/\") {\n      setActiveLink(\"discover\");\n      setHidden();\n      if (props?.location?.state?.path === \"/signup\") {\n        setStartTour(true);\n        props.history.replace(\"/\");\n      }\n    }\n    if (\n      [\n        \"/jobs\",\n        \"/active-jobs\",\n        \"/applied-jobs\",\n        \"/past-jobs\",\n        \"/new-jobs\",\n        \"/approved-milestones\",\n        \"/mark-milestone\",\n        \"/review-builder\",\n      ].includes(pathname)\n    ) {\n      setActiveLink(\"jobs\");\n      setHidden();\n    }\n    if (pathname === \"/post-new-job\") {\n      setActiveLink(\"post\");\n      setHidden();\n    }\n    if (pathname === \"/chat\") {\n      setActiveLink(\"chat\");\n      setHidden();\n    }\n    if (\n      [\n        \"/builder-info\",\n        \"/saved-tradespeople\",\n        \"/search-tradie-results\",\n      ].includes(pathname)\n    ) {\n      setHidden();\n    }\n  }, [pathname]);\n\n  useEffect(() => {\n    callOnPathChange();\n  }, [pathname, userType, isFalse]);\n\n  useEffect(() => {\n    if (props.recallHeaderNotif) {\n      callOnPathChange();\n    }\n  }, [props.recallHeaderNotif]);\n\n  useEffect(() => {\n    if (startTour) {\n      document.body.classList.add(\"no-scroll\");\n    } else {\n      document.body.classList.remove(\"no-scroll\");\n    }\n  }, [startTour]);\n\n  const handleClick = (event: any, type: string) => {\n    if (type === \"notification\") {\n      setAnchorElNotif(event.currentTarget);\n    } else {\n      setAnchorEl(event.currentTarget);\n    }\n  };\n\n  const handleClose = (type: string) => {\n    if (type === \"notification\") {\n      setAnchorElNotif(null);\n    } else {\n      setAnchorEl(null);\n    }\n  };\n\n  const logoutHandler = async () => {\n    setLogoutClicked(false);\n    setLoading(true);\n    const response = await fetch(\n      urlFor(\n        `${Urls.logout}?deviceId=${\n          storageService.getItem(\"userInfo\")?.deviceId\n        }`\n      ),\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: storageService.getItem(\"jwtToken\"),\n          timezone: moment.tz.guess(),\n        },\n      }\n    );\n    const res = await response.json();\n    setLoading(false);\n    if (res.status_code === 200) {\n      moengage.moE_SendEvent(MoEConstants.LOG_OUT, {\n        success_status: true,\n        current_page: pathname,\n      });\n      mixPanel.mixP_SendEvent(MoEConstants.LOG_OUT, {\n        success_status: true,\n        current_page: pathname,\n      });\n      signOut();\n      deleteToken();\n      moengage.moE_LogoutEvent();\n    }\n    dispatch({ type: \"USER_LOGGED_OUT\" });\n    storageService.clearAll();\n    history.push(\"/login\");\n  };\n\n  const postClicked = () => {\n    setToggleMenu(false);\n    setActiveLink(\"post\");\n    history.push(\"/post-new-job\");\n  };\n\n  const chatClicked = () => {\n    setToggleMenu(false);\n    if (userType === 1 || userType === 2) {\n      setActiveLink(\"chat\");\n      history.push(\"/chat\");\n    }\n  };\n\n  const jobClick = () => {\n    setToggleMenu(false);\n    if (userType === 1) {\n      setActiveLink(\"jobs\");\n      history.push(\"/active-jobs\");\n    } else if (userType === 2) {\n      setActiveLink(\"jobs\");\n      history.push(\"/jobs\");\n    }\n  };\n\n  const renderByType = ({ name }: any) => {\n    if (userType === 1 || userType === 2) {\n      return profileData?.[name];\n    }\n  };\n\n  const handleCallback = (state: any) => {\n    const {\n      action,\n      step: { target },\n    } = state;\n    const width =\n      window.innerWidth ||\n      document.documentElement.clientWidth ||\n      document.body.clientWidth;\n\n    setActiveTarget(target);\n\n    if (action === \"reset\") {\n      setStartTour(false);\n    } else if (action === \"start\" && width <= 650) {\n      setToggleMenu(true);\n    }\n\n    if (target === \".tour-profile\" && toggleMenu) {\n      setToggleMenu(false);\n    }\n  };\n\n  const tradieTour = [\n    {\n      target: \".tour-discover a\",\n      content: `Hi ${renderByType({\n        name: \"userName\",\n      })}, here is your go-to for finding new jobs.`,\n      disableBeacon: true,\n    },\n    {\n      target: \".tour-jobs a\",\n      content:\n        \"Here you can find all your active jobs and keep on top of milestones!\",\n    },\n    {\n      target: \".tour-chat a\",\n      content: \"Chat with builders about job requirements\",\n    },\n    {\n      target: \".tour-profile\",\n      content: \"Manage your profile and settings\",\n    },\n    {\n      target: \".tour-notifications\",\n      content: \"Check notifications and stay on the front foot\",\n    },\n  ];\n\n  const builderTour = [\n    {\n      target: \".tour-discover a\",\n      content: `Hi ${renderByType({\n        name: \"userName\",\n      })}, here is your go-to for finding tradespeople.`,\n      disableBeacon: true,\n    },\n    {\n      target: \".tour-jobs a\",\n      content:\n        \"Here you can find all your active jobs and keep on top of milestones!\",\n    },\n    {\n      target: \".tour-post a\",\n      content: \"Here you can post a new job\",\n    },\n    {\n      target: \".tour-chat a\",\n      content: \"Your chats for job and tradespeople are here\",\n    },\n    {\n      target: \".tour-profile\",\n      content: \"Manage your profile and settings\",\n    },\n    {\n      target: \".tour-notifications\",\n      content: \"Check notifications and stay on the front foot\",\n    },\n  ];\n\n  return (\n    <>\n      <Joyride\n        run={startTour}\n        showProgress\n        continuous\n        showSkipButton\n        scrollToFirstStep\n        spotlightPadding={activeTarget === \".tour-notifications\" ? 12 : 0}\n        disableOverlayClose\n        disableCloseOnEsc\n        steps={userType === 1 ? tradieTour : builderTour}\n        styles={{\n          options: {\n            zIndex: 2000,\n          },\n          overlay: {\n            background: \"#00000099\",\n          },\n        }}\n        floaterProps={{\n          hideArrow: true,\n        }}\n        tooltipComponent={({\n          continuous,\n          index,\n          step,\n          backProps,\n          skipProps,\n          primaryProps,\n          tooltipProps,\n          isLastStep,\n          size,\n        }) => (\n          <div className=\"tour-tooltip\" {...tooltipProps}>\n            <div className=\"tour-tooltip-content\">{step.content}</div>\n            <div className=\"tour-tooltip-footer\">\n              <button className=\"\" {...skipProps} title=\"Skip\">\n                <img src={skipBtn} alt=\"skip\" className=\"skip\" />\n              </button>\n              {index > 0 && (\n                <button className=\"\" {...backProps} title=\"Back\">\n                  <img src={backBtn} alt=\"back\" />\n                </button>\n              )}\n              {continuous && (\n                // <button className=\"\" {...primaryProps} title={isLastStep ? 'Done' : 'Next'}>\n                //     {isLastStep ? 'Done' : 'Next'} {step.showProgress && `(${index + 1}/${size})`}\n                // </button>\n\n                <button\n                  className=\"\"\n                  {...primaryProps}\n                  title={isLastStep ? \"Done\" : \"Next\"}\n                >\n                  {isLastStep ? (\n                    <img src={doneBtn} alt=\"done\" />\n                  ) : (\n                    <img src={nextBtn} alt=\"next\" />\n                  )}\n                  <span>{step.showProgress && `(${index + 1}/${size})`}</span>\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n        callback={handleCallback}\n      />\n      {showHeader && (\n        <header id=\"header\">\n          <div className=\"custom_container\">\n            <div className=\"flex_headrow\">\n              <div className=\"brand_wrap\">\n                <figure>\n                  <img\n                    onClick={() => {\n                      if (userType === 0) {\n                        return;\n                      }\n                      if (pathname === \"/\") {\n                        window.scrollTo({\n                          top: 0,\n                          left: 0,\n                          behavior: \"smooth\",\n                        });\n                        return;\n                      }\n                      setActiveLink(\"discover\");\n                      setToggleMenu(false);\n                      props.history.push(\"/\");\n                    }}\n                    src={colorLogo}\n                    alt=\"logo\"\n                  />\n                </figure>\n              </div>\n              <ul className={`center_nav ${toggleMenu ? \"active\" : \"\"}`}>\n                <li className=\"tour-discover\">\n                  <a\n                    onClick={() => {\n                      if (userType === 1 || userType === 2) {\n                        setActiveLink(\"discover\");\n                        history.push(\"/\");\n                      } else {\n                        return;\n                      }\n                    }}\n                    className={\n                      startTour\n                        ? activeTarget === \".tour-discover a\"\n                          ? \"active\"\n                          : \"\"\n                        : activeLink === \"discover\"\n                        ? \"active\"\n                        : \"\"\n                    }\n                  >\n                    {\"Discover\"}\n                  </a>\n                </li>\n                <li className=\"tour-jobs\">\n                  <a\n                    className={\n                      startTour\n                        ? activeTarget === \".tour-jobs a\"\n                          ? \"active\"\n                          : \"\"\n                        : activeLink === \"jobs\"\n                        ? \"active\"\n                        : \"\"\n                    }\n                    onClick={jobClick}\n                  >\n                    {\"Jobs\"}\n                  </a>\n                </li>\n\n                {userType === 2 && (\n                  <li className=\"tour-post\">\n                    <a\n                      className={\n                        startTour\n                          ? activeTarget === \".tour-post a\"\n                            ? \"active\"\n                            : \"\"\n                          : activeLink === \"post\"\n                          ? \"active\"\n                          : \"\"\n                      }\n                      onClick={postClicked}\n                    >\n                      {\"Post\"}\n                    </a>\n                  </li>\n                )}\n                <li className=\"tour-chat\">\n                  <a\n                    className={\n                      startTour\n                        ? activeTarget === \".tour-chat a\"\n                          ? \"active\"\n                          : \"\"\n                        : activeLink === \"chat\"\n                        ? \"active\"\n                        : \"\"\n                    }\n                    onClick={chatClicked}\n                  >\n                    {\"Chat\"}\n                    {unreadMessages !== 0 ? (\n                      <span\n                        className={`${\n                          unreadMessages ? \"unreadCountBadge\" : \"\"\n                        }`}\n                      >\n                        {unreadMessages}\n                      </span>\n                    ) : (\n                      \"\"\n                    )}\n                  </a>\n                </li>\n              </ul>\n              <ul className=\"side_nav\">\n                <li className=\"mob_nav\">\n                  <img\n                    src={menu}\n                    alt=\"menu\"\n                    onClick={() => {\n                      setToggleMenu(!toggleMenu);\n                    }}\n                  />\n                </li>\n                <div className=\"profile_notification\">\n                  {storageService.getItem(\"jwtToken\") && (\n                    <div\n                      className=\"notification_bell\"\n                      onClick={(event) => handleClick(event, \"notification\")}\n                    >\n                      <figure className=\"bell tour-notifications\">\n                        <span\n                          className={`${\n                            notificationData.unreadCount ? \"badge\" : \"\"\n                          }`}\n                        >\n                          {notificationData.unreadCount || \"\"}\n                        </span>\n                        <img src={bell} alt=\"notify\" />\n                      </figure>\n                    </div>\n                  )}\n                  <div className=\"user_profile\">\n                    {storageService.getItem(\"jwtToken\") && (\n                      <figure\n                        className=\"tour-profile\"\n                        aria-controls=\"simple-menu\"\n                        aria-haspopup=\"true\"\n                        onClick={(event) => handleClick(event, \"profile\")}\n                      >\n                        <img\n                          src={renderByType({ name: \"userImage\" }) || dummy}\n                          alt=\"profile-img\"\n                        />\n                      </figure>\n                    )}\n\n                    <Menu\n                      className=\"sub_menu\"\n                      id=\"simple-menu\"\n                      anchorEl={anchorEl}\n                      keepMounted\n                      open={Boolean(anchorEl)}\n                      onClose={() => handleClose(\"profile\")}\n                      elevation={0}\n                      getContentAnchorEl={null}\n                      anchorOrigin={{\n                        vertical: \"bottom\",\n                        horizontal: \"center\",\n                      }}\n                      transformOrigin={{\n                        vertical: \"top\",\n                        horizontal: \"right\",\n                      }}\n                    >\n                      <span className=\"sub_title\">\n                        {renderByType({ name: \"userName\" })}\n                      </span>\n\n                      <MenuItem\n                        onClick={() => {\n                          handleClose(\"pofile\");\n                          history.push(\n                            `/${\n                              props.userType === 1 ? \"tradie\" : \"builder\"\n                            }-info?${\n                              props.userType === 1 ? \"trade\" : \"builder\"\n                            }Id=${renderByType({ name: \"userId\" })}`\n                          );\n                        }}\n                      >\n                        <span className=\"setting_icon\">\n                          <img src={profile} alt=\"profile\" />\n                          {\"My Profile\"}\n                        </span>\n                      </MenuItem>\n                      {[1, 2].includes(props.userType) && (\n                        <MenuItem\n                          onClick={() => {\n                            handleClose(\"profile\");\n                            history.push(\"/payment-history\");\n                          }}\n                        >\n                          <span className=\"setting_icon\">\n                            <img src={revenue} alt=\"revenue\" />\n                            {props.userType === 1\n                              ? \"Payment history\"\n                              : \"Transaction history\"}\n                          </span>\n                        </MenuItem>\n                      )}\n                      {[1, 2].includes(props.userType) && (\n                        <MenuItem\n                          onClick={() => {\n                            handleClose(\"profile\");\n                            history.push(\n                              props.userType === 1\n                                ? \"/saved-jobs\"\n                                : \"/saved-tradespeople\"\n                            );\n                          }}\n                        >\n                          <span className=\"setting_icon\">\n                            <img src={savedJobs} alt=\"savedJobs\" />\n                            {`Saved ${\n                              props.userType === 1 ? \"jobs\" : \"tradespeople\"\n                            }`}\n                          </span>\n                        </MenuItem>\n                      )}\n                      {[1, 2].includes(props.userType) && (\n                        <MenuItem\n                          onClick={() => {\n                            handleClose(\"profile\");\n                            setStartTour(true);\n                          }}\n                        >\n                          <span className=\"setting_icon\">\n                            <img src={guide} alt=\"guide\" />\n                            {\"App Guide\"}\n                          </span>\n                        </MenuItem>\n                      )}\n                      <MenuItem\n                        onClick={() => {\n                          handleClose(\"profile\");\n                          setLogoutClicked(true);\n                        }}\n                      >\n                        <span className=\"setting_icon logout\">Logout</span>\n                      </MenuItem>\n                    </Menu>\n\n                    {/* logout popup */}\n                    <Modal\n                      className=\"custom_modal\"\n                      open={logoutClicked}\n                      onClose={() => setLogoutClicked(false)}\n                      aria-labelledby=\"simple-modal-title\"\n                      aria-describedby=\"simple-modal-description\"\n                    >\n                      <div\n                        className=\"custom_wh confirmation\"\n                        data-aos=\"zoom-in\"\n                        data-aos-delay=\"30\"\n                        data-aos-duration=\"1000\"\n                      >\n                        <div className=\"heading\">\n                          <span className=\"xs_sub_title\">{`Logout Confirmation`}</span>\n                          <button\n                            className=\"close_btn\"\n                            onClick={() => setLogoutClicked(false)}\n                          >\n                            <img src={cancel} alt=\"cancel\" />\n                          </button>\n                        </div>\n                        <div className=\"modal_message\">\n                          <p>{`Are you sure you want to logout?`}</p>\n                        </div>\n                        <div className=\"dialog_actions\">\n                          <button\n                            className=\"fill_btn btn-effect\"\n                            onClick={logoutHandler}\n                          >\n                            Yes\n                          </button>\n                          <button\n                            className=\"fill_grey_btn btn-effect\"\n                            onClick={() => setLogoutClicked(false)}\n                          >\n                            No\n                          </button>\n                        </div>\n                      </div>\n                    </Modal>\n\n                    {/* Notification */}\n                    <Menu\n                      className=\"sub_menu notifications\"\n                      id=\"simple-menu\"\n                      anchorEl={anchorElNotif}\n                      keepMounted\n                      open={Boolean(anchorElNotif)}\n                      onClose={() => handleClose(\"notification\")}\n                      elevation={0}\n                      getContentAnchorEl={null}\n                      anchorOrigin={{\n                        vertical: \"bottom\",\n                        horizontal: \"center\",\n                      }}\n                      transformOrigin={{\n                        vertical: \"top\",\n                        horizontal: \"right\",\n                      }}\n                    >\n                      <div>\n                        <span className=\"sub_title\">Notifications</span>\n                        <a\n                          href=\"javascript:void(0)\"\n                          className=\"link mark_all\"\n                          onClick={() => {\n                            if (notificationData.unreadCount === 0) {\n                              handleClose(\"notification\");\n                              return;\n                            }\n                            callNotificationList(true);\n                          }}\n                        >\n                          Mark all as read\n                        </a>\n                      </div>\n\n                      {notificationData.list?.length > 0 &&\n                        notificationData.list.map((item: any) => (\n                          <MenuItem\n                            className={`${item.read ? \"\" : \"unread\"}`}\n                            onClick={async () => {\n                              handleClose(\"notification\");\n                              const url1: string = onNotificationClick(item);\n                              const url2: string =\n                                history.location?.pathname +\n                                history.location?.search;\n                              if (item.read === 0) {\n                                const res: any =\n                                  item?.notificationType === 13 ||\n                                  (url1 === url2 &&\n                                    item?.notificationType === 9)\n                                    ? await markNotifAsRead({\n                                        notificationId: item?._id,\n                                      })\n                                    : markNotifAsRead({\n                                        notificationId: item?._id,\n                                      });\n                                if (\n                                  item?.notificationType === 13 &&\n                                  res?.success\n                                ) {\n                                  callNotificationList(true, true);\n                                }\n                              }\n                              if (\n                                (url1 === url2 && item.read === 0) ||\n                                (url1 === url2 && item?.notificationType == 9)\n                              ) {\n                                window.location?.reload();\n                                return;\n                              }\n                              props.history.push(url1);\n                            }}\n                          >\n                            <div className=\"notif\">\n                              <figure className=\"not_img\">\n                                <img src={item?.image || dummy} alt=\"img\" />\n                                {/* <span className=\"dot\"></span> */}\n                                <span\n                                  className={`${item.read ? \"\" : \"dot\"}`}\n                                ></span>\n                              </figure>\n                              <div className=\"info\">\n                                {/* <span className=\"who line-1\">{item.title}</span> */}\n                                <span title={item.title} className=\"who line-1\">\n                                  {item.title}\n                                </span>\n                                <span\n                                  title={item.notificationText}\n                                  className=\"line-1\"\n                                >\n                                  {item.notificationText}\n                                </span>\n                                {/* <span className=\"see\">See the message</span> */}\n                              </div>\n                              <span className=\"time\">\n                                {formatNotificationTime(item?.updatedAt, \"day\")}\n                              </span>\n                            </div>\n                          </MenuItem>\n                        ))}\n                      {hasMoreNotif && notificationData.list?.length > 0 && (\n                        <div\n                          className=\"more_notif\"\n                          onClick={() => callNotificationList()}\n                        >\n                          <a className=\"link\">View more</a>\n                        </div>\n                      )}\n\n                      {notificationData?.list?.length === 0 && (\n                        <div className=\"no_notification\">\n                          <figure>\n                            <img src={noNotification} alt=\"no-notifications\" />\n                          </figure>\n                          <span>No Notifications</span>\n                        </div>\n\n                        // <div className=\"no_record\">\n                        //   <figure>\n                        //     <figure className=\"no_img\">\n                        //       <img src={notification} alt=\"data not found\" />\n                        //     </figure>\n                        //   </figure>\n\n                        //   <span className=\"empty_screen_text\">\n                        //     You don't have any notification yet.\n                        //   </span>\n                        //   <span className=\"notification_subtext\">\n                        //     Explore our local network\n                        //   </span>\n                        //   <button\n                        //     className=\"empty_screen_button\"\n                        //     onClick={() => history.push(\"/\")}\n                        //   >\n                        //     Search tradespeople\n                        //   </button>\n                        // </div>\n                      )}\n                    </Menu>\n                    {/* Notification close */}\n                  </div>\n                </div>\n                {!storageService.getItem(\"jwtToken\") && (\n                  <li>\n                    <a\n                      className=\"active\"\n                      onClick={() => setShowModal(!showModal)}\n                    >\n                      {\"Log in\"}\n                    </a>\n                  </li>\n                )}\n                <AuthModal\n                  showModal={showModal}\n                  setShowModal={setShowModal}\n                  history={props.history}\n                  firstTimePopup\n                >\n                  {props.children}\n                </AuthModal>\n              </ul>\n            </div>\n          </div>\n        </header>\n      )}\n    </>\n  );\n};\n\nexport default withRouter(Header);\n"]},"metadata":{},"sourceType":"module"}