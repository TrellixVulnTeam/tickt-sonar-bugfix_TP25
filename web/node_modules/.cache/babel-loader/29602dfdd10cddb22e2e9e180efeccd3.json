{"ast":null,"code":"import _toConsumableArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import Switch from'@material-ui/core/Switch';import storageService from'../../../utils/storageService';import{updateChatUserDetails}from'../../../services/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NOTIFICATION_CATEGORY={//for api reference\nCHAT:1,PAYMENT:2,ADMIN_UPDATE:3,MILESTONE_UPDATE:4,REVIEW:5,VOUCH:6,CHANGE_REQUEST:7,CANCELATION:8,DISPUTE:9,QUESTION:10};var USER_TRADIE_NOTIF=[{value:'Chat',number:1},{value:'Payment',number:2},{value:'New updates from admin',number:3},{value:'Milestone updates',number:4},{value:'Job review updates',number:5},{value:'Vouches updates',number:6},{value:'Change request updates',number:7},{value:'Cancelation updates',number:8},{value:'Dispute updates',number:9},{value:'Job answers updates',number:10}];var USER_BUILDER_NOTIF=[{value:'Chat',number:1},{value:'Payment',number:2},{value:'New updates from admin',number:3},{value:'Milestone updates',number:4},{value:'Job review updates',number:5},{value:'Change request updates',number:7},{value:'Cancelation updates',number:8},{value:'Dispute updates',number:9},{value:'Job queries updates',number:10}];var Settings=function Settings(_ref){var getSettings=_ref.getSettings,updateSettings=_ref.updateSettings,settings=_ref.settings;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),pushCategory=_useState2[0],setPushCategory=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),updatedSettingNo=_useState4[0],setUpdatedSettingNo=_useState4[1];useEffect(function(){getSettings();},[getSettings]);useEffect(function(){if(Array.isArray(settings===null||settings===void 0?void 0:settings.pushNotificationCategory)){setPushCategory(settings===null||settings===void 0?void 0:settings.pushNotificationCategory);}},[settings]);useEffect(function(){if(pushCategory.length>0&&updatedSettingNo){var val=pushCategory.includes(1)?true:false;updateChatUserDetails('isNotification',val);setUpdatedSettingNo(0);}},[pushCategory]);var handleChange=function handleChange(val,isValExist){if(val===1)setUpdatedSettingNo(val);var updatedPushNotif;if(isValExist){updatedPushNotif=_toConsumableArray(pushCategory).filter(function(i){return i!==val;});}else{var category=_toConsumableArray(pushCategory);category.push(val);updatedPushNotif=category;}updateSettings({pushNotificationCategory:updatedPushNotif});};var PUSH_NOTIF_ARRAY=storageService.getItem('userType')===1?USER_TRADIE_NOTIF:USER_BUILDER_NOTIF;return/*#__PURE__*/_jsx(\"div\",{className:\"flex_row p_settings\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_7\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title mb50\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inner_title\",children:\"Push Notifications\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info_note\",children:\"Receive notifications from users, including notifications about new jobs\"})]}),PUSH_NOTIF_ARRAY.map(function(_ref2){var value=_ref2.value,number=_ref2.number;var isValExist=pushCategory===null||pushCategory===void 0?void 0:pushCategory.includes(number);return/*#__PURE__*/_jsxs(\"div\",{className:\"f_spacebw form_field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"form_label\",children:value}),/*#__PURE__*/_jsx(\"div\",{className:\"toggle_btn\",children:/*#__PURE__*/_jsx(Switch,{checked:isValExist,onClick:function onClick(){return handleChange(number,isValExist);},inputProps:{'aria-label':'secondary checkbox'}})})]});})]})});};export default Settings;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieEditProfile/components/settings.tsx"],"names":["useEffect","useState","Switch","storageService","updateChatUserDetails","NOTIFICATION_CATEGORY","CHAT","PAYMENT","ADMIN_UPDATE","MILESTONE_UPDATE","REVIEW","VOUCH","CHANGE_REQUEST","CANCELATION","DISPUTE","QUESTION","USER_TRADIE_NOTIF","value","number","USER_BUILDER_NOTIF","Settings","getSettings","updateSettings","settings","pushCategory","setPushCategory","updatedSettingNo","setUpdatedSettingNo","Array","isArray","pushNotificationCategory","length","val","includes","handleChange","isValExist","updatedPushNotif","filter","i","category","push","PUSH_NOTIF_ARRAY","getItem","map"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport Switch from '@material-ui/core/Switch';\nimport storageService from '../../../utils/storageService';\nimport { updateChatUserDetails } from '../../../services/firebase';\ninterface Setting {\n  pushNotificationCategory: []\n}\n\ninterface Props {\n  getSettings: () => void;\n  updateSettings: (settings: any) => void;\n  settings: Setting;\n}\n\nconst NOTIFICATION_CATEGORY = { //for api reference\n  CHAT: 1,\n  PAYMENT: 2,\n  ADMIN_UPDATE: 3,\n  MILESTONE_UPDATE: 4,\n  REVIEW: 5,\n  VOUCH: 6,\n  CHANGE_REQUEST: 7,\n  CANCELATION: 8,\n  DISPUTE: 9,\n  QUESTION: 10\n}\n\nconst USER_TRADIE_NOTIF = [\n  { value: 'Chat', number: 1 },\n  { value: 'Payment', number: 2 },\n  { value: 'New updates from admin', number: 3 },\n  { value: 'Milestone updates', number: 4 },\n  { value: 'Job review updates', number: 5 },\n  { value: 'Vouches updates', number: 6 },\n  { value: 'Change request updates', number: 7 },\n  { value: 'Cancelation updates', number: 8 },\n  { value: 'Dispute updates', number: 9 },\n  { value: 'Job answers updates', number: 10 }\n];\nconst USER_BUILDER_NOTIF = [\n  { value: 'Chat', number: 1 },\n  { value: 'Payment', number: 2 },\n  { value: 'New updates from admin', number: 3 },\n  { value: 'Milestone updates', number: 4 },\n  { value: 'Job review updates', number: 5 },\n  { value: 'Change request updates', number: 7 },\n  { value: 'Cancelation updates', number: 8 },\n  { value: 'Dispute updates', number: 9 },\n  { value: 'Job queries updates', number: 10 }\n];\n\nconst Settings = ({ getSettings, updateSettings, settings }: Props) => {\n  const [pushCategory, setPushCategory] = useState<Array<number>>([]);\n  const [updatedSettingNo, setUpdatedSettingNo] = useState<number>(0);\n\n  useEffect(() => {\n    getSettings();\n  }, [getSettings]);\n\n  useEffect(() => {\n    if (Array.isArray(settings?.pushNotificationCategory)) {\n      setPushCategory(settings?.pushNotificationCategory);\n    }\n  }, [settings]);\n\n  useEffect(() => {\n    if (pushCategory.length > 0 && updatedSettingNo) {\n      const val: boolean = pushCategory.includes(1) ? true : false;\n      updateChatUserDetails('isNotification', val);\n      setUpdatedSettingNo(0);\n    }\n  }, [pushCategory]);\n\n  const handleChange = (val: number, isValExist: boolean) => {\n    if (val === 1) setUpdatedSettingNo(val);\n    let updatedPushNotif: any;\n    if (isValExist) {\n      updatedPushNotif = [...pushCategory].filter(i => i !== val);\n    } else {\n      const category = [...pushCategory];\n      category.push(val);\n      updatedPushNotif = category;\n    }\n    updateSettings({ pushNotificationCategory: updatedPushNotif });\n  };\n\n  const PUSH_NOTIF_ARRAY = storageService.getItem('userType') === 1 ? USER_TRADIE_NOTIF : USER_BUILDER_NOTIF;\n\n  return (\n    <div className=\"flex_row p_settings\">\n      <div className=\"flex_col_sm_7\">\n        <span className=\"sub_title mb50\">Settings</span>\n        <div className=\"form_field\">\n          <span className=\"inner_title\">Push Notifications</span>\n          <span className=\"info_note\">\n            Receive notifications from users, including notifications about new jobs\n          </span>\n        </div>\n        {PUSH_NOTIF_ARRAY.map(({ value, number }: { value: string, number: number }) => {\n          const isValExist = pushCategory?.includes(number);\n          return (\n            < div className=\"f_spacebw form_field\">\n              <span className=\"form_label\">{value}</span>\n              <div className=\"toggle_btn\">\n                <Switch\n                  checked={isValExist}\n                  onClick={() => handleChange(number, isValExist)}\n                  inputProps={{ 'aria-label': 'secondary checkbox' }}\n                />\n              </div>\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}