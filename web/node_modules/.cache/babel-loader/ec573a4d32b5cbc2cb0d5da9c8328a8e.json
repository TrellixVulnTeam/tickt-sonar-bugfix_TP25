{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/jobMilestones.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react'; // @ts-ignore\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport moment from 'moment';\nimport { setShowToast } from '../../../redux/common/actions';\nimport milestonesPlaceholder from '../../../assets/images/Job milestones-preview.png';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { useLocation } from \"react-router-dom\";\nimport { renderTimeWithFormat } from '../../../utils/common'; // please arrange milestone date wise.\n// milestone start date should be doffent from another can not be.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst JobMilestones = ({\n  data,\n  stepCompleted,\n  newMileStoneScreen,\n  editDetailPage,\n  editMileStone,\n  editMilestoneTiming,\n  handleStepJustUpdate,\n  handleCombineMileStones,\n  removeMilestoneByIndex,\n  handleStepForward,\n  updateMileStoneIndex,\n  updateMileStoneTimings,\n  milestones,\n  handleStepComplete,\n  handleStepBack\n}) => {\n  _s();\n\n  const [localMilestones, setLocalMilestones] = useState([]);\n  const [editItem, setEditItems] = useState({});\n  const [open, setOpen] = React.useState(false);\n  const [deleteItem, setDeleteItem] = React.useState(null);\n  const [sortedItems, setSortedItems] = React.useState([]);\n  let location = useLocation();\n  let jobId = null;\n\n  if (location.search) {\n    let urlParams = new URLSearchParams(location.search);\n  }\n\n  const handleClickOpen = id => {\n    setOpen(true);\n    setDeleteItem(id);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setDeleteItem(null);\n  };\n\n  const handleYes = () => {\n    removeMilestoneByIndex(deleteItem);\n    setOpen(false);\n    setDeleteItem(null);\n  };\n\n  useEffect(() => {\n    if (!(localMilestones === null || localMilestones === void 0 ? void 0 : localMilestones.length) !== (milestones === null || milestones === void 0 ? void 0 : milestones.length)) {\n      let filter_milestones = milestones.filter(item => Object.keys(item).length && item);\n      setLocalMilestones(filter_milestones); // set milestoner here!\n\n      updateMileStoneIndex(null);\n      updateMileStoneTimings(null);\n    }\n  }, [milestones, removeMilestoneByIndex]);\n  useEffect(() => {\n    console.log({\n      localMilestones\n    }, '---->');\n  }, [localMilestones]);\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n  };\n\n  const checkIfDatesValid = () => {\n    console.log({\n      data\n    });\n    let start_selection = moment(data === null || data === void 0 ? void 0 : data.from_date, 'YYYY-MM-DD').format('MM-DD-YYYY');\n    let end_selection = null;\n    let urlParams = null;\n\n    if (location.search) {\n      urlParams = new URLSearchParams(location.search);\n    }\n\n    if (moment(data === null || data === void 0 ? void 0 : data.to_date, 'YYYY-MM-DD').isValid()) {\n      if (!moment(data === null || data === void 0 ? void 0 : data.to_date, 'YYYY-MM-DD').isSame(moment(data === null || data === void 0 ? void 0 : data.from_date, 'YYYY-MM-DD'))) {\n        end_selection = moment(data === null || data === void 0 ? void 0 : data.to_date, 'YYYY-MM-DD').format('MM-DD-YYYY');\n      }\n    }\n\n    let item_find = false;\n    let filteredItem = localMilestones.filter(item => {\n      if (item.hasOwnProperty('from_date')) {\n        var _item$from_date;\n\n        if (!(item === null || item === void 0 ? void 0 : (_item$from_date = item.from_date) === null || _item$from_date === void 0 ? void 0 : _item$from_date.length) || (item === null || item === void 0 ? void 0 : item.from_date) !== \"Invalid date\") {\n          return item;\n        }\n      }\n    });\n    let not_lie_between = false;\n\n    if (filteredItem === null || filteredItem === void 0 ? void 0 : filteredItem.length) {\n      filteredItem.forEach(item_date => {\n        var _urlParams;\n\n        let start = moment(item_date.from_date, 'MM-DD-YYYY').isValid() ? item_date.from_date : null;\n        let end = moment(item_date.to_date, 'MM-DD-YYYY').isValid() ? item_date.to_date : null;\n\n        if (start && end) {\n          if (start_selection && end_selection) {\n            // if (moment(start_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY')) || moment(end_selection, 'MM-DD-YYYY').isBefore(moment(end, 'MM-DD-YYYY'))) {\n            if (moment(start_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY'))) {\n              item_find = true;\n            }\n          }\n\n          if (start_selection && !end_selection) {\n            if (moment(start_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY'))) {\n              item_find = true; // not_lie_between = true;\n            }\n          }\n        }\n\n        if (urlParams && ((_urlParams = urlParams) === null || _urlParams === void 0 ? void 0 : _urlParams.get('jobId'))) {\n          if (start_selection && end_selection && !end) {\n            if (moment(start, 'MM-DD-YYYY').isBefore(moment(start_selection, 'MM-DD-YYYY')) && moment(end_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY'))) {\n              item_find = true;\n            }\n          }\n        } else {\n          if (start_selection && end_selection && !end) {\n            // if (moment(start, 'MM-DD-YYYY').isSameOrAfter(moment(start_selection, 'MM-DD-YYYY')) && moment(start, 'MM-DD-YYYY').isSameOrBefore(moment(end_selection, 'MM-DD-YYYY'))) {\n            if (moment(start, 'MM-DD-YYYY').isSameOrAfter(moment(start_selection, 'MM-DD-YYYY'))) {\n              item_find = false;\n            } else {\n              item_find = true;\n            }\n          }\n        }\n      });\n    }\n\n    if (item_find) {\n      // if (not_lie_between) {\n      //     setShowToast(true, 'Milestones dates should be lie between the job details');\n      // } else {\n      setShowToast(true, 'Please check the milestone dates'); // }\n\n      return item_find;\n    }\n\n    return item_find;\n  };\n\n  const checkIfValidDates = item => {\n    let isfilter = localMilestones.filter(item_ => {\n      if (item_.hasOwnProperty('from_date')) {\n        var _item_$from_date;\n\n        if ((item_ === null || item_ === void 0 ? void 0 : item_.from_date) !== \"Invalid date\" || !(item_ === null || item_ === void 0 ? void 0 : (_item_$from_date = item_.from_date) === null || _item_$from_date === void 0 ? void 0 : _item_$from_date.length)) {\n          return item_;\n        }\n      }\n    });\n\n    if (!(isfilter === null || isfilter === void 0 ? void 0 : isfilter.length)) {\n      return true;\n    } else {\n      const newarr = isfilter.slice().sort((a, b) => {\n        return moment(a.from_date, 'MM-DD-YYYY').diff(moment(b.from_date, 'MM-DD-YYYY'));\n      });\n      let filteredItem = item.filter(item_reorder => {\n        if (item_reorder.hasOwnProperty('from_date')) {\n          var _item_reorder$from_da;\n\n          if ((item_reorder === null || item_reorder === void 0 ? void 0 : item_reorder.from_date) !== \"Invalid date\" || !(item_reorder === null || item_reorder === void 0 ? void 0 : (_item_reorder$from_da = item_reorder.from_date) === null || _item_reorder$from_da === void 0 ? void 0 : _item_reorder$from_da.length)) {\n            return item_reorder;\n          }\n        }\n      });\n      setSortedItems(newarr);\n      console.log({\n        newarr,\n        filteredItem\n      });\n      return JSON.stringify(newarr) === JSON.stringify(filteredItem);\n    }\n  };\n\n  const onDragEnd = result => {\n    const {\n      source,\n      destination\n    } = result; // dropped outside the list\n\n    if (!destination) {\n      return;\n    } // if (source.droppableId === destination.droppableId) {\n\n\n    const reOrderedMilestones = reorder(localMilestones, source.index, destination.index);\n    console.log({\n      reOrderedMilestones\n    });\n    setLocalMilestones(reOrderedMilestones);\n    handleCombineMileStones(reOrderedMilestones);\n    checkIfDatesValid();\n    checkIfValidDates(reOrderedMilestones);\n  };\n\n  const checkOnClick = (e, index) => {\n    let edit_item_clone = editItem;\n    edit_item_clone[index] = e.target.checked;\n    setEditItems(prev => ({ ...prev,\n      ...edit_item_clone\n    }));\n  };\n\n  const format = 'MM-DD-YYYY';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app_wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section_wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"custom_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Dialog, {\n            open: open,\n            onClose: handleClose,\n            \"aria-labelledby\": \"alert-dialog-title\",\n            \"aria-describedby\": \"alert-dialog-description\",\n            children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n              id: \"alert-dialog-title\",\n              children: \"Are you sure you want to delete the milestone ?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleYes,\n                color: \"primary\",\n                autoFocus: true,\n                children: 'Yes'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleClose,\n                color: \"primary\",\n                children: 'No'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form_field\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex_row f_reverse\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex_col_sm_7\",\n              children: [(editDetailPage === null || editDetailPage === void 0 ? void 0 : editDetailPage.currentScreen) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relate\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"back\",\n                  onClick: () => {\n                    handleStepForward(14);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"title\",\n                  children: \"Job milestones\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relate\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"back\",\n                  onClick: handleStepBack\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"title\",\n                  children: \"Job milestones\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"commn_para\",\n                children: 'Use milestones to itemise scope of works. You’ll be notified when each milestone has been completed.'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 29\n            }, this), (localMilestones === null || localMilestones === void 0 ? void 0 : localMilestones.length) ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => {\n                let checkIfItem = checkIfDatesValid();\n\n                if (!checkIfItem) {\n                  let check = checkIfValidDates(localMilestones);\n\n                  if (check) {\n                    handleCombineMileStones(localMilestones);\n                    handleStepForward(10);\n                  } else {\n                    setShowToast(true, \"Please arrange milestone date wise\");\n                  }\n                }\n              },\n              className: \"flex_col_sm_5 text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"link\",\n                children: \"Save as template\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 33\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex_row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex_col_sm_5\",\n            children: [/*#__PURE__*/_jsxDEV(DragDropContext, {\n              onDragEnd: onDragEnd,\n              children: /*#__PURE__*/_jsxDEV(Droppable, {\n                droppableId: \"milestones\",\n                children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"ul\", {\n                  ref: provided.innerRef,\n                  className: `milestones${snapshot.isDraggingOver ? ' dragging-over' : ''}`,\n                  children: [(localMilestones === null || localMilestones === void 0 ? void 0 : localMilestones.length) > 0 && localMilestones.map(({\n                    milestone_name,\n                    isPhotoevidence,\n                    recommended_hours,\n                    from_date,\n                    to_date\n                  }, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n                    draggableId: `${milestone_name}-${index}`,\n                    index: index,\n                    children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      ref: provided.innerRef,\n                      ...provided.draggableProps,\n                      ...provided.dragHandleProps,\n                      style: { ...provided.draggableProps.style\n                      },\n                      children: [editItem[index] ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"edit_delete\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          onClick: e => {\n                            e.stopPropagation();\n                            handleStepForward(15);\n                            updateMileStoneIndex(index);\n                          },\n                          className: \"edit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 325,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          onClick: e => {\n                            e.preventDefault();\n                            handleClickOpen(index); // removeMilestoneByIndex(index);\n                            // setEditItems({}); // too old comment\n                          },\n                          className: \"delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 333,\n                          columnNumber: 73\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 324,\n                        columnNumber: 69\n                      }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"checkbox_wrap agree_check\",\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          checked: editItem[index],\n                          onChange: e => {\n                            checkOnClick(e, index);\n                          },\n                          className: \"filter-type filled-in\",\n                          type: \"checkbox\",\n                          id: `milestone${index}`\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 345,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: `milestone${index}`,\n                          children: `${index + 1}. ${milestone_name}`\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 351,\n                          columnNumber: 69\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"info\",\n                          children: [isPhotoevidence ? /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: 'Photo evidence required'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 354,\n                            columnNumber: 77\n                          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 355,\n                            columnNumber: 79\n                          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: renderTimeWithFormat(from_date, to_date, format)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 356,\n                            columnNumber: 73\n                          }, this), recommended_hours && /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: [recommended_hours, ' hours']\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 363,\n                            columnNumber: 95\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 352,\n                          columnNumber: 69\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 344,\n                        columnNumber: 65\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 61\n                    }, this)\n                  }, `${index}-${milestone_name}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 53\n                  }, this)), provided.placeholder, (localMilestones === null || localMilestones === void 0 ? void 0 : localMilestones.length) === 0 && /*#__PURE__*/_jsxDEV(\"figure\", {\n                    className: \"placeholder_img\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: milestonesPlaceholder,\n                      alt: \"milestones-placeholder\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this), !(localMilestones === null || localMilestones === void 0 ? void 0 : localMilestones.length) ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form_field\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    handleStepForward(9);\n                  },\n                  className: \"fill_btn fill_grey_btn full_btn btn-effect\",\n                  children: 'Use template'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form_field\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"fill_btn full_btn btn-effect\",\n                  onClick: () => handleStepComplete({}),\n                  children: '+ Add milestone'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form_field\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"fill_btn full_btn btn-effect\",\n                  onClick: () => {\n                    if ((milestones === null || milestones === void 0 ? void 0 : milestones.length) === 1) {\n                      newMileStoneScreen(1);\n                    } else {\n                      let item = milestones[(milestones === null || milestones === void 0 ? void 0 : milestones.length) - 1];\n\n                      if (Object.keys(item).length) {\n                        var _item$milestone_name, _item$recommended_hou, _item$date_from;\n\n                        if (!(item === null || item === void 0 ? void 0 : (_item$milestone_name = item.milestone_name) === null || _item$milestone_name === void 0 ? void 0 : _item$milestone_name.length) && !(item === null || item === void 0 ? void 0 : (_item$recommended_hou = item.recommended_hours) === null || _item$recommended_hou === void 0 ? void 0 : _item$recommended_hou.length) && !(item === null || item === void 0 ? void 0 : (_item$date_from = item.date_from) === null || _item$date_from === void 0 ? void 0 : _item$date_from.length)) {\n                          console.log('Already have!');\n                        } else {\n                          newMileStoneScreen(milestones === null || milestones === void 0 ? void 0 : milestones.length);\n                        }\n                      }\n                    }\n\n                    handleStepComplete({});\n                  },\n                  children: '+ Add milestone'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form_field\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    let checkIfItem = checkIfDatesValid();\n                    console.log({\n                      checkIfItem\n                    });\n\n                    if (!checkIfItem) {\n                      let check = checkIfValidDates(localMilestones);\n                      console.log({\n                        check\n                      });\n\n                      if (check) {\n                        handleCombineMileStones(localMilestones);\n\n                        if (editDetailPage === null || editDetailPage === void 0 ? void 0 : editDetailPage.currentScreen) {\n                          handleStepForward(14);\n                        } else {\n                          handleStepForward(13);\n                        }\n                      } else {\n                        setShowToast(true, \"Please arrange milestone date wise\");\n                      }\n                    }\n                  },\n                  className: \"fill_btn fill_grey_btn full_btn btn-effect\",\n                  children: 'Continue'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 9\n  }, this);\n};\n\n_s(JobMilestones, \"2qczaSpaHLL43OZZm4lNS6N0kRw=\", false, function () {\n  return [useLocation];\n});\n\n_c = JobMilestones;\nexport default JobMilestones;\n\nvar _c;\n\n$RefreshReg$(_c, \"JobMilestones\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/jobMilestones.tsx"],"names":["React","useEffect","useState","DragDropContext","Droppable","Draggable","moment","setShowToast","milestonesPlaceholder","Button","Dialog","DialogActions","DialogTitle","useLocation","renderTimeWithFormat","JobMilestones","data","stepCompleted","newMileStoneScreen","editDetailPage","editMileStone","editMilestoneTiming","handleStepJustUpdate","handleCombineMileStones","removeMilestoneByIndex","handleStepForward","updateMileStoneIndex","updateMileStoneTimings","milestones","handleStepComplete","handleStepBack","localMilestones","setLocalMilestones","editItem","setEditItems","open","setOpen","deleteItem","setDeleteItem","sortedItems","setSortedItems","location","jobId","search","urlParams","URLSearchParams","handleClickOpen","id","handleClose","handleYes","length","filter_milestones","filter","item","Object","keys","console","log","reorder","list","startIndex","endIndex","result","Array","from","removed","splice","checkIfDatesValid","start_selection","from_date","format","end_selection","to_date","isValid","isSame","item_find","filteredItem","hasOwnProperty","not_lie_between","forEach","item_date","start","end","isAfter","get","isBefore","isSameOrAfter","checkIfValidDates","isfilter","item_","newarr","slice","sort","a","b","diff","item_reorder","JSON","stringify","onDragEnd","source","destination","reOrderedMilestones","index","checkOnClick","e","edit_item_clone","target","checked","prev","currentScreen","checkIfItem","check","provided","snapshot","innerRef","isDraggingOver","map","milestone_name","isPhotoevidence","recommended_hours","draggableProps","dragHandleProps","style","stopPropagation","preventDefault","placeholder","date_from"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n// @ts-ignore\nimport { DragDropContext, Droppable, Draggable, DropResult } from 'react-beautiful-dnd';\nimport moment from 'moment';\nimport { setShowToast } from '../../../redux/common/actions';\n\nimport milestonesPlaceholder from '../../../assets/images/Job milestones-preview.png';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {  useLocation } from \"react-router-dom\";\n\nimport { renderTimeWithFormat } from '../../../utils/common';\n\n// please arrange milestone date wise.\n// milestone start date should be doffent from another can not be.\ninterface Proptypes {\n    data: any;\n    milestones: any;\n    editMileStone: any;\n    editDetailPage: any;\n    editMilestoneTiming: any;\n    stepCompleted: boolean;\n    newMileStoneScreen: (data: any) => void;\n    handleStepComplete: (data: any) => void;\n    handleStepJustUpdate: (data: any, goto?: any) => void;\n    handleStepForward: (data: any, index?: number) => void;\n    handleStepBack: () => void;\n    updateMileStoneIndex: (data: any) => void;\n    handleCombineMileStones: (data: any) => void;\n    updateMileStoneTimings: (data: any) => void;\n    removeMilestoneByIndex: (data: any) => void;\n}\n\nconst JobMilestones = ({ data, stepCompleted, newMileStoneScreen, editDetailPage, editMileStone, editMilestoneTiming, handleStepJustUpdate, handleCombineMileStones, removeMilestoneByIndex, handleStepForward, updateMileStoneIndex, updateMileStoneTimings, milestones, handleStepComplete, handleStepBack }: Proptypes) => {\n    const [localMilestones, setLocalMilestones] = useState<Array<any>>([]);\n    const [editItem, setEditItems] = useState<{ [index: string]: any }>({});\n    const [open, setOpen] = React.useState(false);\n    const [deleteItem, setDeleteItem] = React.useState(null);\n    const [sortedItems, setSortedItems] = React.useState([]);\n\n    let location = useLocation();\n    let jobId: any = null;\n\n    if (location.search) {\n        let urlParams = new URLSearchParams(location.search);\n    }\n\n    const handleClickOpen = (id: any) => {\n        setOpen(true)\n        setDeleteItem(id);\n    };\n    const handleClose = () => {\n        setOpen(false)\n        setDeleteItem(null);\n    };\n\n    const handleYes = () => {\n        removeMilestoneByIndex(deleteItem);\n        setOpen(false);\n        setDeleteItem(null);\n    }\n\n    useEffect(() => {\n        if (!localMilestones?.length !== milestones?.length) {\n            let filter_milestones = milestones.filter((item: any) => Object.keys(item).length && item);\n            setLocalMilestones(filter_milestones); // set milestoner here!\n            updateMileStoneIndex(null);\n            updateMileStoneTimings(null);\n        }\n    }, [milestones, removeMilestoneByIndex]);\n\n    useEffect(() => {\n        console.log({ localMilestones }, '---->')\n    }, [localMilestones])\n\n    const reorder = (list: Array<any>, startIndex: number, endIndex: number) => {\n        const result = Array.from(list);\n        const [removed] = result.splice(startIndex, 1);\n        result.splice(endIndex, 0, removed);\n\n        return result;\n    };\n\n    const checkIfDatesValid = () => {\n        console.log({ data })\n        let start_selection: any = moment(data?.from_date, 'YYYY-MM-DD').format('MM-DD-YYYY');\n        let end_selection: any = null;\n        let urlParams: any = null;\n        if (location.search) {\n            urlParams = new URLSearchParams(location.search);\n        }\n\n        if (moment(data?.to_date, 'YYYY-MM-DD').isValid()) {\n            if (!moment(data?.to_date, 'YYYY-MM-DD').isSame(moment(data?.from_date, 'YYYY-MM-DD'))) {\n                end_selection = moment(data?.to_date, 'YYYY-MM-DD').format('MM-DD-YYYY');\n            }\n        }\n\n        let item_find: any = false;\n        let filteredItem = localMilestones.filter((item: any) => {\n            if (item.hasOwnProperty('from_date')) {\n                if (!item?.from_date?.length || item?.from_date !== \"Invalid date\") {\n                    return item;\n                }\n            }\n        });\n\n        let not_lie_between = false;\n        if (filteredItem?.length) {\n            filteredItem.forEach((item_date: any) => {\n                let start: any = moment(item_date.from_date, 'MM-DD-YYYY').isValid() ? item_date.from_date : null;\n                let end: any = moment(item_date.to_date, 'MM-DD-YYYY').isValid() ? item_date.to_date : null;\n\n                if (start && end) {\n                    if (start_selection && end_selection) {\n                        // if (moment(start_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY')) || moment(end_selection, 'MM-DD-YYYY').isBefore(moment(end, 'MM-DD-YYYY'))) {\n                        if (moment(start_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY'))) {\n                            item_find = true\n                        }\n                    }\n\n                    if (start_selection && !end_selection) {\n                        if (\n                            moment(start_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY'))\n                        ) {\n                            item_find = true;\n                            // not_lie_between = true;\n                        }\n                    }\n                }\n\n                if (urlParams && urlParams?.get('jobId')) {\n                    if (start_selection && end_selection && !end) {\n                        if (moment(start, 'MM-DD-YYYY').isBefore(moment(start_selection, 'MM-DD-YYYY')) && moment(end_selection, 'MM-DD-YYYY').isAfter(moment(start, 'MM-DD-YYYY'))) {\n                            item_find = true;\n                        }\n                    }\n                } else {\n                    if (start_selection && end_selection && !end) {\n                        // if (moment(start, 'MM-DD-YYYY').isSameOrAfter(moment(start_selection, 'MM-DD-YYYY')) && moment(start, 'MM-DD-YYYY').isSameOrBefore(moment(end_selection, 'MM-DD-YYYY'))) {\n                        if (moment(start, 'MM-DD-YYYY').isSameOrAfter(moment(start_selection, 'MM-DD-YYYY'))) {\n                            item_find = false;\n                        } else {\n                            item_find = true\n                        }\n                    }\n                }\n            });\n        }\n\n        if (item_find) {\n            // if (not_lie_between) {\n            //     setShowToast(true, 'Milestones dates should be lie between the job details');\n            // } else {\n                setShowToast(true, 'Please check the milestone dates');\n            // }\n            return item_find;\n        }\n\n        return item_find;\n    }\n\n    const checkIfValidDates = (item: any) => {\n        let isfilter = localMilestones.filter((item_: any) => {\n            if (item_.hasOwnProperty('from_date')) {\n                if (item_?.from_date !== \"Invalid date\" || !item_?.from_date?.length) {\n                    return item_;\n                }\n            }\n        });\n        if (!isfilter?.length) {\n            return true;\n        } else {\n            const newarr: any = isfilter.slice().sort((a, b) => {\n                return moment(a.from_date, 'MM-DD-YYYY').diff(moment(b.from_date, 'MM-DD-YYYY'));\n            });\n            let filteredItem: any = item.filter((item_reorder: any) => {\n                if (item_reorder.hasOwnProperty('from_date')) {\n                    if (item_reorder?.from_date !== \"Invalid date\" || !item_reorder?.from_date?.length) {\n                        return item_reorder;\n                    }\n                }\n            });\n            setSortedItems(newarr);\n            console.log({\n                newarr,\n                filteredItem\n            })\n            return JSON.stringify(newarr) === JSON.stringify(filteredItem);\n        }\n    }\n\n    const onDragEnd = (result: DropResult) => {\n        const { source, destination } = result;\n        // dropped outside the list\n        if (!destination) {\n            return;\n        }\n\n        // if (source.droppableId === destination.droppableId) {\n        const reOrderedMilestones = reorder(\n            localMilestones,\n            source.index,\n            destination.index\n        );\n        console.log({\n            reOrderedMilestones\n        })\n        setLocalMilestones(reOrderedMilestones);\n        handleCombineMileStones(reOrderedMilestones);\n        checkIfDatesValid();\n        checkIfValidDates(reOrderedMilestones);\n    };\n\n    const checkOnClick = (e: any, index: any) => {\n        let edit_item_clone: any = editItem;\n        edit_item_clone[index] = e.target.checked;\n        setEditItems((prev) => ({ ...prev, ...edit_item_clone }));\n    }\n\n    const format = 'MM-DD-YYYY';\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"section_wrapper\">\n                <div className=\"custom_container\">\n                    <div>\n                        <Dialog\n                            open={open}\n                            onClose={handleClose}\n                            aria-labelledby=\"alert-dialog-title\"\n                            aria-describedby=\"alert-dialog-description\"\n                        >\n                            <DialogTitle id=\"alert-dialog-title\">\n                                {\"Are you sure you want to delete the milestone ?\"}\n                            </DialogTitle>\n                            <DialogActions>\n                                <Button onClick={handleYes} color=\"primary\" autoFocus>\n                                    {'Yes'}\n                                </Button>\n                                <Button onClick={handleClose} color=\"primary\">\n                                    {'No'}\n                                </Button>\n                            </DialogActions>\n                        </Dialog>\n                    </div>\n\n\n                    <div className=\"form_field\">\n                        <div className=\"flex_row f_reverse\">\n                            <div className=\"flex_col_sm_7\">\n                                {editDetailPage?.currentScreen ? (\n                                    <div className=\"relate\">\n                                        <button className=\"back\" onClick={() => { handleStepForward(14) }}></button>\n                                        <span className=\"title\">Job milestones</span>\n                                    </div>\n                                ) : (\n                                    <div className=\"relate\">\n                                        <button className=\"back\" onClick={handleStepBack}></button>\n                                        <span className=\"title\">Job milestones</span>\n                                    </div>\n                                )}\n                                <p className=\"commn_para\">\n                                    {'Use milestones to itemise scope of works. You’ll be notified when each milestone has been completed.'}\n                                </p>\n                            </div>\n                            {localMilestones?.length ? (\n                                <div\n                                    onClick={() => {\n                                        let checkIfItem: boolean = checkIfDatesValid();\n                                        if (!checkIfItem) {\n                                            let check: boolean = checkIfValidDates(localMilestones);\n                                            if (check) {\n                                                handleCombineMileStones(localMilestones);\n                                                handleStepForward(10)\n                                            } else {\n                                                setShowToast(true, \"Please arrange milestone date wise\")\n                                            }\n                                        }\n                                    }}\n                                    className=\"flex_col_sm_5 text-right\">\n                                    <span className=\"link\">Save as template</span>\n                                </div>\n                            ) : null}\n                        </div>\n                    </div>\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_5\">\n                            <DragDropContext onDragEnd={onDragEnd}>\n                                <Droppable droppableId=\"milestones\">\n                                    {(provided, snapshot) => (\n                                        <ul ref={provided.innerRef}\n                                            className={`milestones${snapshot.isDraggingOver ? ' dragging-over' : ''}`}>\n                                            {localMilestones?.length > 0 &&\n                                                localMilestones.map(({\n                                                    milestone_name,\n                                                    isPhotoevidence,\n                                                    recommended_hours,\n                                                    from_date,\n                                                    to_date\n                                                }: {\n                                                    milestone_name: string,\n                                                    isPhotoevidence: boolean,\n                                                    from_date: string,\n                                                    to_date: string,\n                                                    recommended_hours: any\n                                                }, index) => (\n                                                    <Draggable\n                                                        key={`${index}-${milestone_name}`}\n                                                        draggableId={`${milestone_name}-${index}`}\n                                                        index={index}\n                                                    >\n                                                        {(provided: any, snapshot: any) => (\n                                                            <li\n                                                                key={index}\n                                                                ref={provided.innerRef}\n                                                                {...provided.draggableProps}\n                                                                {...provided.dragHandleProps}\n                                                                style={{\n                                                                    ...provided.draggableProps.style,\n                                                                }}>\n                                                                {editItem[index] ? (\n                                                                    <div className=\"edit_delete\">\n                                                                        <span\n                                                                            onClick={(e) => {\n                                                                                e.stopPropagation();\n                                                                                handleStepForward(15);\n                                                                                updateMileStoneIndex(index);\n                                                                            }}\n                                                                            className=\"edit\">\n                                                                        </span>\n                                                                        <span\n                                                                            onClick={(e) => {\n                                                                                e.preventDefault();\n                                                                                handleClickOpen(index);\n                                                                                // removeMilestoneByIndex(index);\n\n                                                                                // setEditItems({}); // too old comment\n                                                                            }}\n                                                                            className=\"delete\"></span>\n                                                                    </div>\n                                                                ) : ''}\n                                                                <div className=\"checkbox_wrap agree_check\">\n                                                                    <input\n                                                                        checked={editItem[index]}\n                                                                        onChange={(e: any) => { checkOnClick(e, index) }}\n                                                                        className=\"filter-type filled-in\"\n                                                                        type=\"checkbox\"\n                                                                        id={`milestone${index}`} />\n                                                                    <label htmlFor={`milestone${index}`}>{`${index + 1}. ${milestone_name}`}</label>\n                                                                    <div className=\"info\">\n                                                                        {isPhotoevidence ?\n                                                                            <span>{'Photo evidence required'}</span>\n                                                                            : <span></span>}\n                                                                        <span>\n                                                                            {renderTimeWithFormat(\n                                                                                from_date,\n                                                                                to_date,\n                                                                                format\n                                                                            )}\n                                                                        </span>\n                                                                        {recommended_hours && <span>\n                                                                            {recommended_hours}\n                                                                            {' hours'}\n                                                                        </span>}\n                                                                    </div>\n                                                                </div>\n                                                            </li>\n                                                        )}\n                                                    </Draggable>\n                                                ))}\n                                            {provided.placeholder}\n                                            {localMilestones?.length === 0 && (\n                                                <figure className=\"placeholder_img\">\n                                                    <img src={milestonesPlaceholder} alt=\"milestones-placeholder\" />\n                                                </figure>\n                                            )}\n                                        </ul>\n                                    )}\n                                </Droppable>\n                            </DragDropContext>\n                            {!localMilestones?.length ? (\n                                <React.Fragment>\n                                    <div className=\"form_field\">\n                                        <button\n                                            onClick={() => {\n                                                handleStepForward(9)\n                                            }}\n                                            className=\"fill_btn fill_grey_btn full_btn btn-effect\">\n                                            {'Use template'}\n                                        </button>\n                                    </div>\n                                    <div className=\"form_field\">\n                                        <button className=\"fill_btn full_btn btn-effect\" onClick={() => handleStepComplete({})}>\n                                            {'+ Add milestone'}\n                                        </button>\n                                    </div>\n                                </React.Fragment>\n                            ) : (\n                                <React.Fragment>\n                                    <div className=\"form_field\">\n                                        <button className=\"fill_btn full_btn btn-effect\"\n                                            onClick={() => {\n                                                if (milestones?.length === 1) {\n                                                    newMileStoneScreen(1);\n                                                } else {\n                                                    let item = milestones[milestones?.length - 1];\n                                                    if (Object.keys(item).length) {\n                                                        if (\n                                                            !item?.milestone_name?.length &&\n                                                            !item?.recommended_hours?.length &&\n                                                            !item?.date_from?.length) {\n                                                            console.log('Already have!')\n                                                        } else {\n                                                            newMileStoneScreen(milestones?.length);\n                                                        }\n                                                    }\n                                                }\n                                                handleStepComplete({})\n                                            }}>\n                                            {'+ Add milestone'}\n                                        </button>\n                                    </div>\n                                    <div className=\"form_field\">\n                                        <button\n                                            onClick={() => {\n\n\n                                                let checkIfItem: boolean = checkIfDatesValid();\n                                                console.log({ checkIfItem })\n                                                if (!checkIfItem) {\n                                                    let check: boolean = checkIfValidDates(localMilestones);\n                                                    console.log({ check })\n                                                    if (check) {\n                                                        handleCombineMileStones(localMilestones);\n                                                        if (editDetailPage?.currentScreen) {\n                                                            handleStepForward(14)\n                                                        } else {\n                                                            handleStepForward(13)\n                                                        }\n                                                    } else {\n                                                        setShowToast(true, \"Please arrange milestone date wise\")\n                                                    }\n                                                }\n                                            }}\n                                            className=\"fill_btn fill_grey_btn full_btn btn-effect\">\n                                            {'Continue'}\n                                        </button>\n                                    </div>\n                                </React.Fragment>\n                            )}\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default JobMilestones;\n"]},"metadata":{},"sourceType":"module"}