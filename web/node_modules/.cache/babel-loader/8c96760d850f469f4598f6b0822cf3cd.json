{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/home/builderHome/builderHome.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Banner from './components/banner';\nimport Constants from '../../../utils/constants';\nimport Geocode from \"react-geocode\";\nimport { withRouter } from 'react-router';\nimport { setShowToast } from '../../../redux/common/actions';\nimport TradieHome from '../../shared/tradieHome';\nimport JobTypes from './components/jobTypes';\nimport axios from 'axios';\nimport dummy from '../../../assets/images/u_placeholder.jpg';\nimport * as moment from 'moment';\nimport 'moment-timezone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\n\nconst setKey = () => {\n  localStorage.setItem('toastLocation', 'true');\n};\n\nconst getKey = () => {\n  return localStorage.getItem('toastLocation');\n};\n\nvar responseElement = {};\n\nconst BuilderHome = props => {\n  _s();\n\n  var _home_data$popular_tr, _home_data$popular_tr2;\n\n  let {\n    callTradeList,\n    getRecentSearchList,\n    getClearJobs\n  } = props;\n  const [addressItem, setAddressItem] = useState();\n  const [position, setPosition] = useState({});\n\n  const fetchItems = async (latitude, longitude) => {\n    // Get address from latitude & longitude.\n    try {\n      let response = await Geocode.fromLatLng(latitude.toString(), longitude.toString());\n\n      if (response) {\n        const address = response.results[0].formatted_address;\n        setAddressItem(address);\n      }\n    } catch (err) {\n      console.log({\n        err\n      });\n    }\n  };\n\n  const checkPermission = async () => {\n    var _navigator, _navigator$permission;\n\n    const showPosition = async position => {\n      let {\n        latitude,\n        longitude\n      } = position.coords;\n      localStorage.setItem('position', `[${longitude},${latitude}]`);\n      setPosition({\n        lat: latitude,\n        long: longitude\n      });\n      console.log('fetch In If condition');\n      await fetchByLatLong({\n        lat: latitude,\n        long: longitude\n      }); // Get address from latitude & longitude.\n\n      await fetchItems(latitude.toString(), longitude.toString());\n    };\n\n    const postionError = async () => {\n      // const jobType = { lat: '-37.8136', long: '144.9631', jobType: '', tradie: true };\n      console.log('fetch In Else condition');\n      await fetchByLatLong({\n        lat: '-37.8136',\n        long: '144.9631'\n      }); // setHomeBuilder(jobType);\n\n      setPosition({\n        lat: '-37.8136',\n        long: '144.9631'\n      });\n      localStorage.setItem('position', '[-37.8136, 144.9631]'); // await fetchItems('-37.8136', '144.9631');\n    };\n\n    let permission = await ((_navigator = navigator) === null || _navigator === void 0 ? void 0 : (_navigator$permission = _navigator.permissions) === null || _navigator$permission === void 0 ? void 0 : _navigator$permission.query({\n      name: 'geolocation'\n    }));\n\n    if ((permission === null || permission === void 0 ? void 0 : permission.state) === 'denied') {\n      if (getKey() !== \"true\") {\n        setShowToast(true, 'Please enable the location permission from the browser settings so that Tickt App can access your location');\n        setKey();\n      }\n    }\n\n    navigator.geolocation.getCurrentPosition(showPosition, postionError);\n  };\n\n  useEffect(() => {\n    getRecentSearchList();\n    callTradeList();\n    checkPermission();\n    getClearJobs();\n  }, []);\n\n  const fetchByLatLong = async data => {\n    let url = `${process.env.REACT_APP_BASE_URL}/v1/home?lat=${data.lat}&long=${data.long}`;\n    let item = localStorage.getItem('jwtToken');\n\n    try {\n      let response = await axios({\n        url,\n        method: 'get',\n        headers: {\n          Authorization: JSON.parse(item),\n          timezone: moment.tz.guess()\n        }\n      });\n\n      if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n        let data = response === null || response === void 0 ? void 0 : response.data;\n        responseElement = data === null || data === void 0 ? void 0 : data.result;\n      }\n    } catch (err) {\n      console.log({\n        err\n      });\n    }\n  };\n\n  let home_data = responseElement;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app_wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(Banner, { ...props,\n      current_address: addressItem,\n      position: position\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(JobTypes, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TradieHome, {\n      data: home_data === null || home_data === void 0 ? void 0 : home_data.saved_tradespeople,\n      title: \"Saved tradespeople\",\n      length: 3,\n      redirectPath: \"/saved-tradespeople\",\n      history: props === null || props === void 0 ? void 0 : props.history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), (home_data === null || home_data === void 0 ? void 0 : (_home_data$popular_tr = home_data.popular_tradespeople) === null || _home_data$popular_tr === void 0 ? void 0 : _home_data$popular_tr.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section_wrapper bg_gray\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"custom_container\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"title\",\n          children: 'Popular tradespeople'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"popular_tradies\",\n          children: home_data === null || home_data === void 0 ? void 0 : (_home_data$popular_tr2 = home_data.popular_tradespeople) === null || _home_data$popular_tr2 === void 0 ? void 0 : _home_data$popular_tr2.map((item, index) => {\n            var _item$trade$, _item$trade$2;\n\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              \"data-aos\": \"flip-right\",\n              \"data-aos-delay\": \"200\",\n              onClick: () => {\n                // setShowToast(true,'Under development');\n                if ((props === null || props === void 0 ? void 0 : props.history) && (item === null || item === void 0 ? void 0 : item._id)) {\n                  var _props$history;\n\n                  props === null || props === void 0 ? void 0 : (_props$history = props.history) === null || _props$history === void 0 ? void 0 : _props$history.push(`tradie-info?tradeId=${item === null || item === void 0 ? void 0 : item._id}&hideInvite=${false}`);\n                }\n              },\n              \"data-aos-duration\": \"1000\",\n              children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n                className: \"tradies_img\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.user_image || dummy,\n                  alt: \"tradies-img\",\n                  onError: e => {\n                    let e_ = e;\n                    e_.target.src = dummy;\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"name\",\n                children: item === null || item === void 0 ? void 0 : item.firstName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"post\",\n                children: (item === null || item === void 0 ? void 0 : item.trade) && Array.isArray(item === null || item === void 0 ? void 0 : item.trade) && (item === null || item === void 0 ? void 0 : item.trade[0]) && (item === null || item === void 0 ? void 0 : (_item$trade$ = item.trade[0]) === null || _item$trade$ === void 0 ? void 0 : _item$trade$.trade_name) ? item === null || item === void 0 ? void 0 : (_item$trade$2 = item.trade[0]) === null || _item$trade$2 === void 0 ? void 0 : _item$trade$2.trade_name : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 41\n              }, this)]\n            }, `${item.firstName}item${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"fill_grey_btn full_btn m-tb40 view_more\",\n          onClick: () => {\n            var _props$history2;\n\n            // setShowToast(true, 'Under development');\n            if ((props === null || props === void 0 ? void 0 : props.history) && (props === null || props === void 0 ? void 0 : (_props$history2 = props.history) === null || _props$history2 === void 0 ? void 0 : _props$history2.push)) {\n              props === null || props === void 0 ? void 0 : props.history.push({\n                pathname: '/popular-tradespeople',\n                state: {\n                  data: home_data === null || home_data === void 0 ? void 0 : home_data.popular_tradespeople,\n                  title: 'Popular tradespeople',\n                  popular: true,\n                  history: null //props?.history\n\n                }\n              });\n            }\n          },\n          children: 'View all'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(TradieHome, {\n      data: home_data === null || home_data === void 0 ? void 0 : home_data.recomended_tradespeople,\n      title: \"Recommended tradespeople\",\n      redirectPath: '/recommended-tradespeople',\n      length: 9,\n      history: props === null || props === void 0 ? void 0 : props.history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TradieHome, {\n      data: home_data === null || home_data === void 0 ? void 0 : home_data.mostViewed_tradespeople,\n      title: \"Most Viewed tradespeople\",\n      redirectPath: '/most-viewed-tradespeople',\n      length: 9,\n      history: props === null || props === void 0 ? void 0 : props.history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BuilderHome, \"rnyzGV0eq1zIsJ6fOTukaeo6j8M=\");\n\n_c = BuilderHome;\nexport default _c2 = withRouter(BuilderHome);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"BuilderHome\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/home/builderHome/builderHome.tsx"],"names":["React","useState","useEffect","Banner","Constants","Geocode","withRouter","setShowToast","TradieHome","JobTypes","axios","dummy","moment","setApiKey","SocialAuth","GOOGLE_GEOCODE_KEY","setKey","localStorage","setItem","getKey","getItem","responseElement","BuilderHome","props","callTradeList","getRecentSearchList","getClearJobs","addressItem","setAddressItem","position","setPosition","fetchItems","latitude","longitude","response","fromLatLng","toString","address","results","formatted_address","err","console","log","checkPermission","showPosition","coords","lat","long","fetchByLatLong","postionError","permission","navigator","permissions","query","name","state","geolocation","getCurrentPosition","data","url","process","env","REACT_APP_BASE_URL","item","method","headers","Authorization","JSON","parse","timezone","tz","guess","status","result","home_data","saved_tradespeople","history","popular_tradespeople","length","map","index","_id","push","user_image","e","e_","target","src","firstName","trade","Array","isArray","trade_name","pathname","title","popular","recomended_tradespeople","mostViewed_tradespeople"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Banner from './components/banner';\nimport Constants from '../../../utils/constants';\nimport Geocode from \"react-geocode\";\nimport { withRouter } from 'react-router'\nimport { setShowToast } from '../../../redux/common/actions';\nimport TradieHome from '../../shared/tradieHome';\nimport JobTypes from './components/jobTypes';\nimport axios from 'axios';\nimport dummy from '../../../assets/images/u_placeholder.jpg';\nimport * as moment from 'moment';\nimport 'moment-timezone';\n\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\n\nconst setKey = () => {\n    localStorage.setItem('toastLocation', 'true');\n}\n\nconst getKey = () => {\n    return localStorage.getItem('toastLocation');\n}\nvar responseElement: any = {};\nconst BuilderHome = (props: any) => {\n    let { callTradeList, getRecentSearchList, getClearJobs } = props;\n    const [addressItem, setAddressItem] = useState();\n    const [position, setPosition] = useState<any>({});\n\n    const fetchItems = async (latitude: any, longitude: any) => {\n        // Get address from latitude & longitude.\n        try {\n            let response = await Geocode.fromLatLng(latitude.toString(), longitude.toString())\n            if (response) {\n                const address = response.results[0].formatted_address;\n                setAddressItem(address)\n            }\n        } catch (err) {\n            console.log({ err });\n        }\n    }\n\n    const checkPermission = async () => {\n        const showPosition = async (position: any) => {\n            let { latitude, longitude } = position.coords;\n            localStorage.setItem('position', `[${longitude},${latitude}]`);\n            setPosition({ lat: latitude, long: longitude });\n            console.log('fetch In If condition')\n            await fetchByLatLong({ lat: latitude, long: longitude });\n\n            // Get address from latitude & longitude.\n            await fetchItems(latitude.toString(), longitude.toString());\n        }\n\n        const postionError = async () => {\n            // const jobType = { lat: '-37.8136', long: '144.9631', jobType: '', tradie: true };\n            console.log('fetch In Else condition')\n            await fetchByLatLong({ lat: '-37.8136', long: '144.9631' });\n            // setHomeBuilder(jobType);\n            setPosition({ lat: '-37.8136', long: '144.9631' });\n            localStorage.setItem('position', '[-37.8136, 144.9631]');\n            // await fetchItems('-37.8136', '144.9631');\n        }\n\n        let permission: any = await navigator?.permissions?.query({ name: 'geolocation' });\n        if (permission?.state === 'denied') {\n            if (getKey() !== \"true\") {\n                setShowToast(true, 'Please enable the location permission from the browser settings so that Tickt App can access your location');\n                setKey();\n            }\n        }\n        navigator.geolocation.getCurrentPosition(showPosition, postionError)\n    }\n\n    useEffect(() => {\n        getRecentSearchList();\n        callTradeList();\n        checkPermission();\n        getClearJobs();\n    }, []);\n    const fetchByLatLong = async (data: any) => {\n\n        let url: string = `${process.env.REACT_APP_BASE_URL}/v1/home?lat=${data.lat}&long=${data.long}`\n        let item: any = localStorage.getItem('jwtToken')\n        try {\n            let response = await axios({\n                url,\n                method: 'get',\n                headers: {\n                    Authorization: JSON.parse(item),\n                    timezone: moment.tz.guess(),\n                }\n            });\n\n            if (response?.status === 200) {\n                let data: any = response?.data;\n                responseElement = data?.result;\n            }\n        } catch (err) {\n            console.log({ err });\n        }\n    }\n\n    let home_data: any = responseElement;\n\n    return (\n        <div className=\"app_wrapper\" >\n\n            <Banner\n                {...props}\n                current_address={addressItem}\n                position={position}\n            />\n\n            <JobTypes\n                {...props}\n            />\n\n            <TradieHome\n                data={home_data?.saved_tradespeople}\n                title={\"Saved tradespeople\"}\n                length={3}\n                redirectPath={\"/saved-tradespeople\"}\n                history={props?.history}\n            />\n\n            {home_data?.popular_tradespeople?.length > 0 &&\n                <div className=\"section_wrapper bg_gray\">\n                    <div className=\"custom_container\">\n                        <span className=\"title\">\n                            {'Popular tradespeople'}\n                        </span>\n                        <ul className=\"popular_tradies\">\n                            {home_data?.popular_tradespeople?.map((item: any, index: number) => {\n                                return (\n                                    <li\n                                        key={`${item.firstName}item${index}`}\n                                        data-aos=\"flip-right\"\n                                        data-aos-delay=\"200\"\n                                        onClick={() => {\n                                            // setShowToast(true,'Under development');\n                                            if (props?.history && item?._id) {\n                                                props?.history?.push(`tradie-info?tradeId=${item?._id}&hideInvite=${false}`);\n                                            }\n                                        }}\n                                        data-aos-duration=\"1000\">\n                                        <figure className=\"tradies_img\">\n                                            <img\n                                                src={item.user_image || dummy}\n                                                alt=\"tradies-img\"\n                                                onError={(e: any) => {\n                                                    let e_: any = e;\n                                                    e_.target.src = dummy;\n                                                }}\n                                            />\n                                        </figure>\n                                        <span className=\"name\">{item?.firstName}</span>\n                                        <span className=\"post\">\n                                            {item?.trade && Array.isArray(item?.trade) && item?.trade[0] && item?.trade[0]?.trade_name ? item?.trade[0]?.trade_name : ''}\n                                        </span>\n                                    </li>)\n                            })}\n                        </ul>\n                        <button\n                            className=\"fill_grey_btn full_btn m-tb40 view_more\"\n                            onClick={() => {\n                                // setShowToast(true, 'Under development');\n                                if (props?.history && props?.history?.push) {\n                                    props?.history.push({\n                                        pathname: '/popular-tradespeople',\n                                        state: {\n                                            data: home_data?.popular_tradespeople,\n                                            title: 'Popular tradespeople',\n                                            popular: true,\n                                            history: null, //props?.history\n                                        }\n                                    })\n                                }\n                            }}>\n                            {'View all'}\n                        </button>\n                    </div>\n                </div>\n            }\n\n            <TradieHome\n                data={home_data?.recomended_tradespeople}\n                title={\"Recommended tradespeople\"}\n                redirectPath={'/recommended-tradespeople'}\n                length={9}\n                history={props?.history}\n            />\n\n            <TradieHome\n                data={home_data?.mostViewed_tradespeople}\n                title={\"Most Viewed tradespeople\"}\n                redirectPath={'/most-viewed-tradespeople'}\n                length={9}\n                history={props?.history}\n            />\n        </div>\n    )\n}\n\nexport default withRouter(BuilderHome);\n"]},"metadata":{},"sourceType":"module"}