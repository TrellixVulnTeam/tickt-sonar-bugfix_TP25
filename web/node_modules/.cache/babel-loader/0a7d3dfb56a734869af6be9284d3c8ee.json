{"ast":null,"code":"import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import remove from\"../../../assets/images/icon-close-1.png\";import addMedia from\"../../../assets/images/add-image.png\";import docThumbnail from'../../../assets/images/add-document.png';import{onFileUpload}from'../../../redux/auth/actions';import{setLoading,setShowToast}from'../../../redux/common/actions';//@ts-ignore\nimport{thumbnailExtract}from'../../../common/thumbnail';//@ts-ignore\nimport DropboxChooser from'react-dropbox-chooser';import Menu from'@material-ui/core/Menu';import Fade from'@material-ui/core/Fade';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var imageFormats=[\"jpeg\",\"jpg\",\"png\"];var videoFormats=[\"mp4\",\"wmv\",\"avi\"];var docTypes=[\"jpeg\",\"jpg\",\"png\",\"mp4\",\"wmv\",\"avi\",\"pdf\",\"doc\",\"docx\",\"msword\"];var docformats=[\"pdf\",\"doc\",\"docx\",\"msword\"];var UploadMedia=function UploadMedia(_ref){var _Object$values;var jobName=_ref.jobName,title=_ref.title,para=_ref.para,hasDescription=_ref.hasDescription,data=_ref.data,stepCompleted=_ref.stepCompleted,handleStepForward=_ref.handleStepForward,handleStepComplete=_ref.handleStepComplete,handleStepBack=_ref.handleStepBack;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),localFiles=_useState2[0],setLocalFiles=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],forceUpdate=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filesUrl=_useState6[0],setFilesUrl=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setDescription=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),submitClicked=_useState10[0],setSubmitClicked=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),toggler=_useState12[0],setToggler=_useState12[1];var _useState13=useState(1),_useState14=_slicedToArray(_useState13,2),selectedSlide=_useState14[0],setSelectSlide=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),isItemsLoad=_useState16[0],setLoadItems=_useState16[1];var _useState17=useState({photos:0,video:0}),_useState18=_slicedToArray(_useState17,2),countMedia=_useState18[0],setCountMedia=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),renderAsyncLoad=_useState20[0],setAsyncLoad=_useState20[1];var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var isFileChoser=Boolean(anchorEl);var fileChoserClicked=function fileChoserClicked(event){setAnchorEl(event.currentTarget);};var fileChoserClosed=function fileChoserClosed(){setAnchorEl(null);};useEffect(function(){if(stepCompleted){setFilesUrl(data===null||data===void 0?void 0:data.urls);setSubmitClicked(true);}},[stepCompleted,data]);useEffect(function(){// filesUrl\n},[]);var randomDelay=function randomDelay(item,index){return new Promise(function(resolve){var split_item_format=item.split('.');var get_split_fromat=split_item_format[split_item_format.length-1];var split_item_name=item.split('/');var get_split_name=split_item_name[split_item_name.length-1];var image_render=null;var loadByIndex=_defineProperty({},index,true);if(get_split_fromat){if(imageFormats.includes(get_split_fromat)){image_render=/*#__PURE__*/_jsx(\"img\",{id:\"media_\".concat(index),onClick:function onClick(){setItemToggle(index);},title:get_split_name,src:item,onLoad:function onLoad(){loadByIndex[index]=false;console.log('image_render','--->',{loadByIndex:loadByIndex});},alt:\"media\"});}}if(!loadByIndex[index]){console.log('Hered!!!');resolve(image_render);}});};var calc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item,index){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return randomDelay(item,index);case 2:result=_context.sent;console.log({result:result});return _context.abrupt(\"return\",result);case 5:case\"end\":return _context.stop();}}},_callee);}));return function calc(_x,_x2){return _ref2.apply(this,arguments);};}();var asyncFunc=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var p,results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:p=filesUrl.map(function(item,index){return calc(item.link,index);});_context2.next=3;return Promise.all(p);case 3:results=_context2.sent;setAsyncLoad(results);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function asyncFunc(){return _ref3.apply(this,arguments);};}();useEffect(function(){asyncFunc();},[filesUrl]);var checkErrors=function checkErrors(){if(!(filesUrl===null||filesUrl===void 0?void 0:filesUrl.length)){return true;}if(hasDescription&&(!description.trim()||description.length>250)){return true;}return false;};var removeFromItem=function removeFromItem(index){filesUrl.splice(index,1);setFilesUrl(filesUrl);Array.isArray(update)?forceUpdate([]):forceUpdate({});};var checkIfVideoExist=function checkIfVideoExist(){var videoItems=[];var ImageItems=[];var concatFormat=[].concat(imageFormats,docformats);filesUrl.forEach(function(element){var split_items=element.link.split('.');var format_split_items=split_items[(split_items===null||split_items===void 0?void 0:split_items.length)-1];if(videoFormats.includes(format_split_items)){videoItems.push(format_split_items);}if(concatFormat.includes(format_split_items)){ImageItems.push(format_split_items);}});console.log({concatFormat:concatFormat,ImageItems:ImageItems,videoItems:videoItems});if((ImageItems===null||ImageItems===void 0?void 0:ImageItems.length)===6){return\".mp4, .wmv, .avi\";}if((videoItems===null||videoItems===void 0?void 0:videoItems.length)==2){return\".png,.jpg,.jpeg,.pdf,.doc\";}return\".png,.jpg,.jpeg,.pdf,.doc,.mp4,.wmv,.avi\";};var checkIfVideoExist_=function checkIfVideoExist_(){var videoItems=[];var ImageItems=[];filesUrl.forEach(function(element){var split_items=element.link.split('.');var format_split_items=split_items[(split_items===null||split_items===void 0?void 0:split_items.length)-1];if(videoFormats.includes(format_split_items)){videoItems.push(format_split_items);}if([].concat(imageFormats,docformats).includes(format_split_items)){ImageItems.push(format_split_items);}});return{videoCount:videoItems.length,imageCount:ImageItems.length};};var onDropBoxSuccess=function onDropBoxSuccess(files){onFileChange('',true,files[0]);};var onDropBoxCancel=function onDropBoxCancel(err){console.log(err,\"err --- Dropbox\");};var onFileChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e,isDropbox,dropBoxFile){var formData,fileType,newFile,_dropBoxArr,dropBoxArr,_newFile$type,_newFile$type$split$,checkCounts,concatFormats,filesUrlClone,countVideoFormats,selectedFileSize,res,link,check_type;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formData=new FormData();newFile=isDropbox?dropBoxFile===null||dropBoxFile===void 0?void 0:dropBoxFile.link:e.target.files[0];if(isDropbox){dropBoxArr=newFile===null||newFile===void 0?void 0:newFile.split(\".\");fileType=(_dropBoxArr=dropBoxArr[dropBoxArr.length-1])===null||_dropBoxArr===void 0?void 0:_dropBoxArr.toLowerCase();}else{fileType=newFile===null||newFile===void 0?void 0:(_newFile$type=newFile.type)===null||_newFile$type===void 0?void 0:(_newFile$type$split$=_newFile$type.split('/')[1])===null||_newFile$type$split$===void 0?void 0:_newFile$type$split$.toLowerCase();}fileChoserClosed();if(!(hasDescription&&!imageFormats.includes(fileType))){_context3.next=7;break;}setShowToast(true,\"The file must be in proper format\");return _context3.abrupt(\"return\");case 7:if(!((filesUrl===null||filesUrl===void 0?void 0:filesUrl.length)===8)){_context3.next=10;break;}setShowToast(true,\"Max files upload limit is 6\");return _context3.abrupt(\"return\");case 10:checkCounts=checkIfVideoExist_();if(!((checkCounts===null||checkCounts===void 0?void 0:checkCounts.videoCount)===2)){_context3.next=14;break;}if(!videoFormats.includes(fileType)){_context3.next=14;break;}return _context3.abrupt(\"return\");case 14:if(!((checkCounts===null||checkCounts===void 0?void 0:checkCounts.imageCount)>=6)){_context3.next=18;break;}concatFormats=[].concat(imageFormats,docformats);if(!concatFormats.includes(fileType)){_context3.next=18;break;}return _context3.abrupt(\"return\");case 18:filesUrlClone=filesUrl;countVideoFormats=filesUrlClone.map(function(item){var split_items=item.link.split('.');var format_split_items=split_items[(split_items===null||split_items===void 0?void 0:split_items.length)-1];if(videoFormats.includes(format_split_items)){return format_split_items;}}).filter(function(item){return item!==undefined;});selectedFileSize=isDropbox?(dropBoxFile===null||dropBoxFile===void 0?void 0:dropBoxFile.bytes)/1024/1024:(newFile===null||newFile===void 0?void 0:newFile.size)/1024/1024;// size in mb\nif(!(docTypes.indexOf(fileType)<0||selectedFileSize>10)){_context3.next=24;break;}setShowToast(true,\"The file must be in proper format or size\");return _context3.abrupt(\"return\");case 24:if(!(imageFormats.includes(fileType)&&selectedFileSize>10)){_context3.next=27;break;}// image validations\nsetShowToast(true,\"The image file size must be below 10 mb\");return _context3.abrupt(\"return\");case 27:if(!videoFormats.includes(fileType)){_context3.next=34;break;}if(!(selectedFileSize>10)){_context3.next=31;break;}setShowToast(true,\"The video file size must be below 20 mb\");return _context3.abrupt(\"return\");case 31:if(!((countVideoFormats===null||countVideoFormats===void 0?void 0:countVideoFormats.length)>1)){_context3.next=34;break;}setShowToast(true,\"Max video file upload limit is 2\");return _context3.abrupt(\"return\");case 34:!isDropbox&&formData.append('file',newFile);setLoadItems({});if(!isDropbox){_context3.next=40;break;}_context3.t0={success:true};_context3.next=43;break;case 40:_context3.next=42;return onFileUpload(formData);case 42:_context3.t0=_context3.sent;case 43:res=_context3.t0;setLoading(true);if(res.success){link=isDropbox?dropBoxFile===null||dropBoxFile===void 0?void 0:dropBoxFile.link:res===null||res===void 0?void 0:res.imgUrl;check_type=imageFormats.includes(fileType)?1:videoFormats.includes(fileType)?2:[\"doc\",\"docx\",\"msword\"].includes(fileType)?3:4;setFilesUrl(function(prev){return[].concat(_toConsumableArray(prev),[{\"mediaType\":check_type,\"link\":link}]);});setLoadItems(function(prev){return _defineProperty({},filesUrl.length-1,false);});setLocalFiles(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},filesUrl===null||filesUrl===void 0?void 0:filesUrl.length,isDropbox?dropBoxFile===null||dropBoxFile===void 0?void 0:dropBoxFile.link:URL.createObjectURL(newFile)));});}case 46:case\"end\":return _context3.stop();}}},_callee3);}));return function onFileChange(_x3,_x4,_x5){return _ref4.apply(this,arguments);};}();var setItemToggle=function setItemToggle(index){setToggler(function(prev){return!prev;});setSelectSlide(index+1);};var renderbyFileFormat=function renderbyFileFormat(item,index,base64){var split_item_format=item.split('.');var get_split_fromat=split_item_format[split_item_format.length-1];var split_item_name=item.split('/');var get_split_name=split_item_name[split_item_name.length-1];var image_render=null;var loadByIndex=_defineProperty({},index,true);// setLoading(true);\nif(get_split_fromat){if(imageFormats.includes(get_split_fromat)){image_render=/*#__PURE__*/_jsx(\"img\",{id:\"media_\".concat(index)// onClick={() => { setItemToggle(index) }}\n,title:get_split_name,src:item,\"async-src\":item,decoding:\"async\",loading:\"lazy\",onLoad:function onLoad(){console.log('Loaded!');loadByIndex[index]=false;console.log('image_render','--->',{loadByIndex:loadByIndex});setLoadItems(function(prev){return _defineProperty({},index,true);});},alt:\"media\"});}if(videoFormats.includes(get_split_fromat)){if(base64){image_render=/*#__PURE__*/_jsx(\"video\",{id:\"media_\".concat(index),title:get_split_name,crossOrigin:\"anonymous\",src:item,poster:base64,controls:false,onLoadedData:function onLoadedData(){console.log('Loaded!');setLoadItems(function(prev){return _defineProperty({},index,true);});}// onClick={() => { setItemToggle(index) }}\n});}else{image_render=/*#__PURE__*/_jsx(\"video\",{id:\"media_\".concat(index),crossOrigin:\"anonymous\",src:item,controls:false,title:get_split_name,onLoadedData:function onLoadedData(){console.log('Loaded!');setLoadItems(function(prev){return _defineProperty({},index,true);});}// onClick={() => { setItemToggle(index) }}\n});}}if(docformats.includes(get_split_fromat)){image_render=/*#__PURE__*/_jsx(\"img\",{id:\"media_\".concat(index),title:get_split_name,src:docThumbnail,\"async-src\":item,decoding:\"async\",loading:\"lazy\",onLoad:function onLoad(){loadByIndex[index]=false;console.log('Loaded!');setLoadItems(function(prev){return _defineProperty({},index,true);});},alt:\"media\"});}return/*#__PURE__*/_jsx(\"figure\",{className:\"img_video\",children:/*#__PURE__*/_jsx(React.Fragment,{children:image_render&&/*#__PURE__*/_jsxs(React.Fragment,{children:[image_render,/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){removeFromItem(index);},src:remove,alt:\"remove\",className:\"remove\"})]})})});// }\n}};// const { sources, types } = renderFilteredItems();\nvar IsRenderValues=null;if((_Object$values=Object.values(isItemsLoad))===null||_Object$values===void 0?void 0:_Object$values.length){IsRenderValues=Array.isArray(Object.values(isItemsLoad))&&Object.values(isItemsLoad)[0]===true?Object.values(isItemsLoad)[0]:false;}if(IsRenderValues===false){setLoading(true);}if(IsRenderValues===true){setLoading(false);}var checkErrors_=checkErrors();console.log({IsRenderValues:IsRenderValues,isItemsLoad:isItemsLoad,check:checkErrors_});return/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\".concat(jobName?' padding_0':''),children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\".concat(jobName?' padding_0':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsx(\"canvas\",{id:\"canvas-extractor\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_\".concat(jobName?'7':'6'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){hasDescription?handleStepBack():handleStepForward(6);},className:\"back\"}),/*#__PURE__*/_jsx(\"span\",{className:jobName?\"xs_sub_title\":\"title\",children:jobName||'Photos and documents'})]}),title&&/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"commn_para\",children:para||'Record a short video (up to 30 seconds) or add up to 6 photos and files to demonstrate your job and any unique requirements.'})]}),!jobName&&!(filesUrl===null||filesUrl===void 0?void 0:filesUrl.length)&&!hasDescription?/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5 text-right\",children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){handleStepForward(14);},className:\"link\",children:'Skip'})}):null]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload_img_video\",children:[(filesUrl===null||filesUrl===void 0?void 0:filesUrl.length)?filesUrl.map(function(item,index){return renderbyFileFormat(item===null||item===void 0?void 0:item.link,index,item===null||item===void 0?void 0:item.base64);}):null,/*#__PURE__*/_jsx(\"button\",{className:\"media_btn\",id:\"fade-button\",\"aria-controls\":isFileChoser?'fade-menu':undefined,\"aria-haspopup\":\"true\",\"aria-expanded\":isFileChoser?'true':undefined,onClick:fileChoserClicked,children:/*#__PURE__*/_jsx(\"img\",{src:addMedia,alt:\"\"})}),/*#__PURE__*/_jsx(Menu,{className:\"fsp_modal range dropbox\",id:\"fade-menu\",MenuListProps:{'aria-labelledby':'fade-button'},anchorEl:anchorEl,open:isFileChoser,onClose:fileChoserClosed,TransitionComponent:Fade,anchorOrigin:{vertical:'top',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'left'},children:(filesUrl===null||filesUrl===void 0?void 0:filesUrl.length)<8?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"upload_media\",htmlFor:\"upload_img_video\",children:\"Upload from files\"}),!hasDescription?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{onChange:onFileChange,type:\"file\",accept:checkIfVideoExist(),style:{display:\"none\"},id:\"upload_img_video\"}),/*#__PURE__*/_jsx(DropboxChooser,{appKey:process.env.REACT_APP_DROPBOX_APP_KEY,success:function success(files){return onDropBoxSuccess(files);},cancel:function cancel(err){return onDropBoxCancel(err);},multiselect:false,linkType:'direct',children:/*#__PURE__*/_jsx(\"button\",{className:\"dropbox-button\",children:\"Upload from Dropbox\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{onChange:onFileChange,type:\"file\",accept:hasDescription?\"image/png,image/jpg,image/jpeg\":\"image/png,image/jpg,image/jpeg,.pdf, .doc, video/mp4, video/wmv, video/avi\",style:{display:\"none\"},id:\"upload_img_video\"}),/*#__PURE__*/_jsx(DropboxChooser,{appKey:process.env.REACT_APP_DROPBOX_APP_KEY,success:function success(files){return onDropBoxSuccess(files);},cancel:function cancel(err){return onDropBoxCancel(err);},multiselect:false,linkType:'direct',children:/*#__PURE__*/_jsx(\"button\",{className:\"dropbox-button\",children:\"Upload from Dropbox\"})})]})]}):null})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_8\",children:[hasDescription&&/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Photo Description\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"The item has..\",value:description,onChange:function onChange(_ref10){var value=_ref10.target.value;return setDescription(value);}}),description.length?/*#__PURE__*/_jsx(\"span\",{className:\"char_count\",children:\"character length : \".concat(description.length,\" / 250\")}):'']}),/*#__PURE__*/_jsx(\"span\",{className:\"error_msg\",children:submitClicked&&!description.trim()?'Photo Description is required.':description.length>250?'Maximum 250 characters are allowed.':''})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setSubmitClicked(true);var filteredItems=[];var isRender=false;filesUrl.forEach(function(item,index){if((item===null||item===void 0?void 0:item.mediaType)===2){if(!(item===null||item===void 0?void 0:item.base64)){var base64=thumbnailExtract({canvasId:'#canvas-extractor',videoId:\"#media_\".concat(index)});item['base64']=base64;}}filteredItems.push(item);});if(!isRender){setFilesUrl(filteredItems);handleStepComplete({urls:filteredItems,description:hasDescription?description:undefined});}},className:\"fill_btn full_btn btn-effect \".concat(checkErrors_&&IsRenderValues==null?'disable_btn':!checkErrors_&&!IsRenderValues?'disable_btn':''),children:'Submit'})})]})})]})})});};export default UploadMedia;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/postJob/components/uploadMedia.tsx"],"names":["React","useEffect","useState","remove","addMedia","docThumbnail","onFileUpload","setLoading","setShowToast","thumbnailExtract","DropboxChooser","Menu","Fade","imageFormats","videoFormats","docTypes","docformats","UploadMedia","jobName","title","para","hasDescription","data","stepCompleted","handleStepForward","handleStepComplete","handleStepBack","localFiles","setLocalFiles","update","forceUpdate","filesUrl","setFilesUrl","description","setDescription","submitClicked","setSubmitClicked","toggler","setToggler","selectedSlide","setSelectSlide","isItemsLoad","setLoadItems","photos","video","countMedia","setCountMedia","renderAsyncLoad","setAsyncLoad","anchorEl","setAnchorEl","isFileChoser","Boolean","fileChoserClicked","event","currentTarget","fileChoserClosed","urls","randomDelay","item","index","Promise","resolve","split_item_format","split","get_split_fromat","length","split_item_name","get_split_name","image_render","loadByIndex","includes","setItemToggle","console","log","calc","result","asyncFunc","p","map","link","all","results","checkErrors","trim","removeFromItem","splice","Array","isArray","checkIfVideoExist","videoItems","ImageItems","concatFormat","forEach","element","split_items","format_split_items","push","checkIfVideoExist_","videoCount","imageCount","onDropBoxSuccess","files","onFileChange","onDropBoxCancel","err","e","isDropbox","dropBoxFile","formData","FormData","newFile","target","dropBoxArr","fileType","toLowerCase","type","checkCounts","concatFormats","filesUrlClone","countVideoFormats","filter","undefined","selectedFileSize","bytes","size","indexOf","append","success","res","imgUrl","check_type","prev","URL","createObjectURL","renderbyFileFormat","base64","IsRenderValues","Object","values","checkErrors_","check","display","vertical","horizontal","process","env","REACT_APP_DROPBOX_APP_KEY","value","filteredItems","isRender","mediaType","canvasId","videoId"],"mappings":"89BAAA,MAAOA,CAAAA,KAAP,EAAwCC,SAAxC,CAAmDC,QAAnD,KAAmE,OAAnE,CAKA,MAAOC,CAAAA,MAAP,KAAmB,yCAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sCAArB,CAEA,MAAOC,CAAAA,YAAP,KAAyB,yCAAzB,CACA,OAASC,YAAT,KAA6B,6BAA7B,CACA,OAASC,UAAT,CAAqBC,YAArB,KAAyC,+BAAzC,CACA;AAIA,OAASC,gBAAT,KAAiC,2BAAjC,CACA;AACA,MAAOC,CAAAA,cAAP,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,C,6IAcA,GAAMC,CAAAA,YAAwB,CAAG,CAAC,MAAD,CAAS,KAAT,CAAgB,KAAhB,CAAjC,CACA,GAAMC,CAAAA,YAAwB,CAAG,CAAC,KAAD,CAAQ,KAAR,CAAe,KAAf,CAAjC,CACA,GAAMC,CAAAA,QAAoB,CAAG,CAAC,MAAD,CAAS,KAAT,CAAgB,KAAhB,CAAuB,KAAvB,CAA8B,KAA9B,CAAqC,KAArC,CAA4C,KAA5C,CAAmD,KAAnD,CAA0D,MAA1D,CAAkE,QAAlE,CAA7B,CACA,GAAMC,CAAAA,UAAsB,CAAG,CAAC,KAAD,CAAQ,KAAR,CAAe,MAAf,CAAuB,QAAvB,CAA/B,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAqI,uBAAlIC,CAAAA,OAAkI,MAAlIA,OAAkI,CAAzHC,KAAyH,MAAzHA,KAAyH,CAAlHC,IAAkH,MAAlHA,IAAkH,CAA5GC,cAA4G,MAA5GA,cAA4G,CAA5FC,IAA4F,MAA5FA,IAA4F,CAAtFC,aAAsF,MAAtFA,aAAsF,CAAvEC,iBAAuE,MAAvEA,iBAAuE,CAApDC,kBAAoD,MAApDA,kBAAoD,CAAhCC,cAAgC,MAAhCA,cAAgC,CACrJ,cAAoCxB,QAAQ,CAAC,EAAD,CAA5C,wCAAOyB,UAAP,eAAmBC,aAAnB,eACA,eAA8B1B,QAAQ,CAAC,EAAD,CAAtC,yCAAO2B,MAAP,eAAeC,WAAf,eACA,eAAgC5B,QAAQ,CAAC,EAAD,CAAxC,yCAAO6B,QAAP,eAAiBC,WAAjB,eACA,eAAsC9B,QAAQ,CAAC,EAAD,CAA9C,yCAAO+B,WAAP,eAAoBC,cAApB,eACA,eAA0ChC,QAAQ,CAAC,KAAD,CAAlD,0CAAOiC,aAAP,gBAAsBC,gBAAtB,gBACA,gBAA8BlC,QAAQ,CAAC,KAAD,CAAtC,2CAAOmC,OAAP,gBAAgBC,UAAhB,gBACA,gBAAwCpC,QAAQ,CAAC,CAAD,CAAhD,2CAAOqC,aAAP,gBAAsBC,cAAtB,gBACA,gBAAoCtC,QAAQ,CAAC,EAAD,CAA5C,2CAAOuC,WAAP,gBAAoBC,YAApB,gBACA,gBAAoCxC,QAAQ,CAAC,CAAEyC,MAAM,CAAE,CAAV,CAAaC,KAAK,CAAE,CAApB,CAAD,CAA5C,2CAAOC,UAAP,gBAAmBC,aAAnB,gBACA,gBAAwC5C,QAAQ,CAAM,IAAN,CAAhD,2CAAO6C,eAAP,gBAAwBC,YAAxB,gBAEA,oBAAgChD,KAAK,CAACE,QAAN,CAAe,IAAf,CAAhC,oDAAO+C,QAAP,qBAAiBC,WAAjB,qBACA,GAAMC,CAAAA,YAAY,CAAGC,OAAO,CAACH,QAAD,CAA5B,CAEA,GAAMI,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAgB,CACtCJ,WAAW,CAACI,KAAK,CAACC,aAAP,CAAX,CACH,CAFD,CAIA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3BN,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,CAIAjD,SAAS,CAAC,UAAM,CACZ,GAAIsB,aAAJ,CAAmB,CACfS,WAAW,CAACV,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEmC,IAAP,CAAX,CACArB,gBAAgB,CAAC,IAAD,CAAhB,CACH,CACJ,CALQ,CAKN,CAACb,aAAD,CAAgBD,IAAhB,CALM,CAAT,CAOArB,SAAS,CAAC,UAAM,CACZ;AACH,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMyD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,IAAD,CAAYC,KAAZ,QAA2B,IAAIC,CAAAA,OAAJ,CAAY,SAAAC,OAAO,CAAI,CAElE,GAAIC,CAAAA,iBAAiB,CAAGJ,IAAI,CAACK,KAAL,CAAW,GAAX,CAAxB,CACA,GAAIC,CAAAA,gBAAgB,CAAGF,iBAAiB,CAACA,iBAAiB,CAACG,MAAlB,CAA2B,CAA5B,CAAxC,CAEA,GAAIC,CAAAA,eAAe,CAAGR,IAAI,CAACK,KAAL,CAAW,GAAX,CAAtB,CACA,GAAII,CAAAA,cAAc,CAAGD,eAAe,CAACA,eAAe,CAACD,MAAhB,CAAyB,CAA1B,CAApC,CACA,GAAIG,CAAAA,YAAiB,CAAG,IAAxB,CACA,GAAIC,CAAAA,WAAW,oBAAMV,KAAN,CAAc,IAAd,CAAf,CAEA,GAAIK,gBAAJ,CAAsB,CAClB,GAAIpD,YAAY,CAAC0D,QAAb,CAAsBN,gBAAtB,CAAJ,CAA6C,CACzCI,YAAY,cACR,YACI,EAAE,iBAAWT,KAAX,CADN,CAEI,OAAO,CAAE,kBAAM,CAAEY,aAAa,CAACZ,KAAD,CAAb,CAAsB,CAF3C,CAGI,KAAK,CAAEQ,cAHX,CAII,GAAG,CAAET,IAJT,CAKI,MAAM,CAAE,iBAAM,CACVW,WAAW,CAACV,KAAD,CAAX,CAAqB,KAArB,CACAa,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4B,MAA5B,CAAoC,CAAEJ,WAAW,CAAXA,WAAF,CAApC,EACH,CARL,CASI,GAAG,CAAC,OATR,EADJ,CAYH,CACJ,CAED,GAAI,CAACA,WAAW,CAACV,KAAD,CAAhB,CAAyB,CACrBa,OAAO,CAACC,GAAR,CAAY,UAAZ,EACAZ,OAAO,CAACO,YAAD,CAAP,CACH,CACJ,CA/B8C,CAA3B,EAApB,CAkCA,GAAMM,CAAAA,IAAI,2FAAG,iBAAOhB,IAAP,CAAkBC,KAAlB,mJACUF,CAAAA,WAAW,CAACC,IAAD,CAAOC,KAAP,CADrB,QACLgB,MADK,eAETH,OAAO,CAACC,GAAR,CAAY,CAAEE,MAAM,CAANA,MAAF,CAAZ,EAFS,gCAGFA,MAHE,wDAAH,kBAAJD,CAAAA,IAAI,iDAAV,CAMA,GAAME,CAAAA,SAAS,2FAAG,sJACRC,CADQ,CACJ/C,QAAQ,CAACgD,GAAT,CAAa,SAACpB,IAAD,CAAYC,KAAZ,QAA2Be,CAAAA,IAAI,CAAChB,IAAI,CAACqB,IAAN,CAAYpB,KAAZ,CAA/B,EAAb,CADI,wBAEQC,CAAAA,OAAO,CAACoB,GAAR,CAAYH,CAAZ,CAFR,QAERI,OAFQ,gBAGdlC,YAAY,CAACkC,OAAD,CAAZ,CAHc,wDAAH,kBAATL,CAAAA,SAAS,2CAAf,CAMA5E,SAAS,CAAC,UAAM,CACZ4E,SAAS,GACZ,CAFQ,CAEN,CAAC9C,QAAD,CAFM,CAAT,CAIA,GAAMoD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAI,EAACpD,QAAD,SAACA,QAAD,iBAACA,QAAQ,CAAEmC,MAAX,CAAJ,CAAuB,CACnB,MAAO,KAAP,CACH,CAED,GAAI7C,cAAc,GAAK,CAACY,WAAW,CAACmD,IAAZ,EAAD,EAAuBnD,WAAW,CAACiC,MAAZ,CAAqB,GAAjD,CAAlB,CAAyE,CACrE,MAAO,KAAP,CACH,CAED,MAAO,MAAP,CACH,CAVD,CAYA,GAAMmB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACzB,KAAD,CAAgB,CACnC7B,QAAQ,CAACuD,MAAT,CAAgB1B,KAAhB,CAAuB,CAAvB,EACA5B,WAAW,CAACD,QAAD,CAAX,CACAwD,KAAK,CAACC,OAAN,CAAc3D,MAAd,EAAwBC,WAAW,CAAC,EAAD,CAAnC,CAA0CA,WAAW,CAAC,EAAD,CAArD,CACH,CAJD,CAOA,GAAM2D,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC5B,GAAIC,CAAAA,UAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,UAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,YAAY,WAAO/E,YAAP,CAAwBG,UAAxB,CAAhB,CACAe,QAAQ,CAAC8D,OAAT,CAAiB,SAACC,OAAD,CAAkB,CAC/B,GAAIC,CAAAA,WAAW,CAAGD,OAAO,CAACd,IAAR,CAAahB,KAAb,CAAmB,GAAnB,CAAlB,CACA,GAAIgC,CAAAA,kBAAkB,CAAGD,WAAW,CAAC,CAAAA,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAE7B,MAAb,EAAsB,CAAvB,CAApC,CACA,GAAIpD,YAAY,CAACyD,QAAb,CAAsByB,kBAAtB,CAAJ,CAA+C,CAC3CN,UAAU,CAACO,IAAX,CAAgBD,kBAAhB,EACH,CAED,GAAIJ,YAAY,CAACrB,QAAb,CAAsByB,kBAAtB,CAAJ,CAA+C,CAC3CL,UAAU,CAACM,IAAX,CAAgBD,kBAAhB,EACH,CACJ,CAVD,EAWAvB,OAAO,CAACC,GAAR,CAAY,CACRkB,YAAY,CAAZA,YADQ,CAERD,UAAU,CAAVA,UAFQ,CAGRD,UAAU,CAAVA,UAHQ,CAAZ,EAKA,GAAI,CAAAC,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEzB,MAAZ,IAAuB,CAA3B,CAA8B,CAC1B,MAAO,kBAAP,CACH,CAED,GAAI,CAAAwB,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAExB,MAAZ,GAAsB,CAA1B,CAA6B,CACzB,MAAO,2BAAP,CACH,CAED,MAAO,0CAAP,CACH,CA7BD,CA+BA,GAAMgC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC7B,GAAIR,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA5D,QAAQ,CAAC8D,OAAT,CAAiB,SAACC,OAAD,CAAkB,CAC/B,GAAIC,CAAAA,WAAW,CAAGD,OAAO,CAACd,IAAR,CAAahB,KAAb,CAAmB,GAAnB,CAAlB,CACA,GAAIgC,CAAAA,kBAAkB,CAAGD,WAAW,CAAC,CAAAA,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAE7B,MAAb,EAAsB,CAAvB,CAApC,CACA,GAAIpD,YAAY,CAACyD,QAAb,CAAsByB,kBAAtB,CAAJ,CAA+C,CAC3CN,UAAU,CAACO,IAAX,CAAgBD,kBAAhB,EACH,CAED,GAAI,UAAInF,YAAJ,CAAqBG,UAArB,EAAiCuD,QAAjC,CAA0CyB,kBAA1C,CAAJ,CAAmE,CAC/DL,UAAU,CAACM,IAAX,CAAgBD,kBAAhB,EACH,CACJ,CAVD,EAaA,MAAO,CACHG,UAAU,CAAET,UAAU,CAACxB,MADpB,CAEHkC,UAAU,CAAET,UAAU,CAACzB,MAFpB,CAAP,CAKH,CArBD,CAuBA,GAAMmC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAgB,CACrCC,YAAY,CAAC,EAAD,CAAK,IAAL,CAAWD,KAAK,CAAC,CAAD,CAAhB,CAAZ,CACH,CAFD,CAIA,GAAME,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,GAAD,CAAc,CAClChC,OAAO,CAACC,GAAR,CAAY+B,GAAZ,CAAiB,iBAAjB,EACH,CAFD,CAIA,GAAMF,CAAAA,YAAY,2FAAG,kBAAOG,CAAP,CAAeC,SAAf,CAAoCC,WAApC,6SACXC,QADW,CACA,GAAIC,CAAAA,QAAJ,EADA,CAGXC,OAHW,CAGDJ,SAAS,CAAGC,WAAH,SAAGA,WAAH,iBAAGA,WAAW,CAAE5B,IAAhB,CAAuB0B,CAAC,CAACM,MAAF,CAASV,KAAT,CAAe,CAAf,CAH/B,CAIjB,GAAIK,SAAJ,CAAe,CACPM,UADO,CACWF,OADX,SACWA,OADX,iBACWA,OAAO,CAAE/C,KAAT,CAAe,GAAf,CADX,CAEXkD,QAAQ,cAAGD,UAAU,CAACA,UAAU,CAAC/C,MAAX,CAAoB,CAArB,CAAb,sCAAG,YAAmCiD,WAAnC,EAAX,CACH,CAHD,IAGO,CACHD,QAAQ,CAAIH,OAAJ,SAAIA,OAAJ,gCAAIA,OAAO,CAAEK,IAAb,8DAAI,cAAepD,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAJ,+CAAG,qBAAgCmD,WAAhC,EAAX,CACH,CAED3D,gBAAgB,GAXC,KAabnC,cAAc,EAAI,CAACR,YAAY,CAAC0D,QAAb,CAAsB2C,QAAtB,CAbN,2BAcb1G,YAAY,CAAC,IAAD,CAAO,mCAAP,CAAZ,CAda,8CAkBb,CAAAuB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEmC,MAAV,IAAqB,CAlBR,4BAmBb1D,YAAY,CAAC,IAAD,CAAO,6BAAP,CAAZ,CAnBa,0CAuBb6G,WAvBa,CAuBMnB,kBAAkB,EAvBxB,MAyBb,CAAAmB,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAElB,UAAb,IAA4B,CAzBf,gCA0BTrF,YAAY,CAACyD,QAAb,CAAsB2C,QAAtB,CA1BS,0EA+Bb,CAAAG,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAEjB,UAAb,GAA2B,CA/Bd,4BAgCTkB,aAhCS,WAgCWzG,YAhCX,CAgC4BG,UAhC5B,MAiCTsG,aAAa,CAAC/C,QAAd,CAAuB2C,QAAvB,CAjCS,qEAsCbK,aAtCa,CAsCQxF,QAtCR,CAwCbyF,iBAxCa,CAwCOD,aAAa,CAACxC,GAAd,CAAkB,SAACpB,IAAD,CAAe,CACrD,GAAIoC,CAAAA,WAAW,CAAGpC,IAAI,CAACqB,IAAL,CAAUhB,KAAV,CAAgB,GAAhB,CAAlB,CAEA,GAAIgC,CAAAA,kBAAkB,CAAGD,WAAW,CAAC,CAAAA,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAE7B,MAAb,EAAsB,CAAvB,CAApC,CAEA,GAAIpD,YAAY,CAACyD,QAAb,CAAsByB,kBAAtB,CAAJ,CAA+C,CAC3C,MAAOA,CAAAA,kBAAP,CACH,CACJ,CARuB,EAQrByB,MARqB,CAQd,SAAC9D,IAAD,QAAeA,CAAAA,IAAI,GAAK+D,SAAxB,EARc,CAxCP,CAkDbC,gBAlDa,CAkDMhB,SAAS,CAAG,CAAAC,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAEgB,KAAb,EAAqB,IAArB,CAA4B,IAA/B,CAAsC,CAAAb,OAAO,OAAP,EAAAA,OAAO,SAAP,QAAAA,OAAO,CAAEc,IAAT,EAAgB,IAAhB,CAAuB,IAlD5E,CAkDkF;AAlDlF,KAoDb9G,QAAQ,CAAC+G,OAAT,CAAiBZ,QAAjB,EAA6B,CAA7B,EAAmCS,gBAAgB,CAAG,EApDzC,4BAqDbnH,YAAY,CAAC,IAAD,CAAO,2CAAP,CAAZ,CArDa,+CAyDbK,YAAY,CAAC0D,QAAb,CAAsB2C,QAAtB,GAAmCS,gBAAgB,CAAG,EAzDzC,4BAyD+C;AAC5DnH,YAAY,CAAC,IAAD,CAAO,yCAAP,CAAZ,CA1Da,8CA8DbM,YAAY,CAACyD,QAAb,CAAsB2C,QAAtB,CA9Da,gCA+DTS,gBAAgB,CAAG,EA/DV,4BAgETnH,YAAY,CAAC,IAAD,CAAO,yCAAP,CAAZ,CAhES,+CAmET,CAAAgH,iBAAiB,OAAjB,EAAAA,iBAAiB,SAAjB,QAAAA,iBAAiB,CAAEtD,MAAnB,EAA4B,CAnEnB,4BAoET1D,YAAY,CAAC,IAAD,CAAO,kCAAP,CAAZ,CApES,0CAyEjB,CAACmG,SAAD,EAAcE,QAAQ,CAACkB,MAAT,CAAgB,MAAhB,CAAwBhB,OAAxB,CAAd,CACArE,YAAY,CAAC,EAAD,CAAZ,CA1EiB,IA2EAiE,SA3EA,wCA2EY,CAAEqB,OAAO,CAAE,IAAX,CA3EZ,yDA2EsC1H,CAAAA,YAAY,CAACuG,QAAD,CA3ElD,6CA2EXoB,GA3EW,cA4EjB1H,UAAU,CAAC,IAAD,CAAV,CACA,GAAI0H,GAAG,CAACD,OAAR,CAAiB,CACThD,IADS,CACM2B,SAAS,CAAGC,WAAH,SAAGA,WAAH,iBAAGA,WAAW,CAAE5B,IAAhB,CAAuBiD,GAAvB,SAAuBA,GAAvB,iBAAuBA,GAAG,CAAEC,MAD3C,CAETC,UAFS,CAEStH,YAAY,CAAC0D,QAAb,CAAsB2C,QAAtB,EAAkC,CAAlC,CAAsCpG,YAAY,CAACyD,QAAb,CAAsB2C,QAAtB,EAAkC,CAAlC,CAAsC,CAAC,KAAD,CAAQ,MAAR,CAAgB,QAAhB,EAA0B3C,QAA1B,CAAmC2C,QAAnC,EAA+C,CAA/C,CAAmD,CAFxI,CAGblF,WAAW,CAAC,SAACoG,IAAD,qCAA0BA,IAA1B,GAAgC,CACxC,YAAaD,UAD2B,CAExC,OAAQnD,IAFgC,CAAhC,IAAD,CAAX,CAIAtC,YAAY,CAAC,SAAC0F,IAAD,4BACRrG,QAAQ,CAACmC,MAAT,CAAkB,CADV,CACc,KADd,GAAD,CAAZ,CAGAtC,aAAa,CAAC,SAACwG,IAAD,wCAAqBA,IAArB,wBAA4BrG,QAA5B,SAA4BA,QAA5B,iBAA4BA,QAAQ,CAAEmC,MAAtC,CAA+CyC,SAAS,CAAGC,WAAH,SAAGA,WAAH,iBAAGA,WAAW,CAAE5B,IAAhB,CAAuBqD,GAAG,CAACC,eAAJ,CAAoBvB,OAApB,CAA/E,IAAD,CAAb,CACH,CAxFgB,yDAAH,kBAAZR,CAAAA,YAAY,sDAAlB,CA4FA,GAAM/B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACZ,KAAD,CAAgB,CAClCtB,UAAU,CAAC,SAAC8F,IAAD,QAAmB,CAACA,IAApB,EAAD,CAAV,CACA5F,cAAc,CAACoB,KAAK,CAAG,CAAT,CAAd,CACH,CAHD,CAKA,GAAM2E,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAC5E,IAAD,CAAYC,KAAZ,CAAwB4E,MAAxB,CAAyC,CAChE,GAAIzE,CAAAA,iBAAiB,CAAGJ,IAAI,CAACK,KAAL,CAAW,GAAX,CAAxB,CACA,GAAIC,CAAAA,gBAAgB,CAAGF,iBAAiB,CAACA,iBAAiB,CAACG,MAAlB,CAA2B,CAA5B,CAAxC,CAEA,GAAIC,CAAAA,eAAe,CAAGR,IAAI,CAACK,KAAL,CAAW,GAAX,CAAtB,CACA,GAAII,CAAAA,cAAc,CAAGD,eAAe,CAACA,eAAe,CAACD,MAAhB,CAAyB,CAA1B,CAApC,CACA,GAAIG,CAAAA,YAAiB,CAAG,IAAxB,CACA,GAAIC,CAAAA,WAAW,oBAAMV,KAAN,CAAc,IAAd,CAAf,CACA;AACA,GAAIK,gBAAJ,CAAsB,CAClB,GAAIpD,YAAY,CAAC0D,QAAb,CAAsBN,gBAAtB,CAAJ,CAA6C,CACzCI,YAAY,cACR,YACI,EAAE,iBAAWT,KAAX,CACF;AAFJ,CAGI,KAAK,CAAEQ,cAHX,CAII,GAAG,CAAET,IAJT,CAKI,YAAWA,IALf,CAMI,QAAQ,CAAC,OANb,CAOI,OAAO,CAAC,MAPZ,CAQI,MAAM,CAAE,iBAAM,CACVc,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAJ,WAAW,CAACV,KAAD,CAAX,CAAqB,KAArB,CACAa,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4B,MAA5B,CAAoC,CAAEJ,WAAW,CAAXA,WAAF,CAApC,EACA5B,YAAY,CAAC,SAAC0F,IAAD,4BACRxE,KADQ,CACA,IADA,GAAD,CAAZ,CAGH,CAfL,CAgBI,GAAG,CAAC,OAhBR,EADJ,CAmBH,CAED,GAAI9C,YAAY,CAACyD,QAAb,CAAsBN,gBAAtB,CAAJ,CAA6C,CACzC,GAAIuE,MAAJ,CAAY,CACRnE,YAAY,cACR,cACI,EAAE,iBAAWT,KAAX,CADN,CAEI,KAAK,CAAEQ,cAFX,CAGI,WAAW,CAAC,WAHhB,CAII,GAAG,CAAET,IAJT,CAKI,MAAM,CAAE6E,MALZ,CAMI,QAAQ,CAAE,KANd,CAOI,YAAY,CAAE,uBAAM,CAChB/D,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAhC,YAAY,CAAC,SAAC0F,IAAD,4BACRxE,KADQ,CACA,IADA,GAAD,CAAZ,CAGH,CACL;AAbA,EADJ,CAiBH,CAlBD,IAkBO,CACHS,YAAY,cACR,cAAO,EAAE,iBAAWT,KAAX,CAAT,CAA6B,WAAW,CAAC,WAAzC,CACI,GAAG,CAAED,IADT,CAEI,QAAQ,CAAE,KAFd,CAGI,KAAK,CAAES,cAHX,CAII,YAAY,CAAE,uBAAM,CAChBK,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAhC,YAAY,CAAC,SAAC0F,IAAD,4BACRxE,KADQ,CACA,IADA,GAAD,CAAZ,CAGH,CACL;AAVA,EADJ,CAcH,CACJ,CAED,GAAI5C,UAAU,CAACuD,QAAX,CAAoBN,gBAApB,CAAJ,CAA2C,CACvCI,YAAY,cACR,YACI,EAAE,iBAAWT,KAAX,CADN,CAEI,KAAK,CAAEQ,cAFX,CAGI,GAAG,CAAE/D,YAHT,CAII,YAAWsD,IAJf,CAKI,QAAQ,CAAC,OALb,CAMI,OAAO,CAAC,MANZ,CAOI,MAAM,CAAE,iBAAM,CACVW,WAAW,CAACV,KAAD,CAAX,CAAqB,KAArB,CACAa,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAhC,YAAY,CAAC,SAAC0F,IAAD,4BACRxE,KADQ,CACA,IADA,GAAD,CAAZ,CAGH,CAbL,CAcI,GAAG,CAAC,OAdR,EADJ,CAiBH,CACD,mBACI,eAAQ,SAAS,CAAC,WAAlB,uBACI,KAAC,KAAD,CAAO,QAAP,WACKS,YAAY,eACT,MAAC,KAAD,CAAO,QAAP,YACKA,YADL,cAEI,YACI,OAAO,CAAE,kBAAM,CAAEgB,cAAc,CAACzB,KAAD,CAAd,CAAuB,CAD5C,CAEI,GAAG,CAAEzD,MAFT,CAGI,GAAG,CAAC,QAHR,CAII,SAAS,CAAC,QAJd,EAFJ,GAFR,EADJ,EADJ,CAiBA;AACH,CACJ,CA3GD,CA6GA;AACA,GAAIsI,CAAAA,cAAc,CAAG,IAArB,CACA,mBAAIC,MAAM,CAACC,MAAP,CAAclG,WAAd,CAAJ,yCAAI,eAA4ByB,MAAhC,CAAwC,CACpCuE,cAAc,CAAGlD,KAAK,CAACC,OAAN,CAAckD,MAAM,CAACC,MAAP,CAAclG,WAAd,CAAd,GAA6CiG,MAAM,CAACC,MAAP,CAAclG,WAAd,EAA2B,CAA3B,IAAkC,IAA/E,CAAsFiG,MAAM,CAACC,MAAP,CAAclG,WAAd,EAA2B,CAA3B,CAAtF,CAAsH,KAAvI,CACH,CAED,GAAIgG,cAAc,GAAK,KAAvB,CAA8B,CAC1BlI,UAAU,CAAC,IAAD,CAAV,CACH,CAED,GAAIkI,cAAc,GAAK,IAAvB,CAA6B,CACzBlI,UAAU,CAAC,KAAD,CAAV,CACH,CAED,GAAIqI,CAAAA,YAAiB,CAAGzD,WAAW,EAAnC,CACAV,OAAO,CAACC,GAAR,CAAY,CAAE+D,cAAc,CAAdA,cAAF,CAAkBhG,WAAW,CAAXA,WAAlB,CAA+BoG,KAAK,CAAED,YAAtC,CAAZ,EACA,mBACI,YAAK,SAAS,sBAAgB1H,OAAO,CAAG,YAAH,CAAkB,EAAzC,CAAd,uBACI,YAAK,SAAS,0BAAoBA,OAAO,CAAG,YAAH,CAAkB,EAA7C,CAAd,uBACI,aAAK,SAAS,CAAC,kBAAf,wBAaI,eAAQ,EAAE,CAAC,kBAAX,CAA8B,KAAK,CAAE,CAAE4H,OAAO,CAAE,MAAX,CAArC,EAbJ,cAeI,YAAK,SAAS,CAAC,YAAf,uBACI,aAAK,SAAS,CAAC,UAAf,wBACI,aAAK,SAAS,uBAAiB5H,OAAO,CAAG,GAAH,CAAS,GAAjC,CAAd,wBACI,aAAK,SAAS,CAAC,QAAf,wBACI,eACI,OAAO,CAAE,kBAAM,CAAEG,cAAc,CAAGK,cAAc,EAAjB,CAAsBF,iBAAiB,CAAC,CAAD,CAArD,CAA0D,CAD/E,CAEI,SAAS,CAAC,MAFd,EADJ,cAII,aAAM,SAAS,CAAEN,OAAO,CAAG,cAAH,CAAoB,OAA5C,UAAsDA,OAAO,EAAI,sBAAjE,EAJJ,GADJ,CAOKC,KAAK,eAAI,aAAM,SAAS,CAAC,WAAhB,UAA6BA,KAA7B,EAPd,cAQI,UAAG,SAAS,CAAC,YAAb,UAEKC,IAAI,EAAI,8HAFb,EARJ,GADJ,CAcK,CAACF,OAAD,EAAY,EAACa,QAAD,SAACA,QAAD,iBAACA,QAAQ,CAAEmC,MAAX,CAAZ,EAAiC,CAAC7C,cAAlC,cACG,YAAK,SAAS,CAAC,0BAAf,uBACI,aACI,OAAO,CAAE,kBAAM,CACXG,iBAAiB,CAAC,EAAD,CAAjB,CACH,CAHL,CAII,SAAS,CAAC,MAJd,UAKK,MALL,EADJ,EADH,CAUG,IAxBR,GADJ,EAfJ,cA2CI,YAAK,SAAS,CAAC,UAAf,uBACI,YAAK,SAAS,CAAC,gBAAf,uBACI,aAAK,SAAS,CAAC,kBAAf,WAEK,CAAAO,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEmC,MAAV,EACGnC,QAAQ,CAACgD,GAAT,CAAa,SAACpB,IAAD,CAAYC,KAAZ,QAA+B2E,CAAAA,kBAAkB,CAAC5E,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEqB,IAAP,CAAapB,KAAb,CAAoBD,IAApB,SAAoBA,IAApB,iBAAoBA,IAAI,CAAE6E,MAA1B,CAAjD,EAAb,CADH,CAEK,IAJV,cAMI,eACI,SAAS,CAAC,WADd,CAEI,EAAE,CAAC,aAFP,CAGI,gBAAerF,YAAY,CAAG,WAAH,CAAiBuE,SAHhD,CAII,gBAAc,MAJlB,CAKI,gBAAevE,YAAY,CAAG,MAAH,CAAYuE,SAL3C,CAMI,OAAO,CAAErE,iBANb,uBAQI,YAAK,GAAG,CAAEjD,QAAV,CAAoB,GAAG,CAAC,EAAxB,EARJ,EANJ,cAiBI,KAAC,IAAD,EACI,SAAS,CAAC,yBADd,CAEI,EAAE,CAAC,WAFP,CAGI,aAAa,CAAE,CACX,kBAAmB,aADR,CAHnB,CAMI,QAAQ,CAAE6C,QANd,CAOI,IAAI,CAAEE,YAPV,CAQI,OAAO,CAAEK,gBARb,CASI,mBAAmB,CAAE5C,IATzB,CAUI,YAAY,CAAE,CACVmI,QAAQ,CAAE,KADA,CAEVC,UAAU,CAAE,QAFF,CAVlB,CAcI,eAAe,CAAE,CACbD,QAAQ,CAAE,KADG,CAEbC,UAAU,CAAE,MAFC,CAdrB,UAmBK,CAAAjH,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAEmC,MAAV,EAAmB,CAAnB,cACG,MAAC,KAAD,CAAO,QAAP,yBACI,cAAO,SAAS,CAAC,cAAjB,CAAgC,OAAO,CAAC,kBAAxC,+BADJ,CAKK,CAAC7C,cAAD,cACG,wCACI,cACI,QAAQ,CAAEkF,YADd,CAEI,IAAI,CAAC,MAFT,CAGI,MAAM,CAAEd,iBAAiB,EAH7B,CAII,KAAK,CAAE,CAAEqD,OAAO,CAAE,MAAX,CAJX,CAKI,EAAE,CAAC,kBALP,EADJ,cAQI,KAAC,cAAD,EACI,MAAM,CAAEG,OAAO,CAACC,GAAR,CAAYC,yBADxB,CAEI,OAAO,CAAE,iBAAC7C,KAAD,QAAgBD,CAAAA,gBAAgB,CAACC,KAAD,CAAhC,EAFb,CAGI,MAAM,CAAE,gBAACG,GAAD,QAAcD,CAAAA,eAAe,CAACC,GAAD,CAA7B,EAHZ,CAII,WAAW,CAAE,KAJjB,CAKI,QAAQ,CAAE,QALd,uBAOI,eAAQ,SAAS,CAAC,gBAAlB,iCAPJ,EARJ,GADH,cAoBG,wCACI,cACI,QAAQ,CAAEF,YADd,CAEI,IAAI,CAAC,MAFT,CAGI,MAAM,CAAElF,cAAc,CAAG,gCAAH,CAAsC,4EAHhE,CAII,KAAK,CAAE,CAAEyH,OAAO,CAAE,MAAX,CAJX,CAKI,EAAE,CAAC,kBALP,EADJ,cAQI,KAAC,cAAD,EACI,MAAM,CAAEG,OAAO,CAACC,GAAR,CAAYC,yBADxB,CAEI,OAAO,CAAE,iBAAC7C,KAAD,QAAgBD,CAAAA,gBAAgB,CAACC,KAAD,CAAhC,EAFb,CAGI,MAAM,CAAE,gBAACG,GAAD,QAAcD,CAAAA,eAAe,CAACC,GAAD,CAA7B,EAHZ,CAII,WAAW,CAAE,KAJjB,CAKI,QAAQ,CAAE,QALd,uBAOI,eAAQ,SAAS,CAAC,gBAAlB,iCAPJ,EARJ,GAzBR,GADH,CA8CG,IAjER,EAjBJ,GADJ,EADJ,EA3CJ,cAqII,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,eAAf,WACKpF,cAAc,eACX,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,SAAS,CAAC,YAAjB,+BADJ,cAEI,aAAK,SAAS,CAAC,YAAf,wBACI,iBAAU,WAAW,CAAC,gBAAtB,CAAuC,KAAK,CAAEY,WAA9C,CAA2D,QAAQ,CAAE,6BAAamH,CAAAA,KAAb,QAAGpC,MAAH,CAAaoC,KAAb,OAAgClH,CAAAA,cAAc,CAACkH,KAAD,CAA9C,EAArE,EADJ,CAEKnH,WAAW,CAACiC,MAAZ,cACG,aAAM,SAAS,CAAC,YAAhB,uCAC2BjC,WAAW,CAACiC,MADvC,YADH,CAIK,EANV,GAFJ,cAUI,aAAM,SAAS,CAAC,WAAhB,UAA6B/B,aAAa,EAAI,CAACF,WAAW,CAACmD,IAAZ,EAAlB,CAAuC,gCAAvC,CAA0EnD,WAAW,CAACiC,MAAZ,CAAqB,GAArB,CAA2B,qCAA3B,CAAmE,EAA1K,EAVJ,GAFR,cAeI,YAAK,SAAS,CAAC,YAAf,uBACI,eACI,OAAO,CAAE,kBAAM,CACX9B,gBAAgB,CAAC,IAAD,CAAhB,CACA,GAAIiH,CAAAA,aAAkB,CAAG,EAAzB,CACA,GAAIC,CAAAA,QAAiB,CAAG,KAAxB,CACAvH,QAAQ,CAAC8D,OAAT,CAAiB,SAAClC,IAAD,CAAYC,KAAZ,CAA2B,CACxC,GAAI,CAAAD,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAE4F,SAAN,IAAoB,CAAxB,CAA2B,CACvB,GAAI,EAAC5F,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAE6E,MAAP,CAAJ,CAAmB,CACf,GAAIA,CAAAA,MAAM,CAAG/H,gBAAgB,CAAC,CAC1B+I,QAAQ,CAAE,mBADgB,CAE1BC,OAAO,kBAAY7F,KAAZ,CAFmB,CAAD,CAA7B,CAIAD,IAAI,CAAC,QAAD,CAAJ,CAAiB6E,MAAjB,CACH,CACJ,CACDa,aAAa,CAACpD,IAAd,CAAmBtC,IAAnB,EACH,CAXD,EAYA,GAAI,CAAC2F,QAAL,CAAe,CACXtH,WAAW,CAACqH,aAAD,CAAX,CACA5H,kBAAkB,CAAC,CACfgC,IAAI,CAAE4F,aADS,CAEfpH,WAAW,CAAEZ,cAAc,CAAGY,WAAH,CAAiByF,SAF7B,CAAD,CAAlB,CAIH,CACJ,CAxBL,CAyBI,SAAS,wCAAkCkB,YAAY,EAAIH,cAAc,EAAI,IAAlC,CAAyC,aAAzC,CAAyD,CAACG,YAAD,EAAiB,CAACH,cAAlB,CAAmC,aAAnC,CAAmD,EAA9I,CAzBb,UA0BK,QA1BL,EADJ,EAfJ,GADJ,EArIJ,GADJ,EADJ,EADJ,CA8LH,CAjkBD,CAmkBA,cAAexH,CAAAA,WAAf","sourcesContent":["import React, { SyntheticEvent, useRef, useEffect, useState } from 'react';\nimport colorLogo from '../../../assets/images/ic-logo-yellow.png';\nimport menu from '../../../assets/images/menu-line-white.svg';\nimport bell from '../../../assets/images/ic-notification.png';\nimport dummy from '../../../assets/images/u_placeholder.jpg';\nimport remove from \"../../../assets/images/icon-close-1.png\";\nimport addMedia from \"../../../assets/images/add-image.png\";\nimport videoThumbnail from '../../../assets/images/add-video.png';\nimport docThumbnail from '../../../assets/images/add-document.png'\nimport { onFileUpload } from '../../../redux/auth/actions';\nimport { setLoading, setShowToast } from '../../../redux/common/actions';\n//@ts-ignore\nimport FsLightbox from 'fslightbox-react';\n//@ts-ignore\nimport Skeleton from 'react-loading-skeleton';\nimport { thumbnailExtract } from '../../../common/thumbnail';\n//@ts-ignore\nimport DropboxChooser from 'react-dropbox-chooser';\nimport Menu from '@material-ui/core/Menu';\nimport Fade from '@material-ui/core/Fade';\n\ninterface Proptypes {\n    jobName?: string;\n    title?: string;\n    para?: string;\n    hasDescription?: boolean;\n    data: any;\n    stepCompleted: Boolean;\n    handleStepComplete: (data: any) => void;\n    handleStepForward: (data: any) => void;\n    handleStepBack: () => void;\n}\n\nconst imageFormats: Array<any> = [\"jpeg\", \"jpg\", \"png\"];\nconst videoFormats: Array<any> = [\"mp4\", \"wmv\", \"avi\"];\nconst docTypes: Array<any> = [\"jpeg\", \"jpg\", \"png\", \"mp4\", \"wmv\", \"avi\", \"pdf\", \"doc\", \"docx\", \"msword\"];\nconst docformats: Array<any> = [\"pdf\", \"doc\", \"docx\", \"msword\"];\n\nconst UploadMedia = ({ jobName, title, para, hasDescription, data, stepCompleted, handleStepForward, handleStepComplete, handleStepBack }: Proptypes) => {\n    const [localFiles, setLocalFiles] = useState({});\n    const [update, forceUpdate] = useState({});\n    const [filesUrl, setFilesUrl] = useState([] as any);\n    const [description, setDescription] = useState('');\n    const [submitClicked, setSubmitClicked] = useState(false);\n    const [toggler, setToggler] = useState(false);\n    const [selectedSlide, setSelectSlide] = useState(1);\n    const [isItemsLoad, setLoadItems] = useState({});\n    const [countMedia, setCountMedia] = useState({ photos: 0, video: 0 });\n    const [renderAsyncLoad, setAsyncLoad] = useState<any>(null);\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const isFileChoser = Boolean(anchorEl);\n\n    const fileChoserClicked = (event: any) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const fileChoserClosed = () => {\n        setAnchorEl(null);\n    };\n\n    useEffect(() => {\n        if (stepCompleted) {\n            setFilesUrl(data?.urls);\n            setSubmitClicked(true);\n        }\n    }, [stepCompleted, data]);\n\n    useEffect(() => {\n        // filesUrl\n    }, []);\n\n    const randomDelay = (item: any, index: any) => new Promise(resolve => {\n\n        let split_item_format = item.split('.');\n        let get_split_fromat = split_item_format[split_item_format.length - 1];\n\n        let split_item_name = item.split('/');\n        let get_split_name = split_item_name[split_item_name.length - 1];\n        let image_render: any = null;\n        let loadByIndex = { [index]: true };\n\n        if (get_split_fromat) {\n            if (imageFormats.includes(get_split_fromat)) {\n                image_render = (\n                    <img\n                        id={`media_${index}`}\n                        onClick={() => { setItemToggle(index) }}\n                        title={get_split_name}\n                        src={item}\n                        onLoad={() => {\n                            loadByIndex[index] = false;\n                            console.log('image_render', '--->', { loadByIndex })\n                        }}\n                        alt=\"media\"\n                    />)\n            }\n        }\n\n        if (!loadByIndex[index]) {\n            console.log('Hered!!!')\n            resolve(image_render);\n        }\n    });\n\n\n    const calc = async (item: any, index: any) => {\n        let result = await randomDelay(item, index);\n        console.log({ result });\n        return result;\n    };\n\n    const asyncFunc = async () => {\n        const p = filesUrl.map((item: any, index: any) => calc(item.link, index));\n        const results = await Promise.all(p);\n        setAsyncLoad(results);\n    };\n\n    useEffect(() => {\n        asyncFunc();\n    }, [filesUrl])\n\n    const checkErrors = () => {\n        if (!filesUrl?.length) {\n            return true;\n        }\n\n        if (hasDescription && (!description.trim() || description.length > 250)) {\n            return true;\n        }\n\n        return false;\n    }\n\n    const removeFromItem = (index: any) => {\n        filesUrl.splice(index, 1);\n        setFilesUrl(filesUrl);\n        Array.isArray(update) ? forceUpdate([]) : forceUpdate({});\n    }\n\n\n    const checkIfVideoExist = () => {\n        let videoItems: any = [];\n        let ImageItems: any = [];\n        let concatFormat = [...imageFormats, ...docformats];\n        filesUrl.forEach((element: any) => {\n            let split_items = element.link.split('.');\n            let format_split_items = split_items[split_items?.length - 1];\n            if (videoFormats.includes(format_split_items)) {\n                videoItems.push(format_split_items);\n            }\n\n            if (concatFormat.includes(format_split_items)) {\n                ImageItems.push(format_split_items);\n            }\n        });\n        console.log({\n            concatFormat,\n            ImageItems,\n            videoItems\n        })\n        if (ImageItems?.length === 6) {\n            return \".mp4, .wmv, .avi\";\n        }\n\n        if (videoItems?.length == 2) {\n            return \".png,.jpg,.jpeg,.pdf,.doc\";\n        }\n\n        return \".png,.jpg,.jpeg,.pdf,.doc,.mp4,.wmv,.avi\";\n    }\n\n    const checkIfVideoExist_ = () => {\n        let videoItems = [];\n        let ImageItems = [];\n        filesUrl.forEach((element: any) => {\n            let split_items = element.link.split('.');\n            let format_split_items = split_items[split_items?.length - 1];\n            if (videoFormats.includes(format_split_items)) {\n                videoItems.push(format_split_items);\n            }\n\n            if ([...imageFormats, ...docformats].includes(format_split_items)) {\n                ImageItems.push(format_split_items);\n            }\n        });\n\n\n        return {\n            videoCount: videoItems.length,\n            imageCount: ImageItems.length\n        }\n\n    }\n\n    const onDropBoxSuccess = (files: any) => {\n        onFileChange('', true, files[0]);\n    }\n\n    const onDropBoxCancel = (err: any) => {\n        console.log(err, \"err --- Dropbox\");\n    }\n\n    const onFileChange = async (e: any, isDropbox?: boolean, dropBoxFile?: any) => {\n        const formData = new FormData();\n        var fileType;\n        const newFile = isDropbox ? dropBoxFile?.link : e.target.files[0];\n        if (isDropbox) {\n            let dropBoxArr: any = newFile?.split(\".\");\n            fileType = dropBoxArr[dropBoxArr.length - 1]?.toLowerCase();\n        } else {\n            fileType = (newFile?.type?.split('/')[1])?.toLowerCase();\n        }\n\n        fileChoserClosed();\n\n        if (hasDescription && !imageFormats.includes(fileType)) {\n            setShowToast(true, \"The file must be in proper format\");\n            return;\n        }\n\n        if (filesUrl?.length === 8) {\n            setShowToast(true, \"Max files upload limit is 6\")\n            return;\n        }\n\n        let checkCounts: any = checkIfVideoExist_();\n\n        if (checkCounts?.videoCount === 2) {\n            if (videoFormats.includes(fileType)) {\n                return\n            }\n        }\n\n        if (checkCounts?.imageCount >= 6) {\n            let concatFormats = [...imageFormats, ...docformats];\n            if (concatFormats.includes(fileType)) {\n                return\n            }\n        }\n\n        let filesUrlClone: any = filesUrl;\n\n        let countVideoFormats = filesUrlClone.map((item: any) => {\n            let split_items = item.link.split('.');\n\n            let format_split_items = split_items[split_items?.length - 1];\n\n            if (videoFormats.includes(format_split_items)) {\n                return format_split_items;\n            }\n        }).filter((item: any) => item !== undefined);\n\n        var selectedFileSize = isDropbox ? dropBoxFile?.bytes / 1024 / 1024 : newFile?.size / 1024 / 1024; // size in mb\n\n        if (docTypes.indexOf(fileType) < 0 || (selectedFileSize > 10)) {\n            setShowToast(true, \"The file must be in proper format or size\")\n            return;\n        }\n\n        if (imageFormats.includes(fileType) && selectedFileSize > 10) { // image validations\n            setShowToast(true, \"The image file size must be below 10 mb\")\n            return;\n        }\n\n        if (videoFormats.includes(fileType)) { // video validations\n            if (selectedFileSize > 10) {\n                setShowToast(true, \"The video file size must be below 20 mb\")\n                return;\n            }\n            if (countVideoFormats?.length > 1) {\n                setShowToast(true, \"Max video file upload limit is 2\")\n                return;\n            }\n        }\n\n        !isDropbox && formData.append('file', newFile);\n        setLoadItems({});\n        const res: any = isDropbox ? { success: true } : await onFileUpload(formData);\n        setLoading(true);\n        if (res.success) {\n            let link: string = isDropbox ? dropBoxFile?.link : res?.imgUrl;\n            let check_type: any = imageFormats.includes(fileType) ? 1 : videoFormats.includes(fileType) ? 2 : [\"doc\", \"docx\", \"msword\"].includes(fileType) ? 3 : 4\n            setFilesUrl((prev: Array<any>) => [...prev, {\n                \"mediaType\": check_type,\n                \"link\": link\n            }]);\n            setLoadItems((prev: any) => ({\n                [filesUrl.length - 1]: false\n            }))\n            setLocalFiles((prev: any) => ({ ...prev, [filesUrl?.length]: isDropbox ? dropBoxFile?.link : URL.createObjectURL(newFile) }));\n        }\n    }\n\n\n    const setItemToggle = (index: any) => {\n        setToggler((prev: boolean) => !prev);\n        setSelectSlide(index + 1);\n    }\n\n    const renderbyFileFormat = (item: any, index: any, base64?: any) => {\n        let split_item_format = item.split('.');\n        let get_split_fromat = split_item_format[split_item_format.length - 1];\n\n        let split_item_name = item.split('/');\n        let get_split_name = split_item_name[split_item_name.length - 1];\n        let image_render: any = null;\n        let loadByIndex = { [index]: true };\n        // setLoading(true);\n        if (get_split_fromat) {\n            if (imageFormats.includes(get_split_fromat)) {\n                image_render = (\n                    <img\n                        id={`media_${index}`}\n                        // onClick={() => { setItemToggle(index) }}\n                        title={get_split_name}\n                        src={item}\n                        async-src={item}\n                        decoding=\"async\"\n                        loading=\"lazy\"\n                        onLoad={() => {\n                            console.log('Loaded!')\n                            loadByIndex[index] = false;\n                            console.log('image_render', '--->', { loadByIndex })\n                            setLoadItems((prev: any) => ({\n                                [index]: true\n                            }))\n                        }}\n                        alt=\"media\"\n                    />)\n            }\n\n            if (videoFormats.includes(get_split_fromat)) {\n                if (base64) {\n                    image_render = (\n                        <video\n                            id={`media_${index}`}\n                            title={get_split_name}\n                            crossOrigin=\"anonymous\"\n                            src={item}\n                            poster={base64}\n                            controls={false}\n                            onLoadedData={() => {\n                                console.log('Loaded!')\n                                setLoadItems((prev: any) => ({\n                                    [index]: true\n                                }))\n                            }}\n                        // onClick={() => { setItemToggle(index) }}\n                        />\n                    )\n                } else {\n                    image_render = (\n                        <video id={`media_${index}`} crossOrigin=\"anonymous\"\n                            src={item}\n                            controls={false}\n                            title={get_split_name}\n                            onLoadedData={() => {\n                                console.log('Loaded!')\n                                setLoadItems((prev: any) => ({\n                                    [index]: true\n                                }))\n                            }}\n                        // onClick={() => { setItemToggle(index) }}\n                        />\n                    )\n                }\n            }\n\n            if (docformats.includes(get_split_fromat)) {\n                image_render = (\n                    <img\n                        id={`media_${index}`}\n                        title={get_split_name}\n                        src={docThumbnail}\n                        async-src={item}\n                        decoding=\"async\"\n                        loading=\"lazy\"\n                        onLoad={() => {\n                            loadByIndex[index] = false;\n                            console.log('Loaded!')\n                            setLoadItems((prev: any) => ({\n                                [index]: true\n                            }))\n                        }}\n                        alt=\"media\"\n                    />)\n            }\n            return (\n                <figure className=\"img_video\">\n                    <React.Fragment>\n                        {image_render && (\n                            <React.Fragment>\n                                {image_render}\n                                <img\n                                    onClick={() => { removeFromItem(index) }}\n                                    src={remove}\n                                    alt=\"remove\"\n                                    className=\"remove\"\n                                />\n                            </React.Fragment>\n                        )}\n                    </React.Fragment>\n                </figure>\n            )\n            // }\n        }\n    }\n\n    // const { sources, types } = renderFilteredItems();\n    let IsRenderValues = null;\n    if (Object.values(isItemsLoad)?.length) {\n        IsRenderValues = Array.isArray(Object.values(isItemsLoad)) && Object.values(isItemsLoad)[0] === true ? Object.values(isItemsLoad)[0] : false;\n    }\n\n    if (IsRenderValues === false) {\n        setLoading(true);\n    }\n\n    if (IsRenderValues === true) {\n        setLoading(false);\n    }\n\n    let checkErrors_: any = checkErrors();\n    console.log({ IsRenderValues, isItemsLoad, check: checkErrors_ })\n    return (\n        <div className={`app_wrapper${jobName ? ' padding_0' : ''}`}>\n            <div className={`section_wrapper${jobName ? ' padding_0' : ''}`}>\n                <div className=\"custom_container\">\n\n                    {/* <FsLightbox\n                        toggler={toggler}\n                        slide={selectedSlide}\n                        sources={sources}\n                        types={types}\n                        key={sources?.length}\n                        onClose={() => {\n                            setSelectSlide(1)\n                        }}\n                    /> */}\n\n                    <canvas id=\"canvas-extractor\" style={{ display: 'none' }}></canvas>\n\n                    <div className=\"form_field\">\n                        <div className=\"flex_row\">\n                            <div className={`flex_col_sm_${jobName ? '7' : '6'}`}>\n                                <div className=\"relate\">\n                                    <button\n                                        onClick={() => { hasDescription ? handleStepBack() : handleStepForward(6) }}\n                                        className=\"back\"></button>\n                                    <span className={jobName ? \"xs_sub_title\" : \"title\"}>{jobName || 'Photos and documents'}</span>\n                                </div>\n                                {title && <span className=\"sub_title\">{title}</span>}\n                                <p className=\"commn_para\">\n                                    {/* {para || \"Record maximum 2 short videos or 6 doc files/images to demonstrate your job and any unique requirements.\"} */}\n                                    {para || 'Record a short video (up to 30 seconds) or add up to 6 photos and files to demonstrate your job and any unique requirements.'}\n                                </p>\n                            </div>\n                            {!jobName && !filesUrl?.length && !hasDescription ? (\n                                <div className=\"flex_col_sm_5 text-right\">\n                                    <span\n                                        onClick={() => {\n                                            handleStepForward(14)\n                                        }}\n                                        className=\"link\">\n                                        {'Skip'}\n                                    </span>\n                                </div>\n                            ) : null}\n                        </div>\n                    </div>\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_12\">\n                            <div className=\"upload_img_video\">\n                                {/* {renderAsyncLoad ? renderAsyncLoad : null} */}\n                                {filesUrl?.length ?\n                                    filesUrl.map((item: any, index: number) => (renderbyFileFormat(item?.link, index, item?.base64)))\n                                    : null}\n\n                                <button\n                                    className='media_btn'\n                                    id=\"fade-button\"\n                                    aria-controls={isFileChoser ? 'fade-menu' : undefined}\n                                    aria-haspopup=\"true\"\n                                    aria-expanded={isFileChoser ? 'true' : undefined}\n                                    onClick={fileChoserClicked}\n                                >\n                                    <img src={addMedia} alt=\"\" />\n                                </button>\n\n                                <Menu\n                                    className=\"fsp_modal range dropbox\"\n                                    id=\"fade-menu\"\n                                    MenuListProps={{\n                                        'aria-labelledby': 'fade-button',\n                                    }}\n                                    anchorEl={anchorEl}\n                                    open={isFileChoser}\n                                    onClose={fileChoserClosed}\n                                    TransitionComponent={Fade}\n                                    anchorOrigin={{\n                                        vertical: 'top',\n                                        horizontal: 'center',\n                                    }}\n                                    transformOrigin={{\n                                        vertical: 'top',\n                                        horizontal: 'left',\n                                    }}\n                                >\n                                    {filesUrl?.length < 8 ? (\n                                        <React.Fragment>\n                                            <label className=\"upload_media\" htmlFor=\"upload_img_video\">\n                                                {/* <img src={addMedia} alt=\"\" /> */}\n                                                Upload from files\n                                            </label>\n                                            {!hasDescription ? (\n                                                <>\n                                                    <input\n                                                        onChange={onFileChange}\n                                                        type=\"file\"\n                                                        accept={checkIfVideoExist()}\n                                                        style={{ display: \"none\" }}\n                                                        id=\"upload_img_video\"\n                                                    />\n                                                    <DropboxChooser\n                                                        appKey={process.env.REACT_APP_DROPBOX_APP_KEY}\n                                                        success={(files: any) => onDropBoxSuccess(files)}\n                                                        cancel={(err: any) => onDropBoxCancel(err)}\n                                                        multiselect={false}\n                                                        linkType={'direct'}\n                                                    >\n                                                        <button className=\"dropbox-button\">Upload from Dropbox</button>\n                                                    </DropboxChooser>\n                                                </>\n                                            ) : (\n                                                <>\n                                                    <input\n                                                        onChange={onFileChange}\n                                                        type=\"file\"\n                                                        accept={hasDescription ? \"image/png,image/jpg,image/jpeg\" : \"image/png,image/jpg,image/jpeg,.pdf, .doc, video/mp4, video/wmv, video/avi\"}\n                                                        style={{ display: \"none\" }}\n                                                        id=\"upload_img_video\"\n                                                    />\n                                                    <DropboxChooser\n                                                        appKey={process.env.REACT_APP_DROPBOX_APP_KEY}\n                                                        success={(files: any) => onDropBoxSuccess(files)}\n                                                        cancel={(err: any) => onDropBoxCancel(err)}\n                                                        multiselect={false}\n                                                        linkType={'direct'}\n                                                    >\n                                                        <button className=\"dropbox-button\">Upload from Dropbox</button>\n                                                    </DropboxChooser>\n                                                </>\n                                            )}\n                                        </React.Fragment>\n                                    ) : null}\n                                </Menu>\n\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_8\">\n                            {hasDescription && (\n                                <div className=\"form_field\">\n                                    <label className=\"form_label\">Photo Description</label>\n                                    <div className=\"text_field\">\n                                        <textarea placeholder=\"The item has..\" value={description} onChange={({ target: { value } }: any) => setDescription(value)} />\n                                        {description.length ?\n                                            <span className=\"char_count\">\n                                                {`character length : ${description.length} / 250`}\n                                            </span>\n                                            : ''}\n                                    </div>\n                                    <span className=\"error_msg\">{submitClicked && !description.trim() ? 'Photo Description is required.' : description.length > 250 ? 'Maximum 250 characters are allowed.' : ''}</span>\n                                </div>\n                            )}\n                            <div className=\"form_field\">\n                                <button\n                                    onClick={() => {\n                                        setSubmitClicked(true);\n                                        let filteredItems: any = [];\n                                        let isRender: boolean = false;\n                                        filesUrl.forEach((item: any, index: any) => {\n                                            if (item?.mediaType === 2) {\n                                                if (!item?.base64) {\n                                                    let base64 = thumbnailExtract({\n                                                        canvasId: '#canvas-extractor',\n                                                        videoId: `#media_${index}`\n                                                    });\n                                                    item['base64'] = base64;\n                                                }\n                                            }\n                                            filteredItems.push(item);\n                                        });\n                                        if (!isRender) {\n                                            setFilesUrl(filteredItems);\n                                            handleStepComplete({\n                                                urls: filteredItems,\n                                                description: hasDescription ? description : undefined,\n                                            })\n                                        }\n                                    }}\n                                    className={`fill_btn full_btn btn-effect ${checkErrors_ && IsRenderValues == null ? 'disable_btn' : !checkErrors_ && !IsRenderValues ? 'disable_btn' : ''}`}>\n                                    {'Submit'}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n        </div >\n    )\n}\n\nexport default UploadMedia\n"]},"metadata":{},"sourceType":"module"}