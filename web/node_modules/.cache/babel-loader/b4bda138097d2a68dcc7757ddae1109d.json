{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Constants from\"../../utils/constants\";import{useDetectClickOutside}from\"react-detect-click-outside\";import{deleteRecentSearch}from\"../../redux/homeSearch/actions\";import{setShowToast}from\"../../redux/common/actions\";// @ts-ignore\nimport PlacesAutocomplete,{geocodeByAddress,getLatLng}from\"react-places-autocomplete\";// @ts-ignore\nimport{format,differenceInCalendarYears}from\"date-fns\";// @ts-ignore\nimport moment from\"moment\";// @ts-ignore\nimport{DateRange}from\"react-date-range\";import\"react-date-range/dist/styles.css\";import\"react-date-range/dist/theme/default.css\";import Geocode from\"react-geocode\";import Searchicon from\"../../assets/images/main-search.png\";import search from\"../../assets/images/ic-search.png\";import Location from\"../../assets/images/ic-location.png\";import cross from\"../../assets/images/close-black.png\";import icgps from\"../../assets/images/ic-gps.png\";import residential from\"../../assets/images/ic-residential.png\";import close from\"../../assets/images/icon-close-1.png\";import{moengage,mixPanel}from\"../../services/analyticsTools\";import{MoEConstants}from\"../../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";Geocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);Geocode.setLanguage(\"en\");Geocode.setRegion(\"au\");var TradieBannerSearch=function TradieBannerSearch(props){var _props$history3,_props$history3$locat,_stateData$searchedJo,_props$recentLocation,_props$recentLocation2;var paramsData=props.paramsData;var _useState=useState({page:1,searchedJob:\"\",isFiltered:false,isSearchedJobSelected:false,tradeId:[],specializationId:[],searchedJobId:null,location:{coordinates:[144.9631,//long\n-37.8136//lat\n]},bannerLocation:\"\",locationDenied:false,selectedMapLocation:\"\",isMapLocationSelected:false,from_date:\"\",startDate:\"\",to_date:\"\",endDate:\"\"}),_useState2=_slicedToArray(_useState,2),stateData=_useState2[0],setStateData=_useState2[1];// const [errors, setErrors] = useState<any>({});\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inputFocus1=_useState4[0],setInputFocus1=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),inputFocus2=_useState6[0],setInputFocus2=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),inputFocus3=_useState8[0],setInputFocus3=_useState8[1];var _useState9=useState({startDate:new Date(),endDate:new Date(),key:\"selection1\"}),_useState10=_slicedToArray(_useState9,2),calenderRange1=_useState10[0],setCalenderRange1=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),recentLocation=_useState12[0],setRecentLocation=_useState12[1];var handleOnOutsideSearch=function handleOnOutsideSearch(){return setInputFocus1(false);};var handleOnOutsideLocation=function handleOnOutsideLocation(){return setInputFocus2(false);};var handleOnOutsideCalender=function handleOnOutsideCalender(){return setInputFocus3(false);};var searchRef=useDetectClickOutside({onTriggered:handleOnOutsideSearch});var locationRef=useDetectClickOutside({onTriggered:handleOnOutsideLocation});var calenderRef=useDetectClickOutside({onTriggered:handleOnOutsideCalender});var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),suggestionSelected=_useState14[0],setSuggestion=_useState14[1];console.log(inputFocus1,inputFocus2,inputFocus3,\"inputfocus---------\");useEffect(function(){props.getRecentSearchList();props.getRecentLocationList();// getRecentLocationData();\n},[]);useEffect(function(){if(paramsData){var _paramsData$specializ,_paramsData$specializ2,_paramsData$tradeId,_paramsData$specializ3;var data={page:(paramsData===null||paramsData===void 0?void 0:paramsData.page)?paramsData===null||paramsData===void 0?void 0:paramsData.page:1,// searchedJob: paramsData?.searchJob ? paramsData?.specializationId?.length >= 2 ? `${paramsData?.searchJob} +${paramsData?.specializationId?.length - 1}` : paramsData?.searchJob : '',\nsearchedJob:(paramsData===null||paramsData===void 0?void 0:paramsData.isFilterOn)===\"isFilterOn\"?\"\":(paramsData===null||paramsData===void 0?void 0:paramsData.jobResults)===\"jobTypeList\"?\"\":(paramsData===null||paramsData===void 0?void 0:paramsData.isAllFilterSpecs)?paramsData.searchJob:(paramsData===null||paramsData===void 0?void 0:(_paramsData$specializ=paramsData.specializationId)===null||_paramsData$specializ===void 0?void 0:_paramsData$specializ.length)>=2?\"\".concat(paramsData===null||paramsData===void 0?void 0:paramsData.searchJob,\" +\").concat((paramsData===null||paramsData===void 0?void 0:(_paramsData$specializ2=paramsData.specializationId)===null||_paramsData$specializ2===void 0?void 0:_paramsData$specializ2.length)-1):(paramsData===null||paramsData===void 0?void 0:(_paramsData$tradeId=paramsData.tradeId)===null||_paramsData$tradeId===void 0?void 0:_paramsData$tradeId.length)>0?paramsData.searchJob:\"\",isFiltered:(paramsData===null||paramsData===void 0?void 0:paramsData.isFiltered)?paramsData===null||paramsData===void 0?void 0:paramsData.isFiltered:false,isSearchedJobSelected:(paramsData===null||paramsData===void 0?void 0:(_paramsData$specializ3=paramsData.specializationId)===null||_paramsData$specializ3===void 0?void 0:_paramsData$specializ3.length)>1?false:true,tradeId:(paramsData===null||paramsData===void 0?void 0:paramsData.tradeId)?paramsData===null||paramsData===void 0?void 0:paramsData.tradeId:[],specializationId:(paramsData===null||paramsData===void 0?void 0:paramsData.specializationId)?paramsData===null||paramsData===void 0?void 0:paramsData.specializationId:[],location:{coordinates:[(paramsData===null||paramsData===void 0?void 0:paramsData.long)?paramsData===null||paramsData===void 0?void 0:paramsData.long:paramsData===null||paramsData===void 0?void 0:paramsData.defaultLong,(paramsData===null||paramsData===void 0?void 0:paramsData.lat)?paramsData===null||paramsData===void 0?void 0:paramsData.lat:paramsData===null||paramsData===void 0?void 0:paramsData.defaultLat]},selectedMapLocation:(paramsData===null||paramsData===void 0?void 0:paramsData.addres)?paramsData===null||paramsData===void 0?void 0:paramsData.addres:\"\",isMapLocationSelected:(paramsData===null||paramsData===void 0?void 0:paramsData.addres)?true:false,from_date:(paramsData===null||paramsData===void 0?void 0:paramsData.from_date)?paramsData===null||paramsData===void 0?void 0:paramsData.from_date:\"\",startDate:\"\",to_date:(paramsData===null||paramsData===void 0?void 0:paramsData.to_date)?paramsData===null||paramsData===void 0?void 0:paramsData.to_date:\"\",endDate:\"\"};if((paramsData===null||paramsData===void 0?void 0:paramsData.from_date)||(paramsData===null||paramsData===void 0?void 0:paramsData.to_date)){var differenceInYears=differenceInCalendarYears(new Date(),paramsData===null||paramsData===void 0?void 0:paramsData.to_date);if(differenceInYears!==0){data.startDate=moment(paramsData===null||paramsData===void 0?void 0:paramsData.from_date).format(\"DD MMM YYYY\");data.endDate=moment(paramsData===null||paramsData===void 0?void 0:paramsData.to_date).format(\"DD MMM YYYY\");}else{data.startDate=moment(paramsData===null||paramsData===void 0?void 0:paramsData.from_date).format(\"DD MMM\");data.endDate=moment(paramsData===null||paramsData===void 0?void 0:paramsData.to_date).format(\"DD MMM\");}}setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),data);});}},[paramsData]);useEffect(function(){if(calenderRange1&&inputFocus3){var differenceInYears=differenceInCalendarYears(new Date(),calenderRange1.endDate);var startDate;var endDate;if(differenceInYears!==0){startDate=format(new Date(calenderRange1.startDate),\"dd MMM yyyy\");endDate=format(new Date(calenderRange1.endDate),\"dd MMM yyyy\");}else{startDate=format(new Date(calenderRange1.startDate),\"dd MMM\");endDate=format(new Date(calenderRange1.endDate),\"dd MMM\");}var from_date=format(new Date(calenderRange1.startDate),\"yyyy-MM-dd\");var to_date=format(new Date(calenderRange1.endDate),\"yyyy-MM-dd\");setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{startDate:startDate,endDate:endDate});});setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{from_date:from_date,to_date:to_date});});}},[calenderRange1]);useEffect(function(){if(props.currentCoordinates){setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{location:props.currentCoordinates});});}},[props.currentCoordinates]);var handleCalenderRange=function handleCalenderRange(item){setCalenderRange1(item.selection1);};var handleJobChange=function handleJobChange(e){e.target.value.length>=3&&props.getSearchJobList(e.target.value);setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{searchedJob:e.target.value,isSearchedJobSelected:false});});};var cleanInputData=function cleanInputData(item){if(item===\"calender\"){setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{from_date:\"\",to_date:\"\",startDate:\"\",endDate:\"\"});});return;}if(item==\"searchedJob\"){setStateData(function(prevData){var _objectSpread2;return _objectSpread(_objectSpread({},prevData),{},(_objectSpread2={},_defineProperty(_objectSpread2,item,\"\"),_defineProperty(_objectSpread2,\"isSearchedJobSelected\",false),_objectSpread2));});}setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},item,\"\"));});};var searchedJobClicked=function searchedJobClicked(item,isRecentSearchesClicked){setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{searchedJob:item.name,tradeId:[item._id],specializationId:[item.specializationsId],isSearchedJobSelected:true,isFirstJobSelectedCount:1});});setInputFocus1(false);if(isRecentSearchesClicked===\"isRecentSearchesClicked\"){var newSearchData={tradeId:[item._id],specializationId:[item.specializationsId],searchedJob:item.name,isRecentSearchesClicked:\"isRecentSearchesClicked\"};bannerSearchClicked(newSearchData);}};var cleanRecentSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,recentSearchId){var data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.stopPropagation();data={id:recentSearchId,status:0};_context.next=4;return deleteRecentSearch(data);case 4:res=_context.sent;if(res.success){props.getRecentSearchList();}case 6:case\"end\":return _context.stop();}}},_callee);}));return function cleanRecentSearch(_x,_x2){return _ref.apply(this,arguments);};}();var recentJobSearches=function recentJobSearches(){var _props$recentSearchJo,_props$recentSearchJo2,_props$recentSearchJo3;return((_props$recentSearchJo=props.recentSearchJobData)===null||_props$recentSearchJo===void 0?void 0:_props$recentSearchJo.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"custom_autosuggestion\",id:\"recent-job-search-div\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Recent searches\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row recent_search\",children:(_props$recentSearchJo2=props.recentSearchJobData)===null||_props$recentSearchJo2===void 0?void 0:(_props$recentSearchJo3=_props$recentSearchJo2.slice(0,4))===null||_props$recentSearchJo3===void 0?void 0:_props$recentSearchJo3.map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card ico_txt_wrap\",onClick:function onClick(){return searchedJobClicked(item,\"isRecentSearchesClicked\");},children:[/*#__PURE__*/_jsx(\"figure\",{className:\"ico\",children:/*#__PURE__*/_jsx(\"img\",{src:(item===null||item===void 0?void 0:item.image)||residential,alt:\"icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"f_column\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:item.trade_name})]}),/*#__PURE__*/_jsx(\"span\",{className:\"remove_card\",onClick:function onClick(event){return cleanRecentSearch(event,item.recentSearchId);},children:/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"remove\"})})]})},item.recentSearchId);})})]});};var renderJobResult=function renderJobResult(){var _props$searchJobListD,_props$searchJobListD2;return((_props$searchJobListD=props.searchJobListData)===null||_props$searchJobListD===void 0?void 0:_props$searchJobListD.length)>0&&stateData.searchedJob.length>=3&&/*#__PURE__*/_jsx(\"div\",{className:\"custom_autosuggestion\",id:\"fetched-custom-job-category-div\",children:/*#__PURE__*/_jsx(\"div\",{className:\"recent_search\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"drop_data\",children:(_props$searchJobListD2=props.searchJobListData)===null||_props$searchJobListD2===void 0?void 0:_props$searchJobListD2.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return searchedJobClicked(item);},children:[/*#__PURE__*/_jsx(\"figure\",{className:\"category\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image?item.image:residential,alt:\"icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"prof\",children:item.trade_name})]})]},item._id);})})})});};var locationSelectedHandler=function locationSelectedHandler(address,placeId,suggestion){console.log(address,\"address\",placeId,\"placeId\",suggestion,\"suggestion\");setSuggestion(suggestion===null||suggestion===void 0?void 0:suggestion.formattedSuggestion);geocodeByAddress(address).then(function(results){return getLatLng(results[0]);}).then(function(_ref2){var lat=_ref2.lat,lng=_ref2.lng;var locationNew={location:{coordinates:[lng,lat]}};setStateData(function(prevData){var _suggestion$formatted;return _objectSpread(_objectSpread(_objectSpread({},prevData),locationNew),{},{selectedMapLocation:suggestion===null||suggestion===void 0?void 0:(_suggestion$formatted=suggestion.formattedSuggestion)===null||_suggestion$formatted===void 0?void 0:_suggestion$formatted.mainText,isMapLocationSelected:true});});setInputFocus2(false);});};var filterFromAddress=function filterFromAddress(results){var city,state,country=null;for(var i=0;i<results[0].address_components.length;i++){for(var j=0;j<results[0].address_components[i].types.length;j++){switch(results[0].address_components[i].types[j]){case\"locality\":city=results[0].address_components[i].long_name;break;case\"administrative_area_level_1\":state=results[0].address_components[i].long_name;break;case\"country\":country=results[0].address_components[i].long_name;break;}}}return{city:city,state:state,country:country.toLowerCase()};};var getCurrentLocation=function getCurrentLocation(e){e.preventDefault();var showPosition=function showPosition(position){var lat=position.coords.latitude;var long=position.coords.longitude;var latlng=new google.maps.LatLng(lat,long);var geocoder=new google.maps.Geocoder();geocoder.geocode({location:latlng},function(results,status){if(status!==google.maps.GeocoderStatus.OK){alert(status);}if(status===google.maps.GeocoderStatus.OK){var _filterFromAddress=filterFromAddress(results),country=_filterFromAddress.country;if([\"australia\",\"au\"].includes(country)){setInputFocus2(false);if(results&&Array.isArray(results)&&results[0]){setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{selectedMapLocation:results[0].formatted_address,isMapLocationSelected:true,locationDenied:false});});}}else{setInputFocus2(false);setShowToast(true,\"Uh Oh! We don't provide service currently in your Location\");}}});};var showError=function showError(error){if(error.code===error.PERMISSION_DENIED){setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{bannerLocation:\"\",locationDenied:true});});}};if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition,showError);}};var validateForm=function validateForm(type){var _props$history,_props$history$locati;if(type===\"isRecentSearchesClicked\"&&((_props$history=props.history)===null||_props$history===void 0?void 0:(_props$history$locati=_props$history.location)===null||_props$history$locati===void 0?void 0:_props$history$locati.pathname)===\"/\"){return true;}var newErrors={};if(!(stateData===null||stateData===void 0?void 0:stateData.isSearchedJobSelected)){newErrors.searchedJob=Constants.errorStrings.bannerSearchJob;}else if(!(stateData===null||stateData===void 0?void 0:stateData.searchedJob)){newErrors.searchedJob=Constants.errorStrings.bannerSearchJobEmpty;}if(!(stateData===null||stateData===void 0?void 0:stateData.isMapLocationSelected)&&(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation)){newErrors.selectedMapLocation=Constants.errorStrings.bannerSearchLocation;}if(type===\"showErrorToast\"){return newErrors;}// setErrors(newErrors);\nreturn!Object.keys(newErrors).length;};var bannerSearchClicked=function bannerSearchClicked(newSearchData){var newErrors=validateForm((newSearchData===null||newSearchData===void 0?void 0:newSearchData.isRecentSearchesClicked)?newSearchData===null||newSearchData===void 0?void 0:newSearchData.isRecentSearchesClicked:\"showErrorToast\");if(!!newErrors.searchedJob||!!newErrors.selectedMapLocation){if(!!newErrors.searchedJob){setShowToast(true,\"Please select job type from the list\");return;}if(!!newErrors.selectedMapLocation){setShowToast(true,\"Please select location from the list\");return;}}if(validateForm(newSearchData===null||newSearchData===void 0?void 0:newSearchData.isRecentSearchesClicked)){var _props$location,_props$location2,_props$currentCoordin,_props$currentCoordin2,_props$currentCoordin3,_props$currentCoordin4,_props$location3,_props$history2,_props$history2$locat;var params=new URLSearchParams((_props$location=props.location)===null||_props$location===void 0?void 0:_props$location.search);var queryParamsData={defaultLat:Number(params.get(\"defaultLat\")),defaultLong:Number(params.get(\"defaultLong\"))};var _data=_objectSpread(_objectSpread(_objectSpread(_objectSpread({page:stateData.page,isFiltered:false},suggestionSelected&&{address:JSON.stringify(suggestionSelected)}),{},{tradeId:(newSearchData===null||newSearchData===void 0?void 0:newSearchData.tradeId)?newSearchData===null||newSearchData===void 0?void 0:newSearchData.tradeId:stateData===null||stateData===void 0?void 0:stateData.tradeId},stateData.isMapLocationSelected&&{location:stateData===null||stateData===void 0?void 0:stateData.location}),{},{// location: stateData?.location,\nspecializationId:(newSearchData===null||newSearchData===void 0?void 0:newSearchData.specializationId)?newSearchData===null||newSearchData===void 0?void 0:newSearchData.specializationId:stateData===null||stateData===void 0?void 0:stateData.specializationId},(stateData===null||stateData===void 0?void 0:stateData.from_date)&&{from_date:stateData===null||stateData===void 0?void 0:stateData.from_date}),(stateData===null||stateData===void 0?void 0:stateData.to_date)&&{to_date:stateData===null||stateData===void 0?void 0:stateData.to_date});console.log(\"data: \",_data,\"suggestionSelected\",suggestionSelected);if((props===null||props===void 0?void 0:(_props$location2=props.location)===null||_props$location2===void 0?void 0:_props$location2.pathname)===\"/search-job-results\"){var _props$tradeListData,_props$tradeListData$,_JSON$parse,_JSON$parse2;props.postHomeSearchData(_data);var mData=_objectSpread(_objectSpread(_objectSpread(_objectSpread({timeStamp:moengage.getCurrentTimeStamp(),category:(_props$tradeListData=props.tradeListData)===null||_props$tradeListData===void 0?void 0:(_props$tradeListData$=_props$tradeListData.find(function(i){var _data$tradeId;return i._id===(_data===null||_data===void 0?void 0:(_data$tradeId=_data.tradeId)===null||_data$tradeId===void 0?void 0:_data$tradeId[0]);}))===null||_props$tradeListData$===void 0?void 0:_props$tradeListData$.trade_name},_data.address&&{location:\"\".concat((_JSON$parse=JSON.parse(_data.address))===null||_JSON$parse===void 0?void 0:_JSON$parse.mainText,\" \").concat((_JSON$parse2=JSON.parse(_data.address))===null||_JSON$parse2===void 0?void 0:_JSON$parse2.secondaryText)}),(_data===null||_data===void 0?void 0:_data.max_budget)&&{\"Max budget\":_data===null||_data===void 0?void 0:_data.max_budget}),(_data===null||_data===void 0?void 0:_data.from_date)&&{\"start date\":_data===null||_data===void 0?void 0:_data.from_date}),(_data===null||_data===void 0?void 0:_data.to_date)&&{\"end date\":_data===null||_data===void 0?void 0:_data.to_date});moengage.moE_SendEvent(MoEConstants.SEARCHED_FOR_JOBS,mData);mixPanel.mixP_SendEvent(MoEConstants.SEARCHED_FOR_JOBS,mData);}// delete data.address;\nvar newData=_objectSpread(_objectSpread(_objectSpread({},_data),{},{lat:stateData.location.coordinates[1],long:stateData.location.coordinates[0],defaultLat:((_props$currentCoordin=props.currentCoordinates)===null||_props$currentCoordin===void 0?void 0:_props$currentCoordin.coordinates[1])?(_props$currentCoordin2=props.currentCoordinates)===null||_props$currentCoordin2===void 0?void 0:_props$currentCoordin2.coordinates[1]:queryParamsData.defaultLat,defaultLong:((_props$currentCoordin3=props.currentCoordinates)===null||_props$currentCoordin3===void 0?void 0:_props$currentCoordin3.coordinates[0])?(_props$currentCoordin4=props.currentCoordinates)===null||_props$currentCoordin4===void 0?void 0:_props$currentCoordin4.coordinates[0]:queryParamsData.defaultLong},stateData.selectedMapLocation&&{addres:stateData.selectedMapLocation.replaceAll(\"#\",\"\")}),{},{searchJob:(newSearchData===null||newSearchData===void 0?void 0:newSearchData.searchedJob)?newSearchData===null||newSearchData===void 0?void 0:newSearchData.searchedJob.replaceAll(\"&\",\"xxx\"):stateData===null||stateData===void 0?void 0:stateData.searchedJob.replaceAll(\"&\",\"xxx\"),jobResults:null});if((props===null||props===void 0?void 0:(_props$location3=props.location)===null||_props$location3===void 0?void 0:_props$location3.pathname)===\"/search-job-results\"&&newData.address){setTimeout(function(){props.getRecentLocationList();},500);}delete newData.location;delete newData.isFilterOn;if(newData.searchJob){delete newData.heading;delete newData.jobResults;}Object.keys(newData).forEach(function(key){return(newData[key]===\"\"||newData[key]===undefined||newData[key]===null||newData[key]===0||newData[key]==\"0\")&&delete newData[key];});var url=\"search-job-results?\";for(var _i=0,_Object$entries=Object.entries(newData);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];url+=\"\".concat(key,\"=\").concat(value,\"&\");}var newUrl=url.slice(0,url.length-1);console.log(newUrl,\"newUrl\",_data,\"data\",newData,\"newData\");if(((_props$history2=props.history)===null||_props$history2===void 0?void 0:(_props$history2$locat=_props$history2.location)===null||_props$history2$locat===void 0?void 0:_props$history2$locat.pathname)===\"/\"){props.history.push(newUrl);}else{props.history.replace(newUrl);if(props===null||props===void 0?void 0:props.refreshParams){props===null||props===void 0?void 0:props.refreshParams(_data);}}}};var renderPlacesData=function renderPlacesData(_ref3){var getInputProps=_ref3.getInputProps,suggestions=_ref3.suggestions,getSuggestionItemProps=_ref3.getSuggestionItemProps,loading=_ref3.loading;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},getInputProps({placeholder:\"Where?\",className:\"line-1\"})),{},{id:\"location-input-tag\",onFocus:function onFocus(){setInputFocus2(true);setInputFocus1(false);setInputFocus3(false);}})),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/_jsx(\"img\",{src:Location,alt:\"location\"})}),(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation)&&inputFocus2&&/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){setSuggestion(\"\");setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{selectedMapLocation:\"\",isMapLocationSelected:false});});}})})]}),(suggestions===null||suggestions===void 0?void 0:suggestions.length)>0&&(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation.length)>=3&&inputFocus2?/*#__PURE__*/_jsx(\"div\",{className:\"custom_autosuggestion location\",id:\"autocomplete-dropdown-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row recent_search auto_loc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),suggestions.map(function(suggestion){var className=\"autosuggestion_icon card loc name\";var style=suggestion.active?{backgroundColor:\"#fafafa\",cursor:\"pointer\"}:{backgroundColor:\"#ffffff\",cursor:\"pointer\"};return/*#__PURE__*/_createElement(\"div\",_objectSpread(_objectSpread({},getSuggestionItemProps(suggestion,{className:className,style:style})),{},{key:suggestion.formattedSuggestion.mainText}),/*#__PURE__*/_jsx(\"span\",{children:suggestion.formattedSuggestion.mainText}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:suggestion.formattedSuggestion.secondaryText}));})]})})}):!loading&&!(stateData===null||stateData===void 0?void 0:stateData.isMapLocationSelected)&&(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation.length)>=3&&inputFocus2&&(suggestions===null||suggestions===void 0?void 0:suggestions.length)<1?/*#__PURE__*/_jsx(\"div\",{style:{minHeight:\"50px\"},className:\"custom_autosuggestion location\",id:\"autocomplete-dropdown-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row recent_search auto_loc\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loc_suggestions\",children:\"No Result Found.\"})})})}):null]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"home_search\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modal_srch_close\",onClick:function onClick(){if(props===null||props===void 0?void 0:props.handleChangeToggle){props.handleChangeToggle(false);}},children:/*#__PURE__*/_jsx(\"img\",{src:close,alt:\"close\"})}),/*#__PURE__*/_jsx(\"form\",{className:\"search_wrapr \".concat(((_props$history3=props.history)===null||_props$history3===void 0?void 0:(_props$history3$locat=_props$history3.location)===null||_props$history3$locat===void 0?void 0:_props$history3$locat.pathname)===\"/\"?(stateData===null||stateData===void 0?void 0:stateData.isFirstJobSelectedCount)?\"\":\"first_input\":\"\"),children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:\"categ_box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",id:\"text-field-div\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:searchRef,placeholder:\"What jobs are you after?\",value:stateData===null||stateData===void 0?void 0:stateData.searchedJob,onChange:handleJobChange,onFocus:function onFocus(){setInputFocus1(true);setInputFocus2(false);setInputFocus3(false);}}),/*#__PURE__*/_jsx(\"div\",{className:\"border_eff\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr\",children:/*#__PURE__*/_jsx(\"img\",{src:Searchicon,alt:\"search\"})}),!!(stateData===null||stateData===void 0?void 0:stateData.searchedJob)&&inputFocus1&&/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){return cleanInputData(\"searchedJob\");}})})]})}),!(stateData===null||stateData===void 0?void 0:stateData.searchedJob)&&inputFocus1&&!inputFocus2&&recentJobSearches(),(stateData===null||stateData===void 0?void 0:(_stateData$searchedJo=stateData.searchedJob)===null||_stateData$searchedJo===void 0?void 0:_stateData$searchedJo.length)>=1&&inputFocus1&&!inputFocus2&&renderJobResult(),/*#__PURE__*/_jsxs(\"li\",{ref:locationRef,className:\"loc_box\",style:{display:\"block\"},children:[/*#__PURE__*/_jsx(\"div\",{id:\"location-text-field-div\",children:/*#__PURE__*/_jsx(PlacesAutocomplete,{value:(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation)!==\"{}\"?stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation:\"\",onChange:function onChange(city){return setStateData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},{selectedMapLocation:city,isMapLocationSelected:false});});},shouldFetchSuggestions:true,onSelect:locationSelectedHandler,highlightFirstSuggestion:true,searchOptions:{componentRestrictions:{country:\"au\"},// types: [\"address\"]\ntypes:[\"(cities)\"]}// debounce={400}\n,children:renderPlacesData})}),(!(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation)||(stateData===null||stateData===void 0?void 0:stateData.selectedMapLocation)===\"{}\")&&inputFocus2&&/*#__PURE__*/_jsxs(\"div\",{className:\"custom_autosuggestion location\",id:\"current-location-search-div\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"location-btn\",onClick:getCurrentLocation,children:[/*#__PURE__*/_jsx(\"span\",{className:\"gps_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:icgps})}),\" \",\"Use my current location\"]}),(stateData===null||stateData===void 0?void 0:stateData.locationDenied)&&/*#__PURE__*/_jsx(\"span\",{className:\"blocked_note\",children:\"You have blocked your location. To use this, change your location settings in browser.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent_search auto_loc\",children:[console.log({recent:props===null||props===void 0?void 0:props.recentLocationData}),(props===null||props===void 0?void 0:(_props$recentLocation=props.recentLocationData)===null||_props$recentLocation===void 0?void 0:_props$recentLocation.length)>0?/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:\"Recent searches\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:props===null||props===void 0?void 0:(_props$recentLocation2=props.recentLocationData)===null||_props$recentLocation2===void 0?void 0:_props$recentLocation2.map(function(item){var _item$address,_JSON$parse4,_JSON$parse5;return(item===null||item===void 0?void 0:(_item$address=item.address)===null||_item$address===void 0?void 0:_item$address.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",onClick:function onClick(){setStateData(function(prevData){var _JSON$parse3;return _objectSpread(_objectSpread({},prevData),{},{location:item.location,selectedMapLocation:(_JSON$parse3=JSON.parse(item===null||item===void 0?void 0:item.address))===null||_JSON$parse3===void 0?void 0:_JSON$parse3.mainText,//item.allText?.mainText,\nisMapLocationSelected:true});});setSuggestion(JSON.parse(item===null||item===void 0?void 0:item.address));// let location_coordinates: any = item.location.coordinates\n// setAddressText(item.formatted_address);\n// setSelectedAddress({\n//     lat: location_coordinates[1],\n//     lng: location_coordinates[0]\n// });\n},children:/*#__PURE__*/_jsxs(\"div\",{className:\"autosuggestion_icon card loc name\",children:[/*#__PURE__*/_jsx(\"span\",{children:(_JSON$parse4=JSON.parse(item===null||item===void 0?void 0:item.address))===null||_JSON$parse4===void 0?void 0:_JSON$parse4.mainText}),/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:(_JSON$parse5=JSON.parse(item===null||item===void 0?void 0:item.address))===null||_JSON$parse5===void 0?void 0:_JSON$parse5.secondaryText})]})});})})]})]})]}),/*#__PURE__*/_jsx(\"li\",{className:\"date_box \".concat(stateData.startDate?\"date_value\":\"\"),style:{display:\"block\"},children:/*#__PURE__*/_jsxs(\"div\",{ref:calenderRef,className:\"custom_date_range\",id:\"date-range-div\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text_field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon_ltr calendar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"calender-input\",placeholder:(stateData===null||stateData===void 0?void 0:stateData.startDate)?\"\".concat(stateData===null||stateData===void 0?void 0:stateData.startDate,\" - \").concat(stateData===null||stateData===void 0?void 0:stateData.endDate):\"When?\",onFocus:function onFocus(){setInputFocus3(true);setInputFocus1(false);setInputFocus2(false);}}),(stateData===null||stateData===void 0?void 0:stateData.startDate)&&inputFocus3&&/*#__PURE__*/_jsx(\"span\",{className:\"detect_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:cross,alt:\"cross\",onClick:function onClick(){return cleanInputData(\"calender\");}})})]}),inputFocus3&&/*#__PURE__*/_jsx(\"div\",{className:\"custom_autosuggestion\",id:\"custom-date-range-div\",children:/*#__PURE__*/_jsx(DateRange,{onChange:handleCalenderRange,ranges:[calenderRange1],moveRangeOnFirstSelection:false,rangeColors:[\"#fee600\",\"#b5b5b5\"],showDateDisplay:false,showSelectionPreview:true,months:2,showPreview:true,minDate:new Date(),maxDate:new Date(new Date().setFullYear(new Date().getFullYear()+2)),direction:\"horizontal\",fixedHeight:true})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"search_btn\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"fill_btn btn-effect\",onClick:bannerSearchClicked,children:/*#__PURE__*/_jsx(\"img\",{src:search,alt:\"search\"})})})]})})]});};export default TradieBannerSearch;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/common/tradieBannerSearch/tradieBannerSearch.tsx"],"names":["React","useState","useEffect","Constants","useDetectClickOutside","deleteRecentSearch","setShowToast","PlacesAutocomplete","geocodeByAddress","getLatLng","format","differenceInCalendarYears","moment","DateRange","Geocode","Searchicon","search","Location","cross","icgps","residential","close","moengage","mixPanel","MoEConstants","setApiKey","SocialAuth","GOOGLE_GEOCODE_KEY","setLanguage","setRegion","TradieBannerSearch","props","paramsData","page","searchedJob","isFiltered","isSearchedJobSelected","tradeId","specializationId","searchedJobId","location","coordinates","bannerLocation","locationDenied","selectedMapLocation","isMapLocationSelected","from_date","startDate","to_date","endDate","stateData","setStateData","inputFocus1","setInputFocus1","inputFocus2","setInputFocus2","inputFocus3","setInputFocus3","Date","key","calenderRange1","setCalenderRange1","recentLocation","setRecentLocation","handleOnOutsideSearch","handleOnOutsideLocation","handleOnOutsideCalender","searchRef","onTriggered","locationRef","calenderRef","suggestionSelected","setSuggestion","console","log","getRecentSearchList","getRecentLocationList","data","isFilterOn","jobResults","isAllFilterSpecs","searchJob","length","long","defaultLong","lat","defaultLat","addres","differenceInYears","prevData","currentCoordinates","handleCalenderRange","item","selection1","handleJobChange","e","target","value","getSearchJobList","cleanInputData","searchedJobClicked","isRecentSearchesClicked","name","_id","specializationsId","isFirstJobSelectedCount","newSearchData","bannerSearchClicked","cleanRecentSearch","event","recentSearchId","stopPropagation","id","status","res","success","recentJobSearches","recentSearchJobData","slice","map","image","trade_name","renderJobResult","searchJobListData","locationSelectedHandler","address","placeId","suggestion","formattedSuggestion","then","results","lng","locationNew","mainText","filterFromAddress","city","state","country","i","address_components","j","types","long_name","toLowerCase","getCurrentLocation","preventDefault","showPosition","position","coords","latitude","longitude","latlng","google","maps","LatLng","geocoder","Geocoder","geocode","GeocoderStatus","OK","alert","includes","Array","isArray","formatted_address","showError","error","code","PERMISSION_DENIED","navigator","geolocation","getCurrentPosition","validateForm","type","history","pathname","newErrors","errorStrings","bannerSearchJob","bannerSearchJobEmpty","bannerSearchLocation","Object","keys","params","URLSearchParams","queryParamsData","Number","get","JSON","stringify","postHomeSearchData","mData","timeStamp","getCurrentTimeStamp","category","tradeListData","find","parse","secondaryText","max_budget","moE_SendEvent","SEARCHED_FOR_JOBS","mixP_SendEvent","newData","replaceAll","setTimeout","heading","forEach","undefined","url","entries","newUrl","push","replace","refreshParams","renderPlacesData","getInputProps","suggestions","getSuggestionItemProps","loading","placeholder","className","style","active","backgroundColor","cursor","minHeight","handleChangeToggle","display","componentRestrictions","recent","recentLocationData","setFullYear","getFullYear"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Constants from \"../../utils/constants\";\nimport { useDetectClickOutside } from \"react-detect-click-outside\";\nimport { deleteRecentSearch } from \"../../redux/homeSearch/actions\";\nimport { setShowToast } from \"../../redux/common/actions\";\n// @ts-ignore\nimport PlacesAutocomplete, {\n  geocodeByAddress,\n  getLatLng,\n} from \"react-places-autocomplete\";\n// @ts-ignore\nimport { format, differenceInCalendarYears } from \"date-fns\";\n// @ts-ignore\nimport moment from \"moment\";\n// @ts-ignore\nimport { DateRange } from \"react-date-range\";\nimport \"react-date-range/dist/styles.css\";\nimport \"react-date-range/dist/theme/default.css\";\nimport Geocode from \"react-geocode\";\n\nimport Searchicon from \"../../assets/images/main-search.png\";\nimport search from \"../../assets/images/ic-search.png\";\nimport Location from \"../../assets/images/ic-location.png\";\nimport cross from \"../../assets/images/close-black.png\";\nimport icgps from \"../../assets/images/ic-gps.png\";\nimport residential from \"../../assets/images/ic-residential.png\";\nimport close from \"../../assets/images/icon-close-1.png\";\nimport { moengage, mixPanel } from \"../../services/analyticsTools\";\nimport { MoEConstants } from \"../../utils/constants\";\n\nGeocode.setApiKey(Constants.SocialAuth.GOOGLE_GEOCODE_KEY);\nGeocode.setLanguage(\"en\");\nGeocode.setRegion(\"au\");\ninterface PropsType {\n  history: any;\n  location?: any;\n  paramsData?: any;\n  currentCoordinates?: any;\n  searchJobListData: Array<any>;\n  recentSearchJobData: Array<any>;\n  recentLocationData: Array<any>;\n  homeSearchJobData: Array<any>;\n  tradeListData: Array<any>;\n  setTradieHomeData?: (data: any) => void;\n  getSearchJobList: (data: any) => void;\n  postHomeSearchData: (data: any) => void;\n  getRecentSearchList: () => void;\n  getRecentLocationList: () => void;\n  refreshParams?: (data: any) => void;\n  handleChangeToggle?: (data: boolean) => void;\n}\n\nconst TradieBannerSearch = (props: PropsType) => {\n  const { paramsData } = props;\n  const [stateData, setStateData] = useState<any>({\n    page: 1,\n    searchedJob: \"\",\n    isFiltered: false,\n    isSearchedJobSelected: false,\n    tradeId: [],\n    specializationId: [],\n    searchedJobId: null,\n    location: {\n      coordinates: [\n        144.9631, //long\n        -37.8136, //lat\n      ],\n    },\n    bannerLocation: \"\",\n    locationDenied: false,\n    selectedMapLocation: \"\",\n    isMapLocationSelected: false,\n    from_date: \"\",\n    startDate: \"\",\n    to_date: \"\",\n    endDate: \"\",\n  });\n\n  // const [errors, setErrors] = useState<any>({});\n  const [inputFocus1, setInputFocus1] = useState<boolean>(false);\n  const [inputFocus2, setInputFocus2] = useState<boolean>(false);\n  const [inputFocus3, setInputFocus3] = useState<boolean>(false);\n  const [calenderRange1, setCalenderRange1] = useState<any>({\n    startDate: new Date(),\n    endDate: new Date(),\n    key: \"selection1\",\n  });\n  const [recentLocation, setRecentLocation] = useState<any>([]);\n\n  const handleOnOutsideSearch = () => setInputFocus1(false);\n  const handleOnOutsideLocation = () => setInputFocus2(false);\n  const handleOnOutsideCalender = () => setInputFocus3(false);\n\n  const searchRef = useDetectClickOutside({\n    onTriggered: handleOnOutsideSearch,\n  });\n  const locationRef = useDetectClickOutside({\n    onTriggered: handleOnOutsideLocation,\n  });\n  const calenderRef = useDetectClickOutside({\n    onTriggered: handleOnOutsideCalender,\n  });\n\n  const [suggestionSelected, setSuggestion] = useState<any>(\"\");\n\n  console.log(inputFocus1, inputFocus2, inputFocus3, \"inputfocus---------\");\n\n  useEffect(() => {\n    props.getRecentSearchList();\n    props.getRecentLocationList();\n    // getRecentLocationData();\n  }, []);\n\n  useEffect(() => {\n    if (paramsData) {\n      var data = {\n        page: paramsData?.page ? paramsData?.page : 1,\n        // searchedJob: paramsData?.searchJob ? paramsData?.specializationId?.length >= 2 ? `${paramsData?.searchJob} +${paramsData?.specializationId?.length - 1}` : paramsData?.searchJob : '',\n        searchedJob:\n          paramsData?.isFilterOn === \"isFilterOn\"\n            ? \"\"\n            : paramsData?.jobResults === \"jobTypeList\"\n            ? \"\"\n            : paramsData?.isAllFilterSpecs\n            ? paramsData.searchJob\n            : paramsData?.specializationId?.length >= 2\n            ? `${paramsData?.searchJob} +${\n                paramsData?.specializationId?.length - 1\n              }`\n            : paramsData?.tradeId?.length > 0\n            ? paramsData.searchJob\n            : \"\",\n        isFiltered: paramsData?.isFiltered ? paramsData?.isFiltered : false,\n        isSearchedJobSelected:\n          paramsData?.specializationId?.length > 1 ? false : true,\n        tradeId: paramsData?.tradeId ? paramsData?.tradeId : [],\n        specializationId: paramsData?.specializationId\n          ? paramsData?.specializationId\n          : [],\n        location: {\n          coordinates: [\n            paramsData?.long ? paramsData?.long : paramsData?.defaultLong,\n            paramsData?.lat ? paramsData?.lat : paramsData?.defaultLat,\n          ],\n        },\n        selectedMapLocation: paramsData?.addres ? paramsData?.addres : \"\",\n        isMapLocationSelected: paramsData?.addres ? true : false,\n        from_date: paramsData?.from_date ? paramsData?.from_date : \"\",\n        startDate: \"\",\n        to_date: paramsData?.to_date ? paramsData?.to_date : \"\",\n        endDate: \"\",\n      };\n      if (paramsData?.from_date || paramsData?.to_date) {\n        const differenceInYears: number = differenceInCalendarYears(\n          new Date(),\n          paramsData?.to_date\n        );\n        if (differenceInYears !== 0) {\n          data.startDate = moment(paramsData?.from_date).format(\"DD MMM YYYY\");\n          data.endDate = moment(paramsData?.to_date).format(\"DD MMM YYYY\");\n        } else {\n          data.startDate = moment(paramsData?.from_date).format(\"DD MMM\");\n          data.endDate = moment(paramsData?.to_date).format(\"DD MMM\");\n        }\n      }\n      setStateData((prevData: any) => ({ ...prevData, ...data }));\n    }\n  }, [paramsData]);\n\n  useEffect(() => {\n    if (calenderRange1 && inputFocus3) {\n      const differenceInYears: number = differenceInCalendarYears(\n        new Date(),\n        calenderRange1.endDate\n      );\n      var startDate: string;\n      var endDate: string;\n      if (differenceInYears !== 0) {\n        startDate = format(new Date(calenderRange1.startDate), \"dd MMM yyyy\");\n        endDate = format(new Date(calenderRange1.endDate), \"dd MMM yyyy\");\n      } else {\n        startDate = format(new Date(calenderRange1.startDate), \"dd MMM\");\n        endDate = format(new Date(calenderRange1.endDate), \"dd MMM\");\n      }\n      const from_date = format(\n        new Date(calenderRange1.startDate),\n        \"yyyy-MM-dd\"\n      );\n      const to_date = format(new Date(calenderRange1.endDate), \"yyyy-MM-dd\");\n      setStateData((prevData: any) => ({\n        ...prevData,\n        startDate: startDate,\n        endDate: endDate,\n      }));\n      setStateData((prevData: any) => ({\n        ...prevData,\n        from_date: from_date,\n        to_date: to_date,\n      }));\n    }\n  }, [calenderRange1]);\n\n  useEffect(() => {\n    if (props.currentCoordinates) {\n      setStateData((prevData: any) => ({\n        ...prevData,\n        location: props.currentCoordinates,\n      }));\n    }\n  }, [props.currentCoordinates]);\n\n  const handleCalenderRange = (item: any) => {\n    setCalenderRange1(item.selection1);\n  };\n\n  const handleJobChange = (e: any) => {\n    e.target.value.length >= 3 && props.getSearchJobList(e.target.value);\n    setStateData((prevData: any) => ({\n      ...prevData,\n      searchedJob: e.target.value,\n      isSearchedJobSelected: false,\n    }));\n  };\n\n  const cleanInputData = (item: string) => {\n    if (item === \"calender\") {\n      setStateData((prevData: any) => ({\n        ...prevData,\n        from_date: \"\",\n        to_date: \"\",\n        startDate: \"\",\n        endDate: \"\",\n      }));\n      return;\n    }\n    if (item == \"searchedJob\") {\n      setStateData((prevData: any) => ({\n        ...prevData,\n        [item]: \"\",\n        isSearchedJobSelected: false,\n      }));\n    }\n    setStateData((prevData: any) => ({ ...prevData, [item]: \"\" }));\n  };\n\n  const searchedJobClicked = (item: any, isRecentSearchesClicked?: string) => {\n    setStateData((prevData: any) => ({\n      ...prevData,\n      searchedJob: item.name,\n      tradeId: [item._id],\n      specializationId: [item.specializationsId],\n      isSearchedJobSelected: true,\n      isFirstJobSelectedCount: 1,\n    }));\n    setInputFocus1(false);\n    if (isRecentSearchesClicked === \"isRecentSearchesClicked\") {\n      const newSearchData = {\n        tradeId: [item._id],\n        specializationId: [item.specializationsId],\n        searchedJob: item.name,\n        isRecentSearchesClicked: \"isRecentSearchesClicked\",\n      };\n      bannerSearchClicked(newSearchData);\n    }\n  };\n\n  const cleanRecentSearch = async (event: any, recentSearchId: string) => {\n    event.stopPropagation();\n    const data = {\n      id: recentSearchId,\n      status: 0,\n    };\n    const res = await deleteRecentSearch(data);\n    if (res.success) {\n      props.getRecentSearchList();\n    }\n  };\n\n  const recentJobSearches = () => {\n    return (\n      props.recentSearchJobData?.length > 0 && (\n        <div className=\"custom_autosuggestion\" id=\"recent-job-search-div\">\n          <span className=\"sub_title\">Recent searches</span>\n          <div className=\"flex_row recent_search\">\n            {props.recentSearchJobData?.slice(0, 4)?.map((item: any) => {\n              return (\n                <div className=\"flex_col_sm_3\" key={item.recentSearchId}>\n                  <div\n                    className=\"card ico_txt_wrap\"\n                    onClick={() =>\n                      searchedJobClicked(item, \"isRecentSearchesClicked\")\n                    }\n                  >\n                    <figure className=\"ico\">\n                      <img src={item?.image || residential} alt=\"icon\" />\n                    </figure>\n                    <div className=\"f_column\">\n                      <span>{item.name}</span>\n                      <span className=\"name\">{item.trade_name}</span>\n                    </div>\n                    <span\n                      className=\"remove_card\"\n                      onClick={(event) =>\n                        cleanRecentSearch(event, item.recentSearchId)\n                      }\n                    >\n                      <img src={close} alt=\"remove\" />\n                    </span>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )\n    );\n  };\n\n  const renderJobResult = () => {\n    return (\n      props.searchJobListData?.length > 0 &&\n      stateData.searchedJob.length >= 3 && (\n        <div\n          className=\"custom_autosuggestion\"\n          id=\"fetched-custom-job-category-div\"\n        >\n          <div className=\"recent_search\">\n            <ul className=\"drop_data\">\n              {props.searchJobListData?.map((item: any) => {\n                return (\n                  <li key={item._id} onClick={() => searchedJobClicked(item)}>\n                    <figure className=\"category\">\n                      <img\n                        src={item.image ? item.image : residential}\n                        alt=\"icon\"\n                      />\n                    </figure>\n                    <div className=\"details\">\n                      <span className=\"name\">{item.name}</span>\n                      <span className=\"prof\">{item.trade_name}</span>\n                    </div>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </div>\n      )\n    );\n  };\n\n  const locationSelectedHandler = (\n    address: string,\n    placeId?: any,\n    suggestion?: any\n  ) => {\n    console.log(\n      address,\n      \"address\",\n      placeId,\n      \"placeId\",\n      suggestion,\n      \"suggestion\"\n    );\n    setSuggestion(suggestion?.formattedSuggestion);\n    geocodeByAddress(address)\n      .then((results: any) => getLatLng(results[0]))\n      .then(({ lat, lng }: any) => {\n        const locationNew: any = {\n          location: {\n            coordinates: [lng, lat],\n          },\n        };\n        setStateData((prevData: any) => ({\n          ...prevData,\n          ...locationNew,\n          selectedMapLocation: suggestion?.formattedSuggestion?.mainText,\n          isMapLocationSelected: true,\n        }));\n        setInputFocus2(false);\n      });\n  };\n\n  const filterFromAddress = (results: any) => {\n    let city,\n      state,\n      country = null;\n    for (let i = 0; i < results[0].address_components.length; i++) {\n      for (let j = 0; j < results[0].address_components[i].types.length; j++) {\n        switch (results[0].address_components[i].types[j]) {\n          case \"locality\":\n            city = results[0].address_components[i].long_name;\n            break;\n          case \"administrative_area_level_1\":\n            state = results[0].address_components[i].long_name;\n            break;\n          case \"country\":\n            country = results[0].address_components[i].long_name;\n            break;\n        }\n      }\n    }\n    return { city, state, country: country.toLowerCase() };\n  };\n\n  const getCurrentLocation = (e: any) => {\n    e.preventDefault();\n    const showPosition = (position: any) => {\n      const lat = position.coords.latitude;\n      const long = position.coords.longitude;\n      var latlng = new google.maps.LatLng(lat, long);\n      var geocoder = new google.maps.Geocoder();\n      geocoder.geocode({ location: latlng }, function (results, status) {\n        if (status !== google.maps.GeocoderStatus.OK) {\n          alert(status);\n        }\n        if (status === google.maps.GeocoderStatus.OK) {\n          const { country } = filterFromAddress(results);\n          if ([\"australia\", \"au\"].includes(country)) {\n            setInputFocus2(false);\n            if (results && Array.isArray(results) && results[0]) {\n              setStateData((prevData: any) => ({\n                ...prevData,\n                selectedMapLocation: results[0].formatted_address,\n                isMapLocationSelected: true,\n                locationDenied: false,\n              }));\n            }\n          } else {\n            setInputFocus2(false);\n            setShowToast(\n              true,\n              \"Uh Oh! We don't provide service currently in your Location\"\n            );\n          }\n        }\n      });\n    };\n\n    const showError = (error: any) => {\n      if (error.code === error.PERMISSION_DENIED) {\n        setStateData((prevData: any) => ({\n          ...prevData,\n          bannerLocation: \"\",\n          locationDenied: true,\n        }));\n      }\n    };\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(showPosition, showError);\n    }\n  };\n\n  const validateForm = (type?: string) => {\n    if (\n      type === \"isRecentSearchesClicked\" &&\n      props.history?.location?.pathname === \"/\"\n    ) {\n      return true;\n    }\n    const newErrors: any = {};\n    if (!stateData?.isSearchedJobSelected) {\n      newErrors.searchedJob = Constants.errorStrings.bannerSearchJob;\n    } else if (!stateData?.searchedJob) {\n      newErrors.searchedJob = Constants.errorStrings.bannerSearchJobEmpty;\n    }\n    if (!stateData?.isMapLocationSelected && stateData?.selectedMapLocation) {\n      newErrors.selectedMapLocation =\n        Constants.errorStrings.bannerSearchLocation;\n    }\n    if (type === \"showErrorToast\") {\n      return newErrors;\n    }\n    // setErrors(newErrors);\n    return !Object.keys(newErrors).length;\n  };\n\n  const bannerSearchClicked = (newSearchData?: any) => {\n    const newErrors = validateForm(\n      newSearchData?.isRecentSearchesClicked\n        ? newSearchData?.isRecentSearchesClicked\n        : \"showErrorToast\"\n    );\n    if (!!newErrors.searchedJob || !!newErrors.selectedMapLocation) {\n      if (!!newErrors.searchedJob) {\n        setShowToast(true, \"Please select job type from the list\");\n        return;\n      }\n      if (!!newErrors.selectedMapLocation) {\n        setShowToast(true, \"Please select location from the list\");\n        return;\n      }\n    }\n    if (validateForm(newSearchData?.isRecentSearchesClicked)) {\n      const params = new URLSearchParams(props.location?.search);\n      const queryParamsData: any = {\n        defaultLat: Number(params.get(\"defaultLat\")),\n        defaultLong: Number(params.get(\"defaultLong\")),\n      };\n      const data = {\n        page: stateData.page,\n        isFiltered: false,\n        ...(suggestionSelected && {\n          address: JSON.stringify(suggestionSelected),\n        }),\n        tradeId: newSearchData?.tradeId\n          ? newSearchData?.tradeId\n          : stateData?.tradeId,\n        ...(stateData.isMapLocationSelected && {\n          location: stateData?.location,\n        }),\n        // location: stateData?.location,\n        specializationId: newSearchData?.specializationId\n          ? newSearchData?.specializationId\n          : stateData?.specializationId,\n        ...(stateData?.from_date && { from_date: stateData?.from_date }),\n        ...(stateData?.to_date && { to_date: stateData?.to_date }),\n      };\n      console.log(\"data: \", data, \"suggestionSelected\", suggestionSelected);\n      if (props?.location?.pathname === \"/search-job-results\") {\n        props.postHomeSearchData(data);\n        const mData = {\n          timeStamp: moengage.getCurrentTimeStamp(),\n          category: props.tradeListData?.find(\n            (i: any) => i._id === data?.tradeId?.[0]\n          )?.trade_name,\n          ...(data.address && {\n            location: `${JSON.parse(data.address)?.mainText} ${\n              JSON.parse(data.address)?.secondaryText\n            }`,\n          }),\n          ...(data?.max_budget && { \"Max budget\": data?.max_budget }),\n          ...(data?.from_date && { \"start date\": data?.from_date }),\n          ...(data?.to_date && { \"end date\": data?.to_date }),\n        };\n        moengage.moE_SendEvent(MoEConstants.SEARCHED_FOR_JOBS, mData);\n        mixPanel.mixP_SendEvent(MoEConstants.SEARCHED_FOR_JOBS, mData);\n      }\n      // delete data.address;\n      const newData = {\n        ...data,\n        lat: stateData.location.coordinates[1],\n        long: stateData.location.coordinates[0],\n        defaultLat: props.currentCoordinates?.coordinates[1]\n          ? props.currentCoordinates?.coordinates[1]\n          : queryParamsData.defaultLat,\n        defaultLong: props.currentCoordinates?.coordinates[0]\n          ? props.currentCoordinates?.coordinates[0]\n          : queryParamsData.defaultLong,\n        ...(stateData.selectedMapLocation && {\n          addres: stateData.selectedMapLocation.replaceAll(\"#\", \"\"),\n        }),\n        searchJob: newSearchData?.searchedJob\n          ? newSearchData?.searchedJob.replaceAll(\"&\", \"xxx\")\n          : stateData?.searchedJob.replaceAll(\"&\", \"xxx\"),\n        jobResults: null,\n      };\n      if (\n        props?.location?.pathname === \"/search-job-results\" &&\n        newData.address\n      ) {\n        setTimeout(() => {\n          props.getRecentLocationList();\n        }, 500);\n      }\n      delete newData.location;\n      delete newData.isFilterOn;\n      if (newData.searchJob) {\n        delete newData.heading;\n        delete newData.jobResults;\n      }\n      Object.keys(newData).forEach(\n        (key) =>\n          (newData[key] === \"\" ||\n            newData[key] === undefined ||\n            newData[key] === null ||\n            newData[key] === 0 ||\n            newData[key] == \"0\") &&\n          delete newData[key]\n      );\n      var url = \"search-job-results?\";\n      for (let [key, value] of Object.entries(newData)) {\n        url += `${key}=${value}&`;\n      }\n      const newUrl = url.slice(0, url.length - 1);\n      console.log(newUrl, \"newUrl\", data, \"data\", newData, \"newData\");\n      if (props.history?.location?.pathname === \"/\") {\n        props.history.push(newUrl);\n      } else {\n        props.history.replace(newUrl);\n        if (props?.refreshParams) {\n          props?.refreshParams(data);\n        }\n      }\n    }\n  };\n\n  const renderPlacesData = ({\n    getInputProps,\n    suggestions,\n    getSuggestionItemProps,\n    loading,\n  }: any) => (\n    <React.Fragment>\n      <div className=\"text_field\">\n        <input\n          {...getInputProps({ placeholder: \"Where?\", className: \"line-1\" })}\n          id=\"location-input-tag\"\n          onFocus={() => {\n            setInputFocus2(true);\n            setInputFocus1(false);\n            setInputFocus3(false);\n          }}\n        />\n        <span className=\"detect_icon_ltr\">\n          <img src={Location} alt=\"location\" />\n        </span>\n        {stateData?.selectedMapLocation && inputFocus2 && (\n          <span className=\"detect_icon\">\n            <img\n              src={cross}\n              alt=\"cross\"\n              onClick={() => {\n                setSuggestion(\"\");\n                setStateData((prevData: any) => ({\n                  ...prevData,\n                  selectedMapLocation: \"\",\n                  isMapLocationSelected: false,\n                }));\n              }}\n            />\n          </span>\n        )}\n        {/* {!!errors.selectedMapLocation && <span className=\"error_msg\">{errors.selectedMapLocation}</span>} */}\n      </div>\n      {suggestions?.length > 0 &&\n      stateData?.selectedMapLocation.length >= 3 &&\n      inputFocus2 ? (\n        <div\n          className=\"custom_autosuggestion location\"\n          id=\"autocomplete-dropdown-container\"\n        >\n          <div className=\"flex_row recent_search auto_loc\">\n            <div className=\"flex_col_sm_4\">\n              {loading && <div>Loading...</div>}\n\n              {suggestions.map((suggestion: any) => {\n                const className = \"autosuggestion_icon card loc name\";\n                const style = suggestion.active\n                  ? { backgroundColor: \"#fafafa\", cursor: \"pointer\" }\n                  : { backgroundColor: \"#ffffff\", cursor: \"pointer\" };\n                return (\n                  <div\n                    {...getSuggestionItemProps(suggestion, {\n                      className,\n                      style,\n                    })}\n                    key={suggestion.formattedSuggestion.mainText}\n                  >\n                    <span>{suggestion.formattedSuggestion.mainText}</span>\n                    <span className=\"name\">\n                      {suggestion.formattedSuggestion.secondaryText}\n                    </span>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      ) : !loading &&\n        !stateData?.isMapLocationSelected &&\n        stateData?.selectedMapLocation.length >= 3 &&\n        inputFocus2 &&\n        suggestions?.length < 1 ? (\n        <div\n          style={{ minHeight: \"50px\" }}\n          className=\"custom_autosuggestion location\"\n          id=\"autocomplete-dropdown-container\"\n        >\n          <div className=\"flex_row recent_search auto_loc\">\n            <div className=\"flex_col_sm_4\">\n              <div className=\"loc_suggestions\">{\"No Result Found.\"}</div>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </React.Fragment>\n  );\n\n  return (\n    <div className=\"home_search\">\n      <button\n        className=\"modal_srch_close\"\n        onClick={() => {\n          if (props?.handleChangeToggle) {\n            props.handleChangeToggle(false);\n          }\n        }}\n      >\n        <img src={close} alt=\"close\" />\n      </button>\n      <form\n        className={`search_wrapr ${\n          props.history?.location?.pathname === \"/\"\n            ? stateData?.isFirstJobSelectedCount\n              ? \"\"\n              : \"first_input\"\n            : \"\"\n        }`}\n      >\n        <ul>\n          <li className=\"categ_box\">\n            <div className=\"text_field\" id=\"text-field-div\">\n              <input\n                type=\"text\"\n                ref={searchRef}\n                placeholder=\"What jobs are you after?\"\n                value={stateData?.searchedJob}\n                onChange={handleJobChange}\n                onFocus={() => {\n                  setInputFocus1(true);\n                  setInputFocus2(false);\n                  setInputFocus3(false);\n                }}\n              />\n              <div className=\"border_eff\"></div>\n              <span className=\"detect_icon_ltr\">\n                <img src={Searchicon} alt=\"search\" />\n              </span>\n              {!!stateData?.searchedJob && inputFocus1 && (\n                <span className=\"detect_icon\">\n                  <img\n                    src={cross}\n                    alt=\"cross\"\n                    onClick={() => cleanInputData(\"searchedJob\")}\n                  />\n                </span>\n              )}\n            </div>\n            {/* {!!errors.searchedJob && <span className=\"error_msg\">{errors.searchedJob}</span>} */}\n          </li>\n          {!stateData?.searchedJob &&\n            inputFocus1 &&\n            !inputFocus2 &&\n            recentJobSearches()}\n          {stateData?.searchedJob?.length >= 1 &&\n            inputFocus1 &&\n            !inputFocus2 &&\n            renderJobResult()}\n          <li\n            ref={locationRef}\n            className=\"loc_box\"\n            style={{ display: \"block\" }}\n          >\n            <div id=\"location-text-field-div\">\n              <PlacesAutocomplete\n                value={\n                  stateData?.selectedMapLocation !== \"{}\"\n                    ? stateData?.selectedMapLocation\n                    : \"\"\n                }\n                onChange={(city: string) =>\n                  setStateData((prevData: any) => ({\n                    ...prevData,\n                    selectedMapLocation: city,\n                    isMapLocationSelected: false,\n                  }))\n                }\n                shouldFetchSuggestions={true}\n                onSelect={locationSelectedHandler}\n                highlightFirstSuggestion={true}\n                searchOptions={{\n                  componentRestrictions: { country: \"au\" },\n                  // types: [\"address\"]\n                  types: [\"(cities)\"],\n                }}\n                // debounce={400}\n              >\n                {renderPlacesData}\n              </PlacesAutocomplete>\n            </div>\n            {(!stateData?.selectedMapLocation ||\n              stateData?.selectedMapLocation === \"{}\") &&\n              inputFocus2 && (\n                <div\n                  className=\"custom_autosuggestion location\"\n                  id=\"current-location-search-div\"\n                >\n                  <a className=\"location-btn\" onClick={getCurrentLocation}>\n                    <span className=\"gps_icon\">\n                      <img src={icgps} />\n                    </span>{\" \"}\n                    Use my current location\n                  </a>\n                  {stateData?.locationDenied && (\n                    <span className=\"blocked_note\">\n                      You have blocked your location. To use this, change your\n                      location settings in browser.\n                    </span>\n                  )}\n                  <div className=\"recent_search auto_loc\">\n                    {console.log({\n                      recent: props?.recentLocationData,\n                    })}\n                    {props?.recentLocationData?.length > 0 ? (\n                      <span className=\"sub_title\">Recent searches</span>\n                    ) : null}\n                    {/* {recentLocation?.map((item: any) => {\n                                        return (\n                                            <div className=\"flex_col_sm_4\"\n                                                onClick={() => setStateData((prevData: any) => ({ ...prevData, location: item.location, selectedMapLocation: item.allText?.mainText, isMapLocationSelected: true }))}>\n                                                <div className=\"autosuggestion_icon card loc name\">\n                                                    <span>{item.allText?.mainText}</span>\n                                                    <span className=\"name\">{item.allText?.secondaryText}</span>\n                                                </div>\n                                            </div>)\n                                    })} */}\n                    <div className=\"flex_row\">\n                      {props?.recentLocationData?.map((item: any) => {\n                        return (\n                          item?.address?.length > 0 && (\n                            <div\n                              className=\"flex_col_sm_4\"\n                              onClick={() => {\n                                setStateData((prevData: any) => ({\n                                  ...prevData,\n                                  location: item.location,\n                                  selectedMapLocation: JSON.parse(item?.address)\n                                    ?.mainText, //item.allText?.mainText,\n                                  isMapLocationSelected: true,\n                                }));\n                                setSuggestion(JSON.parse(item?.address));\n\n                                // let location_coordinates: any = item.location.coordinates\n                                // setAddressText(item.formatted_address);\n                                // setSelectedAddress({\n                                //     lat: location_coordinates[1],\n                                //     lng: location_coordinates[0]\n                                // });\n                              }}\n                            >\n                              <div className=\"autosuggestion_icon card loc name\">\n                                <span>\n                                  {JSON.parse(item?.address)?.mainText}\n                                </span>\n                                <span className=\"name\">\n                                  {JSON.parse(item?.address)?.secondaryText}\n                                </span>\n                              </div>\n                            </div>\n                          )\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n              )}\n          </li>\n          <li\n            className={`date_box ${stateData.startDate ? \"date_value\" : \"\"}`}\n            style={{ display: \"block\" }}\n          >\n            <div\n              ref={calenderRef}\n              className=\"custom_date_range\"\n              id=\"date-range-div\"\n            >\n              <div className=\"text_field\">\n                <span className=\"detect_icon_ltr calendar\"></span>\n                <input\n                  type=\"text\"\n                  id=\"calender-input\"\n                  placeholder={\n                    stateData?.startDate\n                      ? `${stateData?.startDate} - ${stateData?.endDate}`\n                      : \"When?\"\n                  }\n                  onFocus={() => {\n                    setInputFocus3(true);\n                    setInputFocus1(false);\n                    setInputFocus2(false);\n                  }}\n                />\n                {stateData?.startDate && inputFocus3 && (\n                  <span className=\"detect_icon\">\n                    <img\n                      src={cross}\n                      alt=\"cross\"\n                      onClick={() => cleanInputData(\"calender\")}\n                    />\n                  </span>\n                )}\n              </div>\n              {inputFocus3 && (\n                <div\n                  className=\"custom_autosuggestion\"\n                  id=\"custom-date-range-div\"\n                >\n                  <DateRange\n                    onChange={handleCalenderRange}\n                    ranges={[calenderRange1]}\n                    moveRangeOnFirstSelection={false}\n                    rangeColors={[\"#fee600\", \"#b5b5b5\"]}\n                    showDateDisplay={false}\n                    showSelectionPreview={true}\n                    months={2}\n                    showPreview={true}\n                    minDate={new Date()}\n                    maxDate={\n                      new Date(\n                        new Date().setFullYear(new Date().getFullYear() + 2)\n                      )\n                    }\n                    direction=\"horizontal\"\n                    fixedHeight={true}\n                  />\n                </div>\n              )}\n            </div>\n          </li>\n          <div className=\"search_btn\">\n            <button\n              type=\"button\"\n              className=\"fill_btn btn-effect\"\n              onClick={bannerSearchClicked}\n            >\n              <img src={search} alt=\"search\" />\n            </button>\n          </div>\n        </ul>\n      </form>\n    </div>\n  );\n};\n\nexport default TradieBannerSearch;\n"]},"metadata":{},"sourceType":"module"}