{"ast":null,"code":"import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{withRouter}from\"react-router-dom\";// @ts-ignore\nimport{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import moment from'moment';import{setShowToast}from'../../../../redux/common/actions';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogTitle from'@material-ui/core/DialogTitle';import{renderTimeWithFormat}from'../../../../utils/common';import{getMileStoneByTempId}from'../../../../redux/jobs/actions';import AddMilestones from'./addEditMilestone';import{updateTemplate}from'../../../../redux/jobs/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var JobMilestones=function JobMilestones(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dataItems=_useState2[0],setDataItems=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),editItem=_useState4[0],setEditItems=_useState4[1];var _useState5=useState({toggle:false,item:null,index:null}),_useState6=_slicedToArray(_useState5,2),toggleAddEdit=_useState6[0],setAddEdit=_useState6[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),deleteItem=_React$useState4[0],setDeleteItem=_React$useState4[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),localMilestones=_useState8[0],setLocalMile=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),allMilestones=_useState10[0],setAllMilestones=_useState10[1];var handleClickOpen=function handleClickOpen(id){setOpen(true);setDeleteItem(id);};var handleClose=function handleClose(){setOpen(false);setDeleteItem(null);};var handleYes=function handleYes(){localMilestones.splice(toggleAddEdit===null||toggleAddEdit===void 0?void 0:toggleAddEdit.index,1);setOpen(false);setDeleteItem(null);};var prefetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_response$data,_response$data2,_response$data2$miles,_response$data3,_response$data4,filteredData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getMileStoneByTempId(props===null||props===void 0?void 0:props.id);case 2:response=_context.sent;if(response.success){console.log({response:response});if((response===null||response===void 0?void 0:response.data)&&Array.isArray(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.milestones)&&(response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:(_response$data2$miles=_response$data2.milestones)===null||_response$data2$miles===void 0?void 0:_response$data2$miles.length)){setDataItems(response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.milestones);filteredData=response===null||response===void 0?void 0:(_response$data4=response.data)===null||_response$data4===void 0?void 0:_response$data4.milestones.map(function(item){return{milestone_name:item===null||item===void 0?void 0:item.milestoneName,order:item===null||item===void 0?void 0:item.order,isPhotoevidence:item===null||item===void 0?void 0:item.isPhotoevidence,recommended_hours:item===null||item===void 0?void 0:item.recommendedHours,from_date:moment(item===null||item===void 0?void 0:item.fromDate).isValid()?moment(item===null||item===void 0?void 0:item.fromDate).format('MM-DD-YYYY'):'',to_date:moment(item===null||item===void 0?void 0:item.toDate).isValid()?moment(item===null||item===void 0?void 0:item.toDate).format('MM-DD-YYYY'):''};});setAllMilestones(response===null||response===void 0?void 0:response.data);setLocalMile(filteredData);}}case 4:case\"end\":return _context.stop();}}},_callee);}));return function prefetch(){return _ref.apply(this,arguments);};}();useEffect(function(){console.log('Here!!!!');prefetch();},[]);var checkOnClick=function checkOnClick(e,index){var edit_item_clone=editItem;edit_item_clone[index]=e.target.checked;setEditItems(function(prev){return _objectSpread(_objectSpread({},prev),edit_item_clone);});};var reorder=function reorder(list,startIndex,endIndex){var result=Array.from(list);var _result$splice=result.splice(startIndex,1),_result$splice2=_slicedToArray(_result$splice,1),removed=_result$splice2[0];result.splice(endIndex,0,removed);return result;};var onDragEnd=function onDragEnd(result){var source=result.source,destination=result.destination;// dropped outside the list\nif(!destination){return;}var reOrderedMilestones=reorder(localMilestones,source.index,destination.index);setLocalMile(reOrderedMilestones);};var format='MM-DD-YYYY';var backToScreen=function backToScreen(data){var local_mile=localMilestones;setAddEdit({toggle:false});if(data){var data_=data===null||data===void 0?void 0:data.data;var _index=data===null||data===void 0?void 0:data.index;if(_index==undefined){local_mile.push(data_);}else{local_mile[_index]=data_;}setLocalMile(local_mile);}};if(toggleAddEdit===null||toggleAddEdit===void 0?void 0:toggleAddEdit.toggle){return/*#__PURE__*/_jsx(AddMilestones,{backToScreen:backToScreen,item:toggleAddEdit===null||toggleAddEdit===void 0?void 0:toggleAddEdit.item,items:localMilestones,index:toggleAddEdit===null||toggleAddEdit===void 0?void 0:toggleAddEdit.index});}var checkIfValidDates=function checkIfValidDates(item){var isfilter=localMilestones.filter(function(item_){if(item_.hasOwnProperty('from_date')){var _item_$from_date;if((item_===null||item_===void 0?void 0:item_.from_date)!==\"Invalid date\"||!(item_===null||item_===void 0?void 0:(_item_$from_date=item_.from_date)===null||_item_$from_date===void 0?void 0:_item_$from_date.length)){return item_;}}});if(!(isfilter===null||isfilter===void 0?void 0:isfilter.length)){return true;}else{var newarr=isfilter.slice().sort(function(a,b){return moment(a.from_date,'MM-DD-YYYY').diff(moment(b.from_date,'MM-DD-YYYY'));});var filteredItem=item.filter(function(item_reorder){if(item_reorder.hasOwnProperty('from_date')){var _item_reorder$from_da;if((item_reorder===null||item_reorder===void 0?void 0:item_reorder.from_date)!==\"Invalid date\"||!(item_reorder===null||item_reorder===void 0?void 0:(_item_reorder$from_da=item_reorder.from_date)===null||_item_reorder$from_da===void 0?void 0:_item_reorder$from_da.length)){return item_reorder;}}});return JSON.stringify(newarr)===JSON.stringify(filteredItem);}};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var all_milestones,data,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:all_milestones=allMilestones;data={\"templateId\":all_milestones===null||all_milestones===void 0?void 0:all_milestones.tempId,\"template_name\":all_milestones===null||all_milestones===void 0?void 0:all_milestones.templateName,\"milestones\":localMilestones.map(function(item,index){item['order']=index+1;return item;})};_context2.next=4;return updateTemplate(data);case 4:response=_context2.sent;if(response===null||response===void 0?void 0:response.success){props.history.push({pathname:'/template-sucess',state:{redirectTo:'/update-user-info'}});}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:\"Are you sure you want to delete the milestone ?\"}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleYes,color:\"primary\",autoFocus:true,children:'Yes'}),/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"primary\",children:'No'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"span\",{style:{zIndex:999,cursor:'pointer'},onClick:function onClick(e){props.backToScreen();},className:\"back\"}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:'Job Milestones'})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_5\",children:[/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:onDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"milestones\",children:function children(provided,snapshot){return/*#__PURE__*/_jsxs(\"ul\",{ref:provided.innerRef,className:\"milestones\".concat(snapshot.isDraggingOver?' dragging-over':''),children:[(localMilestones===null||localMilestones===void 0?void 0:localMilestones.length)>0&&localMilestones.map(function(_ref3,index){var milestone_name=_ref3.milestone_name,isPhotoevidence=_ref3.isPhotoevidence,recommended_hours=_ref3.recommended_hours,from_date=_ref3.from_date,to_date=_ref3.to_date,order=_ref3.order;return/*#__PURE__*/_jsx(Draggable,{draggableId:\"\".concat(milestone_name,\"-\").concat(index),index:index,children:function children(provided,snapshot){return/*#__PURE__*/_jsxs(\"li\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{style:_objectSpread({},provided.draggableProps.style),children:[editItem[index]?/*#__PURE__*/_jsxs(\"div\",{className:\"edit_delete\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){e.stopPropagation();// handleStepForward(15);\n// updateMileStoneIndex(index);\nsetAddEdit({toggle:true,item:{milestone_name:milestone_name,isPhotoevidence:isPhotoevidence,recommended_hours:recommended_hours,from_date:from_date,to_date:to_date,order:order},index:index});},className:\"edit\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){// e.preventDefault();\nhandleClickOpen(index);},className:\"delete\"})]}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{checked:editItem[index],onChange:function onChange(e){checkOnClick(e,index);},className:\"filter-type filled-in\",type:\"checkbox\",id:\"milestone\".concat(index)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"milestone\".concat(index),children:\"\".concat(index+1,\". \").concat(milestone_name)}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[isPhotoevidence?/*#__PURE__*/_jsx(\"span\",{children:'Photo evidence required'}):/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{children:renderTimeWithFormat(from_date,to_date,format)}),/*#__PURE__*/_jsx(\"span\",{children:recommended_hours})]})]})]}),index);}},\"\".concat(index,\"-\").concat(milestone_name));}),provided.placeholder]});}})}),!(localMilestones===null||localMilestones===void 0?void 0:localMilestones.length)?/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn fill_grey_btn full_btn btn-effect\",onClick:function onClick(){// handleStepComplete({})\nsetAddEdit({toggle:true,item:null});},children:'+ Add milestone'})})}):/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn fill_grey_btn full_btn btn-effect\",onClick:function onClick(){setAddEdit({toggle:true,item:null});},children:'+ Add milestone'})}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){var check=checkIfValidDates(localMilestones);if(check){handleSubmit();}else{setShowToast(true,\"Please arrange milestone date wise\");}},className:\"fill_btn full_btn btn-effect\",children:'Save'})})]})]})})]})]});};export default withRouter(JobMilestones);","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieEditProfile/components/milestones/jobMilestones.tsx"],"names":["React","useEffect","useState","withRouter","DragDropContext","Droppable","Draggable","moment","setShowToast","Button","Dialog","DialogActions","DialogTitle","renderTimeWithFormat","getMileStoneByTempId","AddMilestones","updateTemplate","JobMilestones","props","dataItems","setDataItems","editItem","setEditItems","toggle","item","index","toggleAddEdit","setAddEdit","open","setOpen","deleteItem","setDeleteItem","localMilestones","setLocalMile","allMilestones","setAllMilestones","handleClickOpen","id","handleClose","handleYes","splice","prefetch","response","success","console","log","data","Array","isArray","milestones","length","filteredData","map","milestone_name","milestoneName","order","isPhotoevidence","recommended_hours","recommendedHours","from_date","fromDate","isValid","format","to_date","toDate","checkOnClick","e","edit_item_clone","target","checked","prev","reorder","list","startIndex","endIndex","result","from","removed","onDragEnd","source","destination","reOrderedMilestones","backToScreen","local_mile","data_","undefined","push","checkIfValidDates","isfilter","filter","item_","hasOwnProperty","newarr","slice","sort","a","b","diff","filteredItem","item_reorder","JSON","stringify","handleSubmit","all_milestones","tempId","templateName","history","pathname","state","redirectTo","zIndex","cursor","provided","snapshot","innerRef","isDraggingOver","draggableProps","dragHandleProps","style","stopPropagation","placeholder","check"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useLocation, withRouter, useHistory } from \"react-router-dom\";\n// @ts-ignore\nimport { DragDropContext, Droppable, Draggable, DropResult } from 'react-beautiful-dnd';\nimport { callMilestones, profileTemplateList } from '../../../../redux/jobs/actions';\nimport moment from 'moment';\nimport { setShowToast } from '../../../../redux/common/actions';\n\nimport milestonesPlaceholder from '../../../../assets/images/Job milestones-preview.png';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { renderTimeWithFormat } from '../../../../utils/common';\nimport { getMileStoneByTempId } from '../../../../redux/jobs/actions';\nimport AddMilestones from './addEditMilestone';\nimport { updateTemplate } from '../../../../redux/jobs/actions'\n\nconst JobMilestones = (props: any) => {\n    const [dataItems, setDataItems] = useState([]);\n    const [editItem, setEditItems] = useState<{ [index: string]: any }>({});\n    const [toggleAddEdit, setAddEdit] = useState<any>({ toggle: false, item: null, index: null });\n    const [open, setOpen] = React.useState(false);\n    const [deleteItem, setDeleteItem] = React.useState(null);\n    const [localMilestones, setLocalMile] = useState([]);\n    const [allMilestones, setAllMilestones] = useState({});\n\n\n    const handleClickOpen = (id: any) => {\n        setOpen(true)\n        setDeleteItem(id);\n    };\n    const handleClose = () => {\n        setOpen(false)\n        setDeleteItem(null);\n    };\n\n    const handleYes = () => {\n        localMilestones.splice(toggleAddEdit?.index, 1)\n        setOpen(false);\n        setDeleteItem(null);\n    }\n\n    const prefetch = async () => {\n        let response = await getMileStoneByTempId(props?.id);\n        if (response.success) {\n            console.log({\n                response\n            })\n            if (response?.data && Array.isArray(response?.data?.milestones) && response?.data?.milestones?.length) {\n                setDataItems(response?.data?.milestones)\n\n                let filteredData: any = response?.data?.milestones.map((item: any) => {\n                    return {\n                        milestone_name: item?.milestoneName,\n                        order: item?.order,\n                        isPhotoevidence: item?.isPhotoevidence,\n                        recommended_hours: item?.recommendedHours,\n                        from_date: moment(item?.fromDate).isValid() ? moment(item?.fromDate).format('MM-DD-YYYY') : '',\n                        to_date: moment(item?.toDate).isValid() ? moment(item?.toDate).format('MM-DD-YYYY') : '',\n                    }\n                });\n                setAllMilestones(response?.data)\n                setLocalMile(filteredData);\n            }\n        }\n    }\n\n    useEffect(() => {\n        console.log('Here!!!!')\n        prefetch()\n    }, []);\n\n    const checkOnClick = (e: any, index: any) => {\n        let edit_item_clone: any = editItem;\n        edit_item_clone[index] = e.target.checked;\n        setEditItems((prev) => ({ ...prev, ...edit_item_clone }));\n    }\n\n    const reorder = (list: Array<any>, startIndex: number, endIndex: number) => {\n        const result = Array.from(list);\n        const [removed] = result.splice(startIndex, 1);\n        result.splice(endIndex, 0, removed);\n\n        return result;\n    };\n\n    const onDragEnd = (result: DropResult) => {\n        const { source, destination } = result;\n\n        // dropped outside the list\n        if (!destination) {\n            return;\n        }\n\n        const reOrderedMilestones: any = reorder(\n            localMilestones,\n            source.index,\n            destination.index\n        );\n\n        setLocalMile(reOrderedMilestones);\n    };\n\n    const format = 'MM-DD-YYYY';\n\n    const backToScreen = (data?: any) => {\n        let local_mile: any = localMilestones;\n        setAddEdit({ toggle: false });\n        if (data) {\n            let data_: any = data?.data;\n            let index = data?.index;\n        \n            if(index == undefined){\n                local_mile.push(data_);\n            } else {\n                local_mile[index] = data_;\n            }\n            setLocalMile(local_mile);\n        }\n    }\n\n    if (toggleAddEdit?.toggle) {\n        return (\n            <AddMilestones\n                backToScreen={backToScreen}\n                item={toggleAddEdit?.item}\n                items={localMilestones}\n                index={toggleAddEdit?.index}\n            />\n        )\n    }\n\n    const checkIfValidDates = (item: any) => {\n        let isfilter: any = localMilestones.filter((item_: any) => {\n            if (item_.hasOwnProperty('from_date')) {\n                if (item_?.from_date !== \"Invalid date\" || !item_?.from_date?.length) {\n                    return item_;\n                }\n            }\n        });\n        if (!isfilter?.length) {\n            return true;\n        } else {\n\n            const newarr: any = isfilter.slice().sort((a: any, b: any) => {\n                return moment(a.from_date, 'MM-DD-YYYY').diff(moment(b.from_date, 'MM-DD-YYYY'));\n            });\n            let filteredItem: any = item.filter((item_reorder: any) => {\n                if (item_reorder.hasOwnProperty('from_date')) {\n                    if (item_reorder?.from_date !== \"Invalid date\" || !item_reorder?.from_date?.length) {\n                        return item_reorder;\n                    }\n                }\n            });\n            return JSON.stringify(newarr) === JSON.stringify(filteredItem);\n        }\n    }\n\n    const handleSubmit = async () => {\n        let all_milestones: any = allMilestones;\n        let data = {\n            \"templateId\": all_milestones?.tempId,\n            \"template_name\": all_milestones?.templateName,\n            \"milestones\": localMilestones.map((item: any, index: any) => {\n                item['order'] = index + 1;\n                return item;\n            })\n        }\n\n        let response = await updateTemplate(data);\n        if (response?.success) {\n            props.history.push({\n                pathname: '/template-sucess',\n                state: { redirectTo: '/update-user-info' }\n            });\n        }\n    }\n\n    return (\n        <div className=\"custom_container\">\n            <Dialog\n                open={open}\n                onClose={handleClose}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">\n                    {\"Are you sure you want to delete the milestone ?\"}\n                </DialogTitle>\n                <DialogActions>\n                    <Button onClick={handleYes} color=\"primary\" autoFocus>\n                        {'Yes'}\n                    </Button>\n                    <Button onClick={handleClose} color=\"primary\">\n                        {'No'}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            <div className=\"form_field\">\n                <div className=\"flex_row\">\n                    <div className=\"flex_col_sm_12\">\n                        <div\n                            className=\"relate\">\n                            <span\n                                style={{ zIndex: 999, cursor: 'pointer' }}\n                                onClick={(e) => {\n                                    props.backToScreen();\n                                }}\n                                className=\"back\">\n                            </span>\n                            <span className=\"title\">\n                                {'Job Milestones'}\n                            </span>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"flex_row\">\n                    <div className=\"flex_col_sm_5\">\n                        <DragDropContext onDragEnd={onDragEnd}>\n                            <Droppable droppableId=\"milestones\">\n                                {(provided, snapshot) => (\n                                    <ul ref={provided.innerRef}\n                                        className={`milestones${snapshot.isDraggingOver ? ' dragging-over' : ''}`}>\n                                        {localMilestones?.length > 0 &&\n                                            localMilestones.map(({\n                                                milestone_name,\n                                                isPhotoevidence,\n                                                recommended_hours,\n                                                from_date,\n                                                to_date,\n                                                order\n                                            }: {\n                                                milestone_name: string,\n                                                isPhotoevidence: boolean,\n                                                from_date: string,\n                                                to_date: string,\n                                                recommended_hours: any\n                                                order: any\n                                            }, index: any) => (\n                                                <Draggable\n                                                    key={`${index}-${milestone_name}`}\n                                                    draggableId={`${milestone_name}-${index}`}\n                                                    index={index}>\n                                                    {(provided: any, snapshot: any) => (\n                                                        <li\n                                                            key={index}\n                                                            ref={provided.innerRef}\n                                                            {...provided.draggableProps}\n                                                            {...provided.dragHandleProps}\n                                                            style={{\n                                                                ...provided.draggableProps.style,\n                                                            }}>\n                                                            {editItem[index] ? (\n                                                                <div className=\"edit_delete\">\n                                                                    <span\n                                                                        onClick={(e) => {\n                                                                            e.stopPropagation();\n                                                                            // handleStepForward(15);\n                                                                            // updateMileStoneIndex(index);\n                                                                            setAddEdit({\n                                                                                toggle: true,\n                                                                                item: {\n                                                                                    milestone_name,\n                                                                                    isPhotoevidence,\n                                                                                    recommended_hours,\n                                                                                    from_date,\n                                                                                    to_date,\n                                                                                    order\n                                                                                },\n                                                                                index: index\n                                                                            });\n                                                                        }}\n                                                                        className=\"edit\">\n                                                                    </span>\n                                                                    <span\n                                                                        onClick={(e) => {\n                                                                            // e.preventDefault();\n                                                                            handleClickOpen(index);\n                                                                        }}\n                                                                        className=\"delete\"></span>\n                                                                </div>\n                                                            ) : ''}\n                                                            <div className=\"checkbox_wrap agree_check\">\n                                                                <input\n                                                                    checked={editItem[index]}\n                                                                    onChange={(e: any) => {\n                                                                        checkOnClick(e, index)\n                                                                    }}\n                                                                    className=\"filter-type filled-in\"\n                                                                    type=\"checkbox\"\n                                                                    id={`milestone${index}`} />\n                                                                <label htmlFor={`milestone${index}`}>\n                                                                    {`${index + 1}. ${milestone_name}`}\n                                                                </label>\n                                                                <div className=\"info\">\n                                                                    {isPhotoevidence ?\n                                                                        <span>{'Photo evidence required'}</span>\n                                                                        : <span></span>}\n                                                                    <span>\n                                                                        {renderTimeWithFormat(\n                                                                            from_date,\n                                                                            to_date,\n                                                                            format\n                                                                        )}\n                                                                    </span>\n                                                                    <span>\n                                                                        {recommended_hours}\n                                                                    </span>\n                                                                </div>\n                                                            </div>\n                                                        </li>\n                                                    )}\n                                                </Draggable>\n                                            ))}\n                                        {provided.placeholder}\n                                    </ul>\n                                )}\n                            </Droppable>\n                        </DragDropContext>\n                        {!localMilestones?.length ? (\n                            <React.Fragment>\n                                <div className=\"form_field\">\n                                    <button\n                                        className=\"fill_btn fill_grey_btn full_btn btn-effect\"\n                                        onClick={() => {\n                                            // handleStepComplete({})\n                                            setAddEdit({ toggle: true, item: null });\n                                        }}>\n                                        {'+ Add milestone'}\n                                    </button>\n                                </div>\n                            </React.Fragment>\n                        ) : (\n                            <React.Fragment>\n                                <div className=\"form_field\">\n                                    <button\n                                        className=\"fill_btn fill_grey_btn full_btn btn-effect\"\n                                        onClick={() => {\n                                            setAddEdit({ toggle: true, item: null });\n                                        }}>\n                                        {'+ Add milestone'}\n                                    </button>\n                                </div>\n                                <div className=\"form_field\">\n                                    <button\n                                        onClick={() => {\n                                            let check: boolean = checkIfValidDates(localMilestones);\n                                            if (check) {\n                                                handleSubmit();\n                                            } else {\n                                                setShowToast(true, \"Please arrange milestone date wise\")\n                                            }\n                                        }}\n                                        className={`fill_btn full_btn btn-effect`}>\n                                        {'Save'}\n                                    </button>\n                                </div>\n                            </React.Fragment>\n                        )}\n\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(JobMilestones);\n"]},"metadata":{},"sourceType":"module"}