{"ast":null,"code":"import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{postHomeApplyJob}from'../../../../redux/homeSearch/actions';import{addQuote,addItem,updateItem,deleteItem,quoteByJobId}from'../../../../redux/quotes/actions';import NumberFormat from'react-number-format';import Modal from'@material-ui/core/Modal';import storageService from'../../../../utils/storageService';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogTitle from'@material-ui/core/DialogTitle';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import deleteQuote from'../../../../assets/images/ic-delete.png';import cancel from\"../../../../assets/images/ic-cancel.png\";import{moengage,mixPanel}from'../../../../services/analyticsTools';import{MoEConstants}from'../../../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QuoteMark=function QuoteMark(props){var _props$location,_props$location$state;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Items=_useState2[0],setItems=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isEdit=_useState4[0],setEdit=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItemsAmt=_useState6[0],setTotalItemsAmt=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),quoteId=_useState8[0],setQuoteId=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),deleteItemModal=_useState10[0],setDeleteItemModal=_useState10[1];var _useState11=useState({item_number:1,description:'',price:0,quantity:0,totalAmount:0}),_useState12=_slicedToArray(_useState11,2),localQuote=_useState12[0],setLocalQuote=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isQuoteDialog=_useState14[0],setIsQuoteDialog=_useState14[1];var jobData=(_props$location=props.location)===null||_props$location===void 0?void 0:(_props$location$state=_props$location.state)===null||_props$location$state===void 0?void 0:_props$location$state.jobData;console.log('jobData: ',jobData);useEffect(function(){preFetch();},[]);console.log('Items: ',Items);var preFetch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _props$location2,_props$location2$stat;var isItemsEditable,_props$location3,_props$location3$stat,_props$location3$stat2,_storageService$getIt,_res$data,_res$data$resultData$,_res$data$resultData$2,data,res,_res$data2,_res$data2$resultData,_res$data3,_res$data3$resultData,_items_,_items_2,items_,item_no;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isItemsEditable=((_props$location2=props.location)===null||_props$location2===void 0?void 0:(_props$location2$stat=_props$location2.state)===null||_props$location2$stat===void 0?void 0:_props$location2$stat.redirect_from)==='appliedJobs'?true:false;if(!isItemsEditable){_context.next=9;break;}data={jobId:(_props$location3=props.location)===null||_props$location3===void 0?void 0:(_props$location3$stat=_props$location3.state)===null||_props$location3$stat===void 0?void 0:(_props$location3$stat2=_props$location3$stat.jobData)===null||_props$location3$stat2===void 0?void 0:_props$location3$stat2.jobId,tradieId:(_storageService$getIt=storageService.getItem('userInfo'))===null||_storageService$getIt===void 0?void 0:_storageService$getIt._id};_context.next=5;return quoteByJobId(data);case 5:res=_context.sent;if(res.success&&((_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$resultData$=_res$data.resultData[0])===null||_res$data$resultData$===void 0?void 0:(_res$data$resultData$2=_res$data$resultData$.quote_item)===null||_res$data$resultData$2===void 0?void 0:_res$data$resultData$2.length)){items_=(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$resultData=_res$data2.resultData[0])===null||_res$data2$resultData===void 0?void 0:_res$data2$resultData.quote_item;setItems(items_);setQuoteId((_res$data3=res.data)===null||_res$data3===void 0?void 0:(_res$data3$resultData=_res$data3.resultData[0])===null||_res$data3$resultData===void 0?void 0:_res$data3$resultData._id);item_no=((_items_=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_===void 0?void 0:_items_.item_number)?((_items_2=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_2===void 0?void 0:_items_2.item_number)+1:1;setLocalQuote(function(prev){return _objectSpread(_objectSpread({},prev),{},{item_number:item_no});});props.dataFetched(true);}else{props.dataFetched(false);}_context.next=10;break;case 9:props.dataFetched(true);case 10:case\"end\":return _context.stop();}}},_callee);}));return function preFetch(){return _ref.apply(this,arguments);};}();var deleteItem_=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){var data,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data={itemId:item===null||item===void 0?void 0:item._id};_context2.next=3;return deleteItem(data);case 3:res=_context2.sent;if(!res.success){_context2.next=8;break;}return _context2.abrupt(\"return\",true);case 8:return _context2.abrupt(\"return\",false);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteItem_(_x){return _ref2.apply(this,arguments);};}();var addItem_=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item){var _res$data4;var items_,data,res,_res$data5,_items_3,_items_4;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:items_=Items;data={quoteId:quoteId,item_number:item===null||item===void 0?void 0:item.item_number,description:item===null||item===void 0?void 0:item.description,price:item===null||item===void 0?void 0:item.price,quantity:item===null||item===void 0?void 0:item.quantity,totalAmount:item===null||item===void 0?void 0:item.totalAmount};_context3.next=4;return addItem(data);case 4:res=_context3.sent;if(res.success&&((_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.resultData)){items_.push((_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.resultData);setItems(items_);setLocalQuote({item_number:((_items_3=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_3===void 0?void 0:_items_3.item_number)?((_items_4=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_4===void 0?void 0:_items_4.item_number)+1:1,description:'',price:0,quantity:0,totalAmount:0});}case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function addItem_(_x2){return _ref3.apply(this,arguments);};}();var updateItem_=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(index,items){var newAmount,item,data,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:newAmount=totalItemsAmount(items);item=items[index];data={itemId:item===null||item===void 0?void 0:item._id,item_number:item===null||item===void 0?void 0:item.item_number,description:item===null||item===void 0?void 0:item.description,price:item===null||item===void 0?void 0:item.price,quantity:item===null||item===void 0?void 0:item.quantity,totalAmount:item===null||item===void 0?void 0:item.totalAmount,quoteId:quoteId,amount:newAmount};_context4.next=5;return updateItem(data);case 5:res=_context4.sent;if(!res.success){_context4.next=10;break;}return _context4.abrupt(\"return\",true);case 10:return _context4.abrupt(\"return\",false);case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function updateItem_(_x3,_x4){return _ref4.apply(this,arguments);};}();var moECalled=function moECalled(){var _jobData$jobMilestone;var mData={timeStamp:moengage.getCurrentTimeStamp(),category:jobData===null||jobData===void 0?void 0:jobData.tradeName,location:jobData===null||jobData===void 0?void 0:jobData.locationName,'Number of milestone':jobData===null||jobData===void 0?void 0:(_jobData$jobMilestone=jobData.jobMilestonesData)===null||_jobData$jobMilestone===void 0?void 0:_jobData$jobMilestone.length,Amount:totalItemsAmt};moengage.moE_SendEvent(MoEConstants.QUOTED_A_JOB,mData);mixPanel.mixP_SendEvent(MoEConstants.QUOTED_A_JOB,mData);};var applyJobClicked=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _props$location4,_props$location4$stat,_jobDetailsData$poste;var jobDetailsData,data,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:jobDetailsData=(_props$location4=props.location)===null||_props$location4===void 0?void 0:(_props$location4$stat=_props$location4.state)===null||_props$location4$stat===void 0?void 0:_props$location4$stat.jobData;data={jobId:jobDetailsData===null||jobDetailsData===void 0?void 0:jobDetailsData.jobId,builderId:jobDetailsData===null||jobDetailsData===void 0?void 0:(_jobDetailsData$poste=jobDetailsData.postedBy)===null||_jobDetailsData$poste===void 0?void 0:_jobDetailsData$poste.builderId,tradeId:jobDetailsData===null||jobDetailsData===void 0?void 0:jobDetailsData.tradeId,specializationId:jobDetailsData===null||jobDetailsData===void 0?void 0:jobDetailsData.specializationId};_context5.next=4;return postHomeApplyJob(data);case 4:res=_context5.sent;if(res.success){moECalled();props.history.push({pathname:'/quote-job-success',state:{builderName:props.builderName?props.builderName:'Builder'}});}case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function applyJobClicked(){return _ref5.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _props$location5,_props$location5$stat,_props$location5$stat2,_storageService$getIt2;var jobId,data,res,_props$location6,_props$location6$stat;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:jobId=(_props$location5=props.location)===null||_props$location5===void 0?void 0:(_props$location5$stat=_props$location5.state)===null||_props$location5$stat===void 0?void 0:(_props$location5$stat2=_props$location5$stat.jobData)===null||_props$location5$stat2===void 0?void 0:_props$location5$stat2.jobId;data={jobId:jobId,userId:(_storageService$getIt2=storageService.getItem('userInfo'))===null||_storageService$getIt2===void 0?void 0:_storageService$getIt2._id,amount:totalItemsAmt,quote_item:Items};_context6.next=4;return addQuote(data);case 4:res=_context6.sent;if(res.success){if(((_props$location6=props.location)===null||_props$location6===void 0?void 0:(_props$location6$stat=_props$location6.state)===null||_props$location6$stat===void 0?void 0:_props$location6$stat.base_redirect)==='newJobs'){moECalled();props.history.push({pathname:'/quote-job-success',state:{builderName:props.builderName?props.builderName:'Builder'}});}else{applyJobClicked();}}case 6:case\"end\":return _context6.stop();}}},_callee6);}));return function handleSubmit(){return _ref6.apply(this,arguments);};}();var handleChange=function handleChange(name,value){if(name==='description'&&value.length>250){return;}setLocalQuote(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,name==='description'?value:+value));});};var totalItemsAmount=function totalItemsAmount(items){var totalAmount=items.slice(1,items.length).reduce(function(a,b){return a+b.totalAmount;},Items[0].totalAmount);return totalAmount;};var calculateTotal=function calculateTotal(){if(Items===null||Items===void 0?void 0:Items.length){var totalAmt_=totalItemsAmount(Items);if(totalAmt_&&totalAmt_!==totalItemsAmt){setTotalItemsAmt(totalAmt_);}var _total=/*#__PURE__*/_jsx(NumberFormat,{value:totalAmt_,decimalScale:2,displayType:'text',thousandSeparator:true,isNumericString:true});return _total;}return\"$0\";};var saveAddItem=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var index,items_,item,isSuccess,_items_5,_props$location7,_props$location7$stat,_items_6,_item,_items_7,_items_8;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!isEditTrue){_context7.next=15;break;}index=isEdit;items_=Items;item=localQuote;item['totalAmount']=+item.quantity*+item.price;items_[isEdit]=item;isSuccess=true;if(!quoteId){_context7.next=11;break;}_context7.next=10;return updateItem_(index,items_);case 10:isSuccess=_context7.sent;case 11:if(isSuccess){setItems(items_);setEdit(null);setLocalQuote({item_number:((_items_5=items_[(items_===null||items_===void 0?void 0:items_.length)-1])===null||_items_5===void 0?void 0:_items_5.item_number)+1,description:'',price:0,quantity:0,totalAmount:0});}return _context7.abrupt(\"return\");case 15:_items_6=Items;_item=localQuote;_item['totalAmount']=+_item.quantity*+_item.price;if(!(((_props$location7=props.location)===null||_props$location7===void 0?void 0:(_props$location7$stat=_props$location7.state)===null||_props$location7$stat===void 0?void 0:_props$location7$stat.redirect_from)==='appliedJobs')){_context7.next=23;break;}_context7.next=21;return addItem_(_item);case 21:_context7.next=26;break;case 23:_items_6.push(_item);setItems(_items_6);setLocalQuote({item_number:((_items_7=_items_6[(_items_6===null||_items_6===void 0?void 0:_items_6.length)-1])===null||_items_7===void 0?void 0:_items_7.item_number)?((_items_8=_items_6[(_items_6===null||_items_6===void 0?void 0:_items_6.length)-1])===null||_items_8===void 0?void 0:_items_8.item_number)+1:1,description:'',price:0,quantity:0,totalAmount:0});case 26:if(isQuoteDialog){setIsQuoteDialog(false);}case 27:case\"end\":return _context7.stop();}}},_callee7);}));return function saveAddItem(){return _ref7.apply(this,arguments);};}();var handleQuoteDialog=function handleQuoteDialog(ans,hitApi){if(quoteId){setIsQuoteDialog(ans==='yes'?true:false);if(hitApi)saveAddItem();}else{saveAddItem();}};var item_number=localQuote.item_number;var description=localQuote.description;var price=localQuote.price;var qty=localQuote.quantity;var total_cal=+qty*+price;var total=total_cal===0?'':total_cal;var isEditTrue=isEdit!==null&&isEdit>-1?true:false;var callItemNo=function callItemNo(){var _Items,_Items2;if(localQuote===null||localQuote===void 0?void 0:localQuote._id){console.log('localQuote?._id-----------if');return localQuote===null||localQuote===void 0?void 0:localQuote.item_number;}if(isEdit!==null){var _Items$isEdit;return(_Items$isEdit=Items[isEdit])===null||_Items$isEdit===void 0?void 0:_Items$isEdit.item_number;}console.log('Items---------else');return((_Items=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items===void 0?void 0:_Items.item_number)?((_Items2=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items2===void 0?void 0:_Items2.item_number)+1:1;};var quoteValidate=function quoteValidate(){if((description===null||description===void 0?void 0:description.length)===0||qty===0||price===0){return true;}return false;};var deleteItemHandler=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var _filtered;var index,items_,filtered,length,id,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:index=isEdit;items_=Items;filtered=items_.filter(function(item,index){return index!==isEdit;});setItems(filtered);setEdit(null);length=(_filtered=filtered[(filtered===null||filtered===void 0?void 0:filtered.length)-1])===null||_filtered===void 0?void 0:_filtered.item_number;id=length>0?length+1:1;res=true;if(!quoteId){_context8.next=12;break;}_context8.next=11;return deleteItem_(items_[index]);case 11:res=_context8.sent;case 12:if(res){setLocalQuote({item_number:id,description:'',price:0,quantity:0,totalAmount:0});}setDeleteItemModal(false);case 14:case\"end\":return _context8.stop();}}},_callee8);}));return function deleteItemHandler(){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relate form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(isEditTrue){var _Items3,_Items4;setEdit(null);setLocalQuote({item_number:((_Items3=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items3===void 0?void 0:_Items3.item_number)?((_Items4=Items[(Items===null||Items===void 0?void 0:Items.length)-1])===null||_Items4===void 0?void 0:_Items4.item_number)+1:1,description:'',price:0,quantity:0,totalAmount:0});}else{props.history.goBack();}},className:\"back\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"sub_title\",children:'Quote for this job'}),/*#__PURE__*/_jsx(_Fragment,{children:(Items===null||Items===void 0?void 0:Items.length)>0&&!isEditTrue?Items.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"change_req\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"edit_delete\",children:/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setEdit(index);setLocalQuote(item);},className:\"editdark\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_2\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Item\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Description\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Price\"})}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:item.item_number})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_6\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show_label line-1\",children:item.description})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"show_label\",children:/*#__PURE__*/_jsx(NumberFormat,{value:item.totalAmount,displayType:'text',prefix:'$ ',thousandSeparator:true,isNumericString:true})})})]})]})]});}):null}),props.isDataFetched&&/*#__PURE__*/_jsxs(\"div\",{className:\"change_req\",children:[isEditTrue&&Items.length>1&&/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return setDeleteItemModal(true);},className:\"delete_quote\",children:['Delete',/*#__PURE__*/_jsx(\"img\",{src:deleteQuote,alt:\"delete\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"inner_title\",children:\"\".concat(isEditTrue?'Edit':'Add',\" Item\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:'Item Number'}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:callItemNo()})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form_field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:function onChange(e){return handleChange('description',e.target.value.trimLeft());}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex_row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Price\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(NumberFormat,{value:price||'',decimalScale:2,allowNegative:false,className:\"foo\",placeholder:\"$100\",displayType:'input',thousandSeparator:true,isNumericString:true,prefix:'$',onValueChange:function onValueChange(values){var formattedValue=values.formattedValue,value=values.value;handleChange('price',value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(NumberFormat,{value:qty||'',className:\"foo\",placeholder:\"10\",displayType:'input',thousandSeparator:true,isNumericString:true,onValueChange:function onValueChange(values){var formattedValue=values.formattedValue,value=values.value;handleChange('quantity',value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex_col_sm_4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form_label\",children:\"Total\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text_field\",children:/*#__PURE__*/_jsx(NumberFormat,{readOnly:true,value:total||'',decimalScale:2,allowNegative:false,className:\"foo\",placeholder:\"$1000\",displayType:'input',thousandSeparator:true,isNumericString:true,prefix:'$'})})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleQuoteDialog('yes');},className:\"fill_btn w100per \".concat(quoteValidate()?'disable_btn':''),children:\"\".concat(isEditTrue?'Save':'Add',\" Item\")})]}),/*#__PURE__*/_jsx(Modal,{className:\"custom_modal\",open:deleteItemModal,onClose:function onClose(){return setDeleteItemModal(false);},\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_wh confirmation\",\"data-aos\":\"zoom-in\",\"data-aos-delay\":\"30\",\"data-aos-duration\":\"1000\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"xs_sub_title\",children:\"Delete item confirmation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close_btn\",onClick:function onClick(){return setDeleteItemModal(false);},children:/*#__PURE__*/_jsx(\"img\",{src:cancel,alt:\"cancel\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal_message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you still want to delete item?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog_actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"fill_btn btn-effect\",onClick:deleteItemHandler,children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"fill_grey_btn btn-effect\",onClick:function onClick(){return setDeleteItemModal(false);},children:\"No\"})]})]})}),/*#__PURE__*/_jsxs(Dialog,{open:isQuoteDialog// onClose={() => handleQuoteDialog}\n,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",className:\"xs_alert_dialog_title\",children:'This quote will be send to builder'}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{children:'Are you sure you want to update quote?'})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleQuoteDialog('no',true);},color:\"primary\",children:'Yes'}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleQuoteDialog('no');},color:\"primary\",children:'No'})]})]}),(Items===null||Items===void 0?void 0:Items.length)>0&&!isEditTrue&&/*#__PURE__*/_jsx(\"div\",{className:\"total_quote\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"fill_grey_btn\",children:[\"Total Quote: $\",calculateTotal()]})}),quoteId||!props.isDataFetched||isEditTrue?null:/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"fill_grey_btn quote_btn \".concat((Items===null||Items===void 0?void 0:Items.length)===0?'disable_btn':''),children:'Submit Quote'})]});};export default QuoteMark;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/jobDashboard/components/quoteJobs/quoteMark.tsx"],"names":["React","useState","useEffect","postHomeApplyJob","addQuote","addItem","updateItem","deleteItem","quoteByJobId","NumberFormat","Modal","storageService","Button","Dialog","DialogActions","DialogTitle","DialogContent","DialogContentText","deleteQuote","cancel","moengage","mixPanel","MoEConstants","QuoteMark","props","Items","setItems","isEdit","setEdit","totalItemsAmt","setTotalItemsAmt","quoteId","setQuoteId","deleteItemModal","setDeleteItemModal","item_number","description","price","quantity","totalAmount","localQuote","setLocalQuote","isQuoteDialog","setIsQuoteDialog","jobData","location","state","console","log","preFetch","isItemsEditable","redirect_from","data","jobId","tradieId","getItem","_id","res","success","resultData","quote_item","length","items_","item_no","prev","dataFetched","deleteItem_","item","itemId","addItem_","push","updateItem_","index","items","newAmount","totalItemsAmount","amount","moECalled","mData","timeStamp","getCurrentTimeStamp","category","tradeName","locationName","jobMilestonesData","Amount","moE_SendEvent","QUOTED_A_JOB","mixP_SendEvent","applyJobClicked","jobDetailsData","builderId","postedBy","tradeId","specializationId","history","pathname","builderName","handleSubmit","userId","base_redirect","handleChange","name","value","slice","reduce","a","b","calculateTotal","totalAmt_","total","saveAddItem","isEditTrue","isSuccess","handleQuoteDialog","ans","hitApi","qty","total_cal","callItemNo","quoteValidate","deleteItemHandler","filtered","filter","id","goBack","map","isDataFetched","e","target","trimLeft","values","formattedValue"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { postHomeApplyJob } from '../../../../redux/homeSearch/actions';\nimport {\n    addQuote,\n    addItem,\n    updateItem,\n    deleteItem,\n    quoteByJobId\n} from '../../../../redux/quotes/actions';\nimport { acceptDeclineJobInvitation } from '../../../../redux/jobs/actions';\nimport NumberFormat from 'react-number-format';\nimport Modal from '@material-ui/core/Modal';\nimport storageService from '../../../../utils/storageService';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\n\nimport deleteQuote from '../../../../assets/images/ic-delete.png';\nimport cancel from \"../../../../assets/images/ic-cancel.png\";\nimport { moengage, mixPanel } from '../../../../services/analyticsTools';\nimport { MoEConstants } from '../../../../utils/constants';\n\nconst QuoteMark = (props: any) => {\n    const [Items, setItems] = useState<Array<any>>([]);\n    const [isEdit, setEdit] = useState<any>(null);\n    const [totalItemsAmt, setTotalItemsAmt] = useState<number>(0);\n    const [quoteId, setQuoteId] = useState<string>('');\n    const [deleteItemModal, setDeleteItemModal] = useState<boolean>(false);\n    const [localQuote, setLocalQuote] = useState<any>({\n        item_number: 1,\n        description: '',\n        price: 0,\n        quantity: 0,\n        totalAmount: 0\n    });\n    const [isQuoteDialog, setIsQuoteDialog] = useState<boolean>(false);\n    var jobData = props.location?.state?.jobData;\n    console.log('jobData: ', jobData);\n\n    useEffect(() => {\n        preFetch();\n    }, []);\n\n    console.log('Items: ', Items);\n    const preFetch = async () => {\n        const isItemsEditable = props.location?.state?.redirect_from === 'appliedJobs' ? true : false;\n        if (isItemsEditable) {\n            const data: any = {\n                jobId: props.location?.state?.jobData?.jobId,\n                tradieId: storageService.getItem('userInfo')?._id\n            }\n            const res = await quoteByJobId(data);\n            if (res.success && res.data?.resultData[0]?.quote_item?.length) {\n                const items_ = res.data?.resultData[0]?.quote_item;\n                setItems(items_);\n                setQuoteId(res.data?.resultData[0]?._id);\n                let item_no = items_[items_?.length - 1]?.item_number ? items_[items_?.length - 1]?.item_number + 1 : 1;\n                setLocalQuote((prev: any) => ({ ...prev, item_number: item_no }));\n                props.dataFetched(true);\n            } else {\n                props.dataFetched(false);\n            }\n        } else {\n            props.dataFetched(true);\n        }\n    }\n\n\n    const deleteItem_ = async (item: any) => {\n        const data = {\n            itemId: item?._id,\n        }\n        const res = await deleteItem(data);\n        if (res.success) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    const addItem_ = async (item: any) => {\n        let items_ = Items;\n        const data = {\n            quoteId: quoteId,\n            item_number: item?.item_number,\n            description: item?.description,\n            price: item?.price,\n            quantity: item?.quantity,\n            totalAmount: item?.totalAmount,\n        }\n        const res = await addItem(data);\n        if (res.success && res.data?.resultData) {\n            items_.push(res.data?.resultData);\n            setItems(items_);\n            setLocalQuote({\n                item_number: items_[items_?.length - 1]?.item_number ? items_[items_?.length - 1]?.item_number + 1 : 1,\n                description: '',\n                price: 0,\n                quantity: 0,\n                totalAmount: 0\n            });\n        }\n    }\n\n    const updateItem_ = async (index: number, items: any) => {\n        const newAmount: number = totalItemsAmount(items);\n        const item = items[index];\n        const data = {\n            itemId: item?._id,\n            item_number: item?.item_number,\n            description: item?.description,\n            price: item?.price,\n            quantity: item?.quantity,\n            totalAmount: item?.totalAmount,\n            quoteId: quoteId,\n            amount: newAmount\n        }\n        const res = await updateItem(data);\n        if (res.success) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    const moECalled = () => {\n        const mData = {\n            timeStamp: moengage.getCurrentTimeStamp(),\n            category: jobData?.tradeName,\n            location: jobData?.locationName,\n            'Number of milestone': jobData?.jobMilestonesData?.length,\n            Amount: totalItemsAmt,\n        }\n        moengage.moE_SendEvent(MoEConstants.QUOTED_A_JOB, mData);\n        mixPanel.mixP_SendEvent(MoEConstants.QUOTED_A_JOB, mData);\n    }\n\n    const applyJobClicked = async () => {\n        const jobDetailsData: any = props.location?.state?.jobData;\n        const data = {\n            jobId: jobDetailsData?.jobId,\n            builderId: jobDetailsData?.postedBy?.builderId,\n            tradeId: jobDetailsData?.tradeId,\n            specializationId: jobDetailsData?.specializationId\n        }\n        const res = await postHomeApplyJob(data);\n        if (res.success) {\n            moECalled();\n            props.history.push({\n                pathname: '/quote-job-success',\n                state: {\n                    builderName: props.builderName ? props.builderName : 'Builder'\n                }\n            });\n        }\n    }\n\n    const handleSubmit = async () => {\n        const jobId: string = props.location?.state?.jobData?.jobId;\n        const data: any = {\n            jobId: jobId,\n            userId: storageService.getItem('userInfo')?._id,\n            amount: totalItemsAmt,\n            quote_item: Items\n        }\n        const res: any = await addQuote(data);\n        if (res.success) {\n            if (props.location?.state?.base_redirect === 'newJobs') {\n                moECalled();\n                props.history.push({\n                    pathname: '/quote-job-success',\n                    state: {\n                        builderName: props.builderName ? props.builderName : 'Builder'\n                    }\n                });\n            } else {\n                applyJobClicked();\n            }\n        }\n    }\n\n    const handleChange = (name: any, value: any) => {\n        if (name === 'description' && value.length > 250) {\n            return;\n        }\n        setLocalQuote((prev: any) => ({\n            ...prev,\n            [name]: name === 'description' ? value : + value\n        }));\n    }\n\n    const totalItemsAmount = (items: any) => {\n        let totalAmount = items.slice(1, items.length).reduce((a: any, b: any) => {\n            return a + b.totalAmount\n        }, Items[0].totalAmount);\n        return totalAmount;\n    }\n\n    const calculateTotal = () => {\n        if (Items?.length) {\n            let totalAmt_ = totalItemsAmount(Items);\n            if (totalAmt_ && totalAmt_ !== totalItemsAmt) {\n                setTotalItemsAmt(totalAmt_);\n            }\n            const total = (\n                <NumberFormat\n                    value={totalAmt_}\n                    decimalScale={2}\n                    displayType={'text'}\n                    thousandSeparator={true}\n                    isNumericString={true}\n                />\n            )\n            return total;\n        }\n        return `$0`;\n    }\n\n    const saveAddItem = async () => {\n        if (isEditTrue) {\n            let index = isEdit;\n            let items_ = Items;\n            let item: any = localQuote;\n            item['totalAmount'] = (+item.quantity * +item.price);\n            items_[isEdit] = (item);\n            let isSuccess: boolean = true;\n            if (quoteId) {\n                isSuccess = await updateItem_(index, items_);\n            }\n            if (isSuccess) {\n                setItems(items_);\n                setEdit(null);\n                setLocalQuote({\n                    item_number: items_[items_?.length - 1]?.item_number + 1,\n                    description: '',\n                    price: 0,\n                    quantity: 0,\n                    totalAmount: 0\n                });\n            }\n            return;\n        } else {\n            let items_ = Items;\n            let item: any = localQuote;\n            item['totalAmount'] = (+item.quantity * +item.price);\n            if (props.location?.state?.redirect_from === 'appliedJobs') {\n                await addItem_(item);\n            } else {\n                items_.push(item);\n                setItems(items_);\n                setLocalQuote({\n                    item_number: items_[items_?.length - 1]?.item_number ? items_[items_?.length - 1]?.item_number + 1 : 1,\n                    description: '',\n                    price: 0,\n                    quantity: 0,\n                    totalAmount: 0\n                });\n            }\n        }\n        if (isQuoteDialog) {\n            setIsQuoteDialog(false);\n        }\n    }\n\n    const handleQuoteDialog = (ans?: string, hitApi?: boolean) => {\n        if (quoteId) {\n            setIsQuoteDialog(ans === 'yes' ? true : false);\n            if (hitApi) saveAddItem();\n        } else {\n            saveAddItem();\n        }\n    }\n\n    let item_number = localQuote.item_number;\n    let description = localQuote.description;\n    let price: any = localQuote.price;\n    let qty: any = localQuote.quantity;\n    let total_cal = (+qty * +price);\n    let total = total_cal === 0 ? '' : total_cal;\n    let isEditTrue = isEdit !== null && isEdit > -1 ? true : false;\n\n    const callItemNo = () => {\n        if (localQuote?._id) {\n            console.log('localQuote?._id-----------if');\n            return localQuote?.item_number;\n        }\n        if (isEdit !== null) {\n            return Items[isEdit]?.item_number;\n        }\n        console.log('Items---------else');\n        return Items[Items?.length - 1]?.item_number ? Items[Items?.length - 1]?.item_number + 1 : 1;\n    }\n\n    const quoteValidate = () => {\n        if (description?.length === 0 || qty === 0 || price === 0) {\n            return true\n        }\n        return false;\n    }\n\n    const deleteItemHandler = async () => {\n        let index = isEdit;\n        let items_ = Items;\n        let filtered = items_.filter((item: any, index: any) => index !== isEdit);\n        setItems(filtered);\n        setEdit(null);\n        let length = filtered[filtered?.length - 1]?.item_number;\n        let id = length > 0 ? length + 1 : 1;\n        let res: any = true;\n        if (quoteId) {\n            res = await deleteItem_(items_[index]);\n        }\n        if (res) {\n            setLocalQuote({\n                item_number: id,\n                description: '',\n                price: 0,\n                quantity: 0,\n                totalAmount: 0\n            });\n        }\n        setDeleteItemModal(false);\n    }\n\n    return (\n        <div className=\"flex_col_sm_6\">\n            <div className=\"relate form_field\">\n                <button\n                    onClick={() => {\n                        if (isEditTrue) {\n                            setEdit(null);\n                            setLocalQuote({\n                                item_number: Items[Items?.length - 1]?.item_number ? Items[Items?.length - 1]?.item_number + 1 : 1,\n                                description: '',\n                                price: 0,\n                                quantity: 0,\n                                totalAmount: 0\n                            });\n                        } else {\n                            props.history.goBack();\n                        }\n                    }}\n                    className=\"back\">\n                </button>\n            </div>\n            <span className=\"sub_title\">\n                {'Quote for this job'}\n            </span>\n            <>\n                {Items?.length > 0 && !isEditTrue ?\n                    Items.map((item: any, index: number) => (\n                        <div className=\"change_req\">\n                            <div className=\"edit_delete\">\n                                <span\n                                    onClick={() => {\n                                        setEdit(index);\n                                        setLocalQuote(item)\n                                    }}\n                                    className=\"editdark\">\n                                </span>\n                            </div>\n                            <div className=\"flex_row\">\n                                <div className=\"flex_col_sm_2\">\n                                    <label className=\"form_label\">Item</label>\n                                </div>\n                                <div className=\"flex_col_sm_6\">\n                                    <label className=\"form_label\">Description</label>\n                                </div>\n                                <div className=\"flex_col_sm_4\">\n                                    <label className=\"form_label\">Price</label>\n                                </div>\n                                <>\n                                    <div className=\"flex_col_sm_2\">\n                                        <span className=\"show_label\">{item.item_number}</span>\n                                    </div>\n                                    <div className=\"flex_col_sm_6\">\n                                        <span className=\"show_label line-1\">\n                                            {item.description}\n                                        </span>\n                                    </div>\n                                    <div className=\"flex_col_sm_4\">\n                                        <span className=\"show_label\">\n                                            <NumberFormat\n                                                value={item.totalAmount}\n                                                displayType={'text'}\n                                                prefix={'$ '}\n                                                thousandSeparator={true}\n                                                isNumericString={true}\n                                            />\n                                        </span>\n                                    </div>\n                                </>\n                            </div>\n                        </div>\n                    )) : null}\n            </>\n\n            {props.isDataFetched && <div className=\"change_req\">\n                {isEditTrue && Items.length > 1 && (\n                    <span\n                        onClick={() => setDeleteItemModal(true)}\n                        className=\"delete_quote\">\n                        {'Delete'}\n                        <img src={deleteQuote} alt=\"delete\" />\n                    </span>\n                )}\n                <span className=\"inner_title\">{`${isEditTrue ? 'Edit' : 'Add'} Item`}</span>\n                <div className=\"form_field\">\n                    <label className=\"form_label\">\n                        {'Item Number'}\n                    </label>\n                    <div className=\"text_field\">\n                        <input\n                            type=\"number\"\n                            value={callItemNo()}\n                        />\n                    </div>\n                </div>\n                <div className=\"form_field\">\n                    <label className=\"form_label\">Description</label>\n                    <div className=\"text_field\">\n                        <textarea\n                            value={description}\n                            onChange={(e) => handleChange('description', e.target.value.trimLeft())}\n                        ></textarea>\n                    </div>\n                </div>\n                <div className=\"form_field\">\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_4\">\n                            <label className=\"form_label\">Price</label>\n                            <div className=\"text_field\">\n                                <NumberFormat\n                                    value={price || ''}\n                                    decimalScale={2}\n                                    allowNegative={false}\n                                    className=\"foo\"\n                                    placeholder=\"$100\"\n                                    displayType={'input'}\n                                    thousandSeparator={true}\n                                    isNumericString={true}\n                                    prefix={'$'}\n                                    onValueChange={(values) => {\n                                        const { formattedValue, value } = values;\n                                        handleChange('price', value);\n                                    }}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"flex_col_sm_4\">\n                            <label className=\"form_label\">Qty</label>\n                            <div className=\"text_field\">\n                                <NumberFormat\n                                    value={qty || ''}\n                                    className=\"foo\"\n                                    placeholder=\"10\"\n                                    displayType={'input'}\n                                    thousandSeparator={true}\n                                    isNumericString={true}\n                                    onValueChange={(values) => {\n                                        const { formattedValue, value } = values;\n                                        handleChange('quantity', value);\n                                    }}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"flex_col_sm_4\">\n                            <label className=\"form_label\">Total</label>\n                            <div className=\"text_field\">\n                                <NumberFormat\n                                    readOnly\n                                    value={total || ''}\n                                    decimalScale={2}\n                                    allowNegative={false}\n                                    className=\"foo\"\n                                    placeholder=\"$1000\"\n                                    displayType={'input'}\n                                    thousandSeparator={true}\n                                    isNumericString={true}\n                                    prefix={'$'}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <button\n                    onClick={() => handleQuoteDialog('yes')}\n                    className={`fill_btn w100per ${quoteValidate() ? 'disable_btn' : ''}`}>\n                    {`${isEditTrue ? 'Save' : 'Add'} Item`}\n                </button>\n            </div>}\n\n            <Modal\n                className=\"custom_modal\"\n                open={deleteItemModal}\n                onClose={() => setDeleteItemModal(false)}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n            >\n                <div className=\"custom_wh confirmation\" data-aos=\"zoom-in\" data-aos-delay=\"30\" data-aos-duration=\"1000\">\n                    <div className=\"heading\">\n                        <span className=\"xs_sub_title\">{`Delete item confirmation`}</span>\n                        <button className=\"close_btn\" onClick={() => setDeleteItemModal(false)}>\n                            <img src={cancel} alt=\"cancel\" />\n                        </button>\n                    </div>\n                    <div className=\"modal_message\">\n                        <p>Are you sure you still want to delete item?</p>\n                    </div>\n                    <div className=\"dialog_actions\">\n                        <button className=\"fill_btn btn-effect\" onClick={deleteItemHandler}>Yes</button>\n                        <button className=\"fill_grey_btn btn-effect\"\n                            onClick={() => setDeleteItemModal(false)}>No</button>\n                    </div>\n                </div>\n            </Modal>\n\n            <Dialog\n                open={isQuoteDialog}\n                // onClose={() => handleQuoteDialog}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\" className=\"xs_alert_dialog_title\">\n                    {'This quote will be send to builder'}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        {'Are you sure you want to update quote?'}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        onClick={() => handleQuoteDialog('no', true)}\n                        color=\"primary\">\n                        {'Yes'}\n                    </Button>\n                    <Button\n                        onClick={() => handleQuoteDialog('no')}\n                        color=\"primary\">\n                        {'No'}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            {/* <Modal\n                className=\"custom_modal\"\n                open={isQuoteDialog}\n                onClose={() => handleQuoteDialog('no')}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n            >\n                <div className=\"custom_wh confirmation\" data-aos=\"zoom-in\" data-aos-delay=\"30\" data-aos-duration=\"1000\">\n                    <div className=\"heading\">\n                        <span className=\"xs_sub_title\">{'This quote will be send to builder'}</span>\n                        <button className=\"close_btn\" onClick={() => handleQuoteDialog('no')}>\n                            <img src={cancel} alt=\"cancel\" />\n                        </button>\n                    </div>\n                    <div className=\"modal_message\">\n                        <p>Are you sure you want to update quote?</p>\n                    </div>\n                    <div className=\"dialog_actions\">\n                        <button className=\"fill_btn btn-effect\" onClick={() => handleQuoteDialog('no', true)}>Yes</button>\n                        <button className=\"fill_grey_btn btn-effect\" onClick={() => handleQuoteDialog('no')}>No</button>\n                    </div>\n                </div>\n            </Modal> */}\n\n            {(Items?.length > 0 && !isEditTrue) && (\n                <div className=\"total_quote\">\n                    <span className=\"fill_grey_btn\">\n                        {`Total Quote: $`}\n                        {calculateTotal()}\n                    </span>\n                </div>\n            )}\n\n            {(quoteId || !props.isDataFetched || isEditTrue) ? null : (\n                <button\n                    onClick={handleSubmit}\n                    className={`fill_grey_btn quote_btn ${Items?.length === 0 ? 'disable_btn' : ''}`}>\n                    {'Submit Quote'}\n                </button>\n            )}\n        </div>\n    )\n}\n\nexport default QuoteMark;"]},"metadata":{},"sourceType":"module"}