{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import CreateAccount from'./components/createAccount';import InitialSignupPage from'./components/initialSignupPage';import LetsGo from'./components/letsGo';import SelectYourSphere from'./components/selectYourSphere';import PhoneNumber from'./components/phoneNumber';import VerifyPhoneNumber from'./components/verifyPhoneNumber';import CreatePassword from'./components/createPassword';import Specialization from'./components/specialization';import AlmostDone from'./components/almostDone';import AddQualification from'./components/addQualification';import AddABN from'./components/addABN';import{postSignup,socialSignupLogin}from'../../redux/auth/actions';import AuthParent from'../../common/auth/authParent';import VerifyEmail from'./components/EmailVerification';import{moengage,mixPanel}from'../../services/analyticsTools';import{MoEConstants}from'../../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";var DATA=[{title:'Welcome to Tickt',subTitle:'A new marketplace for builders and tradespeople'},{title:'Create account'},{title:'Verify your email'},{title:'Phone number'},{title:'Verify your number'},{title:'Create password'},{title:'Select the trade you used the most',tradieTitle:'What is your trade?'},{title:'What Specialisation?'},{title:'Almost done',tradieTitle:'Add qualification'},// { title: 'Add ABN' }\n{title:'Almost done'}];// { title: 'Add ABN' }\nvar Signup=function Signup(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),steps=_useState2[0],setSteps=_useState2[1];var _useState3=useState({firstName:'',mobileNumber:'',email:'',user_image:'',password:'',socialId:'',accountType:'',trade:'',specialization:[],qualification:[],user_type:0,location:{type:\"Point\",coordinates:[144.9631,-37.8136]}// companyName: '',\n// position: '',\n// abn: '',\n}),_useState4=_slicedToArray(_useState3,2),signupData=_useState4[0],setSignupData=_useState4[1];useEffect(function(){// props.callTradeList();\nvar locationNew={location:{type:\"Point\",coordinates:[144.9631,//long\n37.8136//lat\n]}};var showPosition=function showPosition(position){var lat=position.coords.latitude;var long=position.coords.longitude;locationNew.location.coordinates[0]=long;locationNew.location.coordinates[1]=lat;setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),locationNew);});};if(navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition);}},[]);var backButtonHandler=function backButtonHandler(){var _props$history,_props$history$locati;var minStep=1;var stateStepsValue=steps;if(stateStepsValue===5&&signupData.user_type===2){minStep=2;}if(stateStepsValue===5&&signupData.user_type===1){minStep=2;}if(stateStepsValue===3&&(props.socialData||((_props$history=props.history)===null||_props$history===void 0?void 0:(_props$history$locati=_props$history.location)===null||_props$history$locati===void 0?void 0:_props$history$locati.redirect)===\"socialRedirectFromLogin\")){minStep=3;}else{if(stateStepsValue===3&&signupData.user_type===2){minStep=2;}if(stateStepsValue===3&&signupData.user_type===1){minStep=2;}}if(stateStepsValue===8&&signupData.user_type===2){stateStepsValue=6;}if((stateStepsValue===6||stateStepsValue===3)&&signupData.socialId){minStep=3;}console.log({stateStepsValue:stateStepsValue,minStep:minStep,set:stateStepsValue-minStep},'update');setSteps(stateStepsValue-minStep);};var updateSteps=function updateSteps(step,newData){var _props$history2,_props$history2$locat,_props$history5,_props$history5$locat;var newStep=step;if(!signupData.socialId&&(props.socialData||((_props$history2=props.history)===null||_props$history2===void 0?void 0:(_props$history2$locat=_props$history2.location)===null||_props$history2$locat===void 0?void 0:_props$history2$locat.redirect)===\"socialRedirectFromLogin\")){var _props$history3,_props$history3$locat,_props$history3$locat2,_props$history4,_props$history4$locat,_props$history4$locat2;var profile=props.socialData?props.socialData:(_props$history3=props.history)===null||_props$history3===void 0?void 0:(_props$history3$locat=_props$history3.location)===null||_props$history3$locat===void 0?void 0:(_props$history3$locat2=_props$history3$locat.state)===null||_props$history3$locat2===void 0?void 0:_props$history3$locat2.profileData;console.log(profile,\"profile updateSteps\",props.history);if(props.socialData){setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),profile);});}if((_props$history4=props.history)===null||_props$history4===void 0?void 0:(_props$history4$locat=_props$history4.location)===null||_props$history4$locat===void 0?void 0:(_props$history4$locat2=_props$history4$locat.state)===null||_props$history4$locat2===void 0?void 0:_props$history4$locat2.profileData){setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),profile);});}newStep+=2;}if(newStep===1&&(props.socialData||((_props$history5=props.history)===null||_props$history5===void 0?void 0:(_props$history5$locat=_props$history5.location)===null||_props$history5$locat===void 0?void 0:_props$history5$locat.redirect)===\"socialRedirectFromLogin\"||signupData.socialId)){newStep+=2;}if(newStep===5&&signupData.socialId){newStep+=1;}if(newStep===6&&signupData.user_type===2){newStep+=2;}setSteps(newStep);console.log({newStep:newStep},'update');if(newData){setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),newData);});}};var onNewAccount=function onNewAccount(profileData,socialType){console.log('profileData: ',profileData);setSteps(steps+2);var newProfileData=_objectSpread(_objectSpread({firstName:profileData.name,authType:\"signup\",email:profileData.email,accountType:socialType,user_image:(profileData===null||profileData===void 0?void 0:profileData.imageUrl)||''},socialType==='google'&&{socialId:profileData.googleId}),socialType==='linkedIn'&&{socialId:profileData.socialId});setSignupData(function(prevData){return _objectSpread(_objectSpread({},prevData),newProfileData);});};var onSubmitSignup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(lastStepFields){var res,newData,data,mData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newData=_objectSpread(_objectSpread({},signupData),lastStepFields);data=_objectSpread(_objectSpread({},newData),{},{//company_name: newData.companyName,\ntrade:[newData.trade],user_type:signupData.user_type,deviceToken:\"323245356tergdfgrtuy68u566452354dfwe\"});//delete data.companyName;\nif(data.user_type===2){delete data.trade;delete data.specialization;delete data.qualification;}if(!signupData.accountType){_context.next=10;break;}delete data.password;_context.next=7;return socialSignupLogin(data);case 7:res=_context.sent;_context.next=15;break;case 10:delete data.socialId;delete data.accountType;_context.next=14;return postSignup(data);case 14:res=_context.sent;case 15:if(res.success){// firebaseSignUpWithEmailPassword({  //firebase signup with email password\n//     email: res.result?.email,\n//     password: '12345678',\n//     id: res.result?._id,\n//     fullName: res.result?.firstName,\n//     user_type: res.result?.user_type\n// });\nmData={success_status:true,name:data===null||data===void 0?void 0:data.firstName,//'sign up source': '',\nPlatform:'Web',email:data===null||data===void 0?void 0:data.email};moengage.moE_SendEvent(MoEConstants.SIGN_UP,mData);mixPanel.mixP_SendEvent(MoEConstants.SIGN_UP,mData);if(signupData.user_type===2){setSteps(9);}else{setSteps(10);}}case 16:case\"end\":return _context.stop();}}},_callee);}));return function onSubmitSignup(_x){return _ref.apply(this,arguments);};}();console.log(\"signupData ==>\",signupData);var renderPages=function renderPages(){console.log(steps,'step---->');switch(steps){case 0:return/*#__PURE__*/_jsx(InitialSignupPage,{updateSteps:updateSteps,history:props.history,step:steps,showModal:props.showModal,modalUpdateSteps:props.modalUpdateSteps,callTradeList:props.callTradeList});case 1:return/*#__PURE__*/_jsx(CreateAccount,{updateSteps:updateSteps,history:props.history,step:steps,data:signupData,onNewAccount:onNewAccount,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps});case 2:return/*#__PURE__*/_jsx(VerifyEmail,{updateSteps:updateSteps,step:steps,userType:signupData.user_type,email:signupData.email});case 3:return/*#__PURE__*/_jsx(PhoneNumber,{updateSteps:updateSteps,step:steps,mobileNumber:signupData.mobileNumber});case 4:return/*#__PURE__*/_jsx(VerifyPhoneNumber,{updateSteps:updateSteps,step:steps,userType:signupData.user_type,mobileNumber:signupData.mobileNumber});case 5:return/*#__PURE__*/_jsx(CreatePassword,{updateSteps:updateSteps,step:steps,password:signupData.password});case 6:return/*#__PURE__*/_jsx(SelectYourSphere,{updateSteps:updateSteps,step:steps,tradeListData:props.tradeListData,trade:signupData.trade});case 7:return/*#__PURE__*/_jsx(Specialization,{updateSteps:updateSteps,step:steps,tradeListData:props.tradeListData,trade:signupData.trade,specialization:signupData.specialization});case 8:if(signupData.user_type===2){return/*#__PURE__*/_jsx(AlmostDone,{onSubmitSignup:onSubmitSignup});}else{return/*#__PURE__*/_jsx(AddQualification,{updateSteps:updateSteps,step:steps,tradeListData:props.tradeListData,trade:signupData.trade,qualification:signupData.qualification});}case 9:if(signupData.user_type===2){return/*#__PURE__*/_jsx(LetsGo,{history:props.history,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps});}else{return/*#__PURE__*/_jsx(AddABN,{onSubmitSignup:onSubmitSignup});}case 10:return/*#__PURE__*/_jsx(LetsGo,{history:props.history,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps});default:return null;}};var header=DATA[steps];var isSuccess=signupData.user_type===2?steps===9:steps===10;return!isSuccess?/*#__PURE__*/_jsx(AuthParent,{sliderType:\"login\",backButtonHandler:backButtonHandler,header:header,userType:signupData.user_type,steps:steps,history:props.history,showModal:props.showModal,setShowModal:props.setShowModal,modalUpdateSteps:props.modalUpdateSteps,socialId:signupData.socialId,children:renderPages()}):renderPages();};export default Signup;","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/signup/signup.tsx"],"names":["useState","useEffect","CreateAccount","InitialSignupPage","LetsGo","SelectYourSphere","PhoneNumber","VerifyPhoneNumber","CreatePassword","Specialization","AlmostDone","AddQualification","AddABN","postSignup","socialSignupLogin","AuthParent","VerifyEmail","moengage","mixPanel","MoEConstants","DATA","title","subTitle","tradieTitle","Signup","props","steps","setSteps","firstName","mobileNumber","email","user_image","password","socialId","accountType","trade","specialization","qualification","user_type","location","type","coordinates","signupData","setSignupData","locationNew","showPosition","position","lat","coords","latitude","long","longitude","prevData","navigator","geolocation","getCurrentPosition","backButtonHandler","minStep","stateStepsValue","socialData","history","redirect","console","log","set","updateSteps","step","newData","newStep","profile","state","profileData","onNewAccount","socialType","newProfileData","name","authType","imageUrl","googleId","onSubmitSignup","lastStepFields","data","deviceToken","res","success","mData","success_status","Platform","moE_SendEvent","SIGN_UP","mixP_SendEvent","renderPages","showModal","modalUpdateSteps","callTradeList","setShowModal","tradeListData","header","isSuccess"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport CreateAccount from './components/createAccount';\nimport InitialSignupPage from './components/initialSignupPage';\nimport LetsGo from './components/letsGo';\nimport SelectYourSphere from './components/selectYourSphere';\nimport PhoneNumber from './components/phoneNumber';\nimport VerifyPhoneNumber from './components/verifyPhoneNumber';\nimport CreatePassword from './components/createPassword';\nimport Specialization from './components/specialization';\nimport AlmostDone from './components/almostDone';\nimport AddQualification from './components/addQualification';\nimport AddABN from './components/addABN';\nimport { postSignup, socialSignupLogin } from '../../redux/auth/actions';\nimport AuthParent from '../../common/auth/authParent';\nimport { firebaseSignUpWithEmailPassword } from '../../services/firebase';\nimport VerifyEmail from './components/EmailVerification'\nimport { moengage, mixPanel } from '../../services/analyticsTools';\nimport { MoEConstants } from '../../utils/constants';\n\ninterface Propstype {\n    history?: any,\n    showModal: boolean,\n    callTradeList: () => void,\n    tradeListData: Array<any>,\n    modalUpdateSteps: (data: any) => void,\n    setShowModal: (data: any) => void,\n    socialData: any,\n}\n\nconst DATA = [\n    { title: 'Welcome to Tickt', subTitle: 'A new marketplace for builders and tradespeople' },\n    { title: 'Create account' },\n    { title: 'Verify your email' },\n    { title: 'Phone number' },\n    { title: 'Verify your number' },\n    { title: 'Create password' },\n    { title: 'Select the trade you used the most', tradieTitle: 'What is your trade?' },\n    { title: 'What Specialisation?' },\n    { title: 'Almost done', tradieTitle: 'Add qualification' },\n    // { title: 'Add ABN' }\n    { title: 'Almost done' }\n]\n// { title: 'Add ABN' }\n\nconst Signup = (props: Propstype) => {\n    const [steps, setSteps] = useState<number>(0);\n    const [signupData, setSignupData] = useState<any>({\n        firstName: '',\n        mobileNumber: '',\n        email: '',\n        user_image: '',\n        password: '',\n        socialId: '',\n        accountType: '',\n        trade: '',\n        specialization: [],\n        qualification: [],\n        user_type: 0,\n        location: {\n            type: \"Point\",\n            coordinates: [\n                144.9631,\n                -37.8136\n            ]\n        }\n        // companyName: '',\n        // position: '',\n        // abn: '',\n    });\n\n    useEffect(() => {\n        // props.callTradeList();\n        var locationNew: any = {\n            location: {\n                type: \"Point\",\n                coordinates: [\n                    144.9631, //long\n                    37.8136 //lat\n                ]\n            }\n        }\n\n        const showPosition = (position: any) => {\n            const lat = position.coords.latitude;\n            const long = position.coords.longitude;\n            locationNew.location.coordinates[0] = long;\n            locationNew.location.coordinates[1] = lat;\n            setSignupData((prevData: any) => ({ ...prevData, ...locationNew }));\n        }\n\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(showPosition);\n        }\n    }, [])\n\n    const backButtonHandler = () => {\n        let minStep = 1;\n        let stateStepsValue = steps;\n\n        if (stateStepsValue === 5 && signupData.user_type === 2) {\n            minStep = 2;\n        }\n\n        if (stateStepsValue === 5 && signupData.user_type === 1) {\n            minStep = 2;\n        }\n\n        if (stateStepsValue === 3 && (props.socialData || props.history?.location?.redirect === \"socialRedirectFromLogin\")) {\n            minStep = 3;\n        } else {\n            if (stateStepsValue === 3 && signupData.user_type === 2) {\n                minStep = 2;\n            }\n\n            if (stateStepsValue === 3 && signupData.user_type === 1) {\n                minStep = 2;\n            }\n        }\n\n        if (stateStepsValue === 8 && signupData.user_type === 2) {\n            stateStepsValue = 6;\n        }\n        if ((stateStepsValue === 6 || stateStepsValue === 3) && signupData.socialId) {\n            minStep = 3;\n        }\n        console.log({\n            stateStepsValue,\n            minStep,\n            set: stateStepsValue - minStep\n        }, 'update')\n        setSteps(stateStepsValue - minStep);\n    }\n\n    const updateSteps = (step: number, newData?: any) => {\n        var newStep = step;\n        if (!signupData.socialId && (props.socialData || props.history?.location?.redirect === \"socialRedirectFromLogin\")) {\n            const profile = props.socialData ? props.socialData : props.history?.location?.state?.profileData;\n            console.log(profile, \"profile updateSteps\", props.history)\n            if (props.socialData) {\n                setSignupData((prevData: any) => ({ ...prevData, ...profile }))\n            }\n            if (props.history?.location?.state?.profileData) {\n                setSignupData((prevData: any) => ({ ...prevData, ...profile }))\n            }\n            newStep += 2;\n        }\n        if (newStep === 1 && (props.socialData || props.history?.location?.redirect === \"socialRedirectFromLogin\" || signupData.socialId)) {\n            newStep += 2;\n        }\n        if (newStep === 5 && signupData.socialId) {\n            newStep += 1;\n        }\n        if (newStep === 6 && signupData.user_type === 2) {\n            newStep += 2;\n        }\n        setSteps(newStep);\n        console.log({ newStep }, 'update')\n        if (newData) {\n            setSignupData((prevData: any) => ({ ...prevData, ...newData }))\n        }\n    }\n\n    const onNewAccount = (profileData: any, socialType: string) => {\n        console.log('profileData: ', profileData);\n        setSteps(steps + 2);\n        const newProfileData = {\n            firstName: profileData.name,\n            authType: \"signup\",\n            email: profileData.email,\n            accountType: socialType,\n            user_image: profileData?.imageUrl || '',\n            ...(socialType === 'google' && { socialId: profileData.googleId }),\n            ...(socialType === 'linkedIn' && { socialId: profileData.socialId })\n        }\n        setSignupData((prevData: any) => ({ ...prevData, ...newProfileData }))\n    }\n\n    const onSubmitSignup = async (lastStepFields: any) => {\n        var res: any;\n        const newData = { ...signupData, ...lastStepFields };\n        const data = {\n            ...newData,\n            //company_name: newData.companyName,\n            trade: [newData.trade],\n            user_type: signupData.user_type,\n            deviceToken: \"323245356tergdfgrtuy68u566452354dfwe\",\n        }\n        //delete data.companyName;\n        if (data.user_type === 2) {\n            delete data.trade;\n            delete data.specialization;\n            delete data.qualification;\n        }\n        if (signupData.accountType) {\n            delete data.password;\n            res = await socialSignupLogin(data);\n        } else {\n            delete data.socialId;\n            delete data.accountType;\n            res = await postSignup(data);\n        }\n        if (res.success) {\n            // firebaseSignUpWithEmailPassword({  //firebase signup with email password\n            //     email: res.result?.email,\n            //     password: '12345678',\n            //     id: res.result?._id,\n            //     fullName: res.result?.firstName,\n            //     user_type: res.result?.user_type\n            // });\n            const mData = {\n                success_status: true,\n                name: data?.firstName,\n                //'sign up source': '',\n                Platform: 'Web',\n                email: data?.email\n            };\n            moengage.moE_SendEvent(MoEConstants.SIGN_UP, mData);\n            mixPanel.mixP_SendEvent(MoEConstants.SIGN_UP, mData);\n            if (signupData.user_type === 2) {\n                setSteps(9);\n            } else {\n                setSteps(10)\n            }\n        }\n    }\n\n    console.log(\"signupData ==>\", signupData)\n\n    const renderPages = () => {\n        console.log(steps, 'step---->');\n        switch (steps) {\n            case 0:\n                return <InitialSignupPage updateSteps={updateSteps} history={props.history} step={steps} showModal={props.showModal} modalUpdateSteps={props.modalUpdateSteps} callTradeList={props.callTradeList} />\n            case 1:\n                return <CreateAccount updateSteps={updateSteps} history={props.history} step={steps} data={signupData} onNewAccount={onNewAccount} showModal={props.showModal} setShowModal={props.setShowModal} modalUpdateSteps={props.modalUpdateSteps} />\n            case 2:\n                return <VerifyEmail updateSteps={updateSteps} step={steps} userType={signupData.user_type} email={signupData.email} />\n            case 3:\n                return <PhoneNumber updateSteps={updateSteps} step={steps} mobileNumber={signupData.mobileNumber} />\n            case 4:\n                return <VerifyPhoneNumber updateSteps={updateSteps} step={steps} userType={signupData.user_type} mobileNumber={signupData.mobileNumber} />\n            case 5:\n                return <CreatePassword updateSteps={updateSteps} step={steps} password={signupData.password} />\n            case 6:\n                return <SelectYourSphere updateSteps={updateSteps} step={steps} tradeListData={props.tradeListData} trade={signupData.trade} />\n            case 7:\n                return <Specialization updateSteps={updateSteps} step={steps} tradeListData={props.tradeListData} trade={signupData.trade} specialization={signupData.specialization} />\n            case 8:\n                if (signupData.user_type === 2) {\n                    return <AlmostDone onSubmitSignup={onSubmitSignup} />\n                } else {\n                    return <AddQualification updateSteps={updateSteps} step={steps} tradeListData={props.tradeListData} trade={signupData.trade} qualification={signupData.qualification} />\n                }\n            case 9:\n                if (signupData.user_type === 2) {\n                    return <LetsGo history={props.history} showModal={props.showModal} setShowModal={props.setShowModal} modalUpdateSteps={props.modalUpdateSteps} />\n                } else {\n                    return <AddABN onSubmitSignup={onSubmitSignup} />\n                }\n            case 10:\n                return <LetsGo history={props.history} showModal={props.showModal} setShowModal={props.setShowModal} modalUpdateSteps={props.modalUpdateSteps} />\n            default:\n                return null\n        }\n    }\n\n    const header = DATA[steps];\n    const isSuccess = signupData.user_type === 2 ? steps === 9 : steps === 10;\n\n    return !isSuccess ? (\n        <AuthParent sliderType='login' backButtonHandler={backButtonHandler} header={header} userType={signupData.user_type} steps={steps} history={props.history} showModal={props.showModal} setShowModal={props.setShowModal} modalUpdateSteps={props.modalUpdateSteps} socialId={signupData.socialId} >{renderPages()}</AuthParent>\n    ) : renderPages()\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}