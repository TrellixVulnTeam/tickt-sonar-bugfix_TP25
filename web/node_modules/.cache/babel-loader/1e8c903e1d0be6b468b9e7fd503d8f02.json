{"ast":null,"code":"import _regeneratorRuntime from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/home/appinventiv/Documents/Project/tickt/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import milestonesPlaceholder from'../../assets/images/Job milestones-preview.png';import{renderTimeWithCustomFormat}from'../../utils/common';import{ChooseJob,InviteForJob,invitedJobIds,CancelInviteForJob}from'../../redux/jobs/actions';import{withRouter}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChooseTheJob=function ChooseTheJob(props){var _props$location3;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),editItem=_useState2[0],setEditItems=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),stateData=_useState4[0],setStateData=_useState4[1];var checkOnClick=function checkOnClick(e,index){if(editItem[index]){setEditItems({});return;}setEditItems(function(prev){return _defineProperty({},index,e.target.checked);});};useEffect(function(){preFetch();},[]);var preFetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _props$location;var _props$location$state,tradieId,path,cancelJob,response,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_props$location$state=props===null||props===void 0?void 0:(_props$location=props.location)===null||_props$location===void 0?void 0:_props$location.state,tradieId=_props$location$state.tradieId,path=_props$location$state.path,cancelJob=_props$location$state.cancelJob;if(!cancelJob){_context.next=8;break;}_context.next=4;return invitedJobIds({tradieId:tradieId,page:1});case 4:response=_context.sent;if(response===null||response===void 0?void 0:response.success){setStateData(response.data);}_context.next=12;break;case 8:_context.next=10;return ChooseJob({page:1});case 10:_response=_context.sent;if(_response===null||_response===void 0?void 0:_response.success){setStateData(_response.data);}case 12:case\"end\":return _context.stop();}}},_callee);}));return function preFetch(){return _ref2.apply(this,arguments);};}();useEffect(function(){console.log('Here!=====>',{editItem:editItem});},[editItem]);var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _props$location2;var _props$location$state2,tradieId,path,cancelJob,key,data,response,filter,_response2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_props$location$state2=props===null||props===void 0?void 0:(_props$location2=props.location)===null||_props$location2===void 0?void 0:_props$location2.state,tradieId=_props$location$state2.tradieId,path=_props$location$state2.path,cancelJob=_props$location$state2.cancelJob;key='';if(Object.keys(editItem).length){key=Object.keys(editItem)[0];}data={tradieId:tradieId,jobId:key};if(cancelJob){_context2.next=11;break;}_context2.next=7;return InviteForJob(data);case 7:response=_context2.sent;if(response.success){props.history.push('/choose-the-job-success');}_context2.next=18;break;case 11:filter=stateData.find(function(item){return item.jobId===key;});if(!(filter===null||filter===void 0?void 0:filter.invitationId)){_context2.next=18;break;}data['invitationId']=filter===null||filter===void 0?void 0:filter.invitationId;_context2.next=16;return CancelInviteForJob(data);case 16:_response2=_context2.sent;if(_response2.success){props.history.push(\"/tradie-info\".concat(path));}case 18:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(){return _ref3.apply(this,arguments);};}();var _props$location$state3=props===null||props===void 0?void 0:(_props$location3=props.location)===null||_props$location3===void 0?void 0:_props$location3.state,tradieId=_props$location$state3.tradieId,path=_props$location$state3.path,cancelJob=_props$location$state3.cancelJob;return/*#__PURE__*/_jsx(\"div\",{className:\"app_wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form_field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"relate\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back\",onClick:function onClick(){props.history.push(\"/tradie-info\".concat(path));}}),/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:'Choose the job'})]})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex_row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex_col_sm_5\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"milestones\",children:[(stateData===null||stateData===void 0?void 0:stateData.length)>0?stateData.map(function(item,index){var _item$jobDescription;return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox_wrap agree_check\",children:[/*#__PURE__*/_jsx(\"input\",{checked:editItem[item===null||item===void 0?void 0:item.jobId]==true?true:false,onChange:function onChange(e){checkOnClick(e,item===null||item===void 0?void 0:item.jobId);},className:\"filter-type filled-in\",type:\"checkbox\",id:\"milestone\".concat(index)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"milestone\".concat(index),children:\"\".concat(item===null||item===void 0?void 0:item.tradeName)}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"span\",{children:item===null||item===void 0?void 0:item.jobName}),/*#__PURE__*/_jsx(\"span\",{children:renderTimeWithCustomFormat(item===null||item===void 0?void 0:item.fromDate,item===null||item===void 0?void 0:item.toDate,'',['DD MMM','DD MMM YY'])}),/*#__PURE__*/_jsx(\"span\",{children:\"\".concat(item===null||item===void 0?void 0:item.jobDescription.substring(0,120),\" \").concat((item===null||item===void 0?void 0:(_item$jobDescription=item.jobDescription)===null||_item$jobDescription===void 0?void 0:_item$jobDescription.length)>120?'...':'')})]})]})},index);}):/*#__PURE__*/_jsx(\"figure\",{className:\"placeholder_img\",children:/*#__PURE__*/_jsx(\"img\",{src:milestonesPlaceholder,alt:\"milestones-placeholder\"})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'50px'},className:\"form_field\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"fill_btn full_btn btn-effect \".concat(!Object.keys(editItem).length?'disable_btn':''),children:\"\".concat(cancelJob?'Cancel':'',\" Invite \")})})]})})})]})})});};export default withRouter(ChooseTheJob);","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/chooseTheJob/index.tsx"],"names":["React","useState","useEffect","milestonesPlaceholder","renderTimeWithCustomFormat","ChooseJob","InviteForJob","invitedJobIds","CancelInviteForJob","withRouter","ChooseTheJob","props","editItem","setEditItems","stateData","setStateData","checkOnClick","e","index","prev","target","checked","preFetch","location","state","tradieId","path","cancelJob","page","response","success","data","console","log","handleSubmit","key","Object","keys","length","jobId","history","push","filter","find","item","invitationId","map","tradeName","jobName","fromDate","toDate","jobDescription","substring","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport milestonesPlaceholder from '../../assets/images/Job milestones-preview.png';\nimport { renderTimeWithCustomFormat } from '../../utils/common';\nimport { ChooseJob, InviteForJob, invitedJobIds, CancelInviteForJob } from '../../redux/jobs/actions';\nimport { withRouter } from 'react-router-dom';\n\nconst ChooseTheJob = (props: any) => {\n    const [editItem, setEditItems] = useState<{ [index: string]: any }>({});\n    const [stateData, setStateData] = useState([]);\n\n    const checkOnClick = (e: any, index: any) => {\n        if(editItem[index]){\n            setEditItems({});\n            return\n        }\n        setEditItems((prev) => ({ [index]: e.target.checked }));\n    }\n\n    useEffect(() => {\n        preFetch();\n    }, [])\n\n    const preFetch = async () => {\n        const { tradieId, path, cancelJob } = props?.location?.state;\n        if (cancelJob) {\n            let response = await invitedJobIds({ tradieId, page: 1 });\n            if (response?.success) {\n                setStateData(response.data);\n            }\n        } else {\n            let response = await ChooseJob({ page: 1 });\n            if (response?.success) {\n                setStateData(response.data);\n            }\n        }\n    }\n\n    useEffect(() => {\n        console.log('Here!=====>', { editItem });\n    }, [editItem]);\n\n    const handleSubmit = async () => {\n        const { tradieId, path, cancelJob } = props?.location?.state;\n        let key: any = '';\n        if (Object.keys(editItem).length) {\n            key = Object.keys(editItem)[0];\n        }\n\n        let data: any = { tradieId: tradieId, jobId: key }\n        if (!cancelJob) {\n            let response = await InviteForJob(data);\n            if (response.success) {\n                props.history.push('/choose-the-job-success');\n            }\n        } else {\n            let filter: any = stateData.find((item: any) => item.jobId === key);\n            if (filter?.invitationId) {\n                data['invitationId'] = filter?.invitationId;\n                let response = await CancelInviteForJob(data);\n                if (response.success) {\n                    props.history.push(`/tradie-info${path}`);\n                }\n            }\n        }\n    }\n\n    const { tradieId, path, cancelJob } = props?.location?.state;\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"section_wrapper\">\n                <div className=\"custom_container\">\n                    <div className=\"form_field\">\n                        <div className=\"flex_row\">\n                            <div className=\"flex_col_sm_5\">\n\n                                <React.Fragment>\n                                    <div className=\"relate\">\n                                        <button\n                                            className=\"back\"\n                                            onClick={() => {\n                                                props.history.push(`/tradie-info${path}`)\n                                            }}\n                                        >\n                                        </button>\n                                        <span className=\"title\">\n                                            {'Choose the job'}\n                                        </span>\n                                    </div>\n                                </React.Fragment>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_5\">\n                            <ul className={`milestones`}>\n                                {stateData?.length > 0 ?\n                                    stateData.map((item: any, index: any) => (\n                                        <li key={index}>\n                                            <div className=\"checkbox_wrap agree_check\">\n                                                <input\n                                                    checked={editItem[item?.jobId] == true ? true : false}\n                                                    onChange={(e: any) => { checkOnClick(e, item?.jobId) }}\n                                                    className=\"filter-type filled-in\"\n                                                    type=\"checkbox\"\n                                                    id={`milestone${index}`} />\n                                                <label\n                                                    htmlFor={`milestone${index}`}>\n                                                    {`${item?.tradeName}`}\n                                                </label>\n                                                <div className=\"info\">\n                                                    <span>{item?.jobName}</span>\n                                                    <span>\n                                                        {renderTimeWithCustomFormat(\n                                                            item?.fromDate,\n                                                            item?.toDate,\n                                                            '',\n                                                            ['DD MMM', 'DD MMM YY']\n                                                        )}\n                                                    </span>\n                                                    <span>\n                                                        {`${item?.jobDescription.substring(0, 120)} ${item?.jobDescription?.length > 120 ? '...' : ''}`}</span>\n                                                </div>\n                                            </div>\n                                        </li>\n                                    )) : (\n                                        <figure className=\"placeholder_img\">\n                                            <img\n                                                src={milestonesPlaceholder}\n                                                alt=\"milestones-placeholder\"\n                                            />\n                                        </figure>\n                                    )}\n\n\n                                <div style={{ marginTop: '50px' }} className=\"form_field\">\n                                    <button\n                                        onClick={handleSubmit}\n                                        className={`fill_btn full_btn btn-effect ${!Object.keys(editItem).length ? 'disable_btn' : ''}`}>\n                                        {`${cancelJob ? 'Cancel' : ''} Invite `}\n                                    </button>\n                                </div>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default withRouter(ChooseTheJob);\n"]},"metadata":{},"sourceType":"module"}