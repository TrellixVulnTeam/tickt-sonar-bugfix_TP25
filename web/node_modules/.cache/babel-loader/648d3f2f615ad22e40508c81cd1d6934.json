{"ast":null,"code":"var _jsxFileName = \"/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieInfo/vouchers.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport vouch from '../../assets/images/ic-template.png';\nimport { withRouter } from 'react-router-dom';\nimport { getVouchers } from '../../redux/jobs/actions';\nimport storageService from '../../utils/storageService';\nimport AddVoucherModal from './addVoucher';\nimport VoucherDetailModal from './voucherDetail';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Vouchers = props => {\n  _s();\n\n  var _props$location, _props$location$state, _props$location2, _props$location2$stat, _props$location3;\n\n  const [stateData, setStateData] = useState([]);\n  const [errors, setErrors] = useState({});\n  const [toggleRecommendation, setToggleRecommendation] = useState({\n    isTrue: false,\n    item: {}\n  });\n  const [jobsList, setJobsList] = useState([]);\n  const [toggle, setToggle] = useState(false);\n  const [selectedItem, setSelectedItem] = useState({});\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  let id = props === null || props === void 0 ? void 0 : (_props$location = props.location) === null || _props$location === void 0 ? void 0 : (_props$location$state = _props$location.state) === null || _props$location$state === void 0 ? void 0 : _props$location$state.id;\n  let path = props === null || props === void 0 ? void 0 : (_props$location2 = props.location) === null || _props$location2 === void 0 ? void 0 : (_props$location2$stat = _props$location2.state) === null || _props$location2$stat === void 0 ? void 0 : _props$location2$stat.path;\n  let search = (props === null || props === void 0 ? void 0 : (_props$location3 = props.location) === null || _props$location3 === void 0 ? void 0 : _props$location3.search) || '';\n\n  if (search === null || search === void 0 ? void 0 : search.length) {\n    const urlParams = new URLSearchParams(search);\n    let tradieId = urlParams.get('tradieId');\n\n    if (tradieId === null || tradieId === void 0 ? void 0 : tradieId.length) {\n      id = tradieId;\n    }\n  }\n\n  const closeToggle = isRecall => {\n    setToggleRecommendation({\n      isTrue: false,\n      item: {}\n    });\n    setSelectedItem({});\n    setToggle(prev => false);\n\n    if (isRecall === 'isRecall') {\n      prefetch();\n    }\n  };\n\n  useEffect(() => {\n    prefetch();\n  }, [id, path]);\n\n  const prefetch = async () => {\n    let res_profile = await getVouchers({\n      tradieId: id,\n      page: 1\n    });\n\n    if (res_profile.success) {\n      var _res_profile$data;\n\n      let completeItems = (res_profile === null || res_profile === void 0 ? void 0 : (_res_profile$data = res_profile.data) === null || _res_profile$data === void 0 ? void 0 : _res_profile$data.voucher) || (res_profile === null || res_profile === void 0 ? void 0 : res_profile.data); //[]\n\n      setStateData(completeItems);\n    }\n  };\n\n  let state_data = stateData;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app_wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section_wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"custom_container\",\n        children: [/*#__PURE__*/_jsxDEV(VoucherDetailModal, {\n          toggleProps: toggleRecommendation.isTrue,\n          item: toggleRecommendation.item,\n          id: id,\n          closeToggle: closeToggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), storageService.getItem('userType') === 2 && /*#__PURE__*/_jsxDEV(AddVoucherModal, {\n          toggleProps: toggle,\n          id: id,\n          closeToggle: closeToggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex_row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex_col_sm_6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relate\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  // let path: any = props.location.state.path;\n                  if (!path) {\n                    props.history.push('/');\n                  } else {\n                    props.history.push(`tradie-info${path}`);\n                  }\n                },\n                className: \"back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"title\",\n                children: `${stateData.length} ${stateData.length === 1 ? 'Vouch' : 'Vouches'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), storageService.getItem('userType') === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex_col_sm_6 text-right\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setToggle(prev => true);\n              },\n              className: \"fill_btn btn-effect add_vouch\",\n              children: '+ Leave a Vouch'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), (state_data === null || state_data === void 0 ? void 0 : state_data.length) ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section_wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"custom_container\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sub_title\",\n              children: 'Vouches'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n              dataLength: state_data === null || state_data === void 0 ? void 0 : state_data.length,\n              next: async () => {\n                console.log('Here!!!');\n                let cp = currentPage + 1;\n                setCurrentPage(prev => prev + 1);\n                let response = await getVouchers({\n                  tradieId: id,\n                  page: cp\n                });\n\n                if (response.success) {\n                  var _response$data;\n\n                  let completeItems = (response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.voucher) || (response === null || response === void 0 ? void 0 : response.data); //[]\n\n                  if (completeItems === null || completeItems === void 0 ? void 0 : completeItems.length) {\n                    setStateData(prev => [...prev, ...completeItems]);\n                  } else {\n                    setHasMore(false);\n                  }\n                }\n              },\n              hasMore: hasMore,\n              loader: /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false),\n              className: \"flex_row\",\n              children: state_data.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex_col_sm_3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"review_card vouchers\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"pic_shot_dtl\",\n                    children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n                      className: \"u_img\",\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: (item === null || item === void 0 ? void 0 : item.builderImage) || dummy,\n                        alt: \"user-img\",\n                        onError: e => {\n                          var _e$target, _e$target2;\n\n                          if (e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.onerror) {\n                            e.target.onerror = null;\n                          }\n\n                          if (e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.src) {\n                            e.target.src = dummy;\n                          }\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 140,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"name_wrap\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"user_name\",\n                        title: (item === null || item === void 0 ? void 0 : item.builderName) || '',\n                        children: (item === null || item === void 0 ? void 0 : item.builderName) || ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"date\",\n                        children: item === null || item === void 0 ? void 0 : item.date\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 157,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"xs_head\",\n                    children: item === null || item === void 0 ? void 0 : item.jobName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"commn_para\",\n                    title: \"\",\n                    children: (item === null || item === void 0 ? void 0 : item.vouchDescription) || ''\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"vouch\",\n                    children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n                      className: \"vouch_icon\",\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: vouch,\n                        alt: \"vouch\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 172,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      onClick: e => {\n                        e.preventDefault();\n                        setToggleRecommendation(prev => ({ ...prev,\n                          ...{\n                            isTrue: true,\n                            item: item\n                          }\n                        }));\n                      },\n                      className: \"link\",\n                      children: `Vouch for ${item === null || item === void 0 ? void 0 : item.tradieName}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Vouchers, \"tol6rHUlXkzeSJfBOsnny33W/oQ=\");\n\n_c = Vouchers;\nexport default _c2 = withRouter(Vouchers);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Vouchers\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/appinventiv/Documents/Project/tickt/web/src/pages/tradieInfo/vouchers.tsx"],"names":["React","useState","useEffect","dummy","vouch","withRouter","getVouchers","storageService","AddVoucherModal","VoucherDetailModal","InfiniteScroll","Vouchers","props","stateData","setStateData","errors","setErrors","toggleRecommendation","setToggleRecommendation","isTrue","item","jobsList","setJobsList","toggle","setToggle","selectedItem","setSelectedItem","currentPage","setCurrentPage","hasMore","setHasMore","id","location","state","path","search","length","urlParams","URLSearchParams","tradieId","get","closeToggle","isRecall","prev","prefetch","res_profile","page","success","completeItems","data","voucher","state_data","getItem","history","push","console","log","cp","response","map","builderImage","e","target","onerror","src","builderName","date","jobName","vouchDescription","preventDefault","tradieName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport dummy from '../../assets/images/u_placeholder.jpg';\nimport vouch from '../../assets/images/ic-template.png';\nimport { withRouter } from 'react-router-dom';\nimport {\n    getVouchers\n} from '../../redux/jobs/actions';\nimport storageService from '../../utils/storageService';\n\nimport AddVoucherModal from './addVoucher';\nimport VoucherDetailModal from './voucherDetail';\n\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\n\nconst Vouchers = (props: any) => {\n    const [stateData, setStateData] = useState<any>([]);\n    const [errors, setErrors] = useState({});\n    const [toggleRecommendation, setToggleRecommendation] = useState({ isTrue: false, item: {} });\n    const [jobsList, setJobsList] = useState([]);\n    const [toggle, setToggle] = useState(false);\n    const [selectedItem, setSelectedItem] = useState({});\n    const [currentPage, setCurrentPage] = useState(1);\n    const [hasMore, setHasMore] = useState(true);\n\n    let id = props?.location?.state?.id;\n    let path = props?.location?.state?.path;\n    let search: any = props?.location?.search || '';\n\n    if (search?.length) {\n        const urlParams = new URLSearchParams(search);\n        let tradieId: any = urlParams.get('tradieId');\n        if (tradieId?.length) {\n            id = tradieId;\n        }\n    }\n    const closeToggle = (isRecall?: string) => {\n        setToggleRecommendation({ isTrue: false, item: {} });\n        setSelectedItem({});\n        setToggle((prev: any) => false);\n        if (isRecall === 'isRecall') {\n            prefetch();\n        }\n    }\n\n\n\n    useEffect(() => {\n        prefetch();\n    }, [id, path])\n\n\n    const prefetch = async () => {\n        let res_profile: any = await getVouchers({ tradieId: id, page: 1 })\n        if (res_profile.success) {\n            let completeItems = res_profile?.data?.voucher || res_profile?.data;  //[]\n            setStateData(completeItems);\n        }\n    }\n\n\n    let state_data: any = stateData;\n\n    return (\n        <div className=\"app_wrapper\">\n            <div className=\"section_wrapper\">\n                <div className=\"custom_container\">\n\n                    <VoucherDetailModal\n                        toggleProps={toggleRecommendation.isTrue}\n                        item={toggleRecommendation.item}\n                        id={id}\n                        closeToggle={closeToggle}\n                    />\n                    {storageService.getItem('userType') === 2 &&\n                        <AddVoucherModal\n                            toggleProps={toggle}\n                            id={id}\n                            closeToggle={closeToggle}\n                        />}\n\n                    <div className=\"flex_row\">\n                        <div className=\"flex_col_sm_6\">\n                            <div className=\"relate\">\n                                <button\n                                    onClick={() => {\n                                        // let path: any = props.location.state.path;\n                                        if (!path) {\n                                            props.history.push('/');\n                                        } else {\n                                            props.history.push(`tradie-info${path}`);\n                                        }\n                                    }}\n                                    className=\"back\"></button>\n                                <span className=\"title\">\n                                    {`${stateData.length} ${stateData.length === 1 ? 'Vouch' : 'Vouches'}`}\n                                </span>\n                            </div>\n                        </div>\n                        {storageService.getItem('userType') === 2 && <div className=\"flex_col_sm_6 text-right\">\n                            <button\n                                onClick={() => { setToggle((prev: any) => true) }}\n                                className=\"fill_btn btn-effect add_vouch\">\n                                {'+ Leave a Vouch'}\n                            </button>\n                        </div>}\n                    </div>\n\n                    {state_data?.length ?\n                        <div className=\"section_wrapper\">\n                            <div className=\"custom_container\">\n                                <span className=\"sub_title\">\n                                    {'Vouches'}\n                                </span>\n\n                                <InfiniteScroll\n                                    dataLength={state_data?.length}\n                                    next={async () => {\n                                        console.log('Here!!!');\n                                        let cp: any = currentPage + 1;\n                                        setCurrentPage((prev: any) => prev + 1);\n                                        let response = await getVouchers({ tradieId: id, page: cp });\n                                        if (response.success) {\n                                            let completeItems = response?.data?.voucher || response?.data;  //[]\n                                            if (completeItems?.length) {\n                                                setStateData((prev: any) => ([...prev, ...completeItems]));\n                                            } else {\n                                                setHasMore(false);\n                                            }\n                                        }\n                                    }}\n                                    hasMore={hasMore}\n                                    loader={<></>}\n                                    className=\"flex_row\">\n                                    {state_data.map((item: any) => (\n                                        <div className=\"flex_col_sm_3\">\n                                            <div className=\"review_card vouchers\">\n                                                <div className=\"pic_shot_dtl\">\n                                                    <figure className=\"u_img\">\n                                                        <img\n                                                            src={item?.builderImage || dummy}\n                                                            alt=\"user-img\"\n                                                            onError={(e: any) => {\n                                                                if (e?.target?.onerror) {\n                                                                    e.target.onerror = null;\n                                                                }\n                                                                if (e?.target?.src) {\n                                                                    e.target.src = dummy;\n                                                                }\n                                                            }}\n                                                        />\n                                                    </figure>\n                                                    <div className=\"name_wrap\">\n                                                        <span className=\"user_name\" title={item?.builderName || ''}>\n                                                            {item?.builderName || ''}\n                                                        </span>\n                                                        <span className=\"date\">\n                                                            {item?.date}\n                                                        </span>\n                                                    </div>\n                                                </div>\n\n                                                <span className=\"xs_head\">\n                                                    {item?.jobName}\n                                                </span>\n\n                                                <p className=\"commn_para\" title=\"\">\n                                                    {item?.vouchDescription || ''}\n                                                </p>\n                                                <div className=\"vouch\">\n                                                    <figure className=\"vouch_icon\">\n                                                        <img src={vouch} alt=\"vouch\" />\n                                                    </figure>\n                                                    <span\n                                                        onClick={(e) => {\n                                                            e.preventDefault();\n                                                            setToggleRecommendation((prev: any) => ({ ...prev, ...{ isTrue: true, item: item } }));\n                                                        }}\n                                                        className=\"link\">\n                                                        {`Vouch for ${item?.tradieName}`}\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </InfiniteScroll>\n\n                            </div>\n                        </div>\n                        : null}\n                </div>\n            </div>\n        </div >\n    )\n}\n\nexport default withRouter(Vouchers);"]},"metadata":{},"sourceType":"module"}